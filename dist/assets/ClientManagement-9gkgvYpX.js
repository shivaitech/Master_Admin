import{u as hs,j as e,A as os,S as Ze,X as ne,f as We,B as Ye,g as ys,h as is,i as Te,U as qe,k as ie,m as V,P as He,o as js,p as Je,c as ds,q as cs,r as fs,t as Ns,v as vs,w as $s,G as xs,x as ws,e as Pe,D as ms,y as es,H as _s,R as ps,I as ks,J as Le,K as Me,N as Ss,O as Cs,Q as As,V as Ds,W as gs,Y as us,b as Bs,Z as ss,_ as as,s as K,z as R,M as Is,$ as ts,a0 as ls,a1 as ns,a2 as Es,a3 as ke,a4 as Ps,a5 as Ls,a6 as Ms,a7 as rs,a8 as Fs,a9 as Rs,aa as Us,L as Os}from"./admin-DryftNkb.js";import{u as Gs,d as Ks,r as c}from"./router-CINeAvhf.js";import"./vendor-DJG_os-6.js";const Ee=[{value:"saas-software",label:"SaaS & Software Development"},{value:"technology-it",label:"Technology / IT Services"},{value:"healthcare-clinics",label:"Healthcare & Clinics"},{value:"finance-insurance",label:"Finance & Insurance"},{value:"retail-ecommerce",label:"Retail & E-Commerce"},{value:"education-training",label:"Education & Training"},{value:"real-estate-property",label:"Real Estate & Property"},{value:"hospitality-travel",label:"Hospitality & Travel"},{value:"food-beverage",label:"Food & Beverage (Restaurants, Cafes, Catering)"},{value:"automotive-transportation",label:"Automotive & Transportation"},{value:"legal-professional",label:"Legal & Professional Services"},{value:"manufacturing-industrial",label:"Manufacturing & Industrial"},{value:"consulting-business",label:"Consulting & Business Services"},{value:"marketing-advertising",label:"Marketing & Advertising"},{value:"construction-home",label:"Construction & Home Services"},{value:"logistics-supply",label:"Logistics & Supply Chain"},{value:"media-entertainment",label:"Media & Entertainment"},{value:"beauty-wellness",label:"Beauty, Wellness & Personal Care"},{value:"nonprofit-community",label:"Nonprofit & Community Organizations"},{value:"other",label:"Other"}],Vs=[{value:"sales",label:"Sales & Business Development"},{value:"support",label:"Customer Support & Service"},{value:"appointment",label:"Appointment & Scheduling"},{value:"order",label:"Order Management & Billing"},{value:"product",label:"Product / Service Explainers"},{value:"feedback",label:"Feedback & Engagement"},{value:"custom",label:"Custom Workflows"}],bs=[{value:"sales-business-development",label:"Sales & Business Development"},{value:"customer-support-service",label:"Customer Support & Service"},{value:"appointment-scheduling",label:"Appointment & Scheduling"},{value:"order-billing",label:"Order Management & Billing"},{value:"product-service-explainers",label:"Product / Service Explainers"},{value:"feedback-engagement",label:"Feedback & Engagement"},{value:"custom-workflows",label:"Custom Workflows"}],zs=[{value:"All",label:"ðŸŒ Multilingual"},{value:"ar",label:"ðŸ‡¸ðŸ‡¦ Arabic"},{value:"zh",label:"ðŸ‡¨ðŸ‡³ Chinese"},{value:"nl",label:"ðŸ‡³ðŸ‡± Dutch"},{value:"en-GB",label:"ðŸ‡¬ðŸ‡§ English (UK)"},{value:"en-US",label:"ðŸ‡ºðŸ‡¸ English (US)"},{value:"en-IN",label:"ðŸ‡®ðŸ‡³ English (India)"},{value:"fr",label:"ðŸ‡«ðŸ‡· French"},{value:"de",label:"ðŸ‡©ðŸ‡ª German"},{value:"hi",label:"ðŸ‡®ðŸ‡³ Hindi"},{value:"it",label:"ðŸ‡®ðŸ‡¹ Italian"},{value:"ja",label:"ðŸ‡¯ðŸ‡µ Japanese"},{value:"ko",label:"ðŸ‡°ðŸ‡· Korean"},{value:"pt",label:"ðŸ‡µðŸ‡¹ Portuguese"},{value:"pl",label:"ðŸ‡µðŸ‡± Polish"},{value:"ru",label:"ðŸ‡·ðŸ‡º Russian"},{value:"es",label:"ðŸ‡ªðŸ‡¸ Spanish"},{value:"tr",label:"ðŸ‡¹ðŸ‡· Turkish"}],Ws=[{value:"neutral",label:"Gender Neutral"},{value:"male",label:"Male"},{value:"female",label:"Female"}],Ie=[{id:"starter",name:"Starter",apiKey:"Starter Plan",description:"Perfect for small businesses",maxAgents:1,aiEmployees:1,price:"$49/mo"},{id:"professional",name:"Professional",apiKey:"Professional Plan",description:"For Growing Teams & Small Businesses",maxAgents:5,aiEmployees:5,price:"$149/mo"},{id:"business",name:"Business",apiKey:"Business Plan",description:"For Scaling Companies & Mid-Sized Teams",maxAgents:15,aiEmployees:15,price:"$299/mo"},{id:"custom",name:"Custom",apiKey:"Custom Plan",description:"For Large Organizations & Enterprises",maxAgents:999,aiEmployees:999,price:"Custom"}],Qs=({client:d,currentTheme:s})=>{const[a,y]=c.useState(null),[z,$]=c.useState(!0),[U,L]=c.useState(null);return c.useEffect(()=>{(async()=>{const j=d?.userData?._id||d?._id||d?.userData?.id||d?.id;if(!j){console.warn("âš ï¸ No user ID found for fetching onboarding data"),$(!1);return}try{$(!0),L(null),console.log("ðŸ” Fetching onboarding data for user ID:",j);const f=await K.getOnboardingByUserId(j);console.log("âœ… Onboarding data fetched:",f);const _=f?.data?.onboarding||f?.onboarding||f?.data||f;y(_)}catch(f){console.error("âŒ Error fetching onboarding data:",f),L(f.message||"Failed to load onboarding data");const _=d?.onboardingDetails?.onboarding||d?.userData?.onboarding||d?.onboarding||{};_&&Object.keys(_).length>0&&(console.log("ðŸ“‹ Using fallback onboarding data from client prop"),y(_),L(null))}finally{$(!1)}})()},[d]),z?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mb-3"}),e.jsx("p",{className:`${s.textSecondary} text-sm`,children:"Loading onboarding data..."})]})}):U?e.jsxs("div",{className:`text-center py-8 rounded-lg border-2 border-dashed ${s.border} bg-red-50 dark:bg-red-900/10`,children:[e.jsx(ne,{className:"w-5 h-5 mx-auto mb-3 text-red-500 opacity-50"}),e.jsx("p",{className:"text-red-600 dark:text-red-400 font-medium mb-2",children:"Error loading onboarding data"}),e.jsx("p",{className:"text-red-500 dark:text-red-300 text-sm opacity-75",children:U})]}):e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsx("h3",{className:`text-lg font-semibold ${s.text} mb-4`,children:"Onboarding Information"}),!a||a?.onboarding===null||Object.keys(a).length===0?e.jsxs("div",{className:`text-center py-8 rounded-lg border-2 border-dashed ${s.border}`,children:[e.jsx(V,{className:`w-5 h-5 mx-auto mb-3 ${s.textSecondary} opacity-50`}),e.jsx("p",{className:`${s.textSecondary} font-medium mb-2`,children:"No onboarding data available"}),e.jsx("p",{className:`${s.textSecondary} text-sm opacity-75`,children:"This client hasn't completed the onboarding process yet"})]}):e.jsxs("div",{className:"space-y-6",children:[a.company_basics&&e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[e.jsxs("h4",{className:`text-base md:text-lg font-semibold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(Ye,{className:"w-5 h-5"}),"Company Basics"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:[a.company_basics.name&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Company Name"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.company_basics.name})]}),a.company_basics.company_email&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Company Email"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.company_basics.company_email})]}),a.company_basics.company_phone&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Phone"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.company_basics.company_phone})]}),a.company_basics.website&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Website"}),e.jsx("p",{className:`${s.text} font-medium`,children:e.jsx("a",{href:a.company_basics.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:a.company_basics.website})})]}),a.company_basics.company_size&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Company Size"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.company_basics.company_size})]}),a.company_basics.linkedin_profile&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"LinkedIn"}),e.jsx("p",{className:`${s.text} font-medium`,children:e.jsx("a",{href:a.company_basics.linkedin_profile,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"LinkedIn Profile"})})]})]}),a.company_basics.industry&&Array.isArray(a.company_basics.industry)&&a.company_basics.industry.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Industries"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.company_basics.industry.map((h,j)=>{const f=Ee.find(_=>_.value===h)?.label||h;return e.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:f},j)})})]}),a.company_basics.description&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Description"}),e.jsx("p",{className:`${s.text} leading-relaxed`,children:a.company_basics.description})]}),a.company_basics.address&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Address"}),e.jsx("p",{className:`${s.text} leading-relaxed`,children:a.company_basics.address})]})]}),a.plan_details&&e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[e.jsxs("h4",{className:`text-base md:text-lg font-semibold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(is,{className:"w-5 h-5"}),"Plan Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[a.plan_details.type&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Plan Type"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.plan_details.type})]}),a.plan_details.billing_contact&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Billing Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.plan_details.billing_contact.name&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Name"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.plan_details.billing_contact.name})]}),a.plan_details.billing_contact.email&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Email"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.plan_details.billing_contact.email})]}),a.plan_details.billing_contact.phone&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Phone"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.plan_details.billing_contact.phone})]})]})]})]})]}),a.deployment_targets&&e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[e.jsxs("h4",{className:`text-base md:text-lg font-semibold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(ps,{className:"w-5 h-5"}),"Deployment Targets"]}),a.deployment_targets.channels&&Array.isArray(a.deployment_targets.channels)&&a.deployment_targets.channels.length>0&&e.jsxs("div",{className:"mb-3 md:mb-4",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Deployment Channels"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.deployment_targets.channels.map((h,j)=>e.jsx("span",{className:"bg-green-100 text-green-800 px-2 md:px-3 py-1 rounded-full text-xs md:text-sm font-medium capitalize",children:h.replace("_"," ")},j))})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[a.deployment_targets.website_url&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Website URL"}),e.jsx("p",{className:`${s.text} font-medium`,children:e.jsx("a",{href:a.deployment_targets.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:a.deployment_targets.website_url})})]}),a.deployment_targets.whatsapp_phone&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"WhatsApp Phone"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.deployment_targets.whatsapp_phone})]}),a.deployment_targets.support_email&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Support Email"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.deployment_targets.support_email})]})]})]}),a.ai_employees&&Array.isArray(a.ai_employees)&&a.ai_employees.length>0&&e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[e.jsxs("h4",{className:`text-base md:text-lg font-semibold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(ie,{className:"w-5 h-5"}),"AI Employees (",a.ai_employees.length,")"]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:a.ai_employees.map((h,j)=>e.jsxs("div",{className:`border ${s.border} rounded-lg p-3 md:p-4 ${s.searchBg}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(ie,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h5",{className:`font-medium ${s.text} truncate`,children:h?.name||`AI Employee #${j+1}`}),e.jsx("p",{className:`text-xs ${s.textSecondary} truncate`,children:h?.template||h?.type||"Custom Agent"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 text-sm",children:[h?.template&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Template"}),e.jsx("p",{className:`${s.text}`,children:bs.find(f=>f.value===h.template)?.label||h.template})]}),h?.preferred_language&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Language"}),e.jsx("p",{className:`${s.text}`,children:h.preferred_language})]}),h?.agent_personality&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Personality"}),e.jsx("p",{className:`${s.text} capitalize`,children:h.agent_personality})]}),h?.voice_gender&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Voice"}),e.jsxs("p",{className:`${s.text}`,children:[h.voice_gender," -"," ",h.voice_style||"Default"]})]})]}),h?.special_instructions&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Special Instructions"}),e.jsx("p",{className:`${s.text} text-sm leading-relaxed`,children:h.special_instructions})]}),h?.targets?.success_metrics&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Success Metrics"}),e.jsx("p",{className:`${s.text} text-sm leading-relaxed`,children:h.targets.success_metrics})]}),h?.knowledge_sources&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Knowledge Sources"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[h.knowledge_sources.website_url&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Website URL"}),e.jsx("p",{className:`${s.text}`,children:e.jsx("a",{href:h.knowledge_sources.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:h.knowledge_sources.website_url})})]}),h.knowledge_sources.faqs_text&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"FAQs Text"}),e.jsxs("p",{className:`${s.text}`,children:[h.knowledge_sources.faqs_text.substring(0,100),h.knowledge_sources.faqs_text.length>100?"...":""]})]})]})]}),h?.workflows&&Array.isArray(h.workflows)&&h.workflows.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Workflows"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.workflows.map((f,_)=>e.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-md text-xs font-medium",children:f.name},_))})]})]},j))})]})]})]})},Xs=({client:d,currentTheme:s})=>{const a=d?.userData||d||{},y=d?.company_basics||d?.userData?.onboarding?.company_basics||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:`text-lg font-semibold ${s.text} mb-4`,children:"Client Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Full Name"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.fullName||a.name||y.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Email"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.email||y.company_email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Phone"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.phone||y.company_phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Website"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.website||y.company_website||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Company Size"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.companySize||y.company_size||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d?.isApproved||a?.isApproved?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":d?.isRejected||a?.isRejected?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":a?.isActive?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:d?.isApproved||a?.isApproved?"approved":d?.isRejected||a?.isRejected?"rejected":a?.isActive?"Active":"Pending"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Email Verified"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a?.emailVerified?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:a?.emailVerified?"Verified":"Not Verified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Onboarded"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a?.isOnboarded?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:a?.isOnboarded?"Completed":"Pending"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Created At"}),e.jsx("p",{className:`${s.text} font-medium`,children:a?.createdAt?new Date(a.createdAt).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Last Login"}),e.jsx("p",{className:`${s.text} font-medium`,children:a?.lastLoginAt?new Date(a.lastLoginAt).toLocaleDateString():"N/A"})]})]}),(a?.address||y?.company_address)&&e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Company Address"}),e.jsx("p",{className:`${s.text} leading-relaxed`,children:a?.address||y?.company_address})]})]})},Zs=({client:d,currentTheme:s,onViewAgent:a})=>{const[y,z]=c.useState([]),[$,U]=c.useState(!0),[L,h]=c.useState(null);return c.useEffect(()=>{(async()=>{if(!d){U(!1);return}try{U(!0),h(null),console.log("ðŸ”„ AIEmployeesTab mounted - fetching agents for client:",d?.id),console.log("ðŸ“‹ Client user ID:",d?.userData?.id),console.log("ðŸ“‹ Full client object:",d);const f=d?.userData?.id||d?.id||d?._id;if(!f){console.error("âŒ No user ID found in client object"),z([]),U(!1);return}console.log("âœ… Using user ID:",f);const _=await K.getAgentsById(f);console.log("ðŸ¤– AI Agents API Response:",_);let E=_?.data||_;console.log("ðŸ“¦ Raw agents data:",E),E?.agents&&Array.isArray(E.agents)&&(E=E.agents),Array.isArray(E)?(console.log("âœ… Agents data is an array with length:",E.length),E.length>0&&console.log("ðŸ“Š Sample agent data:",E[0]),z(E)):E&&typeof E=="object"?(console.log("ðŸ“¦ Single agent object, wrapping in array"),z([E])):(console.log("ðŸ“Š Response data is not an array or object:",typeof E),z([]))}catch(f){console.error("âŒ Error fetching AI employees:",f),console.error("âŒ Error details:",f?.response?.data),z([])}finally{U(!1)}})()},[d]),$?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:`text-lg font-semibold ${s.text}`,children:"AI Employees"})}),e.jsxs("div",{className:`text-center py-12 rounded-lg ${s.searchBg}`,children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:`${s.textSecondary}`,children:"Loading AI Employees..."})]})]}):L?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:`text-lg font-semibold ${s.text}`,children:"AI Employees"})}),e.jsxs("div",{className:`text-center py-12 rounded-lg ${s.searchBg}`,children:[e.jsx("div",{className:"w-5 h-5 mx-auto mb-3 text-red-500",children:e.jsx(Bs,{className:"w-full h-full"})}),e.jsx("h4",{className:`text-lg font-semibold ${s.text} mb-2`,children:"Error Loading Data"}),e.jsx("p",{className:`${s.textSecondary} mb-4`,children:L}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:"Retry"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h3",{className:`text-lg font-semibold ${s.text}`,children:["AI Employees (",y.length,")"]})}),y.length===0?e.jsxs("div",{className:`text-center py-12 rounded-lg ${s.searchBg}`,children:[e.jsx(ie,{className:`w-5 h-5 mx-auto mb-3 ${s.textSecondary}`}),e.jsx("h4",{className:`text-lg font-semibold ${s.text} mb-2`,children:"No AI Employees"}),e.jsx("p",{className:`${s.textSecondary}`,children:"This client hasn't created any AI employees yet."})]}):e.jsx("div",{className:"space-y-4",children:y.map((j,f)=>e.jsxs("div",{className:`${s.searchBg} rounded-lg p-4 border ${s.border}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${s.cardBg} border ${s.border} flex items-center justify-center`,children:e.jsx(ie,{className:`w-5 h-5 ${s.text}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-semibold ${s.text}`,children:j.name||"Unnamed Employee"}),e.jsx("p",{className:`text-sm ${s.textSecondary}`,children:j.type||"Assistant"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:j.is_active?"Active":"Inactive"}),e.jsxs("button",{onClick:()=>a&&a(j),className:`px-3 py-1 ${s.searchBg} hover:${s.hover} ${s.text} border ${s.border} text-sm font-medium rounded-lg transition-all duration-200 flex items-center gap-1`,title:"View Agent Details",children:[e.jsx(Pe,{className:"w-5 h-5"}),"View"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Agent ID"}),e.jsx("p",{className:`${s.text} text-sm font-mono`,children:j.id||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Language"}),e.jsx("p",{className:`${s.text} text-sm`,children:j.greeting?.language||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Voice"}),e.jsx("p",{className:`${s.text} text-sm`,children:j.voice||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Created"}),e.jsx("p",{className:`${s.text} text-sm`,children:j.created_at?new Date(j.created_at).toLocaleDateString():"N/A"})]})]})]},j._id||f))})]})},qs=({agent:d,onBack:s,currentTheme:a})=>{if(!d)return e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500",children:"No agent data available"}),e.jsx("button",{onClick:s,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Back to List"})]});const[y,z]=c.useState("overview"),[$,U]=c.useState(!1),[L,h]=c.useState(!1),[j,f]=c.useState([]),[_,E]=c.useState(""),[Y,de]=c.useState(""),[x,B]=c.useState(!1),[J,O]=c.useState(""),[T,be]=c.useState("en"),[he,ye]=c.useState({noiseSuppression:!0,echoCancellation:!0,autoGainControl:!0}),[je,ee]=c.useState(null),[Fe,Re]=c.useState([]),[Ue,re]=c.useState(!1),[r,se]=c.useState(null),[Se,W]=c.useState([]),[G,ae]=c.useState(!1),[P,Q]=c.useState("transcripts"),[X,te]=c.useState(null),[Oe,Z]=c.useState(!1),[Ce,M]=c.useState(null),[ce,xe]=c.useState(!1),[oe,fe]=c.useState(0),[le,Ne]=c.useState(0),[me,Qe]=c.useState(1),[ve,$e]=c.useState(!1),[Ae,pe]=c.useState(1),A=c.useRef(null),we=c.useRef(null),De=c.useMemo(()=>[{id:"overview",label:"Overview",icon:as},{id:"test",label:"Preview & Test",icon:Je},{id:"analytics",label:"Analytics",icon:gs},{id:"instructions",label:"Instructions",icon:V}],[]);c.useEffect(()=>{(async()=>{if(y==="analytics")try{re(!0);const o=d?.id||d?._id;if(!o){console.error("No agent ID found");return}console.log("ðŸ“‹ Fetching sessions for agent:",o);const g=await K.getAgentSessions(o);console.log("âœ… Sessions response:",g);const N=g?.sessions||g?.data?.sessions||g,v=Array.isArray(N)?N:[];Re(v)}catch(o){console.error("âŒ Error fetching agent sessions:",o),R.error("Failed to load sessions"),Re([])}finally{re(!1)}})()},[y,d]);const Ge=async(t,o)=>{try{Z(!0),M(null),console.log("ðŸ“Š Fetching call summary for agent:",t,"callId:",o);const g=await K.getCallSummary(t);console.log("âœ… Call summary response:",g),te(g)}catch(g){console.error("âŒ Error fetching call summary:",g),M("Failed to load call summary"),te(null)}finally{Z(!1)}},Ke=c.useCallback(async t=>{try{if(se(t),Q("transcripts"),xe(!1),fe(0),Ne(0),pe(1),$e(!1),t?.transcripts&&Array.isArray(t.transcripts))console.log("ðŸ“œ Using transcripts from session object:",t.transcripts),W(t.transcripts);else{ae(!0);const N=t?.session_id||t?.id||t?._id;console.log("ðŸ“œ Fetching transcripts for session:",N);const v=await K.getSessionTranscripts(N);console.log("âœ… Transcripts response:",v);const F=v?.transcripts||v?.data||v,C=Array.isArray(F)?F:[];W(C),ae(!1)}const o=t?.agentId||t?.agent_id,g=t?.callId||t?.session_id||t?.id;o&&g&&await Ge(o,g)}catch(o){console.error("âŒ Error fetching session data:",o),R.error("Failed to load session data"),W([]),ae(!1)}},[]),Ve=c.useCallback(()=>{se(null),W([]),te(null),Q("transcripts"),xe(!1),A.current&&(A.current.pause(),A.current.currentTime=0)},[]),w=()=>{A.current&&(ce?A.current.pause():A.current.play(),xe(!ce))},_e=()=>{A.current&&fe(A.current.currentTime)},Be=()=>{A.current&&Ne(A.current.duration)},ze=t=>{if(!we.current||!A.current)return;const o=we.current.getBoundingClientRect(),N=(t.clientX-o.left)/o.width*le;A.current.currentTime=N,fe(N)},S=()=>{A.current&&(ve?(A.current.volume=me,$e(!1)):(A.current.volume=0,$e(!0)))},l=()=>{if(!A.current)return;const t=[.5,.75,1,1.25,1.5,2],o=t.indexOf(Ae),g=t[(o+1)%t.length];A.current.playbackRate=g,pe(g)},i=t=>{A.current&&(A.current.currentTime=Math.max(0,Math.min(le,oe+t)))},n=t=>{const o=Math.floor(t/60),g=Math.floor(t%60);return`${o}:${g.toString().padStart(2,"0")}`},m=t=>t?new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):"",p=t=>t?new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A";async function u(){try{try{const t=await fetch("https://ipapi.co/json/",{method:"GET"});if(t.ok){const o=await t.json();return console.log("ðŸŒ [IP] Retrieved via ipapi.co:",o.ip),o.ip}}catch(t){console.warn("ðŸŒ [IP] ipapi.co failed:",t.message)}try{const t=await fetch("https://api.ipify.org?format=json",{method:"GET"});if(t.ok){const o=await t.json();return console.log("ðŸŒ [IP] Retrieved via ipify:",o.ip),o.ip}}catch(t){console.warn("ðŸŒ [IP] ipify failed:",t.message)}try{const t=await fetch("https://ipinfo.io/json",{method:"GET"});if(t.ok){const o=await t.json();return console.log("ðŸŒ [IP] Retrieved via ipinfo.io:",o.ip),o.ip}}catch(t){console.warn("ðŸŒ [IP] ipinfo.io failed:",t.message)}return null}catch(t){return console.error("ðŸŒ [IP] All IP detection methods failed:",t),null}}const b=c.useCallback(async()=>{try{if(h(!0),O("ðŸŽ¤ Requesting microphone access..."),!window.isSecureContext)throw new Error("HTTPS required for microphone access");try{(await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1,channelCount:1,sampleRate:48e3,sampleSize:16,volume:.6,latency:.05}})).getTracks().forEach(F=>F.stop()),O("âœ… Microphone access granted")}catch(v){throw new Error(`Microphone access denied: ${v.message}`)}const t=d?.id||d?._id;if(!t)throw new Error("Agent ID not found");O("ðŸ”— Getting LiveKit token...");const o=`admin_test_${Date.now()}`,g=await fetch("https://python.service.callshivai.com/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_id:t,language:T,call_id:o,device:"desktop",user_agent:navigator.userAgent,ip:await u()})});if(!g.ok)throw new Error(`Failed to get LiveKit token: ${g.status}`);const N=await g.json();if(console.log("ðŸŽ¯ Token received for agent testing:",t,N),O("ðŸ”— Connecting to LiveKit..."),typeof window.LivekitClient>"u"){O("ðŸ“¦ Loading LiveKit SDK...");const v=document.createElement("script");v.src="https://unpkg.com/livekit-client@latest/dist/livekit-client.umd.js",v.onload=()=>{console.log("âœ… LiveKit SDK loaded"),k(N,t)},v.onerror=()=>{throw new Error("Failed to load LiveKit SDK")},document.head.appendChild(v)}else await k(N,t)}catch(t){console.error("Failed to start agent test call:",t),O(`âŒ Error: ${t.message}`),h(!1),U(!1)}},[d]),k=c.useCallback(async(t,o)=>{try{const g=window.LivekitClient,N=new g.Room({adaptiveStream:!0,dynacast:!0,audioCaptureDefaults:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,suppressLocalAudioPlayback:!0},publishDefaults:{audioPreset:g.AudioPresets.speech,dtx:!0,red:!1,simulcast:!1}});N.on(g.RoomEvent.TrackSubscribed,(v,F,C)=>{if(v.kind===g.Track.Kind.Audio){const H=v.attach();H.volume=.4,H.autoplay=!0,document.body.appendChild(H),H.play().catch(ge=>console.warn("Audio autoplay blocked:",ge))}}),N.on(g.RoomEvent.ParticipantMetadataChanged,(v,F)=>{if(v)try{const C=JSON.parse(v);(C.transcript||C.text)&&f(H=>[...H,{role:"agent",text:C.transcript||C.text,timestamp:new Date}])}catch{console.log("Metadata not JSON:",v)}}),N.on(g.RoomEvent.RoomMetadataChanged,v=>{if(v)try{const F=JSON.parse(v);(F.transcript||F.text)&&f(C=>[...C,{role:"agent",text:F.transcript||F.text,timestamp:new Date}])}catch{console.log("Room metadata not JSON:",v)}}),N.on(g.RoomEvent.Connected,async()=>{console.log("âœ… Connected to LiveKit room for agent testing"),U(!0),h(!1),O("ðŸŸ¢ Connected! You can now speak with the agent.");try{await N.localParticipant.setMicrophoneEnabled(!0,{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}),f([{role:"agent",text:d?.greeting?.en||`Hello! I'm ${d?.name||"Agent"}, ready for testing. How can I help you?`,timestamp:new Date}])}catch(v){console.error("Failed to enable microphone:",v)}}),N.on(g.RoomEvent.Disconnected,()=>{console.log("âŒ Disconnected from LiveKit room"),U(!1),O("ðŸ”´ Disconnected"),ee(null)}),await N.connect(t.url,t.token),ee(N)}catch(g){console.error("LiveKit connection failed:",g),O(`âŒ Connection failed: ${g.message}`),h(!1),U(!1)}},[d]),I=c.useCallback(async()=>{if(je)try{await je.disconnect(),console.log("âœ… Disconnected from LiveKit room")}catch(t){console.error("Error disconnecting from room:",t)}U(!1),h(!1),O("ðŸ“ž Call ended"),ee(null),f(t=>[...t,{role:"system",text:"Call ended",timestamp:new Date}])},[je]),D=c.useCallback(()=>{if(!_.trim()||!$)return;const t={role:"user",text:_.trim(),timestamp:new Date};f(o=>[...o,t]),E(""),setTimeout(()=>{const o=[`I received your message: "${t.text}". How can I help you with this?`,`Thank you for your message. As ${d?.name||"Agent"}, I'm here to assist you.`,`I understand you said: "${t.text}". Let me help you with that.`,`Got it! ${t.text}. What would you like to know more about?`],g={role:"agent",text:o[Math.floor(Math.random()*o.length)],timestamp:Date.now()};f(N=>[...N,g])},1e3+Math.random()*2e3)},[_,$,d]),q=c.useCallback(()=>{if(!Y.trim())return;B(!0);const t={role:"user",text:Y.trim(),timestamp:new Date};f(o=>[...o,t]),de(""),setTimeout(()=>{const o=[`Thank you for testing! You said: "${t.text}". I'm ${d?.name||"Agent"} and I'm working correctly.`,`Test successful! As ${d?.name||"Agent"}, I received your message: "${t.text}". How can I assist you further?`,`Hello! This is ${d?.name||"Agent"}. I got your test message: "${t.text}". The agent is responding as expected.`,`Agent test complete! Your message: "${t.text}" was processed successfully by ${d?.name||"Agent"}.`],g={role:"agent",text:o[Math.floor(Math.random()*o.length)],timestamp:new Date};f(N=>[...N,g]),B(!1)},1500+Math.random()*1e3)},[Y,d]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:s,className:`p-2 rounded-lg ${a.hover} ${a.text} transition-all duration-200`,children:e.jsx(os,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:`text-2xl font-bold ${a.text}`,children:d?.name||"Unnamed Agent"}),e.jsxs("p",{className:`text-sm ${a.textSecondary}`,children:["Agent ID: ",d?.id||d?._id||"N/A"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${d?.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:d?.is_active?"Active":"Inactive"})})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex space-x-8",children:De.map(t=>{const o=t.icon;return e.jsxs("button",{onClick:()=>z(t.id),className:`flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm ${y===t.id?"border-blue-500 text-blue-600 dark:text-blue-400":`border-transparent ${a.textSecondary} hover:text-gray-700 dark:hover:text-gray-300`}`,children:[e.jsx(o,{className:"w-5 h-5"}),t.label]},t.id)})})})]}),y==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:`${a.cardBg} rounded-lg p-4 border ${a.border}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(ie,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${a.textSecondary}`,children:"Agent Type"}),e.jsx("p",{className:`font-semibold ${a.text}`,children:"AI Assistant"})]})]})}),e.jsx("div",{className:`${a.cardBg} rounded-lg p-4 border ${a.border}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx(Is,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${a.textSecondary}`,children:"Voice"}),e.jsx("p",{className:`font-semibold ${a.text}`,children:d?.voice||"Default"})]})]})}),e.jsx("div",{className:`${a.cardBg} rounded-lg p-4 border ${a.border}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx(xs,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${a.textSecondary}`,children:"Language"}),e.jsx("p",{className:`font-semibold ${a.text}`,children:d?.greeting?.language||"English"})]})]})})]}),e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Agent Name"}),e.jsx("p",{className:`${a.text}`,children:d.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Created By"}),e.jsx("p",{className:`${a.text}`,children:d.created_by||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Created Date"}),e.jsx("p",{className:`${a.text}`,children:d.created_at?new Date(d.created_at).toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Knowledge Base URL"}),e.jsx("p",{className:`${a.text} break-all`,children:d.knowledge_base_url||"N/A"})]})]})]})]}),y==="test"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsxs("h3",{className:`text-lg font-semibold ${a.text} mb-4 flex items-center gap-2`,children:[e.jsx(as,{className:"w-5 h-5"}),"Agent Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Agent Name"}),e.jsx("p",{className:`${a.text} font-semibold`,children:d?.name||"Unnamed Agent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Agent ID"}),e.jsx("p",{className:`${a.text} font-mono text-sm bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded`,children:d?.id||d?._id||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:d.is_active?"ðŸŸ¢ Active":"ðŸ”´ Inactive"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Model"}),e.jsx("p",{className:`${a.text}`,children:d.model||"gpt-4o-realtime-preview"})]})]})]}),e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4 flex items-center gap-2`,children:"ðŸŽ™ï¸ Live Voice Testing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Language"}),e.jsxs("select",{value:T,onChange:t=>be(t.target.value),className:`w-full px-3 py-2 rounded-lg border ${a.border} ${a.cardBg} ${a.text} focus:outline-none focus:ring-2 focus:ring-blue-500/20`,disabled:$,children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"hi",children:"Hindi"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"}),e.jsx("option",{value:"pt",children:"Portuguese"}),e.jsx("option",{value:"zh",children:"Chinese"}),e.jsx("option",{value:"ja",children:"Japanese"}),e.jsx("option",{value:"ko",children:"Korean"}),e.jsx("option",{value:"ar",children:"Arabic"}),e.jsx("option",{value:"ru",children:"Russian"}),e.jsx("option",{value:"it",children:"Italian"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Audio Settings"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:he.noiseSuppression,onChange:t=>ye(o=>({...o,noiseSuppression:t.target.checked})),className:"mr-1",disabled:$}),"ðŸŽ§ Noise Cancellation"]}),e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:he.echoCancellation,onChange:t=>ye(o=>({...o,echoCancellation:t.target.checked})),className:"mr-1",disabled:$}),"ðŸ”Š Echo Cancellation"]}),e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:he.autoGainControl,onChange:t=>ye(o=>({...o,autoGainControl:t.target.checked})),className:"mr-1",disabled:$}),"ðŸ“Š Auto Gain"]})]})]})]}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsx("button",{onClick:b,disabled:L||$,className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${L||$?"bg-gray-400 text-white cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:L?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Connecting..."]}):$?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Connected"]}):e.jsx("span",{className:"flex items-center gap-2",children:"ðŸŽ¤ Start Voice Call"})}),$&&e.jsx("button",{onClick:I,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-all duration-200",children:"ðŸ“ž End Call"})]}),J&&e.jsx("div",{className:`p-3 rounded-lg mb-4 text-sm ${J.includes("Error")||J.includes("Failed")?"bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-300":J.includes("Connected")||J.includes("ðŸŸ¢")?"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-300":"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300"}`,children:J}),$&&e.jsxs("div",{className:`border ${a.border} rounded-lg overflow-hidden`,children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("span",{className:"text-sm font-medium",children:["ðŸ’¬ Live Conversation with ",d.name]})}),e.jsx("div",{className:"h-64 overflow-y-auto p-4 bg-gray-50 dark:bg-gray-900/50",style:{scrollBehavior:"smooth"},children:j.length===0?e.jsx("div",{className:"text-center text-gray-500 text-sm py-8",children:"ðŸŽ™ï¸ Start speaking or type a message to begin testing..."}):j.map((t,o)=>e.jsx("div",{className:`mb-3 flex ${t.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${t.role==="user"?"bg-blue-500 text-white rounded-br-sm":t.role==="agent"?"bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-bl-sm border":"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-300 text-center rounded"}`,children:[e.jsx("div",{className:"text-xs opacity-70 mb-1",children:t.role==="user"?"ðŸ‘¤ You":t.role==="agent"?"ðŸ¤– "+d.name:"System"}),e.jsx("div",{className:"text-sm",children:t.text}),e.jsx("div",{className:"text-xs opacity-50 mt-1",children:new Date(t.timestamp).toLocaleTimeString()})]})},o))}),e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:_,onChange:t=>E(t.target.value),onKeyDown:t=>t.key==="Enter"&&D(),placeholder:"Type a message to test text input...",className:`flex-1 px-3 py-2 text-sm rounded-lg border ${a.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20`,disabled:!$}),e.jsx("button",{onClick:D,disabled:!$||!_.trim(),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded-lg transition-colors",children:e.jsx(ts,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"ðŸ’¡ You can type messages here or speak directly for voice testing"})]})]}),$&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((t,o)=>e.jsx("div",{className:"w-1 bg-blue-500 rounded-full animate-pulse",style:{height:`${Math.random()*20+10}px`,animationDelay:`${o*.1}s`,animationDuration:"1s"}},o))})})]})]}),y==="analytics"&&e.jsxs("div",{className:"space-y-6",children:[r&&e.jsx("div",{className:"fixed inset-0 -top-8 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4 backdrop-blur-sm overflow-y-auto",children:e.jsxs("div",{className:`${a.cardBg} rounded-lg sm:rounded-xl w-full max-w-3xl  max-h-[95vh] sm:max-h-[90vh] overflow-hidden shadow-2xl my-auto flex flex-col`,children:[e.jsxs("div",{className:`p-3 sm:p-4 border-b ${a.border}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2 sm:mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("div",{className:`w-7 h-7 sm:w-10 sm:h-10 ${a.activeBg} rounded-lg flex items-center justify-center flex-shrink-0`,children:e.jsx(ls,{className:`w-3.5 h-3.5 sm:w-5 sm:h-5 ${a.textSecondary}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:`text-sm sm:text-lg font-semibold ${a.text} truncate`,children:"Session Transcript"}),e.jsx("p",{className:`text-xs ${a.textSecondary} truncate font-mono`,children:r.session_id||r.id})]})]}),e.jsx("button",{onClick:Ve,className:`p-1 sm:p-2 ${a.textSecondary} rounded-lg ${a.hover} transition-colors flex-shrink-0`,children:e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 mb-2 sm:mb-3",children:[e.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${a.searchBg} px-2 py-1.5 rounded-md`,children:[e.jsx(Me,{className:`w-5 h-5 ${a.textSecondary} flex-shrink-0`}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:`text-xs ${a.textSecondary} hidden sm:block`,children:"Date & Time"}),e.jsx("span",{className:`text-xs font-medium ${a.text} truncate block`,children:p(r.start_time)})]})]}),e.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${a.searchBg} px-2 py-1.5 rounded-md`,children:[e.jsx(Es,{className:`w-5 h-5 ${a.textSecondary} flex-shrink-0`}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:`text-xs ${a.textSecondary} hidden sm:block`,children:"IP Address"}),e.jsx("span",{className:`text-xs font-medium ${a.text} truncate block`,children:r.ipAddress||r.ip_address||"unknown"})]})]}),e.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${a.searchBg} px-2 py-1.5 rounded-md`,children:[e.jsx(ke,{className:`w-5 h-5 ${a.textSecondary} flex-shrink-0`}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:`text-xs ${a.textSecondary} hidden sm:block`,children:"Device â€¢ Duration"}),e.jsxs("span",{className:`text-xs font-medium ${a.text} truncate block`,children:[r.device?.deviceType||r.device?.device_type||"Unknown"," ","â€¢ ",r.duration]})]})]})]}),e.jsxs("div",{className:`flex gap-1 p-1 ${a.searchBg} rounded-lg`,children:[e.jsxs("button",{onClick:()=>Q("transcripts"),className:`flex-1 px-3 py-2 text-xs sm:text-sm font-medium rounded-md transition-all duration-200 ${P==="transcripts"?`${a.cardBg} ${a.text} shadow-sm`:`${a.textSecondary} hover:${a.text}`}`,children:[e.jsx(ls,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 inline mr-1.5"}),"Call Transcripts"]}),e.jsxs("button",{onClick:()=>Q("summary"),className:`flex-1 px-3 py-2 text-xs sm:text-sm font-medium rounded-md transition-all duration-200 ${P==="summary"?`${a.cardBg} ${a.text} shadow-sm`:`${a.textSecondary} hover:${a.text}`}`,children:[e.jsx(V,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 inline mr-1.5"}),"Recording & Summary"]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4",children:[P==="transcripts"&&e.jsxs(e.Fragment,{children:[(r.token_usage||r.tokenUsage)&&e.jsxs("div",{className:`px-3 sm:px-4 py-3 mb-3 ${a.searchBg} rounded-lg`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ps,{className:`w-5 h-5 ${a.text}`}),e.jsx("h4",{className:`text-sm sm:text-base font-semibold ${a.text}`,children:"Token Usage"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4",children:[e.jsxs("div",{className:`${a.cardBg} rounded-lg p-2 sm:p-3 border ${a.border}`,children:[e.jsx("p",{className:`text-xs ${a.textSecondary} mb-1`,children:"Input"}),e.jsx("p",{className:`text-lg sm:text-xl font-bold ${a.text}`,children:((r.token_usage||r.tokenUsage)?.input_tokens||(r.token_usage||r.tokenUsage)?.inputTokens||0).toLocaleString()})]}),e.jsxs("div",{className:`${a.cardBg} rounded-lg p-2 sm:p-3 border ${a.border}`,children:[e.jsx("p",{className:`text-xs ${a.textSecondary} mb-1`,children:"Output"}),e.jsx("p",{className:`text-lg sm:text-xl font-bold ${a.text}`,children:((r.token_usage||r.tokenUsage)?.output_tokens||(r.token_usage||r.tokenUsage)?.outputTokens||0).toLocaleString()})]}),e.jsxs("div",{className:`${a.cardBg} rounded-lg p-2 sm:p-3 border ${a.border}`,children:[e.jsx("p",{className:`text-xs ${a.textSecondary} mb-1`,children:"Total"}),e.jsx("p",{className:"text-lg sm:text-xl font-bold text-blue-600",children:((r.token_usage||r.tokenUsage)?.total_tokens||(r.token_usage||r.tokenUsage)?.totalTokens||0).toLocaleString()})]})]})]}),e.jsxs("div",{className:`${a.searchBg} p-3 sm:p-4 rounded-lg`,children:[e.jsx("h3",{className:`text-sm sm:text-base font-semibold ${a.text} mb-3`,children:"Conversation Transcript"}),e.jsx("div",{className:"space-y-1 max-h-[250px] sm:max-h-[400px] overflow-y-auto",children:r.transcripts&&r.transcripts.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-xs sm:text-sm ${a.textSecondary} mb-2`,children:["Conversation started at"," ",p(r.start_time)]}),r.transcripts.map((t,o)=>e.jsx("div",{className:"flex flex-col gap-1.5 py-1.5 sm:py-2",children:t.speaker==="ai"||t.role==="agent"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-start mb-1",children:e.jsxs("span",{className:`text-xs ${a.textSecondary}`,children:["SHIVAI ASSISTANT â€¢"," ",m(t.timestamp)]})}),e.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:e.jsx(ie,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})}),e.jsx("div",{className:`max-w-[80%] ${a.cardBg} rounded-2xl rounded-tl-sm px-3 py-2 sm:px-4 sm:py-3 border ${a.border}`,children:e.jsx("p",{className:`text-xs sm:text-sm ${a.text}`,children:t.message||t.text})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsxs("span",{className:`text-xs ${a.textSecondary}`,children:["CUSTOMER â€¢"," ",m(t.timestamp)]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"flex flex-col items-end max-w-[80%]",children:e.jsx("div",{className:"rounded-2xl rounded-tr-sm px-3 py-2 sm:px-4 sm:py-3 bg-gradient-to-br from-blue-500 to-blue-600",children:e.jsx("p",{className:"text-xs sm:text-sm text-white",children:t.message||t.text})})})})]})},o)),e.jsxs("p",{className:`text-xs ${a.textSecondary} mt-3 flex items-center gap-1`,children:[e.jsx(Me,{className:"w-5 h-5"}),"Session ended â€¢ Resolution:"," ",r.resolution]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(V,{className:`w-10 h-10 sm:w-12 sm:h-12 ${a.textSecondary} mx-auto mb-3`}),e.jsx("p",{className:`text-xs sm:text-sm ${a.textSecondary}`,children:"No transcripts available for this session"})]})})]})]}),P==="summary"&&e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:`${a.searchBg} p-3 sm:p-4 rounded-lg`,children:[e.jsxs("h3",{className:`text-sm sm:text-base font-semibold ${a.text} mb-3 flex items-center gap-2`,children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"})}),"Call Recording"]}),e.jsxs("div",{className:`${a.cardBg} p-4 rounded-xl border ${a.border}`,children:[e.jsx("audio",{ref:A,onTimeUpdate:_e,onLoadedMetadata:Be,onEnded:()=>xe(!1),src:r.recordingUrl||"#"}),e.jsx("div",{ref:we,onClick:ze,className:`relative h-1 ${a.border} rounded-full cursor-pointer mb-2`,style:{backgroundColor:a==="dark"?"#334155":"#cbd5e1"},children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-600 rounded-full transition-all",style:{width:`${le>0?oe/le*100:0}%`}})}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:`text-xs ${a.textSecondary} w-10`,children:n(oe)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>i(-10),className:`p-1.5 hover:${a.searchBg} rounded transition-colors`,title:"Rewind 10s",children:e.jsx(Ls,{className:`w-5 h-5 ${a.textSecondary}`})}),e.jsx("button",{onClick:w,className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-colors",title:ce?"Pause":"Play",children:ce?e.jsx(Ms,{className:"w-5 h-5",fill:"currentColor"}):e.jsx(rs,{className:"w-4 h-4 ml-0.5",fill:"currentColor"})}),e.jsx("button",{onClick:()=>i(10),className:`p-1.5 hover:${a.searchBg} rounded transition-colors`,title:"Forward 10s",children:e.jsx(Fs,{className:`w-5 h-5 ${a.textSecondary}`})}),e.jsxs("button",{onClick:l,className:`px-2 py-1 hover:${a.searchBg} rounded transition-colors text-xs ${a.textSecondary}`,title:"Playback speed",children:[Ae,"x"]}),e.jsx("button",{onClick:S,className:`p-1.5 hover:${a.searchBg} rounded transition-colors`,title:ve?"Unmute":"Mute",children:ve?e.jsx(Rs,{className:`w-5 h-5 ${a.textSecondary}`}):e.jsx(Us,{className:`w-5 h-5 ${a.textSecondary}`})}),e.jsx("button",{className:`p-1.5 hover:${a.searchBg} rounded transition-colors`,title:"Download recording",children:e.jsx(ms,{className:`w-5 h-5 ${a.textSecondary}`})})]}),e.jsx("span",{className:`text-xs ${a.textSecondary} w-10 text-right`,children:n(le||r.duration||0)})]})]})]}),e.jsxs("div",{className:`${a.searchBg} p-3 sm:p-4 rounded-lg`,children:[e.jsxs("h3",{className:`text-sm sm:text-base font-semibold ${a.text} mb-3 flex items-center gap-2`,children:[e.jsx(V,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Call Summary"]}),Oe?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Os,{className:"w-6 h-6 text-blue-500 animate-spin"})}):Ce?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(ns,{className:`w-10 h-10 ${a.textSecondary} mx-auto mb-2`}),e.jsx("p",{className:`text-xs sm:text-sm ${a.textSecondary}`,children:Ce})]}):X?.data?.leads&&X.data.leads.length>0?(()=>{const t=X.data.leads.filter(o=>o.callId===(r.callId||r.session_id||r.id));return console.log("ðŸ” Filtering leads. Looking for callId:",r.callId||r.session_id||r.id),console.log("ðŸ” Available callIds:",X.data.leads.map(o=>o.callId)),console.log("ðŸ” Filtered leads:",t),t.length>0?e.jsx("div",{className:"space-y-4",children:t.map((o,g)=>e.jsxs("div",{className:`border ${a.border} rounded-lg p-3 sm:p-4 space-y-3`,children:[e.jsxs("div",{className:`flex items-center justify-between pb-2 border-b ${a.border}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"w-3.5 h-3.5 text-blue-500"}),e.jsx("span",{className:`text-xs font-mono ${a.textSecondary}`,children:o.callId||"N/A"})]}),o.createdAt&&e.jsx("span",{className:`text-xs ${a.textSecondary}`,children:new Date(o.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),o.intent&&e.jsxs("div",{className:"space-y-2",children:[o.intent.primary&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[e.jsx("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Primary Intent"}),e.jsx("p",{className:`text-xs sm:text-sm ${a.text} leading-relaxed`,children:o.intent.primary})]}),o.intent.details&&e.jsxs("div",{className:`${a.cardBg} p-3 rounded-lg border ${a.border}`,children:[e.jsx("p",{className:`text-xs font-medium ${a.textSecondary} mb-1`,children:"Details"}),e.jsx("p",{className:`text-xs sm:text-sm ${a.text} leading-relaxed`,children:o.intent.details})]}),o.urgency&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs ${a.textSecondary}`,children:"Urgency:"}),e.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${o.urgency==="high"?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400":o.urgency==="medium"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400"}`,children:o.urgency})]}),o.tags&&o.tags.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-medium ${a.textSecondary} mb-2`,children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:o.tags.map((N,v)=>e.jsx("span",{className:`px-2 py-0.5 ${a.cardBg} ${a.text} rounded-full text-xs border ${a.border}`,children:N},v))})]})]}),o.leadData&&e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-medium ${a.textSecondary} mb-2`,children:"Lead Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.leadData.name&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:`w-5 h-5 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Name"}),e.jsx("p",{className:`text-sm font-medium ${a.text} truncate`,children:o.leadData.name})]})]}),o.leadData.email&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ds,{className:`w-5 h-5 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Email"}),e.jsx("p",{className:`text-sm font-medium ${a.text} truncate`,children:o.leadData.email})]})]}),o.leadData.phone&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ke,{className:`w-5 h-5 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Phone"}),e.jsx("p",{className:`text-sm font-medium ${a.text}`,children:o.leadData.phone})]})]}),o.leadData.status&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(TrendingUp,{className:`w-5 h-5 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Status"}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${o.leadData.status==="qualified"?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":o.leadData.status==="interested"?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":o.leadData.status==="new"?"bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-400":`${a.cardBg} ${a.text}`}`,children:[o.leadData.status==="qualified"&&e.jsx(CheckCircle,{className:"w-5 h-5"}),o.leadData.status]})]})]}),o.leadData.group_size&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:`w-5 h-5 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Group Size"}),e.jsx("p",{className:`text-sm font-medium ${a.text}`,children:o.leadData.group_size})]})]}),o.leadData.dates&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(cs,{className:`w-5 h-5 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Travel Dates"}),e.jsx("p",{className:`text-sm font-medium ${a.text}`,children:o.leadData.dates})]})]})]})]})]},o.id||g))}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(V,{className:`w-10 h-10 ${a.textSecondary} mx-auto mb-2`}),e.jsx("p",{className:`text-xs sm:text-sm ${a.textSecondary}`,children:"No matching summary for this call"}),e.jsxs("p",{className:`text-xs ${a.textSecondary} mt-1`,children:["Call ID:"," ",r.callId||r.session_id||r.id]})]})})():e.jsxs("div",{className:"text-center py-6",children:[e.jsx(V,{className:`w-10 h-10 ${a.textSecondary} mx-auto mb-2`}),e.jsx("p",{className:`text-xs sm:text-sm ${a.textSecondary}`,children:"No call summary available"})]})]})]})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text}`,children:"Session History"}),Ue&&e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"})]}),Ue?e.jsxs("div",{className:`text-center py-12 rounded-lg ${a.searchBg}`,children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:`${a.textSecondary}`,children:"Loading sessions..."})]}):Fe.length===0?e.jsxs("div",{className:`text-center py-12 rounded-lg ${a.searchBg}`,children:[e.jsx(ke,{className:`w-5 h-5 mx-auto mb-3 ${a.textSecondary}`}),e.jsx("h4",{className:`text-lg font-semibold ${a.text} mb-2`,children:"No Sessions Yet"}),e.jsx("p",{className:`${a.textSecondary}`,children:"This agent hasn't had any sessions yet."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Fe.map((t,o)=>{const g=t?.session_id||t?.id||`#${String(1e3+o).padStart(4,"0")}`,N=t?.status||"Completed",v=t?.duration_seconds||0,F=v>0?`${Math.floor(v/60)}m ${Math.floor(v%60)}s`:"0s",C=t?.total_messages||0,H=t?.start_time||new Date,ge=t?.location||{},ue=t?.token_usage||{};return e.jsxs("div",{className:`${a.cardBg} border ${a.border} rounded-lg p-4 hover:shadow-lg transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx(ke,{className:`w-5 h-5 ${a.textSecondary} flex-shrink-0`}),e.jsx("h4",{className:`font-semibold ${a.text} text-sm truncate`,children:g})]}),e.jsx("button",{onClick:()=>Ke(t),className:`p-1.5 ${a.textSecondary} rounded-lg ${a.activeBg} ${a.hover} transition-all duration-200 hover:shadow-lg flex-shrink-0`,title:"View Session",children:G&&r?.id===t?.id?e.jsx("div",{className:"w-3 h-3 border border-gray-600 border-t-transparent rounded-full animate-spin"}):e.jsx(Pe,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${N==="Completed"?"bg-green-500/10 text-green-600 border border-green-500/20":N==="In Progress"?"bg-blue-500/10 text-blue-600 border border-blue-500/20":"bg-gray-500/10 text-gray-600 border border-gray-500/20"}`,children:N})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:`text-xs font-medium ${a.textSecondary} mb-1`,children:"Date & Time"}),e.jsx("p",{className:`${a.text} text-sm font-medium`,children:new Date(H).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:new Date(H).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:`text-xs font-medium ${a.textSecondary} mb-1`,children:"Location"}),e.jsx("p",{className:`${a.text} text-sm font-medium truncate`,children:[ge?.city,ge?.country].filter(Xe=>Xe&&Xe!=="unknown").join(", ")||"Unknown"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Device"}),e.jsx("p",{className:`${a.text} text-sm font-medium truncate`,children:t?.device?.device_type&&t.device.device_type!=="unknown"?t.device.device_type:"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Duration"}),e.jsx("p",{className:`${a.text} text-sm font-medium`,children:F})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Messages"}),e.jsx("p",{className:`${a.text} text-sm font-medium`,children:C})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Language"}),e.jsx("p",{className:`${a.text} text-sm font-medium uppercase`,children:t?.language||"EN"})]})]}),e.jsxs("div",{className:`pt-2 border-t ${a.border}`,children:[e.jsx("p",{className:`text-xs ${a.textSecondary} mb-1`,children:"Token Usage"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"In"}),e.jsx("p",{className:`${a.text} text-sm font-semibold`,children:ue?.input_tokens?.toLocaleString()||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Out"}),e.jsx("p",{className:`${a.text} text-sm font-semibold`,children:ue?.output_tokens?.toLocaleString()||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Total"}),e.jsx("p",{className:`${a.text} text-sm font-semibold`,children:ue?.total_tokens?.toLocaleString()||0})]})]})]})]},t?.id||o)})})]})]}),y==="instructions"&&e.jsxs("div",{className:"space-y-6",children:[d.greeting&&e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Greeting Messages"}),e.jsx("div",{className:"space-y-4",children:Object.entries(d.greeting).map(([t,o])=>e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2 uppercase`,children:t}),e.jsx("div",{className:`p-3 rounded-lg ${a.searchBg} ${a.text}`,children:o})]},t))})]}),d.custom_instructions&&e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Custom Instructions"}),e.jsx("div",{className:`p-4 rounded-lg ${a.searchBg} ${a.text} whitespace-pre-wrap`,children:d.custom_instructions})]})]}),y==="preview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Agent Configuration Preview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`text-md font-semibold ${a.text} mb-3`,children:"Basic Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Model"}),e.jsx("p",{className:`${a.text} font-mono text-sm`,children:d.model||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Voice"}),e.jsx("p",{className:`${a.text}`,children:d.voice||"Default"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Temperature"}),e.jsx("p",{className:`${a.text}`,children:d.temperature||"0.7"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-md font-semibold ${a.text} mb-3`,children:"Voice Detection"}),d.turn_detection&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Type"}),e.jsx("p",{className:`${a.text}`,children:d.turn_detection.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Threshold"}),e.jsx("p",{className:`${a.text}`,children:d.turn_detection.threshold})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Silence Duration"}),e.jsxs("p",{className:`${a.text}`,children:[d.turn_detection.silence_duration_ms,"ms"]})]})]})]})]})]}),d.greeting&&e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Greeting Messages"}),e.jsx("div",{className:"space-y-4",children:Object.entries(d.greeting).map(([t,o])=>e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2 uppercase`,children:t}),e.jsx("div",{className:`p-3 rounded-lg ${a.searchBg} ${a.text}`,children:o})]},t))})]}),e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Test Agent Interface"}),e.jsx("div",{className:"space-y-4 mb-6",children:e.jsx("div",{className:`h-96 overflow-y-auto p-4 rounded-lg ${a.searchBg} border ${a.border}`,children:j.length===0?e.jsxs("div",{className:`text-center py-8 ${a.textSecondary}`,children:[e.jsx(Je,{className:"w-5 h-5 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Start a conversation to test the agent"})]}):e.jsxs("div",{className:"space-y-4",children:[j.map((t,o)=>e.jsx("div",{className:`flex ${(t.type||t.role)==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${(t.type||t.role)==="user"?"bg-blue-500 text-white":`${a.cardBg} ${a.text} border ${a.border}`}`,children:[e.jsx("p",{className:"text-sm",children:t.content||t.text}),e.jsx("p",{className:"text-xs mt-1 opacity-70",children:t.timestamp instanceof Date?t.timestamp.toLocaleTimeString():new Date(t.timestamp).toLocaleTimeString()})]})},o)),x&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${a.cardBg} ${a.text} border ${a.border}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),e.jsx("p",{className:"text-sm",children:"Agent is thinking..."})]})})})]})})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:Y,onChange:t=>de(t.target.value),onKeyPress:t=>t.key==="Enter"&&q(),placeholder:"Type your message to test the agent...",disabled:x,className:`flex-1 px-4 py-3 rounded-lg border ${a.border} ${a.cardBg} ${a.text} focus:outline-none focus:ring-2 focus:ring-blue-500/20 disabled:opacity-50`}),e.jsx("button",{onClick:q,disabled:x||!Y.trim(),className:"px-6 py-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2 font-medium",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"w-5 h-5"}),"Send"]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>f([]),className:`px-4 py-2 rounded-lg ${a.hover} ${a.text} text-sm font-medium transition-colors duration-200 flex items-center gap-2`,children:[e.jsx(us,{className:"w-5 h-5"}),"Clear Chat"]}),e.jsxs("button",{onClick:()=>{const t={type:"user",content:"Hello! Can you tell me about your capabilities?",timestamp:new Date};f(o=>[...o,t]),B(!0),setTimeout(()=>{const o={type:"agent",content:`Hi! I'm ${d.name}. I can help you with various tasks using voice interactions. Feel free to ask me anything!`,timestamp:new Date};f(g=>[...g,o]),B(!1)},1500)},className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm font-medium transition-colors duration-200 flex items-center gap-2",children:[e.jsx(rs,{className:"w-5 h-5"}),"Demo Chat"]})]})]})]}),y==="instructions"&&e.jsxs("div",{className:"space-y-6",children:[d.custom_instructions&&e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Custom Instructions"}),e.jsx("div",{className:`p-4 rounded-lg ${a.searchBg} ${a.text} whitespace-pre-wrap`,children:d.custom_instructions})]}),e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"System Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Agent ID"}),e.jsx("div",{className:`p-3 rounded-lg ${a.searchBg} ${a.text} font-mono text-sm`,children:d?.id||d?._id||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Model Configuration"}),e.jsxs("div",{className:`p-3 rounded-lg ${a.searchBg} ${a.text}`,children:["Model: ",d.model||"N/A",e.jsx("br",{}),"Temperature: ",d.temperature||"0.7",e.jsx("br",{}),"Max Tokens: ",d.max_tokens||"Not specified"]})]})]})]})]})]})},Ts=({client:d,currentTheme:s})=>{const a=[{id:1,date:"2024-12-01",amount:149,type:"subscription",status:"completed",description:"Monthly subscription"},{id:2,date:"2024-11-01",amount:149,type:"subscription",status:"completed",description:"Monthly subscription"},{id:3,date:"2024-10-15",amount:50,type:"usage",status:"completed",description:"Additional tokens"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:`text-lg font-semibold ${s.text}`,children:"Transaction History"})}),a.length===0?e.jsxs("div",{className:`text-center py-12 rounded-lg ${s.searchBg}`,children:[e.jsx(ss,{className:`w-12 h-12 mx-auto mb-3 ${s.textSecondary}`}),e.jsx("h4",{className:`text-lg font-semibold ${s.text} mb-2`,children:"No Transactions"}),e.jsx("p",{className:`${s.textSecondary}`,children:"No transaction history available for this client."})]}):e.jsx("div",{className:"space-y-3",children:a.map(y=>e.jsx("div",{className:`${s.searchBg} rounded-lg p-4 border ${s.border}`,children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center",children:e.jsx(ss,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:`font-semibold ${s.text}`,children:["$",y.amount.toFixed(2)]}),e.jsx("p",{className:`text-sm ${s.textSecondary}`,children:y.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:y.status}),e.jsx("p",{className:`text-sm ${s.textSecondary} mt-1`,children:y.date})]})]})},y.id))})]})},ea=()=>{const{theme:d,currentTheme:s}=hs(),a=Gs(),y=Ks(),z=()=>new URLSearchParams(y.search).get("tab")||"all",[$,U]=c.useState(""),[L,h]=c.useState(""),[j,f]=c.useState(z()),[_,E]=c.useState(null),[Y,de]=c.useState("list"),[x,B]=c.useState(null),[J,O]=c.useState(null),[T,be]=c.useState([]),[he,ye]=c.useState({all:0,newlySignup:0,pending:0,onboarded:0,approved:0,rejected:0}),[je,ee]=c.useState(!0),[Fe,Re]=c.useState(!1),[Ue,re]=c.useState(null),[r,se]=c.useState(!1),[Se,W]=c.useState(!1),[G,ae]=c.useState(""),[P,Q]=c.useState(1),[X]=c.useState(10),[te,Oe]=c.useState(0),[Z,Ce]=c.useState(0),[M,ce]=c.useState(null),xe=c.useRef(new Set),oe=c.useRef(!1);c.useEffect(()=>{const l=new URLSearchParams(y.search);if(l.get("tab")!==j){j==="all"?l.delete("tab"):l.set("tab",j);const n=l.toString(),m=n?`${y.pathname}?${n}`:y.pathname;a(m,{replace:!0})}},[j,y.pathname,y.search,a]),c.useEffect(()=>{const l=i=>{i.target.closest("[data-industry-dropdown]")||(console.log("Clicking outside industry dropdown"),W(!1))};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]),c.useEffect(()=>{const l=setTimeout(()=>{$!==L&&(h($),Q(1))},500);return()=>clearTimeout(l)},[$,L]),c.useEffect(()=>{Q(1)},[j]);const fe=l=>{const i={page:P,limit:X};switch(l){case"all":return i;case"newlySignup":return{...i,isVerified:!1};case"pending":return{...i,isVerified:!0,isOnboarded:!1};case"onboarded":return{...i,isVerified:!0,isOnboarded:!0};case"approved":return{...i,onboardingStatus:"approved"};case"rejected":return{...i,onboardingStatus:"rejected"};default:return i}},le=async(l=j,i=P)=>{if(oe.current){console.log("â­ï¸ Skipping fetch - already in progress");return}try{oe.current=!0,ee(!0),re(null),xe.current.add(l);const n=fe(l);console.log(`ðŸ“¡ Fetching data for tab: ${l} with params:`,n);const m=await K.get("/v1/users",n);console.log(`âœ… Raw response for ${l}:`,m),console.log("âœ… Response data:",m.data);const p=m.data||m,u=p?.data?.users||p?.users||p||[],b=p?.meta||{},k=p?.data?.meta?.pagination||b?.pagination||{};console.log(`ðŸ“Š Extracted users (${u.length}):`,u.length>0?u.slice(0,2):"No users"),console.log("ðŸ“Š Meta data:",b),console.log("ðŸ“Š Pagination data:",k);const I=u.map(t=>({_id:t?.id||t?._id,onBoardingId:t?.onboarding?._id||null,userData:t,company_basics:{name:t?.onboarding?.company_name||t?.fullName||"Unknown",company_email:t?.onboarding?.company_email||t?.email,company_size:t?.onboarding?.address||t?.address||"Unknown",industry:[t?.onboarding?.region||"Not specified"]},plan_details:{type:t?.userData?.onboarding?.plan_type||t?.onboarding?.plan_type||t?.plan_type||"Selected",ai_employee_limit:t?.onboarding?.ai_employee_count||t?.ai_employee_count||1,monthly_price:(()=>{const o=t?.userData?.onboarding?.plan_type||t?.onboarding?.plan_type,g=Ie.find(N=>N.apiKey===o);return g?.price==="Custom"?0:parseFloat(g?.price?.replace(/[$\/mo,]/g,"")||"0")})()},ai_employees:t?.onboarding?.ai_employees||Array.from({length:t?.onboarding?.ai_employee_count||0},(o,g)=>({id:`ai_${g+1}`,name:`AI Employee ${g+1}`,type:"Assistant",status:"Active"})),isOnBoarded:t?.isOnBoarded||!1,isApproved:t?.isApproved||!1,createdAt:t?.createdAt,lastLoginAt:t?.lastLoginAt,knowledge_sources:{website_url:t?.onboarding?.website_url||"",social_links:{linkedin:t?.onboarding?.linkedin||""},faqs_text:t?.onboarding?.faqs_text||"",uploaded_files:t?.onboarding?.uploaded_files||[]},deployment_targets:{channels:t?.onboarding?.channels||[]},instructions:{dos_and_donts:t?.onboarding?.dos_and_donts||"",fallback_contacts:t?.onboarding?.fallback_contacts||""},targets:{success_goals:t?.onboarding?.success_goals||"",success_metrics:t?.onboarding?.success_metrics||""}}));be(I),ce(k);const D=k.total||b.total,q=k.totalPages||b.totalPages;D!==void 0&&(Oe(D),Ce(q||Math.ceil(D/X)),ye(t=>({...t,[l]:D})),console.log(`âœ… Set count for ${l}:`,D))}catch(n){console.error("âŒ Error fetching data:",n),re(n.message),be([])}finally{ee(!1),oe.current=!1}};c.useEffect(()=>{le()},[j,P]),c.useMemo(()=>{let l=T;return L&&(l=T.filter(i=>{const n=L.toLowerCase();return i.company_basics?.name?.toLowerCase().includes(n)||i.company_basics?.company_email?.toLowerCase().includes(n)||i.userData?.fullName?.toLowerCase().includes(n)||i.userData?.email?.toLowerCase().includes(n)})),l},[T,L]);const Ne=c.useMemo(()=>T,[T]),me=l=>he[l]||0,Qe=()=>{P>1&&Q(l=>l-1)},ve=()=>{P<Z&&Q(l=>l+1)},$e=async l=>{try{if(console.log("ðŸ” handleEditClient called with client:",l),ee(!0),E(l),l?.id){console.log(`ðŸš€ Fetching onboarding data for user: ${l.id}`);const i=await K.getOnboardingByUserId(l.id);console.log("âœ… Onboarding data response:",i);let n=l;i?.data?n={...l,onboardingDetails:i.data}:n={...l,onboardingDetails:{onboarding:null}};const m={_id:n._id,company_basics:{name:n?.onboardingDetails?.onboarding?.company_basics?.name||n?.company_basics?.name||"",description:n?.onboardingDetails?.onboarding?.company_basics?.description||n?.company_basics?.description||"",company_email:n?.onboardingDetails?.onboarding?.company_basics?.company_email||n?.company_basics?.company_email||"",company_phone:n?.onboardingDetails?.onboarding?.company_basics?.company_phone||n?.company_basics?.company_phone||"",website:n?.onboardingDetails?.onboarding?.company_basics?.website||n?.company_basics?.website||"",address:n?.onboardingDetails?.onboarding?.company_basics?.address||n?.company_basics?.address||"",company_size:n?.onboardingDetails?.onboarding?.company_basics?.company_size||n?.company_basics?.company_size||"",industry:n?.onboardingDetails?.onboarding?.company_basics?.industry||n?.company_basics?.industry||[],linkedin_profile:n?.onboardingDetails?.onboarding?.company_basics?.linkedin_profile||n?.company_basics?.linkedin_profile||"",primary_region:{countries:n?.onboardingDetails?.onboarding?.company_basics?.primary_region?.countries||[],states:n?.onboardingDetails?.onboarding?.company_basics?.primary_region?.states||[],cities:n?.onboardingDetails?.onboarding?.company_basics?.primary_region?.cities||[]}},ai_employees:(n?.onboardingDetails?.onboarding?.ai_employees||n?.ai_employees||[]).map(p=>({...p,knowledge_sources:{faqs_text:p?.knowledge_sources?.faqs_text||"",uploaded_files:p?.knowledge_sources?.uploaded_files||[],website_url:p?.knowledge_sources?.website_url||"",social_links:p?.knowledge_sources?.social_links||{},additional_sources:Array.isArray(p?.knowledge_sources)?p.knowledge_sources:p?.knowledge_sources?.additional_sources||[]}})),plan_details:n?.onboardingDetails?.onboarding?.plan_details||n?.plan_details||{},deployment_targets:n?.onboardingDetails?.onboarding?.deployment_targets||n?.deployment_targets||{},deployment_service:n?.onboardingDetails?.onboarding?.deployment_service||n?.deployment_service||{},consent_options:n?.onboardingDetails?.onboarding?.consent_options||n?.consent_options||{},instructions:n?.onboardingDetails?.onboarding?.instructions||n?.instructions||{},targets:n?.onboardingDetails?.onboarding?.targets||n?.targets||{},userData:n?.userData};B(m),de("edit"),se(!1)}else console.error("âŒ No client._id available:",l),re("Client ID not found")}catch(i){console.error("âŒ Error fetching onboarding data:",i),re(`Failed to fetch client data: ${i.message}`)}finally{ee(!1)}},Ae=async l=>{try{const i=l?.id,n=l?.fullName||l?.name||"this client";if(console.log(`ðŸ—‘ï¸ Deleting client: ${n} (ID: ${i})`),!i){R.error("Client ID not found");return}const m=await K.deleteUser(i);m?.success?(R.success("Client deleted successfully"),await le(j,P)):R.error(m?.message||"Failed to delete client")}catch(i){console.error("âŒ Error deleting client:",i),R.error("Failed to delete client")}},pe=()=>{E(null),de("list"),B(null),se(!1),O(null)},A=async l=>{try{console.log("ðŸ” handleViewClient called with client:",l),a(`/dashboard/clients/${l?.id||l?._id}`,{state:{client:l}})}catch(i){console.error("âŒ Error navigating to client details:",i),R.error("Failed to navigate to client details")}},we=async()=>{try{console.log("Saving edited data:",x),R.loading("Saving client data...",{id:"save-toast"});const l=t=>t?t.match(/^https?:\/\//i)?t:`https://${t}`:"",i=t=>t?t.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" "):"",n=t=>{const o=t.toLowerCase();return o.includes("male")&&!o.includes("female")?"Male":o.includes("female")?"Female":"Gender Neutral"},m=[],p={};(x.ai_employees||[]).forEach((t,o)=>{p[o]=[],(t.knowledge_sources?.uploaded_files||[]).forEach(g=>{g.pending_upload&&g.fileObject?m.push(g.fileObject):g.pending_upload||p[o].push(g)})});let u=[];if(m.length>0)try{console.log(`ðŸ“¤ Uploading ${m.length} files...`),u=(await K.uploadOnboardingFiles(m)).uploaded_files||[],console.log("âœ… Files uploaded:",u)}catch(t){console.error("âŒ Error uploading files:",t),R.error("Failed to upload files. Saving other data...",{id:"save-toast"})}const b=t=>{const g={"Sales & Business Development":"sales_business_development","Customer Support & Service":"customer_support_service","Appointment & Scheduling":"appointment_scheduling","Order Management & Billing":"order_management_billing","Product / Service Explainers":"product_service_explainers","Feedback & Engagement":"feedback_engagement","Custom Workflows":"custom_workflows"}[t];return g||(t||"").toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"").replace(/&/g,"and")},k=t=>{const o={website:"Website",app:"Mobile App",whatsapp:"WhatsApp"};return(t||[]).map(g=>o[g]||g)},I=t=>({managed:"Shivai","self-service":"Client",shivai:"Shivai",client:"Client"})[t]||t||"Shivai",D={company_basics:{name:x?.company_basics?.name||"",website:l(x?.company_basics?.website||""),company_size:x?.company_basics?.company_size||"",company_email:x?.company_basics?.company_email||"",company_phone:x?.company_basics?.company_phone||"",linkedin_profile:l(x?.company_basics?.linkedin_profile||""),description:x?.company_basics?.description||"",industry:Array.isArray(x?.company_basics?.industry)?x.company_basics.industry:[x?.company_basics?.industry||""],primary_region:{countries:x?.company_basics?.primary_region?.countries||[],states:x?.company_basics?.primary_region?.states||[],cities:x?.company_basics?.primary_region?.cities||[]}},plan_details:x?.plan_details||{},ai_employees:(x.ai_employees||[]).map((t,o)=>{const g=(t.knowledge_sources?.uploaded_files||[]).filter(C=>!C.pending_upload),N=[...p[o]||[]],v=(t.knowledge_sources?.uploaded_files||[]).filter(C=>C.pending_upload&&C.fileObject).length;if(v>0&&u.length>0){const C=Object.keys(p).slice(0,o).reduce((H,ge)=>H+(x.ai_employees[ge]?.knowledge_sources?.uploaded_files||[]).filter(ue=>ue.pending_upload&&ue.fileObject).length,0);N.push(...u.slice(C,C+v))}const F=(t.workflows||[]).map(C=>({name:C.name||"",instruction:C.instruction||""}));return{name:t.name||`AI Employee ${o+1}`,type:i(t.type||""),template:b(t.template||""),preferred_language:i(t.preferred_language||"English"),voice_gender:n(t.voice_gender||"Gender Neutral"),agent_personality:t.agent_personality||"",voice_style:t.voice_style||"",special_instructions:t.special_instructions||"",workflows:F,knowledge_sources:{website_url:l(t.knowledge_sources?.website_url||""),social_links:t.knowledge_sources?.social_links||{},faqs_text:t.knowledge_sources?.faqs_text||"",uploaded_files:N},deployment_targets:{channels:k(t?.deployment_targets?.channels||[]),deployment_notes:t.deployment_targets?.deployment_notes||""},deployment_service:{service_type:I(t.deployment_service?.service_type||"")},consent_options:{recording_enabled:t.consent_options?.recording_enabled||!1,transcript_email_optin:t.consent_options?.transcript_email_optin||!1,privacy_notes:t.consent_options?.privacy_notes||""},instructions:{dos_and_donts:t.instructions?.dos_donts||t.instructions?.dos_and_donts||"",fallback_contacts:t.instructions?.fallback_contacts||""},targets:{success_goals:t.success_targets?.description||t.targets?.success_goals||"",success_metrics:t.success_targets?.metrics||t.targets?.success_metrics||""}}})};console.log("ðŸ“¤ Sending payload:",JSON.stringify(D,null,2));const q=await K.updateClientData(x._id,D);if(console.log("âœ… Update response:",q),q&&(q.success===!0||q.statusCode===200))be(t=>t.map(o=>o._id===x._id?{...o,...x,...D}:o)),R.success(q.message||"Client data updated successfully!",{id:"save-toast"}),se(!1),pe();else throw new Error(q?.message||"Update failed")}catch(l){console.error("Error saving client data:",l);const i=l?.response?.data?.message||l?.message||"Failed to save client data";R.error(i,{id:"save-toast"})}},De=()=>{se(!1),pe()},Ge=()=>{se(!r)},Ke=async l=>{try{const i=l?.s3_key||l?.key;if(!i){R.error("File key not found");return}const m=(await K.downloadFileByS3Key(i)).data,p=window.URL.createObjectURL(m);window.open(p,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(p),100)}catch(i){console.error("Error viewing file:",i),R.error("Failed to view file")}},Ve=async l=>{try{const i=l?.s3_key||l?.key,n=l?.name||l?.filename||"download";if(!i){R.error("File key not found");return}const p=(await K.downloadFileByS3Key(i)).data,u=window.URL.createObjectURL(p),b=document.createElement("a");b.href=u,b.download=n,document.body.appendChild(b),b.click(),document.body.removeChild(b),window.URL.revokeObjectURL(u),R.success("Download started")}catch(i){console.error("Error downloading file:",i),R.error("Failed to download file")}},w=(l,i)=>{B(n=>{const m={...n},p=l.split(".");let u=m;for(let b=0;b<p.length-1;b++)u[p[b]]||(u[p[b]]={}),u=u[p[b]];return u[p[p.length-1]]=i,m})},_e=l=>{console.log("updateIndustry called with:",l),B(i=>{const n={...i,company_basics:{...i?.company_basics,industry:l}};return console.log("Updated editData:",n),n})},Be=()=>{B(l=>({...l,ai_employees:[...l?.ai_employees||[],{name:"",type:"Assistant",template:"",preferred_language:"English",voice_gender:"Gender Neutral",agent_personality:"",voice_style:"",special_instructions:"",knowledge_sources:{faqs_text:"",uploaded_files:[],website_url:"",social_links:{},additional_sources:[]},workflows:[],_id:`new_${Date.now()}`}]}))},ze=l=>{B(i=>({...i,ai_employees:(i?.ai_employees||[]).filter((n,m)=>m!==l)}))},S=(l,i,n)=>{B(m=>({...m,ai_employees:(m?.ai_employees||[]).map((p,u)=>{if(u!==l)return p;const b={...p};if(i.includes(".")){const k=i.split(".");let I=b;for(let D=0;D<k.length-1;D++)I[k[D]]||(I[k[D]]={}),I=I[k[D]];I[k[k.length-1]]=n}else b[i]=n;return b})}))};return Y==="agentView"&&J?e.jsx(qs,{agent:J,onBack:pe,currentTheme:s}):Y==="details"&&_?(a(`/dashboard/clients/${_._id||_.userData?._id}`,{state:{client:_}}),de("list"),null):Y==="edit"&&x?e.jsxs("div",{className:"space-y-4 md:space-y-6 px-2 sm:px-0",children:[e.jsx("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-xl`,children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[e.jsxs("button",{onClick:De,className:`flex items-center justify-center sm:justify-start gap-2 px-4 py-2 rounded-lg ${s.hover} ${s.text} transition-all duration-200`,children:[e.jsx(os,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Cancel"})]}),e.jsxs("h2",{className:`text-xl md:text-2xl font-bold ${s.text} text-center sm:text-left`,children:["Edit: ",x?.company_basics?.name||"Client"]})]}),e.jsx("div",{className:"flex gap-2 sm:gap-3",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:De,className:`flex-1 sm:flex-none px-3 sm:px-4 py-2 border ${s.border} rounded-lg ${s.text} ${s.hover} transition-all duration-200 flex items-center justify-center gap-2 text-sm sm:text-base`,children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Cancel"})]}),e.jsxs("button",{onClick:we,className:"flex-1 sm:flex-none admin-btn-primary px-3 sm:px-4 py-2 text-sm sm:text-base flex items-center justify-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Save"})]})]}):e.jsxs("button",{onClick:Ge,className:"flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg admin-btn-primary transition-all duration-200 flex items-center justify-center gap-2 text-sm sm:text-base",children:[e.jsx(Ze,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Edit"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-xl`,children:[e.jsxs("h3",{className:`text-base md:text-lg font-bold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(Ye,{className:"w-5 h-5"}),"Company Basics"]}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Company Name *"}),e.jsx("input",{type:"text",value:x?.company_basics?.name||"",onChange:l=>w("company_basics.name",l.target.value),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Description"}),e.jsx("textarea",{value:x?.company_basics?.description||"",onChange:l=>w("company_basics.description",l.target.value),rows:3,disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Company Size"}),e.jsxs("select",{value:x?.company_basics?.company_size||"",onChange:l=>w("company_basics.company_size",l.target.value),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"1-10",children:"1-10"}),e.jsx("option",{value:"11-50",children:"11-50"}),e.jsx("option",{value:"51-200",children:"51-200"}),e.jsx("option",{value:"201-500",children:"201-500"}),e.jsx("option",{value:"501-1000",children:"501-1000"}),e.jsx("option",{value:"1000+",children:"1000+"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Industry (select up to 4)"}),e.jsxs("div",{className:"relative","data-industry-dropdown":!0,children:[e.jsx("input",{type:"text",value:G,onChange:l=>ae(l.target.value),onFocus:()=>W(!0),onClick:()=>r&&W(!0),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"} ${(x?.company_basics?.industry||[]).length>=4?"cursor-not-allowed":""}`,placeholder:(x?.company_basics?.industry||[]).length>=4?"Maximum 4 industries selected":"Search or select industries"}),e.jsx(ys,{className:`absolute right-2.5 top-2.5 w-4 h-4 text-gray-400 transition-transform cursor-pointer ${Se?"rotate-180":""}`,onClick:()=>r&&W(!Se)}),(x?.company_basics?.industry||[]).length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(x?.company_basics?.industry||[]).map((l,i)=>{const n=Ee.find(m=>m.value===l)?.label||l;return e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-md text-sm flex items-center gap-1",children:[n,r&&e.jsx("button",{type:"button",onClick:()=>{const m=(x?.company_basics?.industry||[]).filter((p,u)=>u!==i);_e(m)},className:"text-blue-600 hover:text-blue-800",children:e.jsx(ne,{className:"w-5 h-5"})})]},i)})}),Se&&r&&e.jsxs("div",{className:`absolute z-50 w-full mt-1 ${s.cardBg} border ${s.border} rounded-lg shadow-xl max-h-48 overflow-y-auto`,onClick:l=>l.stopPropagation(),children:[Ee.filter(l=>l.label.toLowerCase().includes(G.toLowerCase())&&!(x?.company_basics?.industry||[]).includes(l.value)).map(l=>e.jsxs("div",{onClick:i=>{i.stopPropagation(),console.log("Industry option clicked:",l.value);const n=x?.company_basics?.industry||[];console.log("Current industries:",n),l.value==="other"?ae("Add your industry type"):n.length<4&&!n.includes(l.value)?(console.log("Adding industry:",l.value),_e([...n,l.value]),ae(""),setTimeout(()=>W(!1),100)):console.log("Max industries reached or already selected")},className:`px-3 py-2 border-b ${s.border} last:border-b-0 ${(x?.company_basics?.industry||[]).length>=4?"cursor-not-allowed text-gray-400 bg-gray-50":"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer"}`,children:[l.label,(x?.company_basics?.industry||[]).length>=4&&e.jsx("span",{className:"text-xs text-gray-400 ml-2",children:"(Max reached)"})]},l.value)),G&&!Ee.some(l=>l.label.toLowerCase().includes(G.toLowerCase()))&&!(x?.company_basics?.industry||[]).includes(G)&&e.jsxs("div",{onClick:l=>{l.stopPropagation(),console.log("Custom industry add clicked:",G);const i=x?.company_basics?.industry||[];i.length<4&&!i.includes(G)&&(console.log("Adding custom industry:",G),_e([...i,G]),ae(""),setTimeout(()=>W(!1),100))},className:`px-3 py-2 font-medium ${(x?.company_basics?.industry||[]).length>=4?"cursor-not-allowed text-gray-400 bg-gray-50":"hover:bg-blue-50 cursor-pointer text-blue-600"}`,children:['+ Add "',G,'"']})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Website"}),e.jsx("input",{type:"url",value:x?.company_basics?.website||"",onChange:l=>w("company_basics.website",l.target.value),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Company Email"}),e.jsx("input",{type:"email",value:x?.company_basics?.company_email||"",onChange:l=>w("company_basics.company_email",l.target.value),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Company Phone"}),e.jsx("input",{type:"tel",value:x?.company_basics?.company_phone||"",onChange:l=>w("company_basics.company_phone",l.target.value),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Primary Region - Countries"}),e.jsx("input",{type:"text",value:(x?.company_basics?.primary_region?.countries||[]).join(", "),onChange:l=>{const i=l.target.value.split(",").map(n=>n.trim()).filter(n=>n);w("company_basics.primary_region.countries",i)},placeholder:"USA, Canada, UK (comma separated)",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Primary Region - States/Provinces"}),e.jsx("input",{type:"text",value:(x?.company_basics?.primary_region?.states||[]).join(", "),onChange:l=>{const i=l.target.value.split(",").map(n=>n.trim()).filter(n=>n);w("company_basics.primary_region.states",i)},placeholder:"California, New York, Texas (comma separated)",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Primary Region - Cities"}),e.jsx("input",{type:"text",value:(x?.company_basics?.primary_region?.cities||[]).join(", "),onChange:l=>{const i=l.target.value.split(",").map(n=>n.trim()).filter(n=>n);w("company_basics.primary_region.cities",i)},placeholder:"New York, Los Angeles, Chicago (comma separated)",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]}),e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-xl`,children:[e.jsxs("h3",{className:`text-base md:text-lg font-bold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(is,{className:"w-5 h-5"}),"Plan Details"]}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Plan Type"}),e.jsxs("select",{value:x?.plan_details?.type||"",onChange:l=>{const i=Ie.find(n=>n.apiKey===l.target.value);w("plan_details.type",l.target.value),i&&(w("plan_details.ai_employee_limit",i.aiEmployees),w("plan_details.monthly_price",i.price==="Custom"?0:parseFloat(i.price.replace(/[$\/mo,]/g,"")||"0")))},disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select Plan"}),Ie.map(l=>e.jsxs("option",{value:l.apiKey,children:[l.name," - ",l.price]},l.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Monthly Price ($)"}),e.jsx("input",{type:"number",value:x?.plan_details?.monthly_price||"",onChange:l=>w("plan_details.monthly_price",parseFloat(l.target.value)),disabled:!r||x?.plan_details?.type!=="Custom Plan",placeholder:x?.plan_details?.type==="Custom Plan"?"Enter custom price":"Auto-populated from plan",className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${!r||x?.plan_details?.type!=="Custom Plan"?"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed":`${s.cardBg} ${s.text}`}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"AI Employee Limit"}),e.jsx("input",{type:"number",value:x?.plan_details?.ai_employee_limit||"",onChange:l=>w("plan_details.ai_employee_limit",parseInt(l.target.value)),disabled:!r||x?.plan_details?.type!=="Custom Plan",placeholder:x?.plan_details?.type==="Custom Plan"?"Enter custom limit":"Auto-populated from plan",className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${!r||x?.plan_details?.type!=="Custom Plan"?"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed":`${s.cardBg} ${s.text}`}`})]}),e.jsxs("div",{className:`pt-4 border-t ${s.border}`,children:[e.jsx("h4",{className:`text-sm font-bold ${s.text} mb-3`,children:"Billing Contact"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:x?.plan_details?.billing_contact?.name||"",onChange:l=>w("plan_details.billing_contact.name",l.target.value),placeholder:"Contact Name",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"email",value:x?.plan_details?.billing_contact?.email||"",onChange:l=>w("plan_details.billing_contact.email",l.target.value),placeholder:"Contact Email",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"tel",value:x?.plan_details?.billing_contact?.phone||"",onChange:l=>w("plan_details.billing_contact.phone",l.target.value),placeholder:"Contact Phone",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"text",value:x?.plan_details?.billing_contact?.company_name||"",onChange:l=>w("plan_details.billing_contact.company_name",l.target.value),placeholder:"Billing Company Name (if different)",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]}),e.jsxs("div",{className:`pt-4 border-t ${s.border}`,children:[e.jsx("h4",{className:`text-sm font-bold ${s.text} mb-3`,children:"Billing Address"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:x?.plan_details?.billing_address?.street||"",onChange:l=>w("plan_details.billing_address.street",l.target.value),placeholder:"Street Address",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:x?.plan_details?.billing_address?.city||"",onChange:l=>w("plan_details.billing_address.city",l.target.value),placeholder:"City",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"text",value:x?.plan_details?.billing_address?.state||"",onChange:l=>w("plan_details.billing_address.state",l.target.value),placeholder:"State",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:x?.plan_details?.billing_address?.postal_code||"",onChange:l=>w("plan_details.billing_address.postal_code",l.target.value),placeholder:"Postal Code",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"text",value:x?.plan_details?.billing_address?.country||"",onChange:l=>w("plan_details.billing_address.country",l.target.value),placeholder:"Country",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-xl lg:col-span-2`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6",children:[e.jsxs("h3",{className:`text-lg md:text-xl font-bold ${s.text} flex items-center gap-3`,children:[e.jsx("div",{className:`p-2 rounded-lg ${s.activeBg}`,children:e.jsx(Te,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("span",{children:"AI Employees"}),e.jsxs("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${s.searchBg} ${s.textSecondary}`,children:[(x?.ai_employees||[]).length," configured"]})]})]}),e.jsxs("button",{onClick:Be,disabled:!r,className:`admin-btn-primary px-4 py-2.5 text-sm w-full sm:w-auto flex items-center justify-center gap-2 font-medium ${r?"":"opacity-60 cursor-not-allowed"}`,children:[e.jsx(qe,{className:"w-5 h-5"}),"Add AI Employee"]})]}),e.jsx("div",{className:"space-y-6",children:(x?.ai_employees||[]).length===0?e.jsxs("div",{className:`text-center py-12 border-2 border-dashed ${s.border} rounded-xl`,children:[e.jsx("div",{className:`p-3 rounded-full ${s.searchBg} w-16 h-16 mx-auto mb-4 flex items-center justify-center`,children:e.jsx(Te,{className:`w-8 h-8 ${s.textSecondary}`})}),e.jsx("h4",{className:`text-lg font-medium ${s.text} mb-2`,children:"No AI Employees Yet"}),e.jsx("p",{className:`${s.textSecondary} text-sm mb-4`,children:"Add your first AI employee to get started with automation"}),r&&e.jsxs("button",{onClick:Be,className:"admin-btn-primary px-6 py-2.5 text-sm font-medium",children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"Create First AI Employee"]})]}):(x?.ai_employees||[]).map((l,i)=>e.jsxs("div",{className:`p-6 rounded-xl border ${s.border} ${s.searchBg} shadow-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.cardBg} border ${s.border}`,children:e.jsx(ie,{className:`w-5 h-5 ${s.text}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:`${s.text} font-bold text-lg`,children:l?.name||`AI Employee #${i+1}`}),e.jsxs("p",{className:`${s.textSecondary} text-sm`,children:[l?.type||"Assistant"," â€¢"," ",l?.preferred_language||"English"]})]})]}),(x?.ai_employees||[]).length>1&&e.jsx("button",{onClick:()=>ze(i),className:`p-2 rounded-lg ${s.hover} text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center gap-2`,title:"Remove AI Employee",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Name"}),e.jsx("input",{type:"text",value:l?.name||"",onChange:n=>S(i,"name",n.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Type"}),e.jsxs("select",{value:l?.type||"",onChange:n=>S(i,"type",n.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select type"}),Vs.map(n=>e.jsx("option",{value:n.label,children:n.label},n.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Template"}),e.jsxs("select",{value:l?.template||"",onChange:n=>S(i,"template",n.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select template"}),bs.map(n=>e.jsx("option",{value:n.label,children:n.label},n.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Language"}),e.jsxs("select",{value:l?.preferred_language||"",onChange:n=>S(i,"preferred_language",n.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select language"}),zs.map(n=>e.jsx("option",{value:n.label,children:n.label},n.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Voice Gender"}),e.jsxs("select",{value:l?.voice_gender||"",onChange:n=>S(i,"voice_gender",n.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select voice gender"}),Ws.map(n=>e.jsx("option",{value:n.label,children:n.label},n.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Personality"}),e.jsx("input",{type:"text",value:l?.agent_personality||"",onChange:n=>S(i,"agent_personality",n.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Voice Style"}),e.jsx("input",{type:"text",value:l?.voice_style||"",onChange:n=>S(i,"voice_style",n.target.value),placeholder:"e.g., Professional, Friendly, Energetic",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Special Instructions"}),e.jsx("textarea",{value:l?.special_instructions||"",onChange:n=>S(i,"special_instructions",n.target.value),rows:2,disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block`,children:[e.jsx(V,{className:"w-4 h-4 inline mr-1"}),"Workflow Integrations (",(l?.workflows||[]).length,")"]}),e.jsxs("button",{type:"button",onClick:()=>{B(n=>({...n,ai_employees:(n?.ai_employees||[]).map((m,p)=>p===i?{...m,workflows:[...m.workflows||[],{name:"WhatsApp Business",instruction:"Configure WhatsApp Business integration"}]}:m)}))},className:"px-3 py-1 rounded-lg text-xs bg-green-50 text-green-700 border border-green-200 hover:bg-green-100 transition-colors flex items-center gap-1",children:[e.jsx(He,{className:"w-5 h-5"}),"Add Workflow"]})]}),e.jsx("div",{className:"space-y-3",children:(l?.workflows||[]).length>0?(l?.workflows||[]).map((n,m)=>e.jsxs("div",{className:`p-4 rounded-lg border ${s.border} ${s.cardBg}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h5",{className:`text-sm font-medium ${s.text} flex items-center gap-2`,children:[e.jsx(js,{className:"w-5 h-5"}),"Workflow #",m+1]}),e.jsx("button",{type:"button",onClick:()=>{B(p=>({...p,ai_employees:(p?.ai_employees||[]).map((u,b)=>b===i?{...u,workflows:(u.workflows||[]).filter((k,I)=>I!==m)}:u)}))},className:`p-1 rounded ${s.hover} text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors`,children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Integration Type"}),e.jsxs("select",{value:n?.name||"",onChange:p=>{B(u=>({...u,ai_employees:(u?.ai_employees||[]).map((b,k)=>k===i?{...b,workflows:(b.workflows||[]).map((I,D)=>D===m?{...I,name:p.target.value}:I)}:b)}))},disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select Integration"}),e.jsx("option",{value:"WhatsApp Business",children:"WhatsApp Business"}),e.jsx("option",{value:"Gmail",children:"Gmail"}),e.jsx("option",{value:"Webhooks",children:"Webhooks"}),e.jsx("option",{value:"Google Calendar",children:"Google Calendar"}),e.jsx("option",{value:"Calendly",children:"Calendly"}),e.jsx("option",{value:"Google Sheets",children:"Google Sheets"}),e.jsx("option",{value:"Zoho CRM",children:"Zoho CRM"}),e.jsx("option",{value:"Odoo",children:"Odoo"}),e.jsx("option",{value:"HubSpot",children:"HubSpot"}),e.jsx("option",{value:"Salesforce CRM",children:"Salesforce CRM"}),e.jsx("option",{value:"Zendesk",children:"Zendesk"}),e.jsx("option",{value:"Shopify",children:"Shopify"}),e.jsx("option",{value:"Slack",children:"Slack"}),e.jsx("option",{value:"Zapier",children:"Zapier"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Integration Instructions"}),e.jsx("textarea",{value:n?.instruction||"",onChange:p=>{B(u=>({...u,ai_employees:(u?.ai_employees||[]).map((b,k)=>k===i?{...b,workflows:(b.workflows||[]).map((I,D)=>D===m?{...I,instruction:p.target.value}:I)}:b)}))},rows:3,placeholder:"Enter specific instructions for this workflow integration...",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),n?.name&&e.jsx("div",{className:`p-3 rounded-lg ${s.searchBg} border ${s.border}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:`p-2 rounded-lg ${s.activeBg}`,children:[n?.name==="WhatsApp Business"&&e.jsx(Je,{className:"w-4 h-4 text-green-600"}),n?.name==="Gmail"&&e.jsx(ds,{className:"w-4 h-4 text-blue-600"}),n?.name==="Google Calendar"&&e.jsx(cs,{className:"w-4 h-4 text-blue-600"}),n?.name==="Shopify"&&e.jsx(fs,{className:"w-4 h-4 text-green-600"}),n?.name==="Slack"&&e.jsx(Ns,{className:"w-4 h-4 text-purple-600"}),!["WhatsApp Business","Gmail","Google Calendar","Shopify","Slack"].includes(n?.name)&&e.jsx(vs,{className:"w-4 h-4 text-gray-600"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h6",{className:`text-sm font-medium ${s.text} mb-1`,children:[n?.name," Integration"]}),e.jsx("p",{className:`text-xs ${s.textSecondary}`,children:n?.instruction||"No instructions provided"}),e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mr-1"}),"Configured"]})})]})]})})]})]},m)):e.jsxs("div",{className:`text-center py-6 border-2 border-dashed ${s.border} rounded-lg`,children:[e.jsx(V,{className:`w-8 h-8 mx-auto mb-2 ${s.textSecondary} opacity-50`}),e.jsx("p",{className:`${s.textSecondary} text-sm font-medium mb-1`,children:"No workflow integrations configured"}),e.jsx("p",{className:`${s.textSecondary} text-xs mb-3 opacity-75`,children:"Add integrations like WhatsApp, Gmail, CRM systems to enhance this AI employee"}),e.jsxs("button",{type:"button",onClick:()=>{B(n=>({...n,ai_employees:(n?.ai_employees||[]).map((m,p)=>p===i?{...m,workflows:[{name:"",instruction:""}]}:m)}))},className:"px-4 py-2 rounded-lg text-sm bg-blue-50 text-blue-700 border border-blue-200 hover:bg-blue-100 transition-colors flex items-center gap-2 mx-auto",children:[e.jsx(He,{className:"w-5 h-5"}),"Add Your First Workflow"]})]})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block`,children:[e.jsx($s,{className:"w-4 h-4 inline mr-1"}),"Knowledge Sources"]})}),e.jsxs("div",{className:"mb-4 p-4 rounded-lg border ${currentTheme.border} ${currentTheme.searchBg}",children:[e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:[e.jsx(xs,{className:"w-4 h-4 inline mr-1"}),"Website URL"]}),e.jsx("input",{type:"url",value:l?.knowledge_sources?.website_url||"",onChange:n=>{B(m=>({...m,ai_employees:(m?.ai_employees||[]).map((p,u)=>u===i?{...p,knowledge_sources:{...p.knowledge_sources,website_url:n.target.value}}:p)}))},placeholder:"https://example.com",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"mb-4 p-4 rounded-lg border ${currentTheme.border} ${currentTheme.searchBg}",children:[e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:[e.jsx(ws,{className:"w-4 h-4 inline mr-1"}),"FAQs / Knowledge Text"]}),e.jsx("textarea",{value:l?.knowledge_sources?.faqs_text||"",onChange:n=>{B(m=>({...m,ai_employees:(m?.ai_employees||[]).map((p,u)=>u===i?{...p,knowledge_sources:{...p.knowledge_sources,faqs_text:n.target.value}}:p)}))},rows:4,placeholder:"Enter frequently asked questions and answers, or any text-based knowledge...",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"mb-4 p-4 rounded-lg border ${currentTheme.border} ${currentTheme.searchBg}",children:[e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:[e.jsx(V,{className:"w-4 h-4 inline mr-1"}),"Uploaded Files (",(l?.knowledge_sources?.uploaded_files||[]).length,")"]}),(l?.knowledge_sources?.uploaded_files||[]).length>0?e.jsx("div",{className:"space-y-2",children:(l?.knowledge_sources?.uploaded_files||[]).map((n,m)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${s.border} ${s.cardBg}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx(V,{className:`w-5 h-5 ${s.textSecondary}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm font-medium ${s.text} truncate`,children:n.original_name||n.filename||n.name||"Unnamed File"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.file_size&&e.jsxs("span",{className:`text-xs ${s.textSecondary}`,children:[(n.file_size/1024).toFixed(1)," ","KB"]}),n.file_type&&e.jsx("span",{className:`text-xs ${s.textSecondary} bg-gray-100 px-2 py-0.5 rounded`,children:n.file_type})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>Ke(n),className:`p-2 rounded-lg ${s.hover} ${s.textSecondary} hover:text-blue-600 transition-colors`,title:"View File",children:e.jsx(Pe,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>Ve(n),className:`p-2 rounded-lg ${s.hover} ${s.textSecondary} hover:text-green-600 transition-colors`,title:"Download File",children:e.jsx(ms,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{B(p=>({...p,ai_employees:(p?.ai_employees||[]).map((u,b)=>b===i?{...u,knowledge_sources:{...u.knowledge_sources,uploaded_files:(u.knowledge_sources?.uploaded_files||[]).filter((k,I)=>I!==m)}}:u)}))},className:`p-2 rounded-lg ${s.hover} text-red-500 hover:bg-red-50 transition-colors`,title:"Remove File",children:e.jsx(ne,{className:"w-5 h-5"})})]})]},m))}):e.jsxs("div",{className:`text-center py-6 border-2 border-dashed ${s.border} rounded-lg`,children:[e.jsx(V,{className:`w-8 h-8 mx-auto mb-2 ${s.textSecondary} opacity-50`}),e.jsx("p",{className:`${s.textSecondary} text-sm`,children:"No files uploaded yet"}),e.jsx("p",{className:`${s.textSecondary} text-xs mt-1 opacity-75`,children:"Files will appear here when uploaded during onboarding"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("input",{type:"file",multiple:!0,disabled:!r,onChange:n=>{const m=Array.from(n.target.files||[]);if(m.length>0){const p=m.map(u=>({name:u.name,original_name:u.name,file_size:u.size,file_type:u.type,pending_upload:!0,fileObject:u}));B(u=>({...u,ai_employees:(u?.ai_employees||[]).map((b,k)=>k===i?{...b,knowledge_sources:{...b.knowledge_sources,uploaded_files:[...b.knowledge_sources?.uploaded_files||[],...p]}}:b)})),n.target.value=""}},className:`w-full px-3 py-2 text-sm border-2 border-dashed ${s.border} rounded-lg ${s.cardBg} ${s.text} file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100`,accept:".pdf,.doc,.docx,.txt,.csv,.xlsx"}),e.jsx("p",{className:`text-xs ${s.textSecondary} mt-2`,children:"Supported formats: PDF, DOC, DOCX, TXT, CSV, XLSX"})]})]})]})]}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:`border-t ${s.border} pt-6`,children:[e.jsxs("h4",{className:`text-md font-semibold ${s.text} flex items-center gap-2 mb-4`,children:[e.jsx(es,{className:"w-4 h-4 text-green-600"}),"Instructions & Guidelines",e.jsx("span",{className:`text-xs ${s.textSecondary} font-normal`,children:"Set behavior guidelines"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Do's and Don'ts"}),e.jsx("textarea",{value:l?.instructions?.dos_and_donts||"",onChange:n=>S(i,"instructions.dos_and_donts",n.target.value),rows:4,placeholder:"Be professional, Don't share personal information...",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Fallback Contacts"}),e.jsx("input",{type:"text",value:l?.instructions?.fallback_contacts||"",onChange:n=>S(i,"instructions.fallback_contacts",n.target.value),placeholder:"atharkatheri@gmail.com",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]}),e.jsxs("div",{className:`border-t ${s.border} pt-6`,children:[e.jsxs("h4",{className:`text-md font-semibold ${s.text} flex items-center gap-2 mb-4`,children:[e.jsx(_s,{className:"w-4 h-4 text-orange-600"}),"Success Targets",e.jsx("span",{className:`text-xs ${s.textSecondary} font-normal`,children:"Define success metrics"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"What Success Looks Like"}),e.jsx("textarea",{value:l?.success_targets?.description||"",onChange:n=>S(i,"success_targets.description",n.target.value),rows:3,placeholder:"Lead qualification, booking appointments, FAQ deflection...",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Success Metrics"}),e.jsxs("div",{className:"space-y-2",children:[(l?.success_targets?.metrics||[""]).map((n,m)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:n,onChange:p=>{const u=[...l?.success_targets?.metrics||[]];u[m]=p.target.value,S(i,"success_targets.metrics",u)},placeholder:"80% FAQ resolution rate",disabled:!r,className:`flex-1 px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("button",{onClick:()=>{const p=(l?.success_targets?.metrics||[]).filter((u,b)=>b!==m);S(i,"success_targets.metrics",p)},className:"px-2 py-2 rounded-lg text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:e.jsx(ne,{className:"w-5 h-5"})})]},m)),e.jsxs("button",{onClick:()=>{const n=[...l?.success_targets?.metrics||[],""];S(i,"success_targets.metrics",n)},className:`flex items-center gap-2 px-3 py-2 border-2 border-dashed ${s.border} rounded-lg ${s.text} hover:bg-opacity-50 transition-colors text-sm`,children:[e.jsx(He,{className:"w-5 h-5"}),"Add Metric"]})]})]})]})]}),e.jsxs("div",{className:`border-t ${s.border} pt-6`,children:[e.jsxs("h4",{className:`text-md font-semibold ${s.text} flex items-center gap-2 mb-4`,children:[e.jsx(ps,{className:"w-4 h-4 text-purple-600"}),"Deployment Configuration",e.jsx("span",{className:`text-xs ${s.textSecondary} font-normal`,children:"Choose deployment options"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Service Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("label",{className:`flex items-center gap-3 p-3 border ${s.border} rounded-lg cursor-pointer transition-colors ${l?.deployment?.service_type==="shivai"?"bg-blue-50 border-blue-200 dark:bg-blue-900/20":""}`,children:[e.jsx("input",{type:"radio",name:`service_type_${i}`,checked:l?.deployment_service?.service_type==="shivai",onChange:n=>S(i,"deployment_service.service_type","shivai"),disabled:!r,className:`w-5 h-5 text-blue-500 ${r?"":"opacity-60 cursor-not-allowed"}`}),e.jsx("span",{className:"text-sm",children:"Shivai"})]}),e.jsxs("label",{className:`flex items-center gap-3 p-3 border ${s.border} rounded-lg cursor-pointer transition-colors ${l?.deployment?.service_type==="self"?"bg-blue-50 border-blue-200 dark:bg-blue-900/20":""}`,children:[e.jsx("input",{type:"radio",name:`service_type_${i}`,checked:l?.deployment_service?.service_type==="self",onChange:n=>S(i,"deployment_service.service_type","self"),disabled:!r,className:`w-5 h-5 text-blue-500 ${r?"":"opacity-60 cursor-not-allowed"}`}),e.jsx("span",{className:"text-sm",children:"Self-managed"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Channels"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Website","Mobile App"].map(n=>e.jsxs("label",{className:`flex items-center gap-2 px-3 py-2 border ${s.border} rounded-full cursor-pointer text-sm transition-colors ${(l?.deployment?.channels||[]).includes(n)?"bg-blue-50 border-blue-200 dark:bg-blue-900/20":""}`,children:[e.jsx("input",{type:"checkbox",checked:(l?.deployment?.channels||[]).includes(n),onChange:m=>{const p=l?.deployment?.channels||[],u=m.target.checked?[...p,n]:p.filter(b=>b!==n);S(i,"deployment.channels",u)},disabled:!r,className:`w-5 h-5 text-blue-500 ${r?"":"opacity-60 cursor-not-allowed"}`}),n]},n))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Deployment Notes"}),e.jsx("textarea",{value:l?.deployment_targets?.deployment_notes||"",onChange:n=>S(i,"deployment_targets.deployment_notes",n.target.value),rows:3,placeholder:"Phase 1: Website implementation...",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]}),e.jsxs("div",{className:`border-t ${s.border} pt-6`,children:[e.jsxs("h4",{className:`text-md font-semibold ${s.text} flex items-center gap-2 mb-4`,children:[e.jsx(ks,{className:"w-4 h-4 text-gray-600"}),"Consent & Privacy Options",e.jsx("span",{className:`text-xs ${s.textSecondary} font-normal`,children:"Privacy settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:l?.consent_options?.recording_enabled||!1,onChange:n=>S(i,"consent_options.recording_enabled",n.target.checked),disabled:!r,className:`w-5 h-5 text-blue-500 rounded ${r?"":"opacity-50 cursor-not-allowed"}`}),e.jsx("span",{className:"text-sm",children:"Recording Enabled"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:l?.consent_options?.transcript_email_optin||!1,onChange:n=>S(i,"consent_options.transcript_email_optin",n.target.checked),disabled:!r,className:`w-5 h-5 text-blue-500 rounded ${r?"":"opacity-50 cursor-not-allowed"}`}),e.jsx("span",{className:"text-sm",children:"Transcript Email Opt-in"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Privacy Notes"}),e.jsx("input",{type:"text",value:l?.consent_options?.privacy_notes||"",onChange:n=>S(i,"consent_options.privacy_notes",n.target.value),placeholder:"Privacy enabled",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]})]})]},i))})]})})]}):e.jsxs("div",{className:"space-y-4 md:space-y-6 px-2 sm:px-0",children:[e.jsx("div",{className:"relative -mx-2 sm:mx-0",children:e.jsxs("div",{className:"flex md:grid md:grid-cols-3 gap-3 md:gap-4 overflow-x-auto scrollbar-hide px-2 sm:px-0 snap-x snap-mandatory",children:[e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-4 md:p-6 shadow-lg min-w-[280px] sm:min-w-[320px] md:min-w-0 snap-center flex-shrink-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-3",children:[e.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-lg ${s.searchBg} flex items-center justify-center`,children:e.jsx(Le,{className:`w-5 h-5 ${s.textSecondary}`})}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-blue-500",children:"Total"})]}),e.jsx("h3",{className:`text-2xl md:text-3xl font-semibold ${s.text} mb-1 md:mb-2`,children:M?.total||te||me("all")}),e.jsx("p",{className:`text-xs md:text-sm font-medium ${s.text}`,children:"All Clients"}),M&&e.jsxs("p",{className:`text-xs ${s.textSecondary} mt-1`,children:["Page ",M.page||P," of"," ",M.totalPages||Z]})]}),e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-4 md:p-6 shadow-lg min-w-[280px] sm:min-w-[320px] md:min-w-0 snap-center flex-shrink-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-3",children:[e.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-lg ${s.searchBg} flex items-center justify-center`,children:e.jsx(Me,{className:`w-5 h-5 ${s.textSecondary}`})}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-yellow-500",children:"Pending"})]}),e.jsx("h3",{className:`text-2xl md:text-3xl font-semibold ${s.text} mb-1 md:mb-2`,children:me("pending")}),e.jsx("p",{className:`text-xs md:text-sm font-medium ${s.text}`,children:"Awaiting Review"})]}),e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-4 md:p-6 shadow-lg min-w-[280px] sm:min-w-[320px] md:min-w-0 snap-center flex-shrink-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-3",children:[e.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-lg ${s.searchBg} flex items-center justify-center`,children:e.jsx(We,{className:`w-5 h-5 ${s.textSecondary}`})}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-green-500",children:"Active"})]}),e.jsx("h3",{className:`text-2xl md:text-3xl font-semibold ${s.text} mb-1 md:mb-2`,children:me("approved")}),e.jsx("p",{className:`text-xs md:text-sm font-medium ${s.text}`,children:"Approved Clients"})]})]})}),e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-3 sm:p-4 md:p-6 shadow-lg`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 md:gap-4 mb-4 md:mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:`text-lg md:text-xl font-semibold ${s.text} flex items-center gap-2`,children:[e.jsx(Le,{className:"w-5 h-5"}),"Client Requests"]}),e.jsxs("p",{className:`${s.textSecondary} text-xs md:text-sm mt-1`,children:["(",M?.total||te||me("all")," total)"]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 w-full sm:w-auto",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:`p-2 rounded-lg ${s.hover} ${s.text} transition-all duration-200 flex-shrink-0`,title:"Refresh data",children:e.jsx(Ss,{className:"w-5 h-5"})}),e.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[e.jsx(Cs,{className:`absolute left-[92%] lg:left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${s.textSecondary}`}),e.jsx("input",{type:"text",placeholder:"Search...",value:$,onChange:l=>U(l.target.value),className:`w-full sm:w-48 md:w-64 pl-9 pr-3 py-2 text-sm rounded-lg border ${s.border} ${s.bg} ${s.text} focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent`})]})]})]}),e.jsx("div",{className:`flex gap-1 mb-4 md:mb-6 border-b ${s.border} overflow-x-auto scrollbar-hide -mx-3 sm:mx-0 px-3 sm:px-0`,children:["all","newlySignup","pending","onboarded","approved","rejected"].map(l=>{const i={all:{icon:es,label:"All"},newlySignup:{icon:qe,label:"Newly Signup"},pending:{icon:Me,label:"Pending"},onboarded:{icon:We,label:"Onboarded"},approved:{icon:As,label:"Approved"},rejected:{icon:ne,label:"Rejected"}},{icon:n,label:m}=i[l];return e.jsx("button",{onClick:()=>f(l),className:`flex-shrink-0 px-3 md:px-4 py-2 md:py-3 text-sm md:text-base font-medium transition-all duration-200 border-b-2 whitespace-nowrap ${j===l?`${s.activeBorder} ${s.text}`:`border-transparent ${s.textSecondary} ${s.hover}`}`,children:e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx(n,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),e.jsx("span",{className:"text-sm md:text-base",children:m})]})},l)})}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:je?e.jsxs("div",{className:`text-center py-12 md:py-16 rounded-lg ${s.cardBg} border ${s.border}`,children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 md:h-12 md:w-12 border-b-2 border-blue-500 mx-auto mb-3"}),e.jsx("h3",{className:`text-base md:text-lg font-semibold ${s.text} mb-2`,children:"Loading clients..."}),e.jsx("p",{className:`text-sm ${s.textSecondary}`,children:"Please wait while we fetch the data"})]}):Ne.length===0?e.jsxs("div",{className:`text-center py-8 md:py-12 rounded-lg ${s.cardBg} border ${s.border}`,children:[e.jsx(Ds,{className:`w-10 h-10 md:w-12 md:h-12 mx-auto mb-2 md:mb-3 ${s.textSecondary}`}),e.jsx("h3",{className:`text-base md:text-lg font-semibold ${s.text} mb-1 md:mb-2`,children:L?"No matching clients":"No client requests yet"}),e.jsx("p",{className:`text-sm ${s.textSecondary}`,children:L?"Try adjusting your search criteria":"No client requests available"})]}):Ne?.map(l=>e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-3 md:p-4 hover:shadow-md transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2 md:mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-9 h-9 md:w-10 md:h-10 rounded-lg ${s.activeBg} flex items-center justify-center flex-shrink-0`,children:e.jsx(Ye,{className:`w-5 h-5 ${s.text}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`font-semibold ${s.text} text-base md:text-lg truncate`,children:l?.userData?.fullName||l?.company_basics?.name||"Unknown"}),e.jsx("p",{className:`text-xs md:text-sm ${s.textSecondary} truncate`,children:l?.userData?.email||l?.company_basics?.company_email||"No email"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>A(l?.userData),className:`p-2 flex items-center justify-center ${s.textSecondary} rounded-lg ${s.activeBg} hover:scale-105 transition-all duration-200`,title:"View Client Details",children:e.jsx(Pe,{className:"w-5 h-5"})}),(l?.userData?.isOnboarded||l?.isOnboarded)&&e.jsx("button",{onClick:()=>{const i=l?.id||l?._id||l?.userData?.id||l?.userData?._id;a(`/dashboard/clients/${i}?tab=employees`,{state:{client:l}})},className:`p-2 flex items-center justify-center ${s.textSecondary} rounded-lg ${s.activeBg} hover:scale-105 transition-all duration-200`,title:"View AI Employee Analytics",children:e.jsx(gs,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>$e(l?.userData),className:`p-2 flex items-center justify-center ${s.textSecondary} rounded-lg ${s.activeBg} hover:scale-105 transition-all duration-200`,title:"Edit Client",children:e.jsx(Ze,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>Ae(l?.userData),className:"p-2 flex items-center justify-center text-red-500 rounded-lg hover:bg-red-50 hover:scale-105 transition-all duration-200",title:"Delete Client",children:e.jsx(us,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s.textSecondary} uppercase mb-0.5`,children:"Plan"}),e.jsx("p",{className:`${s.text} font-medium text-xs md:text-sm truncate`,children:(()=>{const i=l?.userData?.onboarding?.plan_type||l?.plan_details?.type,n=Ie.find(m=>m.apiKey===i);return n?`${n.name} (${n.price})`:i||"No plan"})()})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s.textSecondary} uppercase`,children:"Company"}),e.jsx("p",{className:`${s.text} font-medium text-sm`,children:l?.userData?.onboarding?.company_name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s.textSecondary} uppercase`,children:"Email"}),e.jsx("p",{className:`${s.text} font-medium text-sm truncate`,children:l?.userData?.onboarding?.company_email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s.textSecondary} uppercase`,children:"AI Employees"}),e.jsx("p",{className:`${s.text} font-medium text-sm`,children:l?.userData?.onboarding?.ai_employee_count||(l?.ai_employees||[]).length})]})]})]},l.id))}),Z>1&&e.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 md:gap-3 mt-4 md:mt-6 p-3 md:p-4 rounded-lg ${s.searchBg}`,children:[e.jsxs("div",{className:`text-xs md:text-sm ${s.textSecondary} text-center sm:text-left`,children:["Showing"," ",((M?.page||P)-1)*(M?.limit||X)+1," ","to"," ",Math.min((M?.page||P)*(M?.limit||X),M?.total||te)," ","of ",M?.total||te]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:Qe,disabled:P===1,className:`px-2.5 md:px-3 py-1.5 text-xs md:text-sm rounded-md transition-all duration-200 ${P===1?`${s.textSecondary} cursor-not-allowed opacity-50`:`${s.text} ${s.hover} hover:scale-105`}`,children:"Previous"}),e.jsxs("span",{className:`mx-2 md:mx-3 text-xs md:text-sm ${s.text}`,children:[M?.page||P,"/",M?.totalPages||Z]}),e.jsx("button",{onClick:ve,disabled:P===Z,className:`px-2.5 md:px-3 py-1.5 text-xs md:text-sm rounded-md transition-all duration-200 ${P===Z?`${s.textSecondary} cursor-not-allowed opacity-50`:`${s.text} ${s.hover} hover:scale-105`}`,children:"Next"})]})]})]})]})};export{Zs as AIEmployeesTab,qs as AgentDetailsView,Xs as ClientDetailsTab,Qs as OnboardingDataTab,Ts as TransactionsTab,ea as default};
