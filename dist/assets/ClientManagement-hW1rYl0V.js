import{u as gs,j as e,k as is,p as Je,o as te,m as Ge,w as He,x as us,t as os,r as Qe,y as ze,g as pe,R as re,B as We,D as bs,G as hs,H as ys,I as js,J as fs,K as Ns,N as vs,O as $s,P as ds,Q as ws,S as Ie,U as _s,V as Xe,W as ks,X as cs,Y as Ss,Z as Ze,_ as Te,$ as Cs,a0 as As,a1 as Ds,f as Bs,a2 as xs,q as ms,i as Ls,h as Es,a3 as Is,a4 as es,a5 as ss,v as G,z as F,a6 as Rs,a7 as as,a8 as ts,a9 as ls,aa as ns,ab as Ps,ac as qe,ad as ke,ae as Ms,af as Fs,ag as Us,ah as Os,ai as Ks,aj as Vs,ak as Gs,al as zs,am as Ws,L as qs,s as rs,an as Hs}from"./admin-S7chph35.js";import{u as Ys,d as Js,r as c}from"./router-CINeAvhf.js";import"./icons-DnVO2Lau.js";import"./vendor-DJG_os-6.js";const Ee=[{value:"saas-software",label:"SaaS & Software Development"},{value:"technology-it",label:"Technology / IT Services"},{value:"healthcare-clinics",label:"Healthcare & Clinics"},{value:"finance-insurance",label:"Finance & Insurance"},{value:"retail-ecommerce",label:"Retail & E-Commerce"},{value:"education-training",label:"Education & Training"},{value:"real-estate-property",label:"Real Estate & Property"},{value:"hospitality-travel",label:"Hospitality & Travel"},{value:"food-beverage",label:"Food & Beverage (Restaurants, Cafes, Catering)"},{value:"automotive-transportation",label:"Automotive & Transportation"},{value:"legal-professional",label:"Legal & Professional Services"},{value:"manufacturing-industrial",label:"Manufacturing & Industrial"},{value:"consulting-business",label:"Consulting & Business Services"},{value:"marketing-advertising",label:"Marketing & Advertising"},{value:"construction-home",label:"Construction & Home Services"},{value:"logistics-supply",label:"Logistics & Supply Chain"},{value:"media-entertainment",label:"Media & Entertainment"},{value:"beauty-wellness",label:"Beauty, Wellness & Personal Care"},{value:"nonprofit-community",label:"Nonprofit & Community Organizations"},{value:"other",label:"Other"}],Qs=[{value:"sales",label:"Sales & Business Development"},{value:"support",label:"Customer Support & Service"},{value:"appointment",label:"Appointment & Scheduling"},{value:"order",label:"Order Management & Billing"},{value:"product",label:"Product / Service Explainers"},{value:"feedback",label:"Feedback & Engagement"},{value:"custom",label:"Custom Workflows"}],ps=[{value:"sales-business-development",label:"Sales & Business Development"},{value:"customer-support-service",label:"Customer Support & Service"},{value:"appointment-scheduling",label:"Appointment & Scheduling"},{value:"order-billing",label:"Order Management & Billing"},{value:"product-service-explainers",label:"Product / Service Explainers"},{value:"feedback-engagement",label:"Feedback & Engagement"},{value:"custom-workflows",label:"Custom Workflows"}],Xs=[{value:"All",label:"ðŸŒ Multilingual"},{value:"ar",label:"ðŸ‡¸ðŸ‡¦ Arabic"},{value:"zh",label:"ðŸ‡¨ðŸ‡³ Chinese"},{value:"nl",label:"ðŸ‡³ðŸ‡± Dutch"},{value:"en-GB",label:"ðŸ‡¬ðŸ‡§ English (UK)"},{value:"en-US",label:"ðŸ‡ºðŸ‡¸ English (US)"},{value:"en-IN",label:"ðŸ‡®ðŸ‡³ English (India)"},{value:"fr",label:"ðŸ‡«ðŸ‡· French"},{value:"de",label:"ðŸ‡©ðŸ‡ª German"},{value:"hi",label:"ðŸ‡®ðŸ‡³ Hindi"},{value:"it",label:"ðŸ‡®ðŸ‡¹ Italian"},{value:"ja",label:"ðŸ‡¯ðŸ‡µ Japanese"},{value:"ko",label:"ðŸ‡°ðŸ‡· Korean"},{value:"pt",label:"ðŸ‡µðŸ‡¹ Portuguese"},{value:"pl",label:"ðŸ‡µðŸ‡± Polish"},{value:"ru",label:"ðŸ‡·ðŸ‡º Russian"},{value:"es",label:"ðŸ‡ªðŸ‡¸ Spanish"},{value:"tr",label:"ðŸ‡¹ðŸ‡· Turkish"}],Zs=[{value:"neutral",label:"Gender Neutral"},{value:"male",label:"Male"},{value:"female",label:"Female"}],Le=[{id:"starter",name:"Starter",apiKey:"Starter Plan",description:"Perfect for small businesses",maxAgents:1,aiEmployees:1,price:"$49/mo"},{id:"professional",name:"Professional",apiKey:"Professional Plan",description:"For Growing Teams & Small Businesses",maxAgents:5,aiEmployees:5,price:"$149/mo"},{id:"business",name:"Business",apiKey:"Business Plan",description:"For Scaling Companies & Mid-Sized Teams",maxAgents:15,aiEmployees:15,price:"$299/mo"},{id:"custom",name:"Custom",apiKey:"Custom Plan",description:"For Large Organizations & Enterprises",maxAgents:999,aiEmployees:999,price:"Custom"}],la=({client:d,currentTheme:s})=>{const[a,j]=c.useState(null),[z,$]=c.useState(!0),[U,R]=c.useState(null);return c.useEffect(()=>{(async()=>{const f=d?.userData?._id||d?._id||d?.userData?.id||d?.id;if(!f){console.warn("âš ï¸ No user ID found for fetching onboarding data"),$(!1);return}try{$(!0),R(null),console.log("ðŸ” Fetching onboarding data for user ID:",f);const v=await G.getOnboardingByUserId(f);console.log("âœ… Onboarding data fetched:",v);const _=v?.data?.onboarding||v?.onboarding||v?.data||v;j(_)}catch(v){console.error("âŒ Error fetching onboarding data:",v),R(v.message||"Failed to load onboarding data");const _=d?.onboardingDetails?.onboarding||d?.userData?.onboarding||d?.onboarding||{};_&&Object.keys(_).length>0&&(console.log("ðŸ“‹ Using fallback onboarding data from client prop"),j(_),R(null))}finally{$(!1)}})()},[d]),z?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mb-3"}),e.jsx("p",{className:`${s.textSecondary} text-sm`,children:"Loading onboarding data..."})]})}):U?e.jsxs("div",{className:`text-center py-8 rounded-lg border-2 border-dashed ${s.border} bg-red-50 dark:bg-red-900/10`,children:[e.jsx(te,{className:"w-12 h-12 mx-auto mb-3 text-red-500 opacity-50"}),e.jsx("p",{className:"text-red-600 dark:text-red-400 font-medium mb-2",children:"Error loading onboarding data"}),e.jsx("p",{className:"text-red-500 dark:text-red-300 text-sm opacity-75",children:U})]}):e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsx("h3",{className:`text-lg font-semibold ${s.text} mb-4`,children:"Onboarding Information"}),console.log("ðŸ” Onboarsssssssssssssding Data:",a),!a||a?.onboarding===null||Object.keys(a).length===0?e.jsxs("div",{className:`text-center py-8 rounded-lg border-2 border-dashed ${s.border}`,children:[e.jsx(re,{className:`w-12 h-12 mx-auto mb-3 ${s.textSecondary} opacity-50`}),e.jsx("p",{className:`${s.textSecondary} font-medium mb-2`,children:"No onboarding data available"}),e.jsx("p",{className:`${s.textSecondary} text-sm opacity-75`,children:"This client hasn't completed the onboarding process yet"})]}):e.jsxs("div",{className:"space-y-6",children:[a.company_basics&&e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[e.jsxs("h4",{className:`text-base md:text-lg font-semibold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(He,{className:"w-4 h-4 md:w-5 md:h-5"}),"Company Basics"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:[a.company_basics.name&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Company Name"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.company_basics.name})]}),a.company_basics.company_email&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Company Email"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.company_basics.company_email})]}),a.company_basics.company_phone&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Phone"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.company_basics.company_phone})]}),a.company_basics.website&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Website"}),e.jsx("p",{className:`${s.text} font-medium`,children:e.jsx("a",{href:a.company_basics.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:a.company_basics.website})})]}),a.company_basics.company_size&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Company Size"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.company_basics.company_size})]}),a.company_basics.linkedin_profile&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"LinkedIn"}),e.jsx("p",{className:`${s.text} font-medium`,children:e.jsx("a",{href:a.company_basics.linkedin_profile,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"LinkedIn Profile"})})]})]}),a.company_basics.industry&&Array.isArray(a.company_basics.industry)&&a.company_basics.industry.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Industries"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.company_basics.industry.map((y,f)=>{const v=Ee.find(_=>_.value===y)?.label||y;return e.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:v},f)})})]}),a.company_basics.description&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Description"}),e.jsx("p",{className:`${s.text} leading-relaxed`,children:a.company_basics.description})]}),a.company_basics.address&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Address"}),e.jsx("p",{className:`${s.text} leading-relaxed`,children:a.company_basics.address})]})]}),a.plan_details&&e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[e.jsxs("h4",{className:`text-base md:text-lg font-semibold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(os,{className:"w-4 h-4 md:w-5 md:h-5"}),"Plan Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[a.plan_details.type&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Plan Type"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.plan_details.type})]}),a.plan_details.billing_contact&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Billing Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.plan_details.billing_contact.name&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Name"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.plan_details.billing_contact.name})]}),a.plan_details.billing_contact.email&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Email"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.plan_details.billing_contact.email})]}),a.plan_details.billing_contact.phone&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Phone"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.plan_details.billing_contact.phone})]})]})]})]})]}),a.deployment_targets&&e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[e.jsxs("h4",{className:`text-base md:text-lg font-semibold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(cs,{className:"w-4 h-4 md:w-5 md:h-5"}),"Deployment Targets"]}),a.deployment_targets.channels&&Array.isArray(a.deployment_targets.channels)&&a.deployment_targets.channels.length>0&&e.jsxs("div",{className:"mb-3 md:mb-4",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Deployment Channels"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.deployment_targets.channels.map((y,f)=>e.jsx("span",{className:"bg-green-100 text-green-800 px-2 md:px-3 py-1 rounded-full text-xs md:text-sm font-medium capitalize",children:y.replace("_"," ")},f))})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[a.deployment_targets.website_url&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Website URL"}),e.jsx("p",{className:`${s.text} font-medium`,children:e.jsx("a",{href:a.deployment_targets.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:a.deployment_targets.website_url})})]}),a.deployment_targets.whatsapp_phone&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"WhatsApp Phone"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.deployment_targets.whatsapp_phone})]}),a.deployment_targets.support_email&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Support Email"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.deployment_targets.support_email})]})]})]}),a.ai_employees&&Array.isArray(a.ai_employees)&&a.ai_employees.length>0&&e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[e.jsxs("h4",{className:`text-base md:text-lg font-semibold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(pe,{className:"w-4 h-4 md:w-5 md:h-5"}),"AI Employees (",a.ai_employees.length,")"]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:a.ai_employees.map((y,f)=>e.jsxs("div",{className:`border ${s.border} rounded-lg p-3 md:p-4 ${s.searchBg}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(pe,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h5",{className:`font-medium ${s.text} truncate`,children:y?.name||`AI Employee #${f+1}`}),e.jsx("p",{className:`text-xs ${s.textSecondary} truncate`,children:y?.template||y?.type||"Custom Agent"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 text-sm",children:[y?.template&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Template"}),e.jsx("p",{className:`${s.text}`,children:ps.find(v=>v.value===y.template)?.label||y.template})]}),y?.preferred_language&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Language"}),e.jsx("p",{className:`${s.text}`,children:y.preferred_language})]}),y?.agent_personality&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Personality"}),e.jsx("p",{className:`${s.text} capitalize`,children:y.agent_personality})]}),y?.voice_gender&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Voice"}),e.jsxs("p",{className:`${s.text}`,children:[y.voice_gender," -"," ",y.voice_style||"Default"]})]})]}),y?.special_instructions&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Special Instructions"}),e.jsx("p",{className:`${s.text} text-sm leading-relaxed`,children:y.special_instructions})]}),y?.targets?.success_metrics&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Success Metrics"}),e.jsx("p",{className:`${s.text} text-sm leading-relaxed`,children:y.targets.success_metrics})]}),y?.knowledge_sources&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Knowledge Sources"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[y.knowledge_sources.website_url&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Website URL"}),e.jsx("p",{className:`${s.text}`,children:e.jsx("a",{href:y.knowledge_sources.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:y.knowledge_sources.website_url})})]}),y.knowledge_sources.faqs_text&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"FAQs Text"}),e.jsxs("p",{className:`${s.text}`,children:[y.knowledge_sources.faqs_text.substring(0,100),y.knowledge_sources.faqs_text.length>100?"...":""]})]})]})]}),y?.workflows&&Array.isArray(y.workflows)&&y.workflows.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Workflows"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.workflows.map((v,_)=>e.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-md text-xs font-medium",children:v.name},_))})]})]},f))})]})]})]})},na=({client:d,currentTheme:s})=>{const a=d?.userData||d||{},j=d?.company_basics||d?.userData?.onboarding?.company_basics||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:`text-lg font-semibold ${s.text} mb-4`,children:"Client Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Full Name"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.fullName||a.name||j.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Email"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.email||j.company_email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Phone"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.phone||j.company_phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Website"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.website||j.company_website||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Company Size"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.companySize||j.company_size||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d?.isApproved||a?.isApproved?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":d?.isRejected||a?.isRejected?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":a?.isActive?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:d?.isApproved||a?.isApproved?"approved":d?.isRejected||a?.isRejected?"rejected":a?.isActive?"Active":"Pending"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Email Verified"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a?.emailVerified?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:a?.emailVerified?"Verified":"Not Verified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Onboarded"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a?.isOnboarded?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:a?.isOnboarded?"Completed":"Pending"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Created At"}),e.jsx("p",{className:`${s.text} font-medium`,children:a?.createdAt?new Date(a.createdAt).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Last Login"}),e.jsx("p",{className:`${s.text} font-medium`,children:a?.lastLoginAt?new Date(a.lastLoginAt).toLocaleDateString():"N/A"})]})]}),(a?.address||j?.company_address)&&e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Company Address"}),e.jsx("p",{className:`${s.text} leading-relaxed`,children:a?.address||j?.company_address})]})]})},ra=({client:d,currentTheme:s,onViewAgent:a})=>{const[j,z]=c.useState([]),[$,U]=c.useState(!0),[R,y]=c.useState(null);return c.useEffect(()=>{(async()=>{if(!d){U(!1);return}try{U(!0),y(null),console.log("ðŸ”„ AIEmployeesTab mounted - fetching agents for client:",d?.id),console.log("ðŸ“‹ Client user ID:",d?.userData?.id),console.log("ðŸ“‹ Full client object:",d);const v=d?.userData?.id||d?.id||d?._id;if(!v){console.error("âŒ No user ID found in client object"),z([]),U(!1);return}console.log("âœ… Using user ID:",v);const _=await G.getAgentsById(v);console.log("ðŸ¤– AI Agents API Response:",_);let L=_?.data||_;console.log("ðŸ“¦ Raw agents data:",L),L?.agents&&Array.isArray(L.agents)&&(L=L.agents),Array.isArray(L)?(console.log("âœ… Agents data is an array with length:",L.length),L.length>0&&console.log("ðŸ“Š Sample agent data:",L[0]),z(L)):L&&typeof L=="object"?(console.log("ðŸ“¦ Single agent object, wrapping in array"),z([L])):(console.log("ðŸ“Š Response data is not an array or object:",typeof L),z([]))}catch(v){console.error("âŒ Error fetching AI employees:",v),console.error("âŒ Error details:",v?.response?.data),z([])}finally{U(!1)}})()},[d]),$?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:`text-lg font-semibold ${s.text}`,children:"AI Employees"})}),e.jsxs("div",{className:`text-center py-12 rounded-lg ${s.searchBg}`,children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:`${s.textSecondary}`,children:"Loading AI Employees..."})]})]}):R?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:`text-lg font-semibold ${s.text}`,children:"AI Employees"})}),e.jsxs("div",{className:`text-center py-12 rounded-lg ${s.searchBg}`,children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-3 text-red-500",children:e.jsx(Ls,{className:"w-full h-full"})}),e.jsx("h4",{className:`text-lg font-semibold ${s.text} mb-2`,children:"Error Loading Data"}),e.jsx("p",{className:`${s.textSecondary} mb-4`,children:R}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:"Retry"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h3",{className:`text-lg font-semibold ${s.text}`,children:["AI Employees (",j.length,")"]})}),j.length===0?e.jsxs("div",{className:`text-center py-12 rounded-lg ${s.searchBg}`,children:[e.jsx(pe,{className:`w-12 h-12 mx-auto mb-3 ${s.textSecondary}`}),e.jsx("h4",{className:`text-lg font-semibold ${s.text} mb-2`,children:"No AI Employees"}),e.jsx("p",{className:`${s.textSecondary}`,children:"This client hasn't created any AI employees yet."})]}):e.jsx("div",{className:"space-y-4",children:j.map((f,v)=>e.jsxs("div",{className:`${s.searchBg} rounded-lg p-4 border ${s.border}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${s.cardBg} border ${s.border} flex items-center justify-center`,children:e.jsx(pe,{className:`w-5 h-5 ${s.text}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-semibold ${s.text}`,children:f.name||"Unnamed Employee"}),e.jsx("p",{className:`text-sm ${s.textSecondary}`,children:f.type||"Assistant"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:f.is_active?"Active":"Inactive"}),e.jsxs("button",{onClick:()=>a&&a(f),className:`px-3 py-1 ${s.searchBg} hover:${s.hover} ${s.text} border ${s.border} text-sm font-medium rounded-lg transition-all duration-200 flex items-center gap-1`,title:"View Agent Details",children:[e.jsx(Ie,{className:"w-3 h-3"}),"View"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Agent ID"}),e.jsx("p",{className:`${s.text} text-sm font-mono`,children:f.id||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Language"}),e.jsx("p",{className:`${s.text} text-sm`,children:f.greeting?.language||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Voice"}),e.jsx("p",{className:`${s.text} text-sm`,children:f.voice||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Created"}),e.jsx("p",{className:`${s.text} text-sm`,children:f.created_at?new Date(f.created_at).toLocaleDateString():"N/A"})]})]})]},f._id||v))})]})},Ts=({agent:d,onBack:s,currentTheme:a})=>{if(!d)return e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500",children:"No agent data available"}),e.jsx("button",{onClick:s,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Back to List"})]});const[j,z]=c.useState("overview"),[$,U]=c.useState(!1),[R,y]=c.useState(!1),[f,v]=c.useState([]),[_,L]=c.useState(""),[q,ie]=c.useState(""),[x,B]=c.useState(!1),[H,K]=c.useState(""),[X,ge]=c.useState("en"),[ue,be]=c.useState({noiseSuppression:!0,echoCancellation:!0,autoGainControl:!0}),[he,Z]=c.useState(null),[Re,Pe]=c.useState([]),[Me,le]=c.useState(!1),[i,T]=c.useState(null),[Se,W]=c.useState([]),[V,ee]=c.useState(!1),[I,Y]=c.useState("transcripts"),[J,se]=c.useState(null),[Fe,Q]=c.useState(!1),[Ce,M]=c.useState(null),[oe,de]=c.useState(!1),[ne,ye]=c.useState(0),[ae,je]=c.useState(0),[ce,Ye]=c.useState(1),[fe,Ne]=c.useState(!1),[Ae,xe]=c.useState(1),C=c.useRef(null),ve=c.useRef(null),De=c.useMemo(()=>[{id:"overview",label:"Overview",icon:es},{id:"test",label:"Preview & Test",icon:ss},{id:"analytics",label:"Analytics",icon:xs},{id:"instructions",label:"Instructions",icon:re}],[]);c.useEffect(()=>{(async()=>{if(j==="analytics")try{le(!0);const n=d?.id||d?._id;if(!n){console.error("No agent ID found");return}console.log("ðŸ“‹ Fetching sessions for agent:",n);const g=await G.getAgentSessions(n);console.log("âœ… Sessions response:",g);const b=g?.sessions||g?.data?.sessions||g,N=Array.isArray(b)?b:[];Pe(N)}catch(n){console.error("âŒ Error fetching agent sessions:",n),F.error("Failed to load sessions"),Pe([])}finally{le(!1)}})()},[j,d]);const Ue=async(r,n)=>{try{Q(!0),M(null),console.log("ðŸ“Š Fetching call summary for agent:",r,"callId:",n);const g=await G.getCallSummary(r);console.log("âœ… Call summary response:",g),se(g)}catch(g){console.error("âŒ Error fetching call summary:",g),M("Failed to load call summary"),se(null)}finally{Q(!1)}},Oe=c.useCallback(async r=>{try{if(T(r),Y("transcripts"),de(!1),ye(0),je(0),xe(1),Ne(!1),r?.transcripts&&Array.isArray(r.transcripts))console.log("ðŸ“œ Using transcripts from session object:",r.transcripts),W(r.transcripts);else{ee(!0);const b=r?.session_id||r?.id||r?._id;console.log("ðŸ“œ Fetching transcripts for session:",b);const N=await G.getSessionTranscripts(b);console.log("âœ… Transcripts response:",N);const P=N?.transcripts||N?.data||N,O=Array.isArray(P)?P:[];W(O),ee(!1)}const n=r?.agentId||r?.agent_id,g=r?.callId||r?.session_id||r?.id;n&&g&&await Ue(n,g)}catch(n){console.error("âŒ Error fetching session data:",n),F.error("Failed to load session data"),W([]),ee(!1)}},[]),Ke=c.useCallback(()=>{T(null),W([]),se(null),Y("transcripts"),de(!1),C.current&&(C.current.pause(),C.current.currentTime=0)},[]),w=()=>{C.current&&(oe?C.current.pause():C.current.play(),de(!oe))},$e=()=>{C.current&&ye(C.current.currentTime)},Be=()=>{C.current&&je(C.current.duration)},Ve=r=>{if(!ve.current||!C.current)return;const n=ve.current.getBoundingClientRect(),b=(r.clientX-n.left)/n.width*ae;C.current.currentTime=b,ye(b)},k=()=>{C.current&&(fe?(C.current.volume=ce,Ne(!1)):(C.current.volume=0,Ne(!0)))},t=()=>{if(!C.current)return;const r=[.5,.75,1,1.25,1.5,2],n=r.indexOf(Ae),g=r[(n+1)%r.length];C.current.playbackRate=g,xe(g)},o=r=>{C.current&&(C.current.currentTime=Math.max(0,Math.min(ae,ne+r)))},l=r=>{const n=Math.floor(r/60),g=Math.floor(r%60);return`${n}:${g.toString().padStart(2,"0")}`},m=r=>r?new Date(r).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):"",p=r=>r?new Date(r).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A",u=c.useCallback(async()=>{try{if(y(!0),K("ðŸŽ¤ Requesting microphone access..."),!window.isSecureContext)throw new Error("HTTPS required for microphone access");try{(await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1,channelCount:1,sampleRate:48e3,sampleSize:16,volume:.6,latency:.05}})).getTracks().forEach(P=>P.stop()),K("âœ… Microphone access granted")}catch(N){throw new Error(`Microphone access denied: ${N.message}`)}const r=d?.id||d?._id;if(!r)throw new Error("Agent ID not found");K("ðŸ”— Getting LiveKit token...");const n=`admin_test_${Date.now()}`,g=await fetch("https://python.service.callshivai.com/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_id:r,language:X,call_id:n,device:"desktop",user_agent:navigator.userAgent})});if(!g.ok)throw new Error(`Failed to get LiveKit token: ${g.status}`);const b=await g.json();if(console.log("ðŸŽ¯ Token received for agent testing:",r,b),K("ðŸ”— Connecting to LiveKit..."),typeof window.LivekitClient>"u"){K("ðŸ“¦ Loading LiveKit SDK...");const N=document.createElement("script");N.src="https://unpkg.com/livekit-client@latest/dist/livekit-client.umd.js",N.onload=()=>{console.log("âœ… LiveKit SDK loaded"),h(b,r)},N.onerror=()=>{throw new Error("Failed to load LiveKit SDK")},document.head.appendChild(N)}else await h(b,r)}catch(r){console.error("Failed to start agent test call:",r),K(`âŒ Error: ${r.message}`),y(!1),U(!1)}},[d]),h=c.useCallback(async(r,n)=>{try{const g=window.LivekitClient,b=new g.Room({adaptiveStream:!0,dynacast:!0,audioCaptureDefaults:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,suppressLocalAudioPlayback:!0},publishDefaults:{audioPreset:g.AudioPresets.speech,dtx:!0,red:!1,simulcast:!1}});b.on(g.RoomEvent.TrackSubscribed,(N,P,O)=>{if(N.kind===g.Track.Kind.Audio){const E=N.attach();E.volume=.4,E.autoplay=!0,document.body.appendChild(E),E.play().catch(me=>console.warn("Audio autoplay blocked:",me))}}),b.on(g.RoomEvent.ParticipantMetadataChanged,(N,P)=>{if(N)try{const O=JSON.parse(N);(O.transcript||O.text)&&v(E=>[...E,{role:"agent",text:O.transcript||O.text,timestamp:new Date}])}catch{console.log("Metadata not JSON:",N)}}),b.on(g.RoomEvent.RoomMetadataChanged,N=>{if(N)try{const P=JSON.parse(N);(P.transcript||P.text)&&v(O=>[...O,{role:"agent",text:P.transcript||P.text,timestamp:new Date}])}catch{console.log("Room metadata not JSON:",N)}}),b.on(g.RoomEvent.Connected,async()=>{console.log("âœ… Connected to LiveKit room for agent testing"),U(!0),y(!1),K("ðŸŸ¢ Connected! You can now speak with the agent.");try{await b.localParticipant.setMicrophoneEnabled(!0,{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}),v([{role:"agent",text:d?.greeting?.en||`Hello! I'm ${d?.name||"Agent"}, ready for testing. How can I help you?`,timestamp:new Date}])}catch(N){console.error("Failed to enable microphone:",N)}}),b.on(g.RoomEvent.Disconnected,()=>{console.log("âŒ Disconnected from LiveKit room"),U(!1),K("ðŸ”´ Disconnected"),Z(null)}),await b.connect(r.url,r.token),Z(b)}catch(g){console.error("LiveKit connection failed:",g),K(`âŒ Connection failed: ${g.message}`),y(!1),U(!1)}},[d]),S=c.useCallback(async()=>{if(he)try{await he.disconnect(),console.log("âœ… Disconnected from LiveKit room")}catch(r){console.error("Error disconnecting from room:",r)}U(!1),y(!1),K("ðŸ“ž Call ended"),Z(null),v(r=>[...r,{role:"system",text:"Call ended",timestamp:new Date}])},[he]),A=c.useCallback(()=>{if(!_.trim()||!$)return;const r={role:"user",text:_.trim(),timestamp:new Date};v(n=>[...n,r]),L(""),setTimeout(()=>{const n=[`I received your message: "${r.text}". How can I help you with this?`,`Thank you for your message. As ${d?.name||"Agent"}, I'm here to assist you.`,`I understand you said: "${r.text}". Let me help you with that.`,`Got it! ${r.text}. What would you like to know more about?`],g={role:"agent",text:n[Math.floor(Math.random()*n.length)],timestamp:Date.now()};v(b=>[...b,g])},1e3+Math.random()*2e3)},[_,$,d]),D=c.useCallback(()=>{if(!q.trim())return;B(!0);const r={role:"user",text:q.trim(),timestamp:new Date};v(n=>[...n,r]),ie(""),setTimeout(()=>{const n=[`Thank you for testing! You said: "${r.text}". I'm ${d?.name||"Agent"} and I'm working correctly.`,`Test successful! As ${d?.name||"Agent"}, I received your message: "${r.text}". How can I assist you further?`,`Hello! This is ${d?.name||"Agent"}. I got your test message: "${r.text}". The agent is responding as expected.`,`Agent test complete! Your message: "${r.text}" was processed successfully by ${d?.name||"Agent"}.`],g={role:"agent",text:n[Math.floor(Math.random()*n.length)],timestamp:new Date};v(b=>[...b,g]),B(!1)},1500+Math.random()*1e3)},[q,d]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:s,className:`p-2 rounded-lg ${a.hover} ${a.text} transition-all duration-200`,children:e.jsx(is,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:`text-2xl font-bold ${a.text}`,children:d?.name||"Unnamed Agent"}),e.jsxs("p",{className:`text-sm ${a.textSecondary}`,children:["Agent ID: ",d?.id||d?._id||"N/A"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${d?.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:d?.is_active?"Active":"Inactive"})})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex space-x-8",children:De.map(r=>{const n=r.icon;return e.jsxs("button",{onClick:()=>z(r.id),className:`flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm ${j===r.id?"border-blue-500 text-blue-600 dark:text-blue-400":`border-transparent ${a.textSecondary} hover:text-gray-700 dark:hover:text-gray-300`}`,children:[e.jsx(n,{className:"w-4 h-4"}),r.label]},r.id)})})})]}),j==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:`${a.cardBg} rounded-lg p-4 border ${a.border}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(pe,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${a.textSecondary}`,children:"Agent Type"}),e.jsx("p",{className:`font-semibold ${a.text}`,children:"AI Assistant"})]})]})}),e.jsx("div",{className:`${a.cardBg} rounded-lg p-4 border ${a.border}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx(Rs,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${a.textSecondary}`,children:"Voice"}),e.jsx("p",{className:`font-semibold ${a.text}`,children:d?.voice||"Default"})]})]})}),e.jsx("div",{className:`${a.cardBg} rounded-lg p-4 border ${a.border}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx(ds,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${a.textSecondary}`,children:"Language"}),e.jsx("p",{className:`font-semibold ${a.text}`,children:d?.greeting?.language||"English"})]})]})})]}),e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Agent Name"}),e.jsx("p",{className:`${a.text}`,children:d.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Created By"}),e.jsx("p",{className:`${a.text}`,children:d.created_by||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Created Date"}),e.jsx("p",{className:`${a.text}`,children:d.created_at?new Date(d.created_at).toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Knowledge Base URL"}),e.jsx("p",{className:`${a.text} break-all`,children:d.knowledge_base_url||"N/A"})]})]})]})]}),j==="test"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsxs("h3",{className:`text-lg font-semibold ${a.text} mb-4 flex items-center gap-2`,children:[e.jsx(es,{className:"w-5 h-5"}),"Agent Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Agent Name"}),e.jsx("p",{className:`${a.text} font-semibold`,children:d?.name||"Unnamed Agent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Agent ID"}),e.jsx("p",{className:`${a.text} font-mono text-sm bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded`,children:d?.id||d?._id||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:d.is_active?"ðŸŸ¢ Active":"ðŸ”´ Inactive"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Model"}),e.jsx("p",{className:`${a.text}`,children:d.model||"gpt-4o-realtime-preview"})]})]})]}),e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4 flex items-center gap-2`,children:"ðŸŽ™ï¸ Live Voice Testing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Language"}),e.jsxs("select",{value:X,onChange:r=>ge(r.target.value),className:`w-full px-3 py-2 rounded-lg border ${a.border} ${a.cardBg} ${a.text} focus:outline-none focus:ring-2 focus:ring-blue-500/20`,disabled:$,children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"hi",children:"Hindi"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"}),e.jsx("option",{value:"pt",children:"Portuguese"}),e.jsx("option",{value:"zh",children:"Chinese"}),e.jsx("option",{value:"ja",children:"Japanese"}),e.jsx("option",{value:"ko",children:"Korean"}),e.jsx("option",{value:"ar",children:"Arabic"}),e.jsx("option",{value:"ru",children:"Russian"}),e.jsx("option",{value:"it",children:"Italian"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Audio Settings"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:ue.noiseSuppression,onChange:r=>be(n=>({...n,noiseSuppression:r.target.checked})),className:"mr-1",disabled:$}),"ðŸŽ§ Noise Cancellation"]}),e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:ue.echoCancellation,onChange:r=>be(n=>({...n,echoCancellation:r.target.checked})),className:"mr-1",disabled:$}),"ðŸ”Š Echo Cancellation"]}),e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:ue.autoGainControl,onChange:r=>be(n=>({...n,autoGainControl:r.target.checked})),className:"mr-1",disabled:$}),"ðŸ“Š Auto Gain"]})]})]})]}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsx("button",{onClick:u,disabled:R||$,className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${R||$?"bg-gray-400 text-white cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:R?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Connecting..."]}):$?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Connected"]}):e.jsx("span",{className:"flex items-center gap-2",children:"ðŸŽ¤ Start Voice Call"})}),$&&e.jsx("button",{onClick:S,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-all duration-200",children:"ðŸ“ž End Call"})]}),H&&e.jsx("div",{className:`p-3 rounded-lg mb-4 text-sm ${H.includes("Error")||H.includes("Failed")?"bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-300":H.includes("Connected")||H.includes("ðŸŸ¢")?"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-300":"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300"}`,children:H}),$&&e.jsxs("div",{className:`border ${a.border} rounded-lg overflow-hidden`,children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("span",{className:"text-sm font-medium",children:["ðŸ’¬ Live Conversation with ",d.name]})}),e.jsx("div",{className:"h-64 overflow-y-auto p-4 bg-gray-50 dark:bg-gray-900/50",style:{scrollBehavior:"smooth"},children:f.length===0?e.jsx("div",{className:"text-center text-gray-500 text-sm py-8",children:"ðŸŽ™ï¸ Start speaking or type a message to begin testing..."}):f.map((r,n)=>e.jsx("div",{className:`mb-3 flex ${r.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${r.role==="user"?"bg-blue-500 text-white rounded-br-sm":r.role==="agent"?"bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-bl-sm border":"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-300 text-center rounded"}`,children:[e.jsx("div",{className:"text-xs opacity-70 mb-1",children:r.role==="user"?"ðŸ‘¤ You":r.role==="agent"?"ðŸ¤– "+d.name:"System"}),e.jsx("div",{className:"text-sm",children:r.text}),e.jsx("div",{className:"text-xs opacity-50 mt-1",children:new Date(r.timestamp).toLocaleTimeString()})]})},n))}),e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:_,onChange:r=>L(r.target.value),onKeyDown:r=>r.key==="Enter"&&A(),placeholder:"Type a message to test text input...",className:`flex-1 px-3 py-2 text-sm rounded-lg border ${a.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20`,disabled:!$}),e.jsx("button",{onClick:A,disabled:!$||!_.trim(),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded-lg transition-colors",children:e.jsx(as,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"ðŸ’¡ You can type messages here or speak directly for voice testing"})]})]}),$&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((r,n)=>e.jsx("div",{className:"w-1 bg-blue-500 rounded-full animate-pulse",style:{height:`${Math.random()*20+10}px`,animationDelay:`${n*.1}s`,animationDuration:"1s"}},n))})})]})]}),j==="analytics"&&e.jsxs("div",{className:"space-y-6",children:[i&&e.jsx("div",{className:"fixed inset-0 -top-8 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4 backdrop-blur-sm overflow-y-auto",children:e.jsxs("div",{className:`${a.cardBg} rounded-lg sm:rounded-xl w-full max-w-3xl  max-h-[95vh] sm:max-h-[90vh] overflow-hidden shadow-2xl my-auto flex flex-col`,children:[e.jsxs("div",{className:`p-3 sm:p-4 border-b ${a.border}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2 sm:mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("div",{className:`w-7 h-7 sm:w-10 sm:h-10 ${a.activeBg} rounded-lg flex items-center justify-center flex-shrink-0`,children:e.jsx(ts,{className:`w-3.5 h-3.5 sm:w-5 sm:h-5 ${a.textSecondary}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:`text-sm sm:text-lg font-semibold ${a.text} truncate`,children:"Session Transcript"}),e.jsx("p",{className:`text-xs ${a.textSecondary} truncate font-mono`,children:i.session_id||i.id})]})]}),e.jsx("button",{onClick:Ke,className:`p-1 sm:p-2 ${a.textSecondary} rounded-lg ${a.hover} transition-colors flex-shrink-0`,children:e.jsx(ls,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 mb-2 sm:mb-3",children:[e.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${a.searchBg} px-2 py-1.5 rounded-md`,children:[e.jsx(ns,{className:`w-3 h-3 ${a.textSecondary} flex-shrink-0`}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:`text-xs ${a.textSecondary} hidden sm:block`,children:"Date & Time"}),e.jsx("span",{className:`text-xs font-medium ${a.text} truncate block`,children:p(i.start_time)})]})]}),e.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${a.searchBg} px-2 py-1.5 rounded-md`,children:[e.jsx(Ps,{className:`w-3 h-3 ${a.textSecondary} flex-shrink-0`}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:`text-xs ${a.textSecondary} hidden sm:block`,children:"IP Address"}),e.jsx("span",{className:`text-xs font-medium ${a.text} truncate block`,children:i.ipAddress||i.ip_address||"unknown"})]})]}),e.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${a.searchBg} px-2 py-1.5 rounded-md`,children:[e.jsx(qe,{className:`w-3 h-3 ${a.textSecondary} flex-shrink-0`}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:`text-xs ${a.textSecondary} hidden sm:block`,children:"Device â€¢ Duration"}),e.jsxs("span",{className:`text-xs font-medium ${a.text} truncate block`,children:[i.device?.deviceType||i.device?.device_type||"Unknown"," â€¢ ",i.duration]})]})]})]}),e.jsxs("div",{className:`flex gap-1 p-1 ${a.searchBg} rounded-lg`,children:[e.jsxs("button",{onClick:()=>Y("transcripts"),className:`flex-1 px-3 py-2 text-xs sm:text-sm font-medium rounded-md transition-all duration-200 ${I==="transcripts"?`${a.cardBg} ${a.text} shadow-sm`:`${a.textSecondary} hover:${a.text}`}`,children:[e.jsx(ts,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 inline mr-1.5"}),"Call Transcripts"]}),e.jsxs("button",{onClick:()=>Y("summary"),className:`flex-1 px-3 py-2 text-xs sm:text-sm font-medium rounded-md transition-all duration-200 ${I==="summary"?`${a.cardBg} ${a.text} shadow-sm`:`${a.textSecondary} hover:${a.text}`}`,children:[e.jsx(ke,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 inline mr-1.5"}),"Recording & Summary"]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4",children:[I==="transcripts"&&e.jsxs(e.Fragment,{children:[(i.token_usage||i.tokenUsage)&&e.jsxs("div",{className:`px-3 sm:px-4 py-3 mb-3 ${a.searchBg} rounded-lg`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ms,{className:`w-4 h-4 ${a.text}`}),e.jsx("h4",{className:`text-sm sm:text-base font-semibold ${a.text}`,children:"Token Usage"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4",children:[e.jsxs("div",{className:`${a.cardBg} rounded-lg p-2 sm:p-3 border ${a.border}`,children:[e.jsx("p",{className:`text-xs ${a.textSecondary} mb-1`,children:"Input"}),e.jsx("p",{className:`text-lg sm:text-xl font-bold ${a.text}`,children:((i.token_usage||i.tokenUsage)?.input_tokens||(i.token_usage||i.tokenUsage)?.inputTokens||0).toLocaleString()})]}),e.jsxs("div",{className:`${a.cardBg} rounded-lg p-2 sm:p-3 border ${a.border}`,children:[e.jsx("p",{className:`text-xs ${a.textSecondary} mb-1`,children:"Output"}),e.jsx("p",{className:`text-lg sm:text-xl font-bold ${a.text}`,children:((i.token_usage||i.tokenUsage)?.output_tokens||(i.token_usage||i.tokenUsage)?.outputTokens||0).toLocaleString()})]}),e.jsxs("div",{className:`${a.cardBg} rounded-lg p-2 sm:p-3 border ${a.border}`,children:[e.jsx("p",{className:`text-xs ${a.textSecondary} mb-1`,children:"Total"}),e.jsx("p",{className:"text-lg sm:text-xl font-bold text-blue-600",children:((i.token_usage||i.tokenUsage)?.total_tokens||(i.token_usage||i.tokenUsage)?.totalTokens||0).toLocaleString()})]})]})]}),e.jsxs("div",{className:`${a.searchBg} p-3 sm:p-4 rounded-lg`,children:[e.jsx("h3",{className:`text-sm sm:text-base font-semibold ${a.text} mb-3`,children:"Conversation Transcript"}),e.jsx("div",{className:"space-y-1 max-h-[250px] sm:max-h-[400px] overflow-y-auto",children:i.transcripts&&i.transcripts.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-xs sm:text-sm ${a.textSecondary} mb-2`,children:["Conversation started at ",p(i.start_time)]}),i.transcripts.map((r,n)=>e.jsx("div",{className:"flex flex-col gap-1.5 py-1.5 sm:py-2",children:r.speaker==="ai"||r.role==="agent"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-start mb-1",children:e.jsxs("span",{className:`text-xs ${a.textSecondary}`,children:["SHIVAI ASSISTANT â€¢ ",m(r.timestamp)]})}),e.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:e.jsx(Fs,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})}),e.jsx("div",{className:`max-w-[80%] ${a.cardBg} rounded-2xl rounded-tl-sm px-3 py-2 sm:px-4 sm:py-3 border ${a.border}`,children:e.jsx("p",{className:`text-xs sm:text-sm ${a.text}`,children:r.message||r.text})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsxs("span",{className:`text-xs ${a.textSecondary}`,children:["CUSTOMER â€¢ ",m(r.timestamp)]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"flex flex-col items-end max-w-[80%]",children:e.jsx("div",{className:"rounded-2xl rounded-tr-sm px-3 py-2 sm:px-4 sm:py-3 bg-gradient-to-br from-blue-500 to-blue-600",children:e.jsx("p",{className:"text-xs sm:text-sm text-white",children:r.message||r.text})})})})]})},n)),e.jsxs("p",{className:`text-xs ${a.textSecondary} mt-3 flex items-center gap-1`,children:[e.jsx(ns,{className:"w-3 h-3"}),"Session ended â€¢ Resolution: ",i.resolution]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ke,{className:`w-10 h-10 sm:w-12 sm:h-12 ${a.textSecondary} mx-auto mb-3`}),e.jsx("p",{className:`text-xs sm:text-sm ${a.textSecondary}`,children:"No transcripts available for this session"})]})})]})]}),I==="summary"&&e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:`${a.searchBg} p-3 sm:p-4 rounded-lg`,children:[e.jsxs("h3",{className:`text-sm sm:text-base font-semibold ${a.text} mb-3 flex items-center gap-2`,children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"})}),"Call Recording"]}),e.jsxs("div",{className:`${a.cardBg} p-4 rounded-xl border ${a.border}`,children:[e.jsx("audio",{ref:C,onTimeUpdate:$e,onLoadedMetadata:Be,onEnded:()=>de(!1),src:i.recordingUrl||"#"}),e.jsx("div",{ref:ve,onClick:Ve,className:`relative h-1 ${a.border} rounded-full cursor-pointer mb-2`,style:{backgroundColor:a==="dark"?"#334155":"#cbd5e1"},children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-600 rounded-full transition-all",style:{width:`${ae>0?ne/ae*100:0}%`}})}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:`text-xs ${a.textSecondary} w-10`,children:l(ne)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o(-10),className:`p-1.5 hover:${a.searchBg} rounded transition-colors`,title:"Rewind 10s",children:e.jsx(Us,{className:`w-4 h-4 ${a.textSecondary}`})}),e.jsx("button",{onClick:w,className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-colors",title:oe?"Pause":"Play",children:oe?e.jsx(Os,{className:"w-4 h-4",fill:"currentColor"}):e.jsx(Ks,{className:"w-4 h-4 ml-0.5",fill:"currentColor"})}),e.jsx("button",{onClick:()=>o(10),className:`p-1.5 hover:${a.searchBg} rounded transition-colors`,title:"Forward 10s",children:e.jsx(Vs,{className:`w-4 h-4 ${a.textSecondary}`})}),e.jsxs("button",{onClick:t,className:`px-2 py-1 hover:${a.searchBg} rounded transition-colors text-xs ${a.textSecondary}`,title:"Playback speed",children:[Ae,"x"]}),e.jsx("button",{onClick:k,className:`p-1.5 hover:${a.searchBg} rounded transition-colors`,title:fe?"Unmute":"Mute",children:fe?e.jsx(Gs,{className:`w-4 h-4 ${a.textSecondary}`}):e.jsx(zs,{className:`w-4 h-4 ${a.textSecondary}`})}),e.jsx("button",{className:`p-1.5 hover:${a.searchBg} rounded transition-colors`,title:"Download recording",children:e.jsx(Ws,{className:`w-4 h-4 ${a.textSecondary}`})})]}),e.jsx("span",{className:`text-xs ${a.textSecondary} w-10 text-right`,children:l(ae||i.duration||0)})]})]})]}),e.jsxs("div",{className:`${a.searchBg} p-3 sm:p-4 rounded-lg`,children:[e.jsxs("h3",{className:`text-sm sm:text-base font-semibold ${a.text} mb-3 flex items-center gap-2`,children:[e.jsx(ke,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Call Summary"]}),Fe?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(qs,{className:"w-6 h-6 text-blue-500 animate-spin"})}):Ce?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(ls,{className:`w-10 h-10 ${a.textSecondary} mx-auto mb-2`}),e.jsx("p",{className:`text-xs sm:text-sm ${a.textSecondary}`,children:Ce})]}):J?.data?.leads&&J.data.leads.length>0?(()=>{const r=J.data.leads.filter(n=>n.callId===(i.callId||i.session_id||i.id));return console.log("ðŸ” Filtering leads. Looking for callId:",i.callId||i.session_id||i.id),console.log("ðŸ” Available callIds:",J.data.leads.map(n=>n.callId)),console.log("ðŸ” Filtered leads:",r),r.length>0?e.jsx("div",{className:"space-y-4",children:r.map((n,g)=>e.jsxs("div",{className:`border ${a.border} rounded-lg p-3 sm:p-4 space-y-3`,children:[e.jsxs("div",{className:`flex items-center justify-between pb-2 border-b ${a.border}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-3.5 h-3.5 text-blue-500"}),e.jsx("span",{className:`text-xs font-mono ${a.textSecondary}`,children:n.callId||"N/A"})]}),n.createdAt&&e.jsx("span",{className:`text-xs ${a.textSecondary}`,children:new Date(n.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),n.intent&&e.jsxs("div",{className:"space-y-2",children:[n.intent.primary&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[e.jsx("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Primary Intent"}),e.jsx("p",{className:`text-xs sm:text-sm ${a.text} leading-relaxed`,children:n.intent.primary})]}),n.intent.details&&e.jsxs("div",{className:`${a.cardBg} p-3 rounded-lg border ${a.border}`,children:[e.jsx("p",{className:`text-xs font-medium ${a.textSecondary} mb-1`,children:"Details"}),e.jsx("p",{className:`text-xs sm:text-sm ${a.text} leading-relaxed`,children:n.intent.details})]}),n.urgency&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs ${a.textSecondary}`,children:"Urgency:"}),e.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${n.urgency==="high"?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400":n.urgency==="medium"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400"}`,children:n.urgency})]}),n.tags&&n.tags.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-medium ${a.textSecondary} mb-2`,children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:n.tags.map((b,N)=>e.jsx("span",{className:`px-2 py-0.5 ${a.cardBg} ${a.text} rounded-full text-xs border ${a.border}`,children:b},N))})]})]}),n.leadData&&e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-medium ${a.textSecondary} mb-2`,children:"Lead Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.leadData.name&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Users,{className:`w-4 h-4 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Name"}),e.jsx("p",{className:`text-sm font-medium ${a.text} truncate`,children:n.leadData.name})]})]}),n.leadData.email&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Mail,{className:`w-4 h-4 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Email"}),e.jsx("p",{className:`text-sm font-medium ${a.text} truncate`,children:n.leadData.email})]})]}),n.leadData.phone&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(qe,{className:`w-4 h-4 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Phone"}),e.jsx("p",{className:`text-sm font-medium ${a.text}`,children:n.leadData.phone})]})]}),n.leadData.status&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(TrendingUp,{className:`w-4 h-4 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Status"}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${n.leadData.status==="qualified"?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":n.leadData.status==="interested"?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":n.leadData.status==="new"?"bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-400":`${a.cardBg} ${a.text}`}`,children:[n.leadData.status==="qualified"&&e.jsx(CheckCircle,{className:"w-3 h-3"}),n.leadData.status]})]})]}),n.leadData.group_size&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Users,{className:`w-4 h-4 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Group Size"}),e.jsx("p",{className:`text-sm font-medium ${a.text}`,children:n.leadData.group_size})]})]}),n.leadData.dates&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Calendar,{className:`w-4 h-4 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Travel Dates"}),e.jsx("p",{className:`text-sm font-medium ${a.text}`,children:n.leadData.dates})]})]})]})]})]},n.id||g))}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(ke,{className:`w-10 h-10 ${a.textSecondary} mx-auto mb-2`}),e.jsx("p",{className:`text-xs sm:text-sm ${a.textSecondary}`,children:"No matching summary for this call"}),e.jsxs("p",{className:`text-xs ${a.textSecondary} mt-1`,children:["Call ID: ",i.callId||i.session_id||i.id]})]})})():e.jsxs("div",{className:"text-center py-6",children:[e.jsx(ke,{className:`w-10 h-10 ${a.textSecondary} mx-auto mb-2`}),e.jsx("p",{className:`text-xs sm:text-sm ${a.textSecondary}`,children:"No call summary available"})]})]})]})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text}`,children:"Session History"}),Me&&e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"})]}),Me?e.jsxs("div",{className:`text-center py-12 rounded-lg ${a.searchBg}`,children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:`${a.textSecondary}`,children:"Loading sessions..."})]}):Re.length===0?e.jsxs("div",{className:`text-center py-12 rounded-lg ${a.searchBg}`,children:[e.jsx(rs,{className:`w-12 h-12 mx-auto mb-3 ${a.textSecondary}`}),e.jsx("h4",{className:`text-lg font-semibold ${a.text} mb-2`,children:"No Sessions Yet"}),e.jsx("p",{className:`${a.textSecondary}`,children:"This agent hasn't had any sessions yet."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Re.map((r,n)=>{const g=r?.session_id||r?.id||`#${String(1e3+n).padStart(4,"0")}`,b=r?.status||"Completed",N=r?.duration_seconds||0,P=N>0?`${Math.floor(N/60)}m ${Math.floor(N%60)}s`:"0s",O=r?.total_messages||0,E=r?.start_time||new Date,me=r?.location||{},we=r?.token_usage||{};return e.jsxs("div",{className:`${a.cardBg} border ${a.border} rounded-lg p-4 hover:shadow-lg transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx(rs,{className:`w-4 h-4 ${a.textSecondary} flex-shrink-0`}),e.jsx("h4",{className:`font-semibold ${a.text} text-sm truncate`,children:g})]}),e.jsx("button",{onClick:()=>Oe(r),className:`p-1.5 ${a.textSecondary} rounded-lg ${a.activeBg} ${a.hover} transition-all duration-200 hover:shadow-lg flex-shrink-0`,title:"View Session",children:V&&i?.id===r?.id?e.jsx("div",{className:"w-3 h-3 border border-gray-600 border-t-transparent rounded-full animate-spin"}):e.jsx(Ie,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${b==="Completed"?"bg-green-500/10 text-green-600 border border-green-500/20":b==="In Progress"?"bg-blue-500/10 text-blue-600 border border-blue-500/20":"bg-gray-500/10 text-gray-600 border border-gray-500/20"}`,children:b})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:`text-xs font-medium ${a.textSecondary} mb-1`,children:"Date & Time"}),e.jsx("p",{className:`${a.text} text-sm font-medium`,children:new Date(E).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:new Date(E).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:`text-xs font-medium ${a.textSecondary} mb-1`,children:"Location"}),e.jsx("p",{className:`${a.text} text-sm font-medium truncate`,children:[me?.city,me?.country].filter(_e=>_e&&_e!=="unknown").join(", ")||"Unknown"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Device"}),e.jsx("p",{className:`${a.text} text-sm font-medium truncate`,children:r?.device?.device_type&&r.device.device_type!=="unknown"?r.device.device_type:"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Duration"}),e.jsx("p",{className:`${a.text} text-sm font-medium`,children:P})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Messages"}),e.jsx("p",{className:`${a.text} text-sm font-medium`,children:O})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Language"}),e.jsx("p",{className:`${a.text} text-sm font-medium uppercase`,children:r?.language||"EN"})]})]}),e.jsxs("div",{className:`pt-2 border-t ${a.border}`,children:[e.jsx("p",{className:`text-xs ${a.textSecondary} mb-1`,children:"Token Usage"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"In"}),e.jsx("p",{className:`${a.text} text-sm font-semibold`,children:we?.input_tokens?.toLocaleString()||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Out"}),e.jsx("p",{className:`${a.text} text-sm font-semibold`,children:we?.output_tokens?.toLocaleString()||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Total"}),e.jsx("p",{className:`${a.text} text-sm font-semibold`,children:we?.total_tokens?.toLocaleString()||0})]})]})]})]},r?.id||n)})})]})]}),j==="instructions"&&e.jsxs("div",{className:"space-y-6",children:[d.greeting&&e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Greeting Messages"}),e.jsx("div",{className:"space-y-4",children:Object.entries(d.greeting).map(([r,n])=>e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2 uppercase`,children:r}),e.jsx("div",{className:`p-3 rounded-lg ${a.searchBg} ${a.text}`,children:n})]},r))})]}),d.custom_instructions&&e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Custom Instructions"}),e.jsx("div",{className:`p-4 rounded-lg ${a.searchBg} ${a.text} whitespace-pre-wrap`,children:d.custom_instructions})]})]}),j==="preview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Agent Configuration Preview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`text-md font-semibold ${a.text} mb-3`,children:"Basic Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Model"}),e.jsx("p",{className:`${a.text} font-mono text-sm`,children:d.model||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Voice"}),e.jsx("p",{className:`${a.text}`,children:d.voice||"Default"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Temperature"}),e.jsx("p",{className:`${a.text}`,children:d.temperature||"0.7"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-md font-semibold ${a.text} mb-3`,children:"Voice Detection"}),d.turn_detection&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Type"}),e.jsx("p",{className:`${a.text}`,children:d.turn_detection.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Threshold"}),e.jsx("p",{className:`${a.text}`,children:d.turn_detection.threshold})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Silence Duration"}),e.jsxs("p",{className:`${a.text}`,children:[d.turn_detection.silence_duration_ms,"ms"]})]})]})]})]})]}),d.greeting&&e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Greeting Messages"}),e.jsx("div",{className:"space-y-4",children:Object.entries(d.greeting).map(([r,n])=>e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2 uppercase`,children:r}),e.jsx("div",{className:`p-3 rounded-lg ${a.searchBg} ${a.text}`,children:n})]},r))})]}),e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Test Agent Interface"}),e.jsx("div",{className:"space-y-4 mb-6",children:e.jsx("div",{className:`h-96 overflow-y-auto p-4 rounded-lg ${a.searchBg} border ${a.border}`,children:f.length===0?e.jsxs("div",{className:`text-center py-8 ${a.textSecondary}`,children:[e.jsx(ss,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Start a conversation to test the agent"})]}):e.jsxs("div",{className:"space-y-4",children:[f.map((r,n)=>e.jsx("div",{className:`flex ${(r.type||r.role)==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${(r.type||r.role)==="user"?"bg-blue-500 text-white":`${a.cardBg} ${a.text} border ${a.border}`}`,children:[e.jsx("p",{className:"text-sm",children:r.content||r.text}),e.jsx("p",{className:"text-xs mt-1 opacity-70",children:r.timestamp instanceof Date?r.timestamp.toLocaleTimeString():new Date(r.timestamp).toLocaleTimeString()})]})},n)),x&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${a.cardBg} ${a.text} border ${a.border}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),e.jsx("p",{className:"text-sm",children:"Agent is thinking..."})]})})})]})})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:q,onChange:r=>ie(r.target.value),onKeyPress:r=>r.key==="Enter"&&D(),placeholder:"Type your message to test the agent...",disabled:x,className:`flex-1 px-4 py-3 rounded-lg border ${a.border} ${a.cardBg} ${a.text} focus:outline-none focus:ring-2 focus:ring-blue-500/20 disabled:opacity-50`}),e.jsx("button",{onClick:D,disabled:x||!q.trim(),className:"px-6 py-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2 font-medium",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"w-4 h-4"}),"Send"]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>v([]),className:`px-4 py-2 rounded-lg ${a.hover} ${a.text} text-sm font-medium transition-colors duration-200 flex items-center gap-2`,children:[e.jsx(ms,{className:"w-4 h-4"}),"Clear Chat"]}),e.jsxs("button",{onClick:()=>{const r={type:"user",content:"Hello! Can you tell me about your capabilities?",timestamp:new Date};v(n=>[...n,r]),B(!0),setTimeout(()=>{const n={type:"agent",content:`Hi! I'm ${d.name}. I can help you with various tasks using voice interactions. Feel free to ask me anything!`,timestamp:new Date};v(g=>[...g,n]),B(!1)},1500)},className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm font-medium transition-colors duration-200 flex items-center gap-2",children:[e.jsx(Hs,{className:"w-4 h-4"}),"Demo Chat"]})]})]})]}),j==="instructions"&&e.jsxs("div",{className:"space-y-6",children:[d.custom_instructions&&e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Custom Instructions"}),e.jsx("div",{className:`p-4 rounded-lg ${a.searchBg} ${a.text} whitespace-pre-wrap`,children:d.custom_instructions})]}),e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"System Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Agent ID"}),e.jsx("div",{className:`p-3 rounded-lg ${a.searchBg} ${a.text} font-mono text-sm`,children:d?.id||d?._id||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Model Configuration"}),e.jsxs("div",{className:`p-3 rounded-lg ${a.searchBg} ${a.text}`,children:["Model: ",d.model||"N/A",e.jsx("br",{}),"Temperature: ",d.temperature||"0.7",e.jsx("br",{}),"Max Tokens: ",d.max_tokens||"Not specified"]})]})]})]})]})]})},ia=({client:d,currentTheme:s})=>{const a=[{id:1,date:"2024-12-01",amount:149,type:"subscription",status:"completed",description:"Monthly subscription"},{id:2,date:"2024-11-01",amount:149,type:"subscription",status:"completed",description:"Monthly subscription"},{id:3,date:"2024-10-15",amount:50,type:"usage",status:"completed",description:"Additional tokens"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:`text-lg font-semibold ${s.text}`,children:"Transaction History"})}),a.length===0?e.jsxs("div",{className:`text-center py-12 rounded-lg ${s.searchBg}`,children:[e.jsx(Es,{className:`w-12 h-12 mx-auto mb-3 ${s.textSecondary}`}),e.jsx("h4",{className:`text-lg font-semibold ${s.text} mb-2`,children:"No Transactions"}),e.jsx("p",{className:`${s.textSecondary}`,children:"No transaction history available for this client."})]}):e.jsx("div",{className:"space-y-3",children:a.map(j=>e.jsx("div",{className:`${s.searchBg} rounded-lg p-4 border ${s.border}`,children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center",children:e.jsx(Is,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:`font-semibold ${s.text}`,children:["$",j.amount.toFixed(2)]}),e.jsx("p",{className:`text-sm ${s.textSecondary}`,children:j.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:j.status}),e.jsx("p",{className:`text-sm ${s.textSecondary} mt-1`,children:j.date})]})]})},j.id))})]})},oa=()=>{const{theme:d,currentTheme:s}=gs(),a=Ys(),j=Js(),z=()=>new URLSearchParams(j.search).get("tab")||"all",[$,U]=c.useState(""),[R,y]=c.useState(""),[f,v]=c.useState(z()),[_,L]=c.useState(null),[q,ie]=c.useState("list"),[x,B]=c.useState(null),[H,K]=c.useState(null),[X,ge]=c.useState([]),[ue,be]=c.useState({all:0,newlySignup:0,pending:0,onboarded:0,approved:0,rejected:0}),[he,Z]=c.useState(!0),[Re,Pe]=c.useState(!1),[Me,le]=c.useState(null),[i,T]=c.useState(!1),[Se,W]=c.useState(!1),[V,ee]=c.useState(""),[I,Y]=c.useState(1),[J]=c.useState(10),[se,Fe]=c.useState(0),[Q,Ce]=c.useState(0),[M,oe]=c.useState(null),de=c.useRef(new Set),ne=c.useRef(!1);c.useEffect(()=>{const t=new URLSearchParams(j.search);if(t.get("tab")!==f){f==="all"?t.delete("tab"):t.set("tab",f);const l=t.toString(),m=l?`${j.pathname}?${l}`:j.pathname;a(m,{replace:!0})}},[f,j.pathname,j.search,a]),c.useEffect(()=>{const t=o=>{o.target.closest("[data-industry-dropdown]")||(console.log("Clicking outside industry dropdown"),W(!1))};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),c.useEffect(()=>{const t=setTimeout(()=>{$!==R&&(y($),Y(1))},500);return()=>clearTimeout(t)},[$,R]),c.useEffect(()=>{Y(1)},[f]);const ye=t=>{const o={page:I,limit:J};switch(t){case"all":return o;case"newlySignup":return{...o,isVerified:!1};case"pending":return{...o,isVerified:!0,isOnboarded:!1};case"onboarded":return{...o,isVerified:!0,isOnboarded:!0};case"approved":return{...o,onboardingStatus:"approved"};case"rejected":return{...o,onboardingStatus:"rejected"};default:return o}},ae=async(t=f,o=I)=>{if(ne.current){console.log("â­ï¸ Skipping fetch - already in progress");return}try{ne.current=!0,Z(!0),le(null),de.current.add(t);const l=ye(t);console.log(`ðŸ“¡ Fetching data for tab: ${t} with params:`,l);const m=await G.get("/v1/users",l);console.log(`âœ… Raw response for ${t}:`,m),console.log("âœ… Response data:",m.data);const p=m.data||m,u=p?.data?.users||p?.users||p||[],h=p?.meta||{},S=p?.data?.meta?.pagination||h?.pagination||{};console.log(`ðŸ“Š Extracted users (${u.length}):`,u.length>0?u.slice(0,2):"No users"),console.log("ðŸ“Š Meta data:",h),console.log("ðŸ“Š Pagination data:",S);const A=u.map(n=>({_id:n?.id||n?._id,onBoardingId:n?.onboarding?._id||null,userData:n,company_basics:{name:n?.onboarding?.company_name||n?.fullName||"Unknown",company_email:n?.onboarding?.company_email||n?.email,company_size:n?.onboarding?.address||n?.address||"Unknown",industry:[n?.onboarding?.region||"Not specified"]},plan_details:{type:n?.userData?.onboarding?.plan_type||n?.onboarding?.plan_type||n?.plan_type||"Selected",ai_employee_limit:n?.onboarding?.ai_employee_count||n?.ai_employee_count||1,monthly_price:(()=>{const g=n?.userData?.onboarding?.plan_type||n?.onboarding?.plan_type,b=Le.find(N=>N.apiKey===g);return b?.price==="Custom"?0:parseFloat(b?.price?.replace(/[$\/mo,]/g,"")||"0")})()},ai_employees:n?.onboarding?.ai_employees||Array.from({length:n?.onboarding?.ai_employee_count||0},(g,b)=>({id:`ai_${b+1}`,name:`AI Employee ${b+1}`,type:"Assistant",status:"Active"})),isOnBoarded:n?.isOnBoarded||!1,isApproved:n?.isApproved||!1,createdAt:n?.createdAt,lastLoginAt:n?.lastLoginAt,knowledge_sources:{website_url:n?.onboarding?.website_url||"",social_links:{linkedin:n?.onboarding?.linkedin||""},faqs_text:n?.onboarding?.faqs_text||"",uploaded_files:n?.onboarding?.uploaded_files||[]},deployment_targets:{channels:n?.onboarding?.channels||[]},instructions:{dos_and_donts:n?.onboarding?.dos_and_donts||"",fallback_contacts:n?.onboarding?.fallback_contacts||""},targets:{success_goals:n?.onboarding?.success_goals||"",success_metrics:n?.onboarding?.success_metrics||""}}));ge(A),oe(S);const D=S.total||h.total,r=S.totalPages||h.totalPages;D!==void 0&&(Fe(D),Ce(r||Math.ceil(D/J)),be(n=>({...n,[t]:D})),console.log(`âœ… Set count for ${t}:`,D))}catch(l){console.error("âŒ Error fetching data:",l),le(l.message),ge([])}finally{Z(!1),ne.current=!1}};c.useEffect(()=>{ae()},[f,I]),c.useMemo(()=>{let t=X;return R&&(t=X.filter(o=>{const l=R.toLowerCase();return o.company_basics?.name?.toLowerCase().includes(l)||o.company_basics?.company_email?.toLowerCase().includes(l)||o.userData?.fullName?.toLowerCase().includes(l)||o.userData?.email?.toLowerCase().includes(l)})),t},[X,R]);const je=c.useMemo(()=>X,[X]),ce=t=>ue[t]||0,Ye=()=>{I>1&&Y(t=>t-1)},fe=()=>{I<Q&&Y(t=>t+1)},Ne=async t=>{try{if(console.log("ðŸ” handleEditClient called with client:",t),Z(!0),L(t),t?.id){console.log(`ðŸš€ Fetching onboarding data for user: ${t.id}`);const o=await G.getOnboardingByUserId(t.id);console.log("âœ… Onboarding data response:",o);let l=t;o?.data?l={...t,onboardingDetails:o.data}:l={...t,onboardingDetails:{onboarding:null}};const m={_id:l._id,company_basics:{name:l?.onboardingDetails?.onboarding?.company_basics?.name||l?.company_basics?.name||"",description:l?.onboardingDetails?.onboarding?.company_basics?.description||l?.company_basics?.description||"",company_email:l?.onboardingDetails?.onboarding?.company_basics?.company_email||l?.company_basics?.company_email||"",company_phone:l?.onboardingDetails?.onboarding?.company_basics?.company_phone||l?.company_basics?.company_phone||"",website:l?.onboardingDetails?.onboarding?.company_basics?.website||l?.company_basics?.website||"",address:l?.onboardingDetails?.onboarding?.company_basics?.address||l?.company_basics?.address||"",company_size:l?.onboardingDetails?.onboarding?.company_basics?.company_size||l?.company_basics?.company_size||"",industry:l?.onboardingDetails?.onboarding?.company_basics?.industry||l?.company_basics?.industry||[],linkedin_profile:l?.onboardingDetails?.onboarding?.company_basics?.linkedin_profile||l?.company_basics?.linkedin_profile||"",primary_region:{countries:l?.onboardingDetails?.onboarding?.company_basics?.primary_region?.countries||[],states:l?.onboardingDetails?.onboarding?.company_basics?.primary_region?.states||[],cities:l?.onboardingDetails?.onboarding?.company_basics?.primary_region?.cities||[]}},ai_employees:(l?.onboardingDetails?.onboarding?.ai_employees||l?.ai_employees||[]).map(p=>({...p,knowledge_sources:{faqs_text:p?.knowledge_sources?.faqs_text||"",uploaded_files:p?.knowledge_sources?.uploaded_files||[],website_url:p?.knowledge_sources?.website_url||"",social_links:p?.knowledge_sources?.social_links||{},additional_sources:Array.isArray(p?.knowledge_sources)?p.knowledge_sources:p?.knowledge_sources?.additional_sources||[]}})),plan_details:l?.onboardingDetails?.onboarding?.plan_details||l?.plan_details||{},deployment_targets:l?.onboardingDetails?.onboarding?.deployment_targets||l?.deployment_targets||{},deployment_service:l?.onboardingDetails?.onboarding?.deployment_service||l?.deployment_service||{},consent_options:l?.onboardingDetails?.onboarding?.consent_options||l?.consent_options||{},instructions:l?.onboardingDetails?.onboarding?.instructions||l?.instructions||{},targets:l?.onboardingDetails?.onboarding?.targets||l?.targets||{},userData:l?.userData};B(m),ie("edit"),T(!1)}else console.error("âŒ No client._id available:",t),le("Client ID not found")}catch(o){console.error("âŒ Error fetching onboarding data:",o),le(`Failed to fetch client data: ${o.message}`)}finally{Z(!1)}},Ae=async t=>{try{const o=t?.id,l=t?.fullName||t?.name||"this client";if(console.log(`ðŸ—‘ï¸ Deleting client: ${l} (ID: ${o})`),!o){F.error("Client ID not found");return}const m=await G.deleteUser(o);m?.success?(F.success("Client deleted successfully"),await ae(f,I)):F.error(m?.message||"Failed to delete client")}catch(o){console.error("âŒ Error deleting client:",o),F.error("Failed to delete client")}},xe=()=>{L(null),ie("list"),B(null),T(!1),K(null)},C=async t=>{try{console.log("ðŸ” handleViewClient called with client:",t),a(`/dashboard/clients/${t?.id||t?._id}`,{state:{client:t}})}catch(o){console.error("âŒ Error navigating to client details:",o),F.error("Failed to navigate to client details")}},ve=async()=>{try{console.log("Saving edited data:",x),F.loading("Saving client data...",{id:"save-toast"});const t=n=>n?n.match(/^https?:\/\//i)?n:`https://${n}`:"",o=n=>n?n.split(" ").map(g=>g.charAt(0).toUpperCase()+g.slice(1).toLowerCase()).join(" "):"",l=n=>{const g=n.toLowerCase();return g.includes("male")&&!g.includes("female")?"Male":g.includes("female")?"Female":"Gender Neutral"},m=[],p={};(x.ai_employees||[]).forEach((n,g)=>{p[g]=[],(n.knowledge_sources?.uploaded_files||[]).forEach(b=>{b.pending_upload&&b.fileObject?m.push(b.fileObject):b.pending_upload||p[g].push(b)})});let u=[];if(m.length>0)try{console.log(`ðŸ“¤ Uploading ${m.length} files...`),u=(await G.uploadOnboardingFiles(m)).uploaded_files||[],console.log("âœ… Files uploaded:",u)}catch(n){console.error("âŒ Error uploading files:",n),F.error("Failed to upload files. Saving other data...",{id:"save-toast"})}const h=n=>{const b={"Sales & Business Development":"sales_business_development","Customer Support & Service":"customer_support_service","Appointment & Scheduling":"appointment_scheduling","Order Management & Billing":"order_management_billing","Product / Service Explainers":"product_service_explainers","Feedback & Engagement":"feedback_engagement","Custom Workflows":"custom_workflows"}[n];return b||(n||"").toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"").replace(/&/g,"and")},S=n=>{const g={website:"Website",app:"Mobile App",whatsapp:"WhatsApp"};return(n||[]).map(b=>g[b]||b)},A=n=>({managed:"Shivai","self-service":"Client",shivai:"Shivai",client:"Client"})[n]||n||"Shivai",D={company_basics:{name:x?.company_basics?.name||"",website:t(x?.company_basics?.website||""),company_size:x?.company_basics?.company_size||"",company_email:x?.company_basics?.company_email||"",company_phone:x?.company_basics?.company_phone||"",linkedin_profile:t(x?.company_basics?.linkedin_profile||""),description:x?.company_basics?.description||"",industry:Array.isArray(x?.company_basics?.industry)?x.company_basics.industry:[x?.company_basics?.industry||""],primary_region:{countries:x?.company_basics?.primary_region?.countries||[],states:x?.company_basics?.primary_region?.states||[],cities:x?.company_basics?.primary_region?.cities||[]}},plan_details:x?.plan_details||{},ai_employees:(x.ai_employees||[]).map((n,g)=>{const b=(n.knowledge_sources?.uploaded_files||[]).filter(E=>!E.pending_upload),N=[...p[g]||[]],P=(n.knowledge_sources?.uploaded_files||[]).filter(E=>E.pending_upload&&E.fileObject).length;if(P>0&&u.length>0){const E=Object.keys(p).slice(0,g).reduce((me,we)=>me+(x.ai_employees[we]?.knowledge_sources?.uploaded_files||[]).filter(_e=>_e.pending_upload&&_e.fileObject).length,0);N.push(...u.slice(E,E+P))}const O=(n.workflows||[]).map(E=>({name:E.name||"",instruction:E.instruction||""}));return{name:n.name||`AI Employee ${g+1}`,type:o(n.type||""),template:h(n.template||""),preferred_language:o(n.preferred_language||"English"),voice_gender:l(n.voice_gender||"Gender Neutral"),agent_personality:n.agent_personality||"",voice_style:n.voice_style||"",special_instructions:n.special_instructions||"",workflows:O,knowledge_sources:{website_url:t(n.knowledge_sources?.website_url||""),social_links:n.knowledge_sources?.social_links||{},faqs_text:n.knowledge_sources?.faqs_text||"",uploaded_files:N},deployment_targets:{channels:S(n?.deployment_targets?.channels||[]),deployment_notes:n.deployment_targets?.deployment_notes||""},deployment_service:{service_type:A(n.deployment_service?.service_type||"")},consent_options:{recording_enabled:n.consent_options?.recording_enabled||!1,transcript_email_optin:n.consent_options?.transcript_email_optin||!1,privacy_notes:n.consent_options?.privacy_notes||""},instructions:{dos_and_donts:n.instructions?.dos_donts||n.instructions?.dos_and_donts||"",fallback_contacts:n.instructions?.fallback_contacts||""},targets:{success_goals:n.success_targets?.description||n.targets?.success_goals||"",success_metrics:n.success_targets?.metrics||n.targets?.success_metrics||""}}})};console.log("ðŸ“¤ Sending payload:",JSON.stringify(D,null,2));const r=await G.updateClientData(x._id,D);if(console.log("âœ… Update response:",r),r&&(r.success===!0||r.statusCode===200))ge(n=>n.map(g=>g._id===x._id?{...g,...x,...D}:g)),F.success(r.message||"Client data updated successfully!",{id:"save-toast"}),T(!1),xe();else throw new Error(r?.message||"Update failed")}catch(t){console.error("Error saving client data:",t);const o=t?.response?.data?.message||t?.message||"Failed to save client data";F.error(o,{id:"save-toast"})}},De=()=>{T(!1),xe()},Ue=()=>{T(!i)},Oe=async t=>{try{const o=t?.s3_key||t?.key;if(!o){F.error("File key not found");return}const m=(await G.downloadFileByS3Key(o)).data,p=window.URL.createObjectURL(m);window.open(p,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(p),100)}catch(o){console.error("Error viewing file:",o),F.error("Failed to view file")}},Ke=async t=>{try{const o=t?.s3_key||t?.key,l=t?.name||t?.filename||"download";if(!o){F.error("File key not found");return}const p=(await G.downloadFileByS3Key(o)).data,u=window.URL.createObjectURL(p),h=document.createElement("a");h.href=u,h.download=l,document.body.appendChild(h),h.click(),document.body.removeChild(h),window.URL.revokeObjectURL(u),F.success("Download started")}catch(o){console.error("Error downloading file:",o),F.error("Failed to download file")}},w=(t,o)=>{B(l=>{const m={...l},p=t.split(".");let u=m;for(let h=0;h<p.length-1;h++)u[p[h]]||(u[p[h]]={}),u=u[p[h]];return u[p[p.length-1]]=o,m})},$e=t=>{console.log("updateIndustry called with:",t),B(o=>{const l={...o,company_basics:{...o?.company_basics,industry:t}};return console.log("Updated editData:",l),l})},Be=()=>{B(t=>({...t,ai_employees:[...t?.ai_employees||[],{name:"",type:"Assistant",template:"",preferred_language:"English",voice_gender:"Gender Neutral",agent_personality:"",voice_style:"",special_instructions:"",knowledge_sources:{faqs_text:"",uploaded_files:[],website_url:"",social_links:{},additional_sources:[]},workflows:[],_id:`new_${Date.now()}`}]}))},Ve=t=>{B(o=>({...o,ai_employees:(o?.ai_employees||[]).filter((l,m)=>m!==t)}))},k=(t,o,l)=>{B(m=>({...m,ai_employees:(m?.ai_employees||[]).map((p,u)=>{if(u!==t)return p;const h={...p};if(o.includes(".")){const S=o.split(".");let A=h;for(let D=0;D<S.length-1;D++)A[S[D]]||(A[S[D]]={}),A=A[S[D]];A[S[S.length-1]]=l}else h[o]=l;return h})}))};return q==="agentView"&&H?e.jsx(Ts,{agent:H,onBack:xe,currentTheme:s}):q==="details"&&_?(a(`/dashboard/clients/${_._id||_.userData?._id}`,{state:{client:_}}),ie("list"),null):q==="edit"&&x?e.jsxs("div",{className:"space-y-4 md:space-y-6 px-2 sm:px-0",children:[e.jsx("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-xl`,children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[e.jsxs("button",{onClick:De,className:`flex items-center justify-center sm:justify-start gap-2 px-4 py-2 rounded-lg ${s.hover} ${s.text} transition-all duration-200`,children:[e.jsx(is,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Cancel"})]}),e.jsxs("h2",{className:`text-xl md:text-2xl font-bold ${s.text} text-center sm:text-left`,children:["Edit: ",x?.company_basics?.name||"Client"]})]}),e.jsx("div",{className:"flex gap-2 sm:gap-3",children:i?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:De,className:`flex-1 sm:flex-none px-3 sm:px-4 py-2 border ${s.border} rounded-lg ${s.text} ${s.hover} transition-all duration-200 flex items-center justify-center gap-2 text-sm sm:text-base`,children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Cancel"})]}),e.jsxs("button",{onClick:ve,className:"flex-1 sm:flex-none admin-btn-primary px-3 sm:px-4 py-2 text-sm sm:text-base flex items-center justify-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Save"})]})]}):e.jsxs("button",{onClick:Ue,className:"flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg admin-btn-primary transition-all duration-200 flex items-center justify-center gap-2 text-sm sm:text-base",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Edit"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-xl`,children:[e.jsxs("h3",{className:`text-base md:text-lg font-bold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(He,{className:"w-4 h-4 md:w-5 md:h-5"}),"Company Basics"]}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Company Name *"}),e.jsx("input",{type:"text",value:x?.company_basics?.name||"",onChange:t=>w("company_basics.name",t.target.value),disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Description"}),e.jsx("textarea",{value:x?.company_basics?.description||"",onChange:t=>w("company_basics.description",t.target.value),rows:3,disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Company Size"}),e.jsxs("select",{value:x?.company_basics?.company_size||"",onChange:t=>w("company_basics.company_size",t.target.value),disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"1-10",children:"1-10"}),e.jsx("option",{value:"11-50",children:"11-50"}),e.jsx("option",{value:"51-200",children:"51-200"}),e.jsx("option",{value:"201-500",children:"201-500"}),e.jsx("option",{value:"501-1000",children:"501-1000"}),e.jsx("option",{value:"1000+",children:"1000+"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Industry (select up to 4)"}),e.jsxs("div",{className:"relative","data-industry-dropdown":!0,children:[e.jsx("input",{type:"text",value:V,onChange:t=>ee(t.target.value),onFocus:()=>W(!0),onClick:()=>i&&W(!0),disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"} ${(x?.company_basics?.industry||[]).length>=4?"cursor-not-allowed":""}`,placeholder:(x?.company_basics?.industry||[]).length>=4?"Maximum 4 industries selected":"Search or select industries"}),e.jsx(us,{className:`absolute right-2.5 top-2.5 w-4 h-4 text-gray-400 transition-transform cursor-pointer ${Se?"rotate-180":""}`,onClick:()=>i&&W(!Se)}),(x?.company_basics?.industry||[]).length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(x?.company_basics?.industry||[]).map((t,o)=>{const l=Ee.find(m=>m.value===t)?.label||t;return e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-md text-sm flex items-center gap-1",children:[l,i&&e.jsx("button",{type:"button",onClick:()=>{const m=(x?.company_basics?.industry||[]).filter((p,u)=>u!==o);$e(m)},className:"text-blue-600 hover:text-blue-800",children:e.jsx(te,{className:"w-3 h-3"})})]},o)})}),Se&&i&&e.jsxs("div",{className:`absolute z-50 w-full mt-1 ${s.cardBg} border ${s.border} rounded-lg shadow-xl max-h-48 overflow-y-auto`,onClick:t=>t.stopPropagation(),children:[Ee.filter(t=>t.label.toLowerCase().includes(V.toLowerCase())&&!(x?.company_basics?.industry||[]).includes(t.value)).map(t=>e.jsxs("div",{onClick:o=>{o.stopPropagation(),console.log("Industry option clicked:",t.value);const l=x?.company_basics?.industry||[];console.log("Current industries:",l),t.value==="other"?ee("Add your industry type"):l.length<4&&!l.includes(t.value)?(console.log("Adding industry:",t.value),$e([...l,t.value]),ee(""),setTimeout(()=>W(!1),100)):console.log("Max industries reached or already selected")},className:`px-3 py-2 border-b ${s.border} last:border-b-0 ${(x?.company_basics?.industry||[]).length>=4?"cursor-not-allowed text-gray-400 bg-gray-50":"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer"}`,children:[t.label,(x?.company_basics?.industry||[]).length>=4&&e.jsx("span",{className:"text-xs text-gray-400 ml-2",children:"(Max reached)"})]},t.value)),V&&!Ee.some(t=>t.label.toLowerCase().includes(V.toLowerCase()))&&!(x?.company_basics?.industry||[]).includes(V)&&e.jsxs("div",{onClick:t=>{t.stopPropagation(),console.log("Custom industry add clicked:",V);const o=x?.company_basics?.industry||[];o.length<4&&!o.includes(V)&&(console.log("Adding custom industry:",V),$e([...o,V]),ee(""),setTimeout(()=>W(!1),100))},className:`px-3 py-2 font-medium ${(x?.company_basics?.industry||[]).length>=4?"cursor-not-allowed text-gray-400 bg-gray-50":"hover:bg-blue-50 cursor-pointer text-blue-600"}`,children:['+ Add "',V,'"']})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Website"}),e.jsx("input",{type:"url",value:x?.company_basics?.website||"",onChange:t=>w("company_basics.website",t.target.value),disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Company Email"}),e.jsx("input",{type:"email",value:x?.company_basics?.company_email||"",onChange:t=>w("company_basics.company_email",t.target.value),disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Company Phone"}),e.jsx("input",{type:"tel",value:x?.company_basics?.company_phone||"",onChange:t=>w("company_basics.company_phone",t.target.value),disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Primary Region - Countries"}),e.jsx("input",{type:"text",value:(x?.company_basics?.primary_region?.countries||[]).join(", "),onChange:t=>{const o=t.target.value.split(",").map(l=>l.trim()).filter(l=>l);w("company_basics.primary_region.countries",o)},placeholder:"USA, Canada, UK (comma separated)",disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Primary Region - States/Provinces"}),e.jsx("input",{type:"text",value:(x?.company_basics?.primary_region?.states||[]).join(", "),onChange:t=>{const o=t.target.value.split(",").map(l=>l.trim()).filter(l=>l);w("company_basics.primary_region.states",o)},placeholder:"California, New York, Texas (comma separated)",disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Primary Region - Cities"}),e.jsx("input",{type:"text",value:(x?.company_basics?.primary_region?.cities||[]).join(", "),onChange:t=>{const o=t.target.value.split(",").map(l=>l.trim()).filter(l=>l);w("company_basics.primary_region.cities",o)},placeholder:"New York, Los Angeles, Chicago (comma separated)",disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]}),e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-xl`,children:[e.jsxs("h3",{className:`text-base md:text-lg font-bold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(os,{className:"w-4 h-4 md:w-5 md:h-5"}),"Plan Details"]}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Plan Type"}),e.jsxs("select",{value:x?.plan_details?.type||"",onChange:t=>{const o=Le.find(l=>l.apiKey===t.target.value);w("plan_details.type",t.target.value),o&&(w("plan_details.ai_employee_limit",o.aiEmployees),w("plan_details.monthly_price",o.price==="Custom"?0:parseFloat(o.price.replace(/[$\/mo,]/g,"")||"0")))},disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select Plan"}),Le.map(t=>e.jsxs("option",{value:t.apiKey,children:[t.name," - ",t.price]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Monthly Price ($)"}),e.jsx("input",{type:"number",value:x?.plan_details?.monthly_price||"",onChange:t=>w("plan_details.monthly_price",parseFloat(t.target.value)),disabled:!i||x?.plan_details?.type!=="Custom Plan",placeholder:x?.plan_details?.type==="Custom Plan"?"Enter custom price":"Auto-populated from plan",className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${!i||x?.plan_details?.type!=="Custom Plan"?"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed":`${s.cardBg} ${s.text}`}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"AI Employee Limit"}),e.jsx("input",{type:"number",value:x?.plan_details?.ai_employee_limit||"",onChange:t=>w("plan_details.ai_employee_limit",parseInt(t.target.value)),disabled:!i||x?.plan_details?.type!=="Custom Plan",placeholder:x?.plan_details?.type==="Custom Plan"?"Enter custom limit":"Auto-populated from plan",className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${!i||x?.plan_details?.type!=="Custom Plan"?"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed":`${s.cardBg} ${s.text}`}`})]}),e.jsxs("div",{className:`pt-4 border-t ${s.border}`,children:[e.jsx("h4",{className:`text-sm font-bold ${s.text} mb-3`,children:"Billing Contact"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:x?.plan_details?.billing_contact?.name||"",onChange:t=>w("plan_details.billing_contact.name",t.target.value),placeholder:"Contact Name",disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"email",value:x?.plan_details?.billing_contact?.email||"",onChange:t=>w("plan_details.billing_contact.email",t.target.value),placeholder:"Contact Email",disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"tel",value:x?.plan_details?.billing_contact?.phone||"",onChange:t=>w("plan_details.billing_contact.phone",t.target.value),placeholder:"Contact Phone",disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"text",value:x?.plan_details?.billing_contact?.company_name||"",onChange:t=>w("plan_details.billing_contact.company_name",t.target.value),placeholder:"Billing Company Name (if different)",disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]}),e.jsxs("div",{className:`pt-4 border-t ${s.border}`,children:[e.jsx("h4",{className:`text-sm font-bold ${s.text} mb-3`,children:"Billing Address"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:x?.plan_details?.billing_address?.street||"",onChange:t=>w("plan_details.billing_address.street",t.target.value),placeholder:"Street Address",disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:x?.plan_details?.billing_address?.city||"",onChange:t=>w("plan_details.billing_address.city",t.target.value),placeholder:"City",disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"text",value:x?.plan_details?.billing_address?.state||"",onChange:t=>w("plan_details.billing_address.state",t.target.value),placeholder:"State",disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:x?.plan_details?.billing_address?.postal_code||"",onChange:t=>w("plan_details.billing_address.postal_code",t.target.value),placeholder:"Postal Code",disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"text",value:x?.plan_details?.billing_address?.country||"",onChange:t=>w("plan_details.billing_address.country",t.target.value),placeholder:"Country",disabled:!i,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-xl lg:col-span-2`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6",children:[e.jsxs("h3",{className:`text-lg md:text-xl font-bold ${s.text} flex items-center gap-3`,children:[e.jsx("div",{className:`p-2 rounded-lg ${s.activeBg}`,children:e.jsx(Qe,{className:"w-5 h-5 md:w-6 md:h-6"})}),e.jsxs("div",{children:[e.jsx("span",{children:"AI Employees"}),e.jsxs("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${s.searchBg} ${s.textSecondary}`,children:[(x?.ai_employees||[]).length," configured"]})]})]}),e.jsxs("button",{onClick:Be,disabled:!i,className:`admin-btn-primary px-4 py-2.5 text-sm w-full sm:w-auto flex items-center justify-center gap-2 font-medium ${i?"":"opacity-60 cursor-not-allowed"}`,children:[e.jsx(ze,{className:"w-4 h-4"}),"Add AI Employee"]})]}),e.jsx("div",{className:"space-y-6",children:(x?.ai_employees||[]).length===0?e.jsxs("div",{className:`text-center py-12 border-2 border-dashed ${s.border} rounded-xl`,children:[e.jsx("div",{className:`p-3 rounded-full ${s.searchBg} w-16 h-16 mx-auto mb-4 flex items-center justify-center`,children:e.jsx(Qe,{className:`w-8 h-8 ${s.textSecondary}`})}),e.jsx("h4",{className:`text-lg font-medium ${s.text} mb-2`,children:"No AI Employees Yet"}),e.jsx("p",{className:`${s.textSecondary} text-sm mb-4`,children:"Add your first AI employee to get started with automation"}),i&&e.jsxs("button",{onClick:Be,className:"admin-btn-primary px-6 py-2.5 text-sm font-medium",children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"Create First AI Employee"]})]}):(x?.ai_employees||[]).map((t,o)=>e.jsxs("div",{className:`p-6 rounded-xl border ${s.border} ${s.searchBg} shadow-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.cardBg} border ${s.border}`,children:e.jsx(pe,{className:`w-5 h-5 ${s.text}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:`${s.text} font-bold text-lg`,children:t?.name||`AI Employee #${o+1}`}),e.jsxs("p",{className:`${s.textSecondary} text-sm`,children:[t?.type||"Assistant"," â€¢"," ",t?.preferred_language||"English"]})]})]}),(x?.ai_employees||[]).length>1&&e.jsx("button",{onClick:()=>Ve(o),className:`p-2 rounded-lg ${s.hover} text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center gap-2`,title:"Remove AI Employee",children:e.jsx(te,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Name"}),e.jsx("input",{type:"text",value:t?.name||"",onChange:l=>k(o,"name",l.target.value),disabled:!i,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Type"}),e.jsxs("select",{value:t?.type||"",onChange:l=>k(o,"type",l.target.value),disabled:!i,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select type"}),Qs.map(l=>e.jsx("option",{value:l.label,children:l.label},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Template"}),e.jsxs("select",{value:t?.template||"",onChange:l=>k(o,"template",l.target.value),disabled:!i,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select template"}),ps.map(l=>e.jsx("option",{value:l.label,children:l.label},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Language"}),e.jsxs("select",{value:t?.preferred_language||"",onChange:l=>k(o,"preferred_language",l.target.value),disabled:!i,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select language"}),Xs.map(l=>e.jsx("option",{value:l.label,children:l.label},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Voice Gender"}),e.jsxs("select",{value:t?.voice_gender||"",onChange:l=>k(o,"voice_gender",l.target.value),disabled:!i,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select voice gender"}),Zs.map(l=>e.jsx("option",{value:l.label,children:l.label},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Personality"}),e.jsx("input",{type:"text",value:t?.agent_personality||"",onChange:l=>k(o,"agent_personality",l.target.value),disabled:!i,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Voice Style"}),e.jsx("input",{type:"text",value:t?.voice_style||"",onChange:l=>k(o,"voice_style",l.target.value),placeholder:"e.g., Professional, Friendly, Energetic",disabled:!i,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Special Instructions"}),e.jsx("textarea",{value:t?.special_instructions||"",onChange:l=>k(o,"special_instructions",l.target.value),rows:2,disabled:!i,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block`,children:[e.jsx(re,{className:"w-4 h-4 inline mr-1"}),"Workflow Integrations (",(t?.workflows||[]).length,")"]}),e.jsxs("button",{type:"button",onClick:()=>{B(l=>({...l,ai_employees:(l?.ai_employees||[]).map((m,p)=>p===o?{...m,workflows:[...m.workflows||[],{name:"WhatsApp Business",instruction:"Configure WhatsApp Business integration"}]}:m)}))},className:"px-3 py-1 rounded-lg text-xs bg-green-50 text-green-700 border border-green-200 hover:bg-green-100 transition-colors flex items-center gap-1",children:[e.jsx(We,{className:"w-3 h-3"}),"Add Workflow"]})]}),e.jsx("div",{className:"space-y-3",children:(t?.workflows||[]).length>0?(t?.workflows||[]).map((l,m)=>e.jsxs("div",{className:`p-4 rounded-lg border ${s.border} ${s.cardBg}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h5",{className:`text-sm font-medium ${s.text} flex items-center gap-2`,children:[e.jsx(bs,{className:"w-4 h-4"}),"Workflow #",m+1]}),e.jsx("button",{type:"button",onClick:()=>{B(p=>({...p,ai_employees:(p?.ai_employees||[]).map((u,h)=>h===o?{...u,workflows:(u.workflows||[]).filter((S,A)=>A!==m)}:u)}))},className:`p-1 rounded ${s.hover} text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors`,children:e.jsx(te,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Integration Type"}),e.jsxs("select",{value:l?.name||"",onChange:p=>{B(u=>({...u,ai_employees:(u?.ai_employees||[]).map((h,S)=>S===o?{...h,workflows:(h.workflows||[]).map((A,D)=>D===m?{...A,name:p.target.value}:A)}:h)}))},disabled:!i,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select Integration"}),e.jsx("option",{value:"WhatsApp Business",children:"WhatsApp Business"}),e.jsx("option",{value:"Gmail",children:"Gmail"}),e.jsx("option",{value:"Webhooks",children:"Webhooks"}),e.jsx("option",{value:"Google Calendar",children:"Google Calendar"}),e.jsx("option",{value:"Calendly",children:"Calendly"}),e.jsx("option",{value:"Google Sheets",children:"Google Sheets"}),e.jsx("option",{value:"Zoho CRM",children:"Zoho CRM"}),e.jsx("option",{value:"Odoo",children:"Odoo"}),e.jsx("option",{value:"HubSpot",children:"HubSpot"}),e.jsx("option",{value:"Salesforce CRM",children:"Salesforce CRM"}),e.jsx("option",{value:"Zendesk",children:"Zendesk"}),e.jsx("option",{value:"Shopify",children:"Shopify"}),e.jsx("option",{value:"Slack",children:"Slack"}),e.jsx("option",{value:"Zapier",children:"Zapier"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Integration Instructions"}),e.jsx("textarea",{value:l?.instruction||"",onChange:p=>{B(u=>({...u,ai_employees:(u?.ai_employees||[]).map((h,S)=>S===o?{...h,workflows:(h.workflows||[]).map((A,D)=>D===m?{...A,instruction:p.target.value}:A)}:h)}))},rows:3,placeholder:"Enter specific instructions for this workflow integration...",disabled:!i,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),l?.name&&e.jsx("div",{className:`p-3 rounded-lg ${s.searchBg} border ${s.border}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:`p-2 rounded-lg ${s.activeBg}`,children:[l?.name==="WhatsApp Business"&&e.jsx(hs,{className:"w-4 h-4 text-green-600"}),l?.name==="Gmail"&&e.jsx(ys,{className:"w-4 h-4 text-blue-600"}),l?.name==="Google Calendar"&&e.jsx(js,{className:"w-4 h-4 text-blue-600"}),l?.name==="Shopify"&&e.jsx(fs,{className:"w-4 h-4 text-green-600"}),l?.name==="Slack"&&e.jsx(Ns,{className:"w-4 h-4 text-purple-600"}),!["WhatsApp Business","Gmail","Google Calendar","Shopify","Slack"].includes(l?.name)&&e.jsx(vs,{className:"w-4 h-4 text-gray-600"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h6",{className:`text-sm font-medium ${s.text} mb-1`,children:[l?.name," Integration"]}),e.jsx("p",{className:`text-xs ${s.textSecondary}`,children:l?.instruction||"No instructions provided"}),e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mr-1"}),"Configured"]})})]})]})})]})]},m)):e.jsxs("div",{className:`text-center py-6 border-2 border-dashed ${s.border} rounded-lg`,children:[e.jsx(re,{className:`w-8 h-8 mx-auto mb-2 ${s.textSecondary} opacity-50`}),e.jsx("p",{className:`${s.textSecondary} text-sm font-medium mb-1`,children:"No workflow integrations configured"}),e.jsx("p",{className:`${s.textSecondary} text-xs mb-3 opacity-75`,children:"Add integrations like WhatsApp, Gmail, CRM systems to enhance this AI employee"}),e.jsxs("button",{type:"button",onClick:()=>{B(l=>({...l,ai_employees:(l?.ai_employees||[]).map((m,p)=>p===o?{...m,workflows:[{name:"",instruction:""}]}:m)}))},className:"px-4 py-2 rounded-lg text-sm bg-blue-50 text-blue-700 border border-blue-200 hover:bg-blue-100 transition-colors flex items-center gap-2 mx-auto",children:[e.jsx(We,{className:"w-4 h-4"}),"Add Your First Workflow"]})]})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block`,children:[e.jsx($s,{className:"w-4 h-4 inline mr-1"}),"Knowledge Sources"]})}),e.jsxs("div",{className:"mb-4 p-4 rounded-lg border ${currentTheme.border} ${currentTheme.searchBg}",children:[e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:[e.jsx(ds,{className:"w-4 h-4 inline mr-1"}),"Website URL"]}),e.jsx("input",{type:"url",value:t?.knowledge_sources?.website_url||"",onChange:l=>{B(m=>({...m,ai_employees:(m?.ai_employees||[]).map((p,u)=>u===o?{...p,knowledge_sources:{...p.knowledge_sources,website_url:l.target.value}}:p)}))},placeholder:"https://example.com",disabled:!i,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"mb-4 p-4 rounded-lg border ${currentTheme.border} ${currentTheme.searchBg}",children:[e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:[e.jsx(ws,{className:"w-4 h-4 inline mr-1"}),"FAQs / Knowledge Text"]}),e.jsx("textarea",{value:t?.knowledge_sources?.faqs_text||"",onChange:l=>{B(m=>({...m,ai_employees:(m?.ai_employees||[]).map((p,u)=>u===o?{...p,knowledge_sources:{...p.knowledge_sources,faqs_text:l.target.value}}:p)}))},rows:4,placeholder:"Enter frequently asked questions and answers, or any text-based knowledge...",disabled:!i,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"mb-4 p-4 rounded-lg border ${currentTheme.border} ${currentTheme.searchBg}",children:[e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:[e.jsx(re,{className:"w-4 h-4 inline mr-1"}),"Uploaded Files (",(t?.knowledge_sources?.uploaded_files||[]).length,")"]}),(t?.knowledge_sources?.uploaded_files||[]).length>0?e.jsx("div",{className:"space-y-2",children:(t?.knowledge_sources?.uploaded_files||[]).map((l,m)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${s.border} ${s.cardBg}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx(re,{className:`w-4 h-4 ${s.textSecondary}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm font-medium ${s.text} truncate`,children:l.original_name||l.filename||l.name||"Unnamed File"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.file_size&&e.jsxs("span",{className:`text-xs ${s.textSecondary}`,children:[(l.file_size/1024).toFixed(1)," ","KB"]}),l.file_type&&e.jsx("span",{className:`text-xs ${s.textSecondary} bg-gray-100 px-2 py-0.5 rounded`,children:l.file_type})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>Oe(l),className:`p-2 rounded-lg ${s.hover} ${s.textSecondary} hover:text-blue-600 transition-colors`,title:"View File",children:e.jsx(Ie,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Ke(l),className:`p-2 rounded-lg ${s.hover} ${s.textSecondary} hover:text-green-600 transition-colors`,title:"Download File",children:e.jsx(_s,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{B(p=>({...p,ai_employees:(p?.ai_employees||[]).map((u,h)=>h===o?{...u,knowledge_sources:{...u.knowledge_sources,uploaded_files:(u.knowledge_sources?.uploaded_files||[]).filter((S,A)=>A!==m)}}:u)}))},className:`p-2 rounded-lg ${s.hover} text-red-500 hover:bg-red-50 transition-colors`,title:"Remove File",children:e.jsx(te,{className:"w-4 h-4"})})]})]},m))}):e.jsxs("div",{className:`text-center py-6 border-2 border-dashed ${s.border} rounded-lg`,children:[e.jsx(re,{className:`w-8 h-8 mx-auto mb-2 ${s.textSecondary} opacity-50`}),e.jsx("p",{className:`${s.textSecondary} text-sm`,children:"No files uploaded yet"}),e.jsx("p",{className:`${s.textSecondary} text-xs mt-1 opacity-75`,children:"Files will appear here when uploaded during onboarding"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("input",{type:"file",multiple:!0,disabled:!i,onChange:l=>{const m=Array.from(l.target.files||[]);if(m.length>0){const p=m.map(u=>({name:u.name,original_name:u.name,file_size:u.size,file_type:u.type,pending_upload:!0,fileObject:u}));B(u=>({...u,ai_employees:(u?.ai_employees||[]).map((h,S)=>S===o?{...h,knowledge_sources:{...h.knowledge_sources,uploaded_files:[...h.knowledge_sources?.uploaded_files||[],...p]}}:h)})),l.target.value=""}},className:`w-full px-3 py-2 text-sm border-2 border-dashed ${s.border} rounded-lg ${s.cardBg} ${s.text} file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100`,accept:".pdf,.doc,.docx,.txt,.csv,.xlsx"}),e.jsx("p",{className:`text-xs ${s.textSecondary} mt-2`,children:"Supported formats: PDF, DOC, DOCX, TXT, CSV, XLSX"})]})]})]})]}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:`border-t ${s.border} pt-6`,children:[e.jsxs("h4",{className:`text-md font-semibold ${s.text} flex items-center gap-2 mb-4`,children:[e.jsx(Xe,{className:"w-4 h-4 text-green-600"}),"Instructions & Guidelines",e.jsx("span",{className:`text-xs ${s.textSecondary} font-normal`,children:"Set behavior guidelines"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Do's and Don'ts"}),e.jsx("textarea",{value:t?.instructions?.dos_and_donts||"",onChange:l=>k(o,"instructions.dos_and_donts",l.target.value),rows:4,placeholder:"Be professional, Don't share personal information...",disabled:!i,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Fallback Contacts"}),e.jsx("input",{type:"text",value:t?.instructions?.fallback_contacts||"",onChange:l=>k(o,"instructions.fallback_contacts",l.target.value),placeholder:"atharkatheri@gmail.com",disabled:!i,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]}),e.jsxs("div",{className:`border-t ${s.border} pt-6`,children:[e.jsxs("h4",{className:`text-md font-semibold ${s.text} flex items-center gap-2 mb-4`,children:[e.jsx(ks,{className:"w-4 h-4 text-orange-600"}),"Success Targets",e.jsx("span",{className:`text-xs ${s.textSecondary} font-normal`,children:"Define success metrics"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"What Success Looks Like"}),e.jsx("textarea",{value:t?.success_targets?.description||"",onChange:l=>k(o,"success_targets.description",l.target.value),rows:3,placeholder:"Lead qualification, booking appointments, FAQ deflection...",disabled:!i,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Success Metrics"}),e.jsxs("div",{className:"space-y-2",children:[(t?.success_targets?.metrics||[""]).map((l,m)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l,onChange:p=>{const u=[...t?.success_targets?.metrics||[]];u[m]=p.target.value,k(o,"success_targets.metrics",u)},placeholder:"80% FAQ resolution rate",disabled:!i,className:`flex-1 px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("button",{onClick:()=>{const p=(t?.success_targets?.metrics||[]).filter((u,h)=>h!==m);k(o,"success_targets.metrics",p)},className:"px-2 py-2 rounded-lg text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:e.jsx(te,{className:"w-4 h-4"})})]},m)),e.jsxs("button",{onClick:()=>{const l=[...t?.success_targets?.metrics||[],""];k(o,"success_targets.metrics",l)},className:`flex items-center gap-2 px-3 py-2 border-2 border-dashed ${s.border} rounded-lg ${s.text} hover:bg-opacity-50 transition-colors text-sm`,children:[e.jsx(We,{className:"w-4 h-4"}),"Add Metric"]})]})]})]})]}),e.jsxs("div",{className:`border-t ${s.border} pt-6`,children:[e.jsxs("h4",{className:`text-md font-semibold ${s.text} flex items-center gap-2 mb-4`,children:[e.jsx(cs,{className:"w-4 h-4 text-purple-600"}),"Deployment Configuration",e.jsx("span",{className:`text-xs ${s.textSecondary} font-normal`,children:"Choose deployment options"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Service Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("label",{className:`flex items-center gap-3 p-3 border ${s.border} rounded-lg cursor-pointer transition-colors ${t?.deployment?.service_type==="shivai"?"bg-blue-50 border-blue-200 dark:bg-blue-900/20":""}`,children:[e.jsx("input",{type:"radio",name:`service_type_${o}`,checked:t?.deployment_service?.service_type==="shivai",onChange:l=>k(o,"deployment_service.service_type","shivai"),disabled:!i,className:`w-4 h-4 text-blue-500 ${i?"":"opacity-60 cursor-not-allowed"}`}),e.jsx("span",{className:"text-sm",children:"Shivai"})]}),e.jsxs("label",{className:`flex items-center gap-3 p-3 border ${s.border} rounded-lg cursor-pointer transition-colors ${t?.deployment?.service_type==="self"?"bg-blue-50 border-blue-200 dark:bg-blue-900/20":""}`,children:[e.jsx("input",{type:"radio",name:`service_type_${o}`,checked:t?.deployment_service?.service_type==="self",onChange:l=>k(o,"deployment_service.service_type","self"),disabled:!i,className:`w-4 h-4 text-blue-500 ${i?"":"opacity-60 cursor-not-allowed"}`}),e.jsx("span",{className:"text-sm",children:"Self-managed"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Channels"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Website","Mobile App"].map(l=>e.jsxs("label",{className:`flex items-center gap-2 px-3 py-2 border ${s.border} rounded-full cursor-pointer text-sm transition-colors ${(t?.deployment?.channels||[]).includes(l)?"bg-blue-50 border-blue-200 dark:bg-blue-900/20":""}`,children:[e.jsx("input",{type:"checkbox",checked:(t?.deployment?.channels||[]).includes(l),onChange:m=>{const p=t?.deployment?.channels||[],u=m.target.checked?[...p,l]:p.filter(h=>h!==l);k(o,"deployment.channels",u)},disabled:!i,className:`w-3 h-3 text-blue-500 ${i?"":"opacity-60 cursor-not-allowed"}`}),l]},l))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Deployment Notes"}),e.jsx("textarea",{value:t?.deployment_targets?.deployment_notes||"",onChange:l=>k(o,"deployment_targets.deployment_notes",l.target.value),rows:3,placeholder:"Phase 1: Website implementation...",disabled:!i,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]}),e.jsxs("div",{className:`border-t ${s.border} pt-6`,children:[e.jsxs("h4",{className:`text-md font-semibold ${s.text} flex items-center gap-2 mb-4`,children:[e.jsx(Ss,{className:"w-4 h-4 text-gray-600"}),"Consent & Privacy Options",e.jsx("span",{className:`text-xs ${s.textSecondary} font-normal`,children:"Privacy settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t?.consent_options?.recording_enabled||!1,onChange:l=>k(o,"consent_options.recording_enabled",l.target.checked),disabled:!i,className:`w-4 h-4 text-blue-500 rounded ${i?"":"opacity-50 cursor-not-allowed"}`}),e.jsx("span",{className:"text-sm",children:"Recording Enabled"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t?.consent_options?.transcript_email_optin||!1,onChange:l=>k(o,"consent_options.transcript_email_optin",l.target.checked),disabled:!i,className:`w-4 h-4 text-blue-500 rounded ${i?"":"opacity-50 cursor-not-allowed"}`}),e.jsx("span",{className:"text-sm",children:"Transcript Email Opt-in"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Privacy Notes"}),e.jsx("input",{type:"text",value:t?.consent_options?.privacy_notes||"",onChange:l=>k(o,"consent_options.privacy_notes",l.target.value),placeholder:"Privacy enabled",disabled:!i,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${i?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]})]})]},o))})]})})]}):e.jsxs("div",{className:"space-y-4 md:space-y-6 px-2 sm:px-0",children:[e.jsx("div",{className:"relative -mx-2 sm:mx-0",children:e.jsxs("div",{className:"flex md:grid md:grid-cols-3 gap-3 md:gap-4 overflow-x-auto scrollbar-hide px-2 sm:px-0 snap-x snap-mandatory",children:[e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-4 md:p-6 shadow-lg min-w-[280px] sm:min-w-[320px] md:min-w-0 snap-center flex-shrink-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-3",children:[e.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-lg ${s.searchBg} flex items-center justify-center`,children:e.jsx(Ze,{className:`w-5 h-5 md:w-6 md:h-6 ${s.textSecondary}`})}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-blue-500",children:"Total"})]}),e.jsx("h3",{className:`text-2xl md:text-3xl font-semibold ${s.text} mb-1 md:mb-2`,children:M?.total||se||ce("all")}),e.jsx("p",{className:`text-xs md:text-sm font-medium ${s.text}`,children:"All Clients"}),M&&e.jsxs("p",{className:`text-xs ${s.textSecondary} mt-1`,children:["Page ",M.page||I," of"," ",M.totalPages||Q]})]}),e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-4 md:p-6 shadow-lg min-w-[280px] sm:min-w-[320px] md:min-w-0 snap-center flex-shrink-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-3",children:[e.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-lg ${s.searchBg} flex items-center justify-center`,children:e.jsx(Te,{className:`w-5 h-5 md:w-6 md:h-6 ${s.textSecondary}`})}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-yellow-500",children:"Pending"})]}),e.jsx("h3",{className:`text-2xl md:text-3xl font-semibold ${s.text} mb-1 md:mb-2`,children:ce("pending")}),e.jsx("p",{className:`text-xs md:text-sm font-medium ${s.text}`,children:"Awaiting Review"})]}),e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-4 md:p-6 shadow-lg min-w-[280px] sm:min-w-[320px] md:min-w-0 snap-center flex-shrink-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-3",children:[e.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-lg ${s.searchBg} flex items-center justify-center`,children:e.jsx(Ge,{className:`w-5 h-5 md:w-6 md:h-6 ${s.textSecondary}`})}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-green-500",children:"Active"})]}),e.jsx("h3",{className:`text-2xl md:text-3xl font-semibold ${s.text} mb-1 md:mb-2`,children:ce("approved")}),e.jsx("p",{className:`text-xs md:text-sm font-medium ${s.text}`,children:"Approved Clients"})]})]})}),e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-3 sm:p-4 md:p-6 shadow-lg`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 md:gap-4 mb-4 md:mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:`text-lg md:text-xl font-semibold ${s.text} flex items-center gap-2`,children:[e.jsx(Ze,{className:"w-4 h-4 md:w-5 md:h-5"}),"Client Requests"]}),e.jsxs("p",{className:`${s.textSecondary} text-xs md:text-sm mt-1`,children:["(",M?.total||se||ce("all")," total)"]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 w-full sm:w-auto",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:`p-2 rounded-lg ${s.hover} ${s.text} transition-all duration-200 flex-shrink-0`,title:"Refresh data",children:e.jsx(Cs,{className:"w-4 h-4"})}),e.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[e.jsx(As,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${s.textSecondary}`}),e.jsx("input",{type:"text",placeholder:"Search...",value:$,onChange:t=>U(t.target.value),className:`w-full sm:w-48 md:w-64 pl-9 pr-3 py-2 text-sm rounded-lg border ${s.border} ${s.bg} ${s.text} focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent`})]})]})]}),e.jsx("div",{className:`flex gap-1 mb-4 md:mb-6 border-b ${s.border} overflow-x-auto scrollbar-hide -mx-3 sm:mx-0 px-3 sm:px-0`,children:["all","newlySignup","pending","onboarded","approved","rejected"].map(t=>{const o={all:{icon:Xe,label:"All"},newlySignup:{icon:ze,label:"Newly Signup"},pending:{icon:Te,label:"Pending"},onboarded:{icon:Ge,label:"Onboarded"},approved:{icon:Ds,label:"Approved"},rejected:{icon:te,label:"Rejected"}},{icon:l,label:m}=o[t];return e.jsx("button",{onClick:()=>v(t),className:`flex-shrink-0 px-3 md:px-4 py-2 md:py-3 text-sm md:text-base font-medium transition-all duration-200 border-b-2 whitespace-nowrap ${f===t?`${s.activeBorder} ${s.text}`:`border-transparent ${s.textSecondary} ${s.hover}`}`,children:e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx(l,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),e.jsx("span",{className:"text-sm md:text-base",children:m})]})},t)})}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:he?e.jsxs("div",{className:`text-center py-12 md:py-16 rounded-lg ${s.cardBg} border ${s.border}`,children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 md:h-12 md:w-12 border-b-2 border-blue-500 mx-auto mb-3"}),e.jsx("h3",{className:`text-base md:text-lg font-semibold ${s.text} mb-2`,children:"Loading clients..."}),e.jsx("p",{className:`text-sm ${s.textSecondary}`,children:"Please wait while we fetch the data"})]}):je.length===0?e.jsxs("div",{className:`text-center py-8 md:py-12 rounded-lg ${s.cardBg} border ${s.border}`,children:[e.jsx(Bs,{className:`w-10 h-10 md:w-12 md:h-12 mx-auto mb-2 md:mb-3 ${s.textSecondary}`}),e.jsx("h3",{className:`text-base md:text-lg font-semibold ${s.text} mb-1 md:mb-2`,children:R?"No matching clients":"No client requests yet"}),e.jsx("p",{className:`text-sm ${s.textSecondary}`,children:R?"Try adjusting your search criteria":"No client requests available"})]}):je?.map(t=>e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-3 md:p-4 hover:shadow-md transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2 md:mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-9 h-9 md:w-10 md:h-10 rounded-lg ${s.activeBg} flex items-center justify-center flex-shrink-0`,children:e.jsx(He,{className:`w-4 h-4 md:w-5 md:h-5 ${s.text}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`font-semibold ${s.text} text-base md:text-lg truncate`,children:t?.userData?.fullName||t?.company_basics?.name||"Unknown"}),e.jsx("p",{className:`text-xs md:text-sm ${s.textSecondary} truncate`,children:t?.userData?.email||t?.company_basics?.company_email||"No email"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>C(t?.userData),className:`p-2 flex items-center justify-center ${s.textSecondary} rounded-lg ${s.activeBg} hover:scale-105 transition-all duration-200`,title:"View Client Details",children:e.jsx(Ie,{className:"w-4 h-4"})}),(t?.userData?.isOnboarded||t?.isOnboarded)&&e.jsx("button",{onClick:()=>{const o=t?.id||t?._id||t?.userData?.id||t?.userData?._id;a(`/dashboard/clients/${o}?tab=employees`,{state:{client:t}})},className:`p-2 flex items-center justify-center ${s.textSecondary} rounded-lg ${s.activeBg} hover:scale-105 transition-all duration-200`,title:"View AI Employee Analytics",children:e.jsx(xs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Ne(t?.userData),className:`p-2 flex items-center justify-center ${s.textSecondary} rounded-lg ${s.activeBg} hover:scale-105 transition-all duration-200`,title:"Edit Client",children:e.jsx(Je,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Ae(t?.userData),className:"p-2 flex items-center justify-center text-red-500 rounded-lg hover:bg-red-50 hover:scale-105 transition-all duration-200",title:"Delete Client",children:e.jsx(ms,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s.textSecondary} uppercase mb-0.5`,children:"Plan"}),e.jsx("p",{className:`${s.text} font-medium text-xs md:text-sm truncate`,children:(()=>{const o=t?.userData?.onboarding?.plan_type||t?.plan_details?.type,l=Le.find(m=>m.apiKey===o);return l?`${l.name} (${l.price})`:o||"No plan"})()})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s.textSecondary} uppercase`,children:"Company"}),e.jsx("p",{className:`${s.text} font-medium text-sm`,children:t?.userData?.onboarding?.company_name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s.textSecondary} uppercase`,children:"Email"}),e.jsx("p",{className:`${s.text} font-medium text-sm truncate`,children:t?.userData?.onboarding?.company_email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s.textSecondary} uppercase`,children:"AI Employees"}),e.jsx("p",{className:`${s.text} font-medium text-sm`,children:t?.userData?.onboarding?.ai_employee_count||(t?.ai_employees||[]).length})]})]})]},t.id))}),Q>1&&e.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 md:gap-3 mt-4 md:mt-6 p-3 md:p-4 rounded-lg ${s.searchBg}`,children:[e.jsxs("div",{className:`text-xs md:text-sm ${s.textSecondary} text-center sm:text-left`,children:["Showing"," ",((M?.page||I)-1)*(M?.limit||J)+1," ","to"," ",Math.min((M?.page||I)*(M?.limit||J),M?.total||se)," ","of ",M?.total||se]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:Ye,disabled:I===1,className:`px-2.5 md:px-3 py-1.5 text-xs md:text-sm rounded-md transition-all duration-200 ${I===1?`${s.textSecondary} cursor-not-allowed opacity-50`:`${s.text} ${s.hover} hover:scale-105`}`,children:"Previous"}),e.jsxs("span",{className:`mx-2 md:mx-3 text-xs md:text-sm ${s.text}`,children:[M?.page||I,"/",M?.totalPages||Q]}),e.jsx("button",{onClick:fe,disabled:I===Q,className:`px-2.5 md:px-3 py-1.5 text-xs md:text-sm rounded-md transition-all duration-200 ${I===Q?`${s.textSecondary} cursor-not-allowed opacity-50`:`${s.text} ${s.hover} hover:scale-105`}`,children:"Next"})]})]})]})]})};export{ra as AIEmployeesTab,Ts as AgentDetailsView,na as ClientDetailsTab,la as OnboardingDataTab,ia as TransactionsTab,oa as default};
