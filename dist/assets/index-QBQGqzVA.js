import{u as ge,l as W,j as e,ab as Ce,ac as N,ad as Y,ae as q,af as J,ag as ue,ah as Q,ai as X,aj as Ie,ak as Ae,al as Z,e as K,am as Be,an as ee,ao as Pe,ap as F,A as R,aq as Ue,ar as _e}from"./admin-CKRX_Iv4.js";import{r as d}from"./router-CINeAvhf.js";import"./icons-DnVO2Lau.js";import"./vendor-DJG_os-6.js";const Ee=({onViewEmployee:f})=>{const{theme:u,currentTheme:t}=ge(),[v,b]=d.useState(""),[T,w]=d.useState(""),[o,P]=d.useState(null),[O,$]=d.useState([]),[C,S]=d.useState(!0),[U,V]=d.useState(!1),[pe,_]=d.useState(null),[x,j]=d.useState(1),[D]=d.useState(10),[y,n]=d.useState(0),[m,p]=d.useState(0),[E,te]=d.useState("list"),[I,se]=d.useState("all"),[k,ae]=d.useState({startDate:"",endDate:"",preset:"all"}),[A,fe]=d.useState("emp1"),[re]=d.useState([{id:"emp1",name:"Shivai Widget"},{id:"emp2",name:"Demo Employee"}]);d.useEffect(()=>{const s=setTimeout(()=>{w(v),x!==1&&j(1)},500);return()=>clearTimeout(s)},[v]),d.useEffect(()=>{x!==1&&j(1)},[I,k]),d.useEffect(()=>{const s=document.createElement("style");return s.textContent=`
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .animate-fadeIn {
        animation: fadeIn 0.3s ease-out forwards;
      }
      .spinner {
        border: 3px solid #f3f4f6;
        border-top: 3px solid #3b82f6;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    `,document.head.appendChild(s),()=>document.head.removeChild(s)},[]);const[B,ne]=d.useState({id:1,name:"Demo Employee",client:"Demo Employee",status:"active",lastUpdate:"2024-01-15 14:30:00",totalSessions:0,successfulSessions:0,avgSessionDuration:"3m 12s",type:"chat",performance:0,createdAt:"2024-01-01"}),H=d.useCallback(async()=>{try{S(!0),_(null);const s=new URLSearchParams({page:x.toString(),limit:D.toString()});I!=="all"&&s.append("deviceType",I),k.startDate&&s.append("startDate",k.startDate),k.endDate&&s.append("endDate",k.endDate),T.trim()&&s.append("q",T.trim()),console.log(`Fetching sessions for ${A==="emp1"?"Demo Employee":"ShivAI Widget Employee"} with params:`,s.toString());let r=s.toString(),l;A==="emp1"?l=await W.getAgentSessions(r):l=await W.getAllSessionDemo(r),console.log("API Raw Response:",l);const i=l?.data?.data?.data||l?.data?.data||l?.data?.sessions;if(l?.data?.success&&i?.sessions){const c=Array.isArray(i.sessions)?i.sessions:[],h=i.pagination||{},g=h.total||h.totalItems||c.length,L=h.totalPages||Math.ceil(g/D);console.log("Pagination Data:",h),console.log("Total Items:",g,"Total Pages:",L),console.log("Sessions Array Length:",c.length),n(g),p(L);const M=c.map((a,G)=>({id:a.id||a.session_id||`session-${G+1}`,sessionId:a.session_id||a.id||a._id||`SES-${Date.now()}-${G}`,clientName:a.location?.city?`${a.location.city}${a.location.region?`, ${a.location.region}`:""}${a.location.country?` (${a.location.country})`:""}`:a.client_name||a.clientName||`Client ${G+1}`,type:a.config?.agent||a.type||"chat",startTime:a.start_time||a.startTime||a.created_at||new Date().toISOString(),endTime:a.end_time||a.endTime||a.updated_at||new Date().toISOString(),duration:a.total_duration?`${Math.floor(a.total_duration/60)}m ${Math.floor(a.total_duration%60)}s`:a.duration||je(a.start_time||a.created_at,a.end_time||a.updated_at),status:a.status||"completed",rating:a.rating||null,sentiment:a.sentiment||"neutral",transcripts:Array.isArray(a.transcripts)?a.transcripts:[],transcriptCount:a.message_count||a.messageCount||(Array.isArray(a.transcripts)?a.transcripts.length:0),resolution:a.resolution||"Session completed",tags:Array.isArray(a.tags)?a.tags:[],location:{city:a.location?.city||"Unknown",country:a.location?.country||"Unknown",region:a.location?.region||"",zip:a.location?.zip||"",lat:a.location?.lat||null,lon:a.location?.lon||null,isp:a.location?.isp||"Unknown ISP"},device:{browser:a.device?.browser||"Unknown Browser",deviceType:a.device?.device_type||a.device?.deviceType||"Unknown",raw:a.device?.raw||""},userIP:a.user_ip||a.userIP||a.ip||"Unknown",messageCount:{ai:a.ai_messages||a.messageCount?.ai||0,user:a.user_messages||a.messageCount?.user||0,total:a.message_count||a.messageCount?.total||0},config:{language:a.config?.language||"en-US",gender:a.config?.gender||"female",agent:a.config?.agent||"support"}}));console.log("Transformed Sessions:",M),$(M),ye(M)}else{const c=l?.data?.message||i?.message||"No sessions data available";console.warn("API Response Issue:",c),_(c),$([]),n(0),p(0)}}catch(s){console.error("Error fetching sessions:",s);const r=s.response?.data?.message||s.message||"Failed to load sessions";_(`Error loading sessions: ${r}`),$([]),n(0),p(0)}finally{S(!1)}},[x,D,I,k,T,A]);d.useEffect(()=>{H()},[H]);const be=async s=>{console.log("Fetching transcripts for session:",s);try{V(!0);let r;if(A==="emp1"?(r=await W.getAgentSessionsTranscript(s),console.log("getAgentSessionsTranscript response:",r)):(r=await W.getSessionTranscript(s),console.log("getSessionTranscript response:",r)),r?.data?.statusCode===200||r?.data?.success){let l=[];if(A==="emp1"){const i=r.data?.data?.session||r.data;console.log("Agent Sessions Response Data:",i);let c=[],h=[];i.transcripts&&Array.isArray(i.transcripts)&&(c=i.transcripts.map(g=>({...g,speaker:"ai"}))),i.user_transcripts&&Array.isArray(i.user_transcripts)&&(h=i.user_transcripts.map(g=>({...g,speaker:"user"}))),l=[...c,...h],l.sort((g,L)=>{const M=new Date(g.timestamp||g.created_at||0),a=new Date(L.timestamp||L.created_at||0);return M-a})}else r.data.data?.transcripts&&Array.isArray(r.data.data.transcripts)&&(l=r.data.data.transcripts);if(console.log("All Transcripts (combined):",l),l&&l.length>0)return l.map(i=>{let c=i.role||i.speaker;console.log("ðŸ“ Processing transcript:",{original:i,speakerField:c,allFields:Object.keys(i)}),c==="user"||c==="customer"||c==="client"?c="user":c==="agent"||c==="assistant"||c==="bot"||c==="ai"?c="ai":c="user";const h={timestamp:i.timestamp||i.created_at||i.time||new Date().toISOString(),speaker:c,message:i.message||i.content||i.text||i.msg||""};return console.log("âœ… Processed message:",h),h}).filter(i=>i.message&&i.message.trim()!=="")}return[]}catch(r){return console.error("Error fetching transcripts:",r),[]}finally{V(!1)}},je=(s,r)=>{if(!s||!r)return"N/A";const l=new Date(s),c=new Date(r)-l,h=Math.floor(c/6e4),g=Math.floor(c%6e4/1e3);return`${h}m ${g}s`},ye=s=>{const r=s.length,l=s.filter(c=>c.status==="completed").length,i=s.reduce((c,h)=>c+h.rating,0)/r;ne(c=>({...c,totalSessions:r,successfulSessions:l,performance:Math.round(i*20)}))},Ne=O,ve=O,le=(x-1)*D,we=Math.min(le+D,y),z=s=>{const r=Math.max(1,Math.min(s,m));j(r)},ie=()=>{x>1&&j(x-1)},ce=()=>{x<m&&j(x+1)},oe=s=>{const r=u==="dark"?{completed:"bg-green-500/20 text-green-400 border border-green-500/30",escalated:"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30",failed:"bg-red-500/20 text-red-400 border border-red-500/30",ongoing:"bg-blue-500/20 text-blue-400 border border-blue-500/30",active:"bg-green-500/20 text-green-400 border border-green-500/30",inactive:"bg-red-500/20 text-red-400 border border-red-500/30",maintenance:"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30"}:{completed:"bg-green-100 text-green-800",escalated:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",ongoing:"bg-blue-100 text-blue-800",active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800",maintenance:"bg-yellow-100 text-yellow-800"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${r[s]}`,children:s.charAt(0).toUpperCase()+s.slice(1)})},de=s=>{const r=u==="dark"?{positive:"bg-green-500/20 text-green-400 border border-green-500/30",neutral:"bg-gray-500/20 text-gray-400 border border-gray-500/30",negative:"bg-red-500/20 text-red-400 border border-red-500/30"}:{positive:"bg-green-100 text-green-800",neutral:"bg-gray-100 text-gray-800",negative:"bg-red-100 text-red-800"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${r[s]}`,children:s.charAt(0).toUpperCase()+s.slice(1)})},$e=({children:s,onClick:r,title:l,variant:i="default"})=>{const c={background:"linear-gradient(0deg, #0a0a0a 0%, #000 100%)",boxShadow:`0 1.688px 0.844px 0 #33332f inset,
        0 3.797px 0.844px 0 #5e5e5e inset, 0 -6.75px 10.126px 0 #171717 inset,
        0 13.501px 20.251px -10.126px rgba(0, 0, 0, 0.25)`};return e.jsx("button",{onClick:r,title:l,style:c,className:"p-2 text-white rounded-lg transition-all duration-200 hover:scale-105 hover:brightness-110",children:s})},me=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Se=s=>new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),xe=async s=>{const r=await be(s.sessionId||s.id),l={...s,transcripts:r};console.log("Selected Session with Transcripts:",l),console.log("Token Usage Data:",s.token_usage),P(l)},ke=()=>{H()},he=()=>{b(""),w(""),se("all"),ae({startDate:"",endDate:"",preset:"all"}),j(1)},Te=s=>{se(s)},De=s=>{const r=new Date;let l="",i="";switch(s){case"today":l=r.toISOString().split("T")[0],i=l;break;case"week":l=new Date(r.getTime()-10080*60*1e3).toISOString().split("T")[0],i=r.toISOString().split("T")[0];break;case"month":l=new Date(r.getFullYear(),r.getMonth()-1,r.getDate()).toISOString().split("T")[0],i=r.toISOString().split("T")[0];break;case"all":default:l="",i="";break}ae({startDate:l,endDate:i,preset:s})};return e.jsxs("div",{className:"space-y-3 md:space-y-4 lg:space-y-6  px-2 sm:px-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-start mb-4 px-2 sm:px-0",children:e.jsxs("div",{className:"relative w-full sm:w-auto",children:[e.jsx("select",{id:"employee-select",value:A,onChange:s=>{fe(s.target.value);const r=re.find(l=>l.id===s.target.value);r&&ne(l=>({...l,name:r.name,client:r.name})),j(1),$([])},className:`
                appearance-none px-3 py-2 pr-8 sm:px-4 sm:py-2 sm:pr-10 
                rounded-lg border-2 border-gray-300
                bg-white ${t.text} font-medium text-sm sm:text-base
                focus:outline-none focus:ring-1 focus:ring-black focus:border-blue-500
                hover:border-gray-400 transition-all duration-200
                shadow-sm w-full sm:min-w-[200px] cursor-pointer
              `,children:re.map(s=>e.jsx("option",{value:s.id,className:"py-2",children:s.name},s.id))}),e.jsx(Ce,{className:"absolute right-2 sm:right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-gray-400 pointer-events-none"})]})}),e.jsxs("div",{className:"hidden lg:grid lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"group",children:e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4 hover:scale-[1.02] transition-all duration-200 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${t.searchBg} flex items-center justify-center`,children:e.jsx(N,{className:`w-5 h-5 ${t.textSecondary}`})}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"text-xs font-medium text-green-500",children:"+12.5%"})})]}),e.jsx("h3",{className:`text-2xl font-semibold ${t.text} mb-1`,children:y}),e.jsx("p",{className:`text-sm font-medium ${t.text} mb-1 leading-tight`,children:"Total Sessions"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight`,children:"All conversations"})]})}),e.jsx("div",{className:"group",children:e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4 hover:scale-[1.02] transition-all duration-200 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${t.searchBg} flex items-center justify-center`,children:e.jsx(Y,{className:`w-5 h-5 ${t.textSecondary}`})}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"text-xs font-medium text-green-500",children:"+8.2%"})})]}),e.jsxs("h3",{className:`text-2xl font-semibold ${t.text} mb-1`,children:[B.performance,"%"]}),e.jsx("p",{className:`text-sm font-medium ${t.text} mb-1 leading-tight`,children:"Performance Score"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight`,children:"Success rate"})]})}),e.jsx("div",{className:"group",children:e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4 hover:scale-[1.02] transition-all duration-200 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${t.searchBg} flex items-center justify-center`,children:e.jsx(q,{className:`w-5 h-5 ${t.textSecondary}`})}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"text-xs font-medium text-green-500",children:"+5.1%"})})]}),e.jsx("h3",{className:`text-2xl font-semibold ${t.text} mb-1`,children:B.avgSessionDuration}),e.jsx("p",{className:`text-sm font-medium ${t.text} mb-1 leading-tight`,children:"Avg Duration"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight`,children:"Per session"})]})}),e.jsx("div",{className:"group",children:e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4 hover:scale-[1.02] transition-all duration-200 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${t.searchBg} flex items-center justify-center`,children:e.jsx(J,{className:`w-5 h-5 ${t.textSecondary}`})}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"text-xs font-medium text-blue-500",children:"Active"})})]}),e.jsx("h3",{className:`text-xl font-semibold ${t.text} mb-1 truncate`,children:B.client}),e.jsx("p",{className:`text-sm font-medium ${t.text} mb-1 leading-tight`,children:"Internal AI Employees"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight`,children:"Current assignment"})]})})]}),e.jsx("div",{className:"lg:hidden overflow-x-auto scrollbar-hide",children:e.jsxs("div",{className:"flex gap-2 md:gap-3 pb-2 px-1",style:{width:"max-content"},children:[e.jsx("div",{className:"group flex-shrink-0 w-32 sm:w-36 md:w-44",children:e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-2 sm:p-3 md:p-4 hover:scale-[1.02] transition-all duration-200 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 sm:mb-2",children:[e.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-lg ${t.searchBg} flex items-center justify-center`,children:e.jsx(N,{className:`w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 ${t.textSecondary}`})}),e.jsx("span",{className:"text-xs font-medium text-green-500",children:"+12%"})]}),e.jsx("h3",{className:`text-lg sm:text-xl md:text-2xl font-semibold ${t.text} mb-0.5 sm:mb-1`,children:y}),e.jsx("p",{className:`text-xs sm:text-xs md:text-sm font-medium ${t.text} mb-0.5 leading-tight`,children:"Sessions"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight truncate`,children:"Total"})]})}),e.jsx("div",{className:"group flex-shrink-0 w-32 sm:w-36 md:w-44",children:e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-2 sm:p-3 md:p-4 hover:scale-[1.02] transition-all duration-200 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 sm:mb-2",children:[e.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-lg ${t.searchBg} flex items-center justify-center`,children:e.jsx(Y,{className:`w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 ${t.textSecondary}`})}),e.jsx("span",{className:"text-xs font-medium text-green-500",children:"+8%"})]}),e.jsxs("h3",{className:`text-lg sm:text-xl md:text-2xl font-semibold ${t.text} mb-0.5 sm:mb-1`,children:[B.performance,"%"]}),e.jsx("p",{className:`text-xs sm:text-xs md:text-sm font-medium ${t.text} mb-0.5 leading-tight`,children:"Performance"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight truncate`,children:"Score"})]})}),e.jsx("div",{className:"group flex-shrink-0 w-32 sm:w-36 md:w-44",children:e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-2 sm:p-3 md:p-4 hover:scale-[1.02] transition-all duration-200 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 sm:mb-2",children:[e.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-lg ${t.searchBg} flex items-center justify-center`,children:e.jsx(q,{className:`w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 ${t.textSecondary}`})}),e.jsx("span",{className:"text-xs font-medium text-green-500",children:"+5%"})]}),e.jsx("h3",{className:`text-lg sm:text-xl md:text-2xl font-semibold ${t.text} mb-0.5 sm:mb-1`,children:B.avgSessionDuration}),e.jsx("p",{className:`text-xs sm:text-xs md:text-sm font-medium ${t.text} mb-0.5 leading-tight`,children:"Duration"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight truncate`,children:"Average"})]})}),e.jsx("div",{className:"group flex-shrink-0 w-32 sm:w-36 md:w-44",children:e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-2 sm:p-3 md:p-4 hover:scale-[1.02] transition-all duration-200 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 sm:mb-2",children:[e.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-lg ${t.searchBg} flex items-center justify-center`,children:e.jsx(J,{className:`w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 ${t.textSecondary}`})}),e.jsx("span",{className:"text-xs font-medium text-blue-500",children:"Live"})]}),e.jsx("h3",{className:`text-sm sm:text-base md:text-lg font-semibold ${t.text} mb-0.5 sm:mb-1 truncate`,children:B.client}),e.jsx("p",{className:`text-xs sm:text-xs md:text-sm font-medium ${t.text} mb-0.5 leading-tight`,children:"Client"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight truncate`,children:"Active"})]})})]})})]}),e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4 md:p-6 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"space-y-3 flex flex-col md:flex-row md:items-center md:justify-between ",children:[e.jsxs("h3",{className:`text-lg  font-semibold ${t.text}`,children:["Session History",e.jsxs("span",{className:`ml-2 text-sm font-normal ${t.textSecondary}`,children:["(",y," ",y===1?"session":"sessions",")"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"relative flex-1 min-w-0",children:[e.jsx(ue,{className:`absolute hidden lg:flex left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${t.textSecondary}`}),e.jsx("input",{type:"text",placeholder:"Search sessions...",value:v,onChange:s=>b(s.target.value),className:`w-full pl-9 pr-3 py-2 text-sm rounded-md border ${t.border} ${t.bg} ${t.text} focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent`})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap sm:flex-nowrap",children:[e.jsxs("select",{value:I,onChange:s=>Te(s.target.value),className:`px-3 py-2 text-sm rounded-md border ${t.border} ${t.bg} ${t.text} focus:outline-none focus:ring-2 focus:ring-blue-500 flex-shrink-0`,title:"Filter by device type",children:[e.jsx("option",{value:"all",children:"All Devices"}),e.jsx("option",{value:"mobile",children:"Mobile"}),e.jsx("option",{value:"desktop",children:"Desktop"}),e.jsx("option",{value:"tablet",children:"Tablet"})]}),e.jsxs("select",{value:k.preset,onChange:s=>De(s.target.value),className:`px-3 py-2 text-sm rounded-md border ${t.border} ${t.bg} ${t.text} focus:outline-none focus:ring-2 focus:ring-blue-500 flex-shrink-0`,title:"Filter by date range",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"Last Week"}),e.jsx("option",{value:"month",children:"Last Month"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[(v||I!=="all"||k.preset!=="all")&&e.jsx("button",{onClick:he,className:`p-2 rounded-md  ${t.border} ${t.text} hover:bg-red-50 hover:border-red-300 hover:text-red-600 transition-colors`,title:"Clear all filters",children:e.jsx(Q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ke,disabled:C,className:`p-2 rounded-md  ${t.border} ${t.text} ${t.hover} transition-colors disabled:opacity-50`,title:"Refresh sessions",children:e.jsx(X,{className:`w-4 h-4 ${C?"animate-spin":""}`})})]})]})]})]}),C?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"spinner mx-auto mb-4",style:{width:"40px",height:"40px"}}),e.jsx("h3",{className:`text-lg font-semibold ${t.text} mb-2`,children:"Loading Sessions..."}),e.jsx("p",{className:`text-sm ${t.textSecondary}`,children:"Please wait while we fetch your session data"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col gap-3 mb-2",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:`hidden lg:flex items-center border ${t.border} rounded-lg p-1`,children:[e.jsx("button",{onClick:()=>te("list"),className:`p-1.5 rounded transition-all duration-200 ${E==="list"?`${t.activeBg} ${t.text} shadow-sm`:`${t.textSecondary} hover:${t.hover}`}`,title:"List view",children:e.jsx(Ie,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>te("grid"),className:`p-1.5 rounded transition-all duration-200 ${E==="grid"?`${t.activeBg} ${t.text} shadow-sm`:`${t.textSecondary} hover:${t.hover}`}`,title:"Grid view",children:e.jsx(Ae,{className:"w-4 h-4"})})]})})}),e.jsx("div",{className:E==="grid"?"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4":"space-y-3",children:ve?.map(s=>E==="list"?e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-3 sm:p-4 hover:shadow-md transition-all duration-200 bg-gradient-to-r from-gray-50 to-white-50`,children:[e.jsxs("div",{className:"flex items-start sm:items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.type==="chat"?e.jsx(N,{className:"w-4 h-4 text-blue-500 flex-shrink-0"}):e.jsx(Z,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`font-semibold ${t.text} text-sm truncate`,children:s.sessionId}),e.jsx("p",{className:`text-xs ${t.textSecondary} truncate`,children:[s.location?.city,s.location?.region,s.location?.country].filter(Boolean).join(", ")||"Unknown Location"})]})]}),e.jsx("button",{onClick:()=>xe(s),className:`p-1 flex items-center justify-center ${t.textSecondary} rounded-lg ${t.activeBg} ${t.hover} transition-all duration-200 flex-shrink-0 `,title:"View Session",children:U?e.jsx("div",{className:"w-4 h-4 border border-gray-600 border-t-transparent rounded-full animate-spin"}):e.jsx(K,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[oe(s.status),de(s.sentiment)]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Device & Browser"}),e.jsx("p",{className:`${t.text} font-medium text-sm leading-tight`,children:s.device?.browser||"Unknown"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight`,children:s.device?.deviceType||"Unknown Device"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Duration"}),e.jsx("p",{className:`${t.text} font-medium text-sm leading-tight`,children:s.duration}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight`,children:"Session time"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Date & Time"}),e.jsx("p",{className:`${t.text} font-medium text-sm leading-tight`,children:new Date(s.startTime).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"2-digit"})}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight`,children:new Date(s.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Messages"}),e.jsx("p",{className:`${t.text} font-medium text-sm leading-tight`,children:s.messageCount?.total||s.transcriptCount||s.transcripts.length||0}),e.jsxs("p",{className:`text-xs ${t.textSecondary} leading-tight`,children:["AI: ",s.messageCount?.ai||0," â€¢ User:"," ",s.messageCount?.user||0]})]})]}),e.jsx("div",{className:`mt-3 pt-3 border-t ${t.border}`,children:e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsxs("span",{className:`${t.textSecondary} truncate flex-1`,title:s.location?.isp,children:["ISP: ",s.location?.isp||"Unknown"]}),s.location?.zip&&e.jsxs("span",{className:`${t.textSecondary} ml-2 flex-shrink-0`,children:["ZIP: ",s.location.zip]})]})}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:s.tags.map((r,l)=>e.jsx("span",{className:`px-2 py-1 ${u==="dark"?"bg-gray-500/20 text-gray-400 border border-gray-500/30":"bg-gray-100 text-gray-700"} text-xs rounded-full`,children:r},l))})]},s.id):e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4 hover:shadow-lg transition-all duration-200 h-fit`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.type==="chat"?e.jsx(N,{className:"w-5 h-5 text-blue-500 flex-shrink-0"}):e.jsx(Z,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),e.jsx("div",{className:"min-w-0",children:e.jsx("h4",{className:`font-semibold ${t.text} text-sm truncate`,children:s.sessionId})})]}),e.jsx("button",{onClick:()=>xe(s),className:`p-1.5 ${t.textSecondary} rounded-lg ${t.activeBg} ${t.hover} transition-all duration-200 hover:shadow-lg flex-shrink-0`,title:"View Session",children:U?e.jsx("div",{className:"w-3 h-3 border border-gray-600 border-t-transparent rounded-full animate-spin"}):e.jsx(K,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[oe(s.status),de(s.sentiment)]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:`text-xs font-medium ${t.textSecondary} mb-1`,children:"Location"}),e.jsx("p",{className:`${t.text} text-sm font-medium truncate`,title:`${[s.location?.city,s.location?.region,s.location?.country].filter(Boolean).join(", ")}`,children:[s.location?.city,s.location?.region,s.location?.country].filter(Boolean).join(", ")||"Unknown Location"}),e.jsx("p",{className:`text-xs ${t.textSecondary} truncate`,children:s.location?.isp||"Unknown ISP"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Device"}),e.jsx("p",{className:`${t.text} text-sm font-medium truncate`,children:s.device?.browser||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Duration"}),e.jsx("p",{className:`${t.text} text-sm font-medium`,children:s.duration})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Date"}),e.jsx("p",{className:`${t.text} text-sm font-medium`,children:new Date(s.startTime).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Messages"}),e.jsx("p",{className:`${t.text} text-sm font-medium`,children:s.messageCount?.total||s.transcriptCount||s.transcripts.length||0})]})]}),e.jsx("div",{className:`pt-2 border-t ${t.border} text-center`,children:e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:new Date(s.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})}),s.tags&&s.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[s.tags.slice(0,2).map((r,l)=>e.jsx("span",{className:`px-2 py-1 ${u==="dark"?"bg-gray-500/20 text-gray-400 border border-gray-500/30":"bg-gray-100 text-gray-700"} text-xs rounded-full`,children:r},l)),s.tags.length>2&&e.jsxs("span",{className:`text-xs ${t.textSecondary} px-1 py-1`,children:["+",s.tags.length-2]})]})]},s.id))}),Ne?.length===0&&!C&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:`text-lg font-semibold ${t.text} mb-2`,children:"No sessions found"}),e.jsx("p",{className:`text-sm ${t.textSecondary} mb-4`,children:"Try adjusting your search or filter criteria"}),e.jsx($e,{onClick:he,children:e.jsx(X,{className:"w-4 h-4"})})]})]})," ",o&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4 backdrop-blur-sm",children:e.jsxs("div",{className:`${t.cardBg} rounded-lg sm:rounded-xl w-full max-w-4xl  max-h-[95vh] sm:max-h-[85vh] overflow-hidden shadow-2xl`,children:[e.jsxs("div",{className:`flex items-center justify-between p-3 sm:p-4 lg:p-6 border-b ${t.border} ${t.cardBg}`,children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 lg:gap-4 min-w-0 flex-1",children:[e.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 ${t.activeBg} rounded-full flex items-center justify-center flex-shrink-0`,children:e.jsx(Be,{className:`w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 ${t.text}`})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:`text-sm sm:text-lg lg:text-xl font-bold ${t.text} truncate`,children:"Session Transcript"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 mt-0.5 sm:mt-1",children:[e.jsxs("span",{className:`text-xs sm:text-sm font-medium ${t.textSecondary} truncate`,children:["ID: ",o.sessionId]}),e.jsx("span",{className:`hidden sm:inline ${t.textSecondary}`,children:"â€¢"}),e.jsx("span",{className:`text-xs sm:text-sm ${t.textSecondary} truncate`,children:o.clientName}),e.jsx("span",{className:`hidden sm:inline ${t.textSecondary}`,children:"â€¢"}),e.jsx("span",{className:`text-xs sm:text-sm ${t.textSecondary}`,children:o.duration})]})]})]}),e.jsx("button",{onClick:()=>P(null),className:`p-1.5 sm:p-2 ${t.textSecondary} rounded-lg ${t.hover} transition-all duration-200 hover:shadow-lg flex-shrink-0`,title:"Close",children:e.jsx(Q,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),(o.token_usage||o.tokenUsage)&&e.jsxs("div",{className:`px-3 sm:px-4 lg:px-6 py-3 border-b ${t.border} ${t.searchBg}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ee,{className:`w-4 h-4 ${t.text}`}),e.jsx("h4",{className:`text-sm sm:text-base font-semibold ${t.text}`,children:"Token Usage"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4",children:[e.jsxs("div",{className:`${t.cardBg} rounded-lg p-2 sm:p-3 border ${t.border}`,children:[e.jsx("p",{className:`text-xs ${t.textSecondary} mb-1`,children:"Input Tokens"}),e.jsx("p",{className:`text-lg sm:text-xl font-bold ${t.text}`,children:((o.token_usage||o.tokenUsage)?.input_tokens||(o.token_usage||o.tokenUsage)?.inputTokens||0).toLocaleString()})]}),e.jsxs("div",{className:`${t.cardBg} rounded-lg p-2 sm:p-3 border ${t.border}`,children:[e.jsx("p",{className:`text-xs ${t.textSecondary} mb-1`,children:"Output Tokens"}),e.jsx("p",{className:`txt-lg sm:text-xl font-bold ${t.text}`,children:((o.token_usage||o.tokenUsage)?.output_tokens||(o.token_usage||o.tokenUsage)?.outputTokens||0).toLocaleString()})]}),e.jsxs("div",{className:`${t.cardBg} rounded-lg p-2 sm:p-3 border ${t.border}`,children:[e.jsx("p",{className:`text-xs ${t.textSecondary} mb-1`,children:"Total Tokens"}),e.jsx("p",{className:"text-lg sm:text-xl font-bold text-blue-600",children:((o.token_usage||o.tokenUsage)?.total_tokens||(o.token_usage||o.tokenUsage)?.totalTokens||0).toLocaleString()})]})]})]}),e.jsx("div",{className:"p-3 sm:p-4 lg:p-6 overflow-y-auto",style:{maxHeight:"50vh"},children:o.transcripts&&o.transcripts.length>0?e.jsxs("div",{className:"space-y-3 sm:space-y-4 lg:space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:`text-xs sm:text-sm ${t.textSecondary} mb-3 sm:mb-4`,children:["Conversation started at"," ",me(o.startTime)]})}),o.transcripts.map((s,r)=>e.jsx("div",{className:`flex ${s.speaker==="ai"?"justify-start":"justify-end"} animate-fadeIn`,children:e.jsxs("div",{className:`flex w-full max-w-full sm:max-w-2xl ${s.speaker==="ai"?"flex-row":"flex-row-reverse"} items-start gap-2 sm:gap-3`,children:[e.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 lg:w-10 lg:h-10 rounded-full flex items-center justify-center flex-shrink-0 ${s.speaker==="ai"?"bg-gradient-to-br from-blue-500 to-blue-600 text-white":"bg-gradient-to-br from-gray-600 to-gray-700 text-white"}`,children:s.speaker==="ai"?e.jsx(Pe,{className:"w-3 h-3 sm:w-4 sm:h-4 lg:w-5 lg:h-5"}):e.jsx(F,{className:"w-3 h-3 sm:w-4 sm:h-4 lg:w-5 lg:h-5"})}),e.jsxs("div",{className:`rounded-lg sm:rounded-xl lg:rounded-2xl px-2 py-2 sm:px-3 sm:py-2 lg:px-4 lg:py-3 shadow-sm flex-1 min-w-0 ${s.speaker==="ai"?`${t.cardBg} border ${t.border} ${t.text}`:"bg-gradient-to-br from-blue-500 to-blue-600 text-white"}`,children:[e.jsxs("div",{className:`flex items-center gap-1 sm:gap-2 mb-1 sm:mb-2 ${s.speaker==="ai"?"justify-start":"justify-end"}`,children:[e.jsx("span",{className:`text-xs sm:text-xs font-medium uppercase tracking-wide truncate ${s.speaker==="ai"?"text-blue-600":"text-blue-100"}`,children:s.speaker==="ai"?"ShivAI Assistant":"Customer"}),e.jsx("span",{className:`text-xs ${s.speaker==="ai"?"text-gray-500":"text-blue-100"} flex-shrink-0`,children:Se(s.timestamp)})]}),e.jsx("p",{className:"text-xs sm:text-sm leading-relaxed break-words",children:s.message})]})]})},r)),e.jsx("div",{className:`text-center pt-3 sm:pt-4 border-t ${t.border}`,children:e.jsxs("p",{className:`text-xs sm:text-sm ${t.textSecondary}`,children:["Session ended â€¢ Resolution: ",o.resolution]})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:`w-16 h-16 sm:w-20 sm:h-20 ${t.activeBg} rounded-full flex items-center justify-center mb-4`,children:e.jsx(N,{className:`w-8 h-8 sm:w-10 sm:h-10 ${t.textSecondary}`})}),e.jsx("h4",{className:`text-lg sm:text-xl font-semibold ${t.text} mb-2`,children:"No Messages Found"}),e.jsx("p",{className:`text-sm sm:text-base ${t.textSecondary} max-w-md`,children:"This session doesn't have any transcript messages available. The conversation might not have been recorded or the data might not be available yet."}),e.jsx("div",{className:`mt-4 p-3 ${t.activeBg} rounded-lg`,children:e.jsxs("p",{className:`text-xs sm:text-sm ${t.text}`,children:["Session ID: ",o.sessionId]})})]})}),o.tags&&o.tags.length>0&&e.jsxs("div",{className:`px-6 py-3 ${t.activeBg} border-t ${t.border}`,children:[e.jsx("p",{className:`text-xs ${t.textSecondary} uppercase tracking-wide mb-2`,children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.tags.map((s,r)=>e.jsxs("span",{className:`px-3 py-1 ${u==="dark"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-blue-100 text-blue-700"} text-xs font-medium rounded-full`,children:["#",s]},r))})]}),e.jsx("div",{className:`px-6 py-4 border-t ${t.border} ${t.cardBg} flex items-center justify-between`,children:e.jsxs("div",{className:`flex items-center gap-2 text-sm ${t.textSecondary}`,children:[e.jsx(q,{className:"w-4 h-4"}),e.jsxs("span",{children:["Updated: ",me(o.startTime)]})]})})]})}),e.jsxs("div",{className:`mt-4 sm:mt-6 pt-4 sm:pt-6 border-t ${t.border}`,children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:`text-sm ${t.textSecondary} text-center sm:text-left`,children:["Showing"," ",e.jsx("span",{className:`font-medium ${t.text}`,children:le+1})," ","to"," ",e.jsx("span",{className:`font-medium ${t.text}`,children:Math.min(we,y)})," ","of"," ",e.jsx("span",{className:`font-medium ${t.text}`,children:y})," ","results",e.jsxs("span",{className:"block sm:inline sm:ml-1 text-xs",children:["(Page ",x," of ",m,")"]})]}),m>1&&e.jsxs("nav",{className:"hidden sm:flex items-center justify-end space-x-1","aria-label":"Pagination",children:[e.jsxs("button",{onClick:ie,disabled:x===1,className:`
                    inline-flex items-center px-3 py-2 text-sm font-medium rounded-lg
                    border ${t.border} ${t.text}
                    hover:${t.hover} 
                    disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent
                    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
                    transition-all duration-200
                  `,title:"Previous page","aria-label":"Go to previous page",children:[e.jsx(R,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[x>3&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>z(1),className:`
                          inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-lg
                          border ${t.border} ${t.text}
                          hover:${t.hover}
                          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
                          transition-all duration-200 min-w-[40px]
                        `,"aria-label":"Go to page 1",children:"1"}),x>4&&e.jsx("span",{className:`px-2 py-2 text-sm ${t.textSecondary}`,"aria-hidden":"true",children:"â‹¯"})]}),Array.from({length:m},(s,r)=>r+1).filter(s=>s>=Math.max(1,x-1)&&s<=Math.min(m,x+1)).map(s=>e.jsx("button",{onClick:()=>z(s),className:`
                          inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-lg
                          border transition-all duration-200 min-w-[40px]
                          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
                          ${s===x?`${t.activeBg} ${t.text} border-blue-500 shadow-sm`:`${t.border} ${t.text} hover:${t.hover}`}
                        `,"aria-label":`Go to page ${s}`,"aria-current":s===x?"page":void 0,children:s},s)),x<m-2&&e.jsxs(e.Fragment,{children:[x<m-3&&e.jsx("span",{className:`px-2 py-2 text-sm ${t.textSecondary}`,"aria-hidden":"true",children:"â‹¯"}),e.jsx("button",{onClick:()=>z(m),className:`
                          inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-lg
                          border ${t.border} ${t.text}
                          hover:${t.hover}
                          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
                          transition-all duration-200 min-w-[40px]
                        `,"aria-label":`Go to page ${m}`,children:m})]})]}),e.jsxs("button",{onClick:ce,disabled:x===m,className:`
                    inline-flex items-center px-3 py-2 text-sm font-medium rounded-lg
                    border ${t.border} ${t.text}
                    hover:${t.hover}
                    disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent
                    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
                    transition-all duration-200
                  `,title:"Next page","aria-label":"Go to next page",children:[e.jsx("span",{className:"hidden sm:inline mr-1",children:"Next"}),e.jsx(R,{className:"w-4 h-4 rotate-180"})]})]})]}),m>1&&e.jsxs("div",{className:"flex sm:hidden items-center justify-center mt-4 space-x-2",children:[e.jsx("button",{onClick:ie,disabled:x===1,className:`
                  p-2 rounded-lg border ${t.border} ${t.text}
                  hover:${t.hover} disabled:opacity-50 disabled:cursor-not-allowed
                  focus:outline-none focus:ring-2 focus:ring-blue-500
                  transition-all duration-200
                `,"aria-label":"Previous page",children:e.jsx(R,{className:"w-4 h-4"})}),e.jsxs("div",{className:`px-4 py-2 text-sm font-medium ${t.text} border ${t.border} rounded-lg`,children:["Page ",x," of ",m]}),e.jsx("button",{onClick:ce,disabled:x===m,className:`
                  p-2 rounded-lg border ${t.border} ${t.text}
                  hover:${t.hover} disabled:opacity-50 disabled:cursor-not-allowed
                  focus:outline-none focus:ring-2 focus:ring-blue-500
                  transition-all duration-200
                `,"aria-label":"Next page",children:e.jsx(R,{className:"w-4 h-4 rotate-180"})})]})]})]})]})},Le=({employee:f,onBack:u})=>{const{currentTheme:t,theme:v}=ge(),[b,T]=d.useState("sessions"),[w,o]=d.useState(""),[P,O]=d.useState("all"),[$,C]=d.useState("all"),[S,U]=d.useState(null),[V,pe]=d.useState([{id:1,sessionId:"SES-2024-001",clientName:"John Smith",type:"chat",startTime:"2024-01-15 14:30:00",endTime:"2024-01-15 14:33:15",duration:"3m 15s",status:"completed",rating:5,sentiment:"positive",transcript:[{timestamp:"14:30:05",speaker:"user",message:"Hi, I need help with my account balance inquiry."},{timestamp:"14:30:08",speaker:"ai",message:"Hello! I'd be happy to help you with your account balance. Can you please provide your account number?"},{timestamp:"14:30:25",speaker:"user",message:"Sure, it's 123456789"},{timestamp:"14:30:30",speaker:"ai",message:"Thank you. Let me check your account... I can see your current balance is $2,450.75. Is there anything specific you'd like to know about your account?"},{timestamp:"14:30:45",speaker:"user",message:"That's perfect, thank you so much for the quick help!"},{timestamp:"14:30:50",speaker:"ai",message:"You're very welcome! Is there anything else I can assist you with today?"},{timestamp:"14:30:55",speaker:"user",message:"No, that's all. Thanks again!"},{timestamp:"14:31:00",speaker:"ai",message:"Perfect! Have a wonderful day and thank you for choosing our service."}],resolution:"Account balance provided successfully",tags:["account","balance","inquiry"]},{id:2,sessionId:"SES-2024-002",clientName:"Sarah Johnson",type:"voice",startTime:"2024-01-15 13:45:00",endTime:"2024-01-15 13:51:30",duration:"6m 30s",status:"completed",rating:4,sentiment:"neutral",transcript:[{timestamp:"13:45:05",speaker:"user",message:"Hello, I'm having trouble with my recent order"},{timestamp:"13:45:10",speaker:"ai",message:"Hi Sarah! I'm sorry to hear you're having issues with your order. Could you please provide me with your order number?"},{timestamp:"13:45:20",speaker:"user",message:"Yes, it's ORD-789123"},{timestamp:"13:45:25",speaker:"ai",message:"Let me look that up for you... I can see your order was placed on January 12th. What specific issue are you experiencing?"},{timestamp:"13:45:40",speaker:"user",message:"The delivery was supposed to be today but I haven't received it yet"},{timestamp:"13:45:45",speaker:"ai",message:"I understand your concern. Let me check the tracking information... It looks like there was a delay at the sorting facility. Your package is now scheduled for delivery tomorrow morning."},{timestamp:"13:46:15",speaker:"user",message:"That's frustrating, but I appreciate you checking. Will I get any compensation for the delay?"},{timestamp:"13:46:20",speaker:"ai",message:"Absolutely, I can offer you a 10% discount on your next order and expedite shipping at no charge. Would that be acceptable?"},{timestamp:"13:46:35",speaker:"user",message:"Yes, that works for me. Thank you for resolving this quickly."}],resolution:"Delivery delay resolved with compensation offered",tags:["order","delivery","delay","compensation"]},{id:3,sessionId:"SES-2024-003",clientName:"Mike Wilson",type:"chat",startTime:"2024-01-15 12:15:00",endTime:"2024-01-15 12:16:45",duration:"1m 45s",status:"escalated",rating:2,sentiment:"negative",transcript:[{timestamp:"12:15:05",speaker:"user",message:"This is ridiculous! I've been trying to cancel my subscription for weeks!"},{timestamp:"12:15:10",speaker:"ai",message:"I sincerely apologize for the frustration you're experiencing with the cancellation process. I'm here to help you resolve this immediately. May I have your account email?"},{timestamp:"12:15:25",speaker:"user",message:"mike.wilson@email.com - and I want this fixed NOW"},{timestamp:"12:15:30",speaker:"ai",message:"I understand your urgency, Mike. I'm looking up your account now... I see there have been multiple cancellation attempts. This requires immediate attention from our billing specialist. I'm escalating this to our senior support team who will contact you within the next hour."},{timestamp:"12:15:50",speaker:"user",message:"Fine, but this better be resolved today!"}],resolution:"Escalated to senior support team",tags:["subscription","cancellation","escalated","urgent"]}]),_=V.filter(n=>{const m=n.clientName.toLowerCase().includes(w.toLowerCase())||n.sessionId.toLowerCase().includes(w.toLowerCase()),p=$==="all"||n.type===$;return m&&p&&P==="all"}),x=n=>{const m={completed:"bg-green-100 text-green-800",escalated:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",ongoing:"bg-blue-100 text-blue-800"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${m[n]}`,children:n.charAt(0).toUpperCase()+n.slice(1)})},j=n=>{const m={positive:"bg-green-100 text-green-800",neutral:"bg-gray-100 text-gray-800",negative:"bg-red-100 text-red-800"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${m[n]}`,children:n.charAt(0).toUpperCase()+n.slice(1)})},D=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),y=n=>Array.from({length:5},(m,p)=>e.jsx(_e,{className:`w-4 h-4 ${p<n?"text-yellow-400 fill-current":"text-gray-300"}`},p));return f?e.jsxs("div",{className:`${t.cardBg} backdrop-blur-lg rounded-2xl border ${t.border} p-6 shadow-lg`,children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(R,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(F,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold ${t.text}`,children:f.name}),e.jsx("p",{className:`text-sm ${t.textSecondary}`,children:"Employee Details & Session History"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xl font-bold ${t.text}`,children:f.totalSessions}),e.jsx("p",{className:`text-sm ${t.textSecondary}`,children:"Total Sessions"})]}),e.jsx(N,{className:"w-6 h-6 text-blue-500"})]})}),e.jsx("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:`text-xl font-bold ${t.text}`,children:[f.performance,"%"]}),e.jsx("p",{className:`text-sm ${t.textSecondary}`,children:"Performance Score"})]}),e.jsx(Y,{className:"w-6 h-6 text-green-500"})]})}),e.jsx("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xl font-bold ${t.text}`,children:f.avgSessionDuration}),e.jsx("p",{className:`text-sm ${t.textSecondary}`,children:"Avg Duration"})]}),e.jsx(q,{className:"w-6 h-6 text-purple-500"})]})}),e.jsx("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xl font-bold ${t.text}`,children:f.client}),e.jsx("p",{className:`text-sm ${t.textSecondary}`,children:"Client"})]}),e.jsx(J,{className:"w-6 h-6 text-orange-500"})]})})]}),e.jsx("div",{className:"flex space-x-1 mb-6 p-1 bg-gray-100 rounded-lg",children:[{id:"sessions",label:"Sessions & Transcripts",icon:N},{id:"analytics",label:"Analytics",icon:ee},{id:"settings",label:"Settings",icon:F}].map(n=>{const m=n.icon;return e.jsxs("button",{onClick:()=>T(n.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all ${b===n.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(m,{className:"w-4 h-4"}),n.label]},n.id)})}),b==="sessions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search sessions...",value:w,onChange:n=>o(n.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:$,onChange:n=>C(n.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"chat",children:"Chat"}),e.jsx("option",{value:"voice",children:"Voice"})]}),e.jsxs("select",{value:P,onChange:n=>O(n.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20",children:[e.jsx("option",{value:"all",children:"All Dates"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]}),e.jsx("button",{className:"p-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:e.jsx(X,{className:"w-4 h-4 text-gray-600"})})]})]}),e.jsx("div",{className:"space-y-4",children:_.map(n=>e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4 hover:shadow-md transition-shadow`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[n.type==="chat"?e.jsx(N,{className:"w-5 h-5 text-blue-500"}):e.jsx(Z,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:`font-medium ${t.text}`,children:n.sessionId})]}),x(n.status),j(n.sentiment)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:y(n.rating)}),e.jsx("button",{onClick:()=>U(n),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Transcript",children:e.jsx(K,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:`${t.textSecondary} mb-1`,children:"Client"}),e.jsx("p",{className:t.text,children:n.clientName})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${t.textSecondary} mb-1`,children:"Duration"}),e.jsx("p",{className:t.text,children:n.duration})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${t.textSecondary} mb-1`,children:"Start Time"}),e.jsx("p",{className:t.text,children:D(n.startTime)})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${t.textSecondary} mb-1`,children:"Resolution"}),e.jsx("p",{className:`${t.text} truncate`,children:n.resolution})]})]}),n.tags&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:n.tags.map((m,p)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:m},p))})]},n.id))})]}),b==="analytics"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ee,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:`text-lg font-semibold ${t.text} mb-2`,children:"Analytics Coming Soon"}),e.jsx("p",{className:`text-sm ${t.textSecondary}`,children:"Detailed performance analytics and insights will be available here."})]}),b==="settings"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(F,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:`text-lg font-semibold ${t.text} mb-2`,children:"Employee Settings"}),e.jsx("p",{className:`text-sm ${t.textSecondary}`,children:"Configuration and management options will be available here."})]}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Session Transcript - ",S.sessionId]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[S.clientName," â€¢ ",S.duration]})]}),e.jsx("button",{onClick:()=>U(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Q,{className:"w-5 h-5 text-gray-600"})})]}),e.jsx("div",{className:"p-4 overflow-y-auto max-h-96",children:e.jsx("div",{className:"space-y-4",children:S.transcript.map((n,m)=>e.jsx("div",{className:`flex ${n.speaker==="ai"?"justify-start":"justify-end"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${n.speaker==="ai"?"bg-gray-100 text-gray-800":"bg-blue-600 text-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs opacity-70",children:n.speaker==="ai"?"AI":"User"}),e.jsx("span",{className:"text-xs opacity-70",children:n.timestamp})]}),e.jsx("p",{className:"text-sm",children:n.message})]})},m))})}),e.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ue,{className:"w-4 h-4"}),"Download Transcript"]})})]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(F,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600",children:"Employee not found"})]})},Ve=()=>{const[f,u]=d.useState("list"),[t,v]=d.useState(null),b=o=>{v(o),u("detail")},T=()=>{u("list"),v(null)},w=()=>{switch(f){case"detail":return e.jsx(Le,{employee:t,onBack:T});default:return e.jsx(Ee,{onViewEmployee:b})}};return e.jsx("div",{className:"w-full",children:w()})};export{Le as AIEmployeeDetail,Ve as AIEmployeeStatsContainer,Ee as AIEmployeeStatsMain,Ve as default};
