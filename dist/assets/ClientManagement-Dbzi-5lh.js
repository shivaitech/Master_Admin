import{u as Ge,j as e,R as ke,f as Ne,g as ae,h as ge,i as $e,k as ms,m as We,o as be,p as fe,q as Q,r as te,s as ve,t as ps,v as gs,w as us,x as bs,y as hs,z as ys,B as js,D as fs,G as Ve,H as vs,I as we,J as Ns,K as Ie,N as $s,O as ze,P as ws,Q as Pe,S as Fe,U as _s,V as ks,W as Ss,X as qe,Y as Se,Z as W,_ as Me,$ as Oe,a0 as Cs,a1 as Ke,a2 as As,a3 as Ue,a4 as _e,a5 as He,a6 as L,a7 as Bs}from"./admin-Cce-YsoM.js";import{r as h}from"./router-XmtKX7_0.js";import"./icons-Cqmju2Jh.js";import"./vendor-DJG_os-6.js";const ue=[{value:"saas-software",label:"SaaS & Software Development"},{value:"technology-it",label:"Technology / IT Services"},{value:"healthcare-clinics",label:"Healthcare & Clinics"},{value:"finance-insurance",label:"Finance & Insurance"},{value:"retail-ecommerce",label:"Retail & E-Commerce"},{value:"education-training",label:"Education & Training"},{value:"real-estate-property",label:"Real Estate & Property"},{value:"hospitality-travel",label:"Hospitality & Travel"},{value:"food-beverage",label:"Food & Beverage (Restaurants, Cafes, Catering)"},{value:"automotive-transportation",label:"Automotive & Transportation"},{value:"legal-professional",label:"Legal & Professional Services"},{value:"manufacturing-industrial",label:"Manufacturing & Industrial"},{value:"consulting-business",label:"Consulting & Business Services"},{value:"marketing-advertising",label:"Marketing & Advertising"},{value:"construction-home",label:"Construction & Home Services"},{value:"logistics-supply",label:"Logistics & Supply Chain"},{value:"media-entertainment",label:"Media & Entertainment"},{value:"beauty-wellness",label:"Beauty, Wellness & Personal Care"},{value:"nonprofit-community",label:"Nonprofit & Community Organizations"},{value:"other",label:"Other"}],Ds=[{value:"sales",label:"Sales & Business Development"},{value:"support",label:"Customer Support & Service"},{value:"appointment",label:"Appointment & Scheduling"},{value:"order",label:"Order Management & Billing"},{value:"product",label:"Product / Service Explainers"},{value:"feedback",label:"Feedback & Engagement"},{value:"custom",label:"Custom Workflows"}],Ye=[{value:"sales-business-development",label:"Sales & Business Development"},{value:"customer-support-service",label:"Customer Support & Service"},{value:"appointment-scheduling",label:"Appointment & Scheduling"},{value:"order-billing",label:"Order Management & Billing"},{value:"product-service-explainers",label:"Product / Service Explainers"},{value:"feedback-engagement",label:"Feedback & Engagement"},{value:"custom-workflows",label:"Custom Workflows"}],Es=[{value:"All",label:"ðŸŒ Multilingual"},{value:"ar",label:"ðŸ‡¸ðŸ‡¦ Arabic"},{value:"zh",label:"ðŸ‡¨ðŸ‡³ Chinese"},{value:"nl",label:"ðŸ‡³ðŸ‡± Dutch"},{value:"en-GB",label:"ðŸ‡¬ðŸ‡§ English (UK)"},{value:"en-US",label:"ðŸ‡ºðŸ‡¸ English (US)"},{value:"en-IN",label:"ðŸ‡®ðŸ‡³ English (India)"},{value:"fr",label:"ðŸ‡«ðŸ‡· French"},{value:"de",label:"ðŸ‡©ðŸ‡ª German"},{value:"hi",label:"ðŸ‡®ðŸ‡³ Hindi"},{value:"it",label:"ðŸ‡®ðŸ‡¹ Italian"},{value:"ja",label:"ðŸ‡¯ðŸ‡µ Japanese"},{value:"ko",label:"ðŸ‡°ðŸ‡· Korean"},{value:"pt",label:"ðŸ‡µðŸ‡¹ Portuguese"},{value:"pl",label:"ðŸ‡µðŸ‡± Polish"},{value:"ru",label:"ðŸ‡·ðŸ‡º Russian"},{value:"es",label:"ðŸ‡ªðŸ‡¸ Spanish"},{value:"tr",label:"ðŸ‡¹ðŸ‡· Turkish"}],Ls=[{value:"neutral",label:"Gender Neutral"},{value:"male",label:"Male"},{value:"female",label:"Female"}],pe=[{id:"starter",name:"Starter",apiKey:"Starter Plan",description:"Perfect for small businesses",maxAgents:1,aiEmployees:1,price:"$49/mo"},{id:"professional",name:"Professional",apiKey:"Professional Plan",description:"For Growing Teams & Small Businesses",maxAgents:5,aiEmployees:5,price:"$149/mo"},{id:"business",name:"Business",apiKey:"Business Plan",description:"For Scaling Companies & Mid-Sized Teams",maxAgents:15,aiEmployees:15,price:"$299/mo"},{id:"custom",name:"Custom",apiKey:"Custom Plan",description:"For Large Organizations & Enterprises",maxAgents:999,aiEmployees:999,price:"Custom"}],Rs=({client:i,onBack:s,onEdit:l,onDelete:g,onApprove:k,onReject:N,onViewAgent:C})=>{const{theme:Y,currentTheme:x}=Ge(),[f,v]=h.useState("onboarding"),[A,c]=h.useState(!1),j={totalAIEmployees:i?.ai_employees?.length||0,liveAIEmployees:i?.ai_employees?.filter(F=>F.status==="active")?.length||0,totalCalls:1247,totalRevenue:2450,isActive:i?.isApproved||!1},le=[{id:"onboarding",label:"Onboarding Data",icon:te},{id:"details",label:"Client Details",icon:qe},{id:"employees",label:"AI Employees",icon:Q},{id:"transactions",label:"Transactions",icon:He}];return e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0",children:[e.jsx("button",{onClick:s,className:`p-2 rounded-lg ${x.hover} ${x.text} transition-all duration-200 flex-shrink-0`,children:e.jsx(ke,{className:"w-5 h-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:`text-xl sm:text-2xl font-bold ${x.text} truncate`,children:i?.userData?.fullName||i?.company_basics?.name||"Client Details"}),e.jsx("p",{className:`text-sm ${x.textSecondary} truncate`,children:i?.userData?.email||i?.company_basics?.company_email||""})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 flex-wrap",children:[i?.userData?.onboarding&&!i?.isApproved&&!i?.isRejected&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>N&&N(i),className:"px-3 py-2 bg-red-500 hover:bg-red-600 text-white text-sm font-medium rounded-lg transition-all duration-200 flex items-center gap-2",title:"Reject Client",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Reject"})]}),e.jsxs("button",{onClick:()=>k&&k(i),className:"px-3 py-2 bg-green-500 hover:bg-green-600 text-white text-sm font-medium rounded-lg transition-all duration-200 flex items-center gap-2",title:"Approve Client",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Approve"})]})]}),e.jsx("button",{onClick:()=>l&&l(i?.userData),className:`p-2 rounded-lg ${x.hover} ${x.text} transition-all duration-200`,title:"Edit Client",children:e.jsx(Ne,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>g&&g(i?.userData),className:"p-2 rounded-lg hover:bg-red-50 text-red-500 transition-all duration-200",title:"Delete Client",children:e.jsx(Se,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"hidden lg:grid lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`${x.cardBg} border ${x.border} rounded-lg p-4 md:p-6 shadow-lg hover:scale-[1.02] transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(Q,{className:"w-5 h-5 md:w-6 md:h-6 text-blue-600 dark:text-blue-400"})}),e.jsx("span",{className:"text-sm font-medium text-blue-500",children:"Total"})]}),e.jsx("h3",{className:`text-2xl md:text-3xl font-semibold ${x.text} mb-1`,children:j.totalAIEmployees}),e.jsx("p",{className:`text-sm font-medium ${x.text} mb-1`,children:"AI Employees"}),e.jsx("p",{className:`text-xs ${x.textSecondary}`,children:"Configured"})]}),e.jsxs("div",{className:`${x.cardBg} border ${x.border} rounded-lg p-4 md:p-6 shadow-lg hover:scale-[1.02] transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx(Ue,{className:"w-5 h-5 md:w-6 md:h-6 text-green-600 dark:text-green-400"})}),e.jsx("span",{className:"text-sm font-medium text-green-500",children:"Live"})]}),e.jsx("h3",{className:`text-2xl md:text-3xl font-semibold ${x.text} mb-1`,children:j.liveAIEmployees}),e.jsx("p",{className:`text-sm font-medium ${x.text} mb-1`,children:"Active Now"}),e.jsx("p",{className:`text-xs ${x.textSecondary}`,children:"Online"})]}),e.jsxs("div",{className:`${x.cardBg} border ${x.border} rounded-lg p-4 md:p-6 shadow-lg hover:scale-[1.02] transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx(be,{className:"w-5 h-5 md:w-6 md:h-6 text-purple-600 dark:text-purple-400"})}),e.jsx("span",{className:"text-sm font-medium text-purple-500",children:"Calls"})]}),e.jsx("h3",{className:`text-2xl md:text-3xl font-semibold ${x.text} mb-1`,children:j.totalCalls.toLocaleString()}),e.jsx("p",{className:`text-sm font-medium ${x.text} mb-1`,children:"Total Calls"}),e.jsx("p",{className:`text-xs ${x.textSecondary}`,children:"This month"})]}),e.jsxs("div",{className:`${x.cardBg} border ${x.border} rounded-lg p-4 md:p-6 shadow-lg hover:scale-[1.02] transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center",children:e.jsx(_e,{className:"w-5 h-5 md:w-6 md:h-6 text-emerald-600 dark:text-emerald-400"})}),e.jsx("span",{className:`text-sm font-medium ${j.isActive?"text-emerald-500":"text-gray-500"}`,children:j.isActive?"Active":"Inactive"})]}),e.jsxs("h3",{className:`text-2xl md:text-3xl font-semibold ${x.text} mb-1`,children:["$",j.totalRevenue.toFixed(2)]}),e.jsx("p",{className:`text-sm font-medium ${x.text} mb-1`,children:"Revenue"}),e.jsx("p",{className:`text-xs ${x.textSecondary}`,children:"Monthly"})]})]}),e.jsx("div",{className:"lg:hidden overflow-x-auto scrollbar-hide",children:e.jsxs("div",{className:"flex gap-3 md:gap-4 pb-2 px-1",style:{width:"max-content"},children:[e.jsx("div",{className:"group flex-shrink-0 w-44 md:w-52",children:e.jsxs("div",{className:`${x.cardBg} border ${x.border} rounded-lg p-3 md:p-4 hover:scale-[1.02] transition-all duration-200 shadow-lg`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-3",children:[e.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(Q,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-600 dark:text-blue-400"})}),e.jsx("span",{className:"text-xs font-medium text-blue-500",children:"Total"})]}),e.jsx("h3",{className:`text-xl md:text-2xl font-semibold ${x.text} mb-1`,children:j.totalAIEmployees}),e.jsx("p",{className:`text-xs md:text-sm font-medium ${x.text} mb-1 leading-tight`,children:"AI Employees"}),e.jsx("p",{className:`text-xs ${x.textSecondary} leading-tight`,children:"Configured"})]})}),e.jsx("div",{className:"group flex-shrink-0 w-44 md:w-52",children:e.jsxs("div",{className:`${x.cardBg} border ${x.border} rounded-lg p-3 md:p-4 hover:scale-[1.02] transition-all duration-200 shadow-lg`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-3",children:[e.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx(Ue,{className:"w-4 h-4 md:w-5 md:h-5 text-green-600 dark:text-green-400"})}),e.jsx("span",{className:"text-xs font-medium text-green-500",children:"Live"})]}),e.jsx("h3",{className:`text-xl md:text-2xl font-semibold ${x.text} mb-1`,children:j.liveAIEmployees}),e.jsx("p",{className:`text-xs md:text-sm font-medium ${x.text} mb-1 leading-tight`,children:"Active Now"}),e.jsx("p",{className:`text-xs ${x.textSecondary} leading-tight`,children:"Online"})]})}),e.jsx("div",{className:"group flex-shrink-0 w-44 md:w-52",children:e.jsxs("div",{className:`${x.cardBg} border ${x.border} rounded-lg p-3 md:p-4 hover:scale-[1.02] transition-all duration-200 shadow-lg`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-3",children:[e.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx(be,{className:"w-4 h-4 md:w-5 md:h-5 text-purple-600 dark:text-purple-400"})}),e.jsx("span",{className:"text-xs font-medium text-purple-500",children:"Calls"})]}),e.jsx("h3",{className:`text-xl md:text-2xl font-semibold ${x.text} mb-1`,children:j.totalCalls.toLocaleString()}),e.jsx("p",{className:`text-xs md:text-sm font-medium ${x.text} mb-1 leading-tight`,children:"Total Calls"}),e.jsx("p",{className:`text-xs ${x.textSecondary} leading-tight`,children:"This month"})]})}),e.jsx("div",{className:"group flex-shrink-0 w-44 md:w-52",children:e.jsxs("div",{className:`${x.cardBg} border ${x.border} rounded-lg p-3 md:p-4 hover:scale-[1.02] transition-all duration-200 shadow-lg`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-3",children:[e.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center",children:e.jsx(_e,{className:"w-4 h-4 md:w-5 md:h-5 text-emerald-600 dark:text-emerald-400"})}),e.jsx("span",{className:`text-xs font-medium ${j.isActive?"text-emerald-500":"text-gray-500"}`,children:j.isActive?"Active":"Inactive"})]}),e.jsxs("h3",{className:`text-xl md:text-2xl font-semibold ${x.text} mb-1`,children:["$",j.totalRevenue.toFixed(2)]}),e.jsx("p",{className:`text-xs md:text-sm font-medium ${x.text} mb-1 leading-tight`,children:"Revenue"}),e.jsx("p",{className:`text-xs ${x.textSecondary} leading-tight`,children:"Monthly"})]})})]})})]}),e.jsxs("div",{className:`${x.cardBg} border ${x.border} rounded-lg shadow-lg`,children:[e.jsx("div",{className:`flex gap-1 border-b ${x.border} overflow-x-auto scrollbar-hide`,children:le.map(F=>e.jsxs("button",{onClick:()=>v(F.id),className:`flex items-center gap-2 px-4 py-3 text-sm font-medium transition-all duration-200 whitespace-nowrap ${f===F.id?`${x.text} border-b-2 border-blue-500`:`${x.textSecondary} hover:${x.text}`}`,children:[e.jsx(F.icon,{className:"w-4 h-4"}),F.label]},F.id))}),e.jsxs("div",{className:"p-6",children:[f==="onboarding"&&e.jsx(Is,{client:i,currentTheme:x}),f==="details"&&e.jsx(Ps,{client:i,currentTheme:x}),f==="employees"&&e.jsx(Fs,{client:i,currentTheme:x,onViewAgent:C}),f==="transactions"&&e.jsx(Os,{client:i,currentTheme:x})]})]})]})},Is=({client:i,currentTheme:s})=>{const l=i?.onboardingDetails?.onboarding||i?.userData?.onboarding||i?.onboarding||{};return console.log("ðŸ” OnboardingDataTab - Full client data:",i),console.log("ðŸ” OnboardingDataTab - Onboarding data:",l),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsx("h3",{className:`text-lg font-semibold ${s.text} mb-4`,children:"Onboarding Information"}),!l||Object.keys(l).length===0?e.jsxs("div",{className:`text-center py-8 rounded-lg border-2 border-dashed ${s.border}`,children:[e.jsx(te,{className:`w-12 h-12 mx-auto mb-3 ${s.textSecondary} opacity-50`}),e.jsx("p",{className:`${s.textSecondary} font-medium mb-2`,children:"No onboarding data available"}),e.jsx("p",{className:`${s.textSecondary} text-sm opacity-75`,children:"This client hasn't completed the onboarding process yet"})]}):e.jsxs("div",{className:"space-y-6",children:[l.company_basics&&e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[e.jsxs("h4",{className:`text-base md:text-lg font-semibold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx($e,{className:"w-4 h-4 md:w-5 md:h-5"}),"Company Basics"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:[l.company_basics.name&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Company Name"}),e.jsx("p",{className:`${s.text} font-medium`,children:l.company_basics.name})]}),l.company_basics.company_email&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Company Email"}),e.jsx("p",{className:`${s.text} font-medium`,children:l.company_basics.company_email})]}),l.company_basics.company_phone&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Phone"}),e.jsx("p",{className:`${s.text} font-medium`,children:l.company_basics.company_phone})]}),l.company_basics.website&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Website"}),e.jsx("p",{className:`${s.text} font-medium`,children:e.jsx("a",{href:l.company_basics.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:l.company_basics.website})})]}),l.company_basics.company_size&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Company Size"}),e.jsx("p",{className:`${s.text} font-medium`,children:l.company_basics.company_size})]}),l.company_basics.linkedin_profile&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"LinkedIn"}),e.jsx("p",{className:`${s.text} font-medium`,children:e.jsx("a",{href:l.company_basics.linkedin_profile,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"LinkedIn Profile"})})]})]}),l.company_basics.industry&&Array.isArray(l.company_basics.industry)&&l.company_basics.industry.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Industries"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.company_basics.industry.map((g,k)=>{const N=ue.find(C=>C.value===g)?.label||g;return e.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:N},k)})})]}),l.company_basics.description&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Description"}),e.jsx("p",{className:`${s.text} leading-relaxed`,children:l.company_basics.description})]}),l.company_basics.address&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Address"}),e.jsx("p",{className:`${s.text} leading-relaxed`,children:l.company_basics.address})]})]}),l.plan_details&&e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[e.jsxs("h4",{className:`text-base md:text-lg font-semibold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(We,{className:"w-4 h-4 md:w-5 md:h-5"}),"Plan Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[l.plan_details.type&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Plan Type"}),e.jsx("p",{className:`${s.text} font-medium`,children:l.plan_details.type})]}),l.plan_details.billing_contact&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Billing Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[l.plan_details.billing_contact.name&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Name"}),e.jsx("p",{className:`${s.text} font-medium`,children:l.plan_details.billing_contact.name})]}),l.plan_details.billing_contact.email&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Email"}),e.jsx("p",{className:`${s.text} font-medium`,children:l.plan_details.billing_contact.email})]}),l.plan_details.billing_contact.phone&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Phone"}),e.jsx("p",{className:`${s.text} font-medium`,children:l.plan_details.billing_contact.phone})]})]})]})]})]}),l.deployment_targets&&e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[e.jsxs("h4",{className:`text-base md:text-lg font-semibold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(ze,{className:"w-4 h-4 md:w-5 md:h-5"}),"Deployment Targets"]}),l.deployment_targets.channels&&Array.isArray(l.deployment_targets.channels)&&l.deployment_targets.channels.length>0&&e.jsxs("div",{className:"mb-3 md:mb-4",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Deployment Channels"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.deployment_targets.channels.map((g,k)=>e.jsx("span",{className:"bg-green-100 text-green-800 px-2 md:px-3 py-1 rounded-full text-xs md:text-sm font-medium capitalize",children:g.replace("_"," ")},k))})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[l.deployment_targets.website_url&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Website URL"}),e.jsx("p",{className:`${s.text} font-medium`,children:e.jsx("a",{href:l.deployment_targets.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:l.deployment_targets.website_url})})]}),l.deployment_targets.whatsapp_phone&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"WhatsApp Phone"}),e.jsx("p",{className:`${s.text} font-medium`,children:l.deployment_targets.whatsapp_phone})]}),l.deployment_targets.support_email&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Support Email"}),e.jsx("p",{className:`${s.text} font-medium`,children:l.deployment_targets.support_email})]})]})]}),l.ai_employees&&Array.isArray(l.ai_employees)&&l.ai_employees.length>0&&e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[e.jsxs("h4",{className:`text-base md:text-lg font-semibold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(Q,{className:"w-4 h-4 md:w-5 md:h-5"}),"AI Employees (",l.ai_employees.length,")"]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:l.ai_employees.map((g,k)=>e.jsxs("div",{className:`border ${s.border} rounded-lg p-3 md:p-4 ${s.searchBg}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(Q,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h5",{className:`font-medium ${s.text} truncate`,children:g?.name||`AI Employee #${k+1}`}),e.jsx("p",{className:`text-xs ${s.textSecondary} truncate`,children:g?.template||g?.type||"Custom Agent"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 text-sm",children:[g?.template&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Template"}),e.jsx("p",{className:`${s.text}`,children:Ye.find(N=>N.value===g.template)?.label||g.template})]}),g?.preferred_language&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Language"}),e.jsx("p",{className:`${s.text}`,children:g.preferred_language})]}),g?.agent_personality&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Personality"}),e.jsx("p",{className:`${s.text} capitalize`,children:g.agent_personality})]}),g?.voice_gender&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Voice"}),e.jsxs("p",{className:`${s.text}`,children:[g.voice_gender," -"," ",g.voice_style||"Default"]})]})]}),g?.special_instructions&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Special Instructions"}),e.jsx("p",{className:`${s.text} text-sm leading-relaxed`,children:g.special_instructions})]}),g?.targets?.success_metrics&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Success Metrics"}),e.jsx("p",{className:`${s.text} text-sm leading-relaxed`,children:g.targets.success_metrics})]}),g?.knowledge_sources&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Knowledge Sources"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[g.knowledge_sources.website_url&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Website URL"}),e.jsx("p",{className:`${s.text}`,children:e.jsx("a",{href:g.knowledge_sources.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:g.knowledge_sources.website_url})})]}),g.knowledge_sources.faqs_text&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"FAQs Text"}),e.jsxs("p",{className:`${s.text}`,children:[g.knowledge_sources.faqs_text.substring(0,100),g.knowledge_sources.faqs_text.length>100?"...":""]})]})]})]}),g?.workflows&&Array.isArray(g.workflows)&&g.workflows.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Workflows"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.workflows.map((N,C)=>e.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-md text-xs font-medium",children:N.name},C))})]})]},k))})]})]})]})},Ps=({client:i,currentTheme:s})=>{const l=i?.userData||{},g=i?.company_basics||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:`text-lg font-semibold ${s.text} mb-4`,children:"Client Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Full Name"}),e.jsx("p",{className:`${s.text} font-medium`,children:l.fullName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Email"}),e.jsx("p",{className:`${s.text} font-medium`,children:l.email||g.company_email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Phone"}),e.jsx("p",{className:`${s.text} font-medium`,children:g.company_phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Website"}),e.jsx("p",{className:`${s.text} font-medium`,children:g.company_website||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Company Size"}),e.jsx("p",{className:`${s.text} font-medium`,children:g.company_size||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i?.isApproved?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":i?.isRejected?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:i?.isApproved?"Approved":i?.isRejected?"Rejected":"Pending"})]})]}),g.company_address&&e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Company Address"}),e.jsx("p",{className:`${s.text} leading-relaxed`,children:g.company_address})]})]})},Fs=({client:i,currentTheme:s,onViewAgent:l})=>{const[g,k]=h.useState([]),[N,C]=h.useState(!0),[Y,x]=h.useState(null);return h.useEffect(()=>{i&&(async()=>{try{C(!0),x(null);const v=await W.getAllAgents();if(console.log("ðŸ¤– AI Agents API Response:",v),v?.success){let A=v.data;if(v.data?.agents&&Array.isArray(v.data.agents)&&(A=v.data.agents),Array.isArray(A)){const c=A.filter(j=>j.userId===i?.userData?._id||j.clientId===i?._id||j.user_id===i?.userData?._id||j.client_id===i?._id);k(c)}else console.log("ðŸ“Š Response data is not an array, using all agents"),k(A?[A]:[])}else throw new Error(v?.message||"Failed to fetch AI employees")}catch(v){console.error("Error fetching AI employees:",v),x(v.message||"Failed to load AI employees");const A=i?.ai_employees||[];k(A)}finally{C(!1)}})()},[i]),N?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:`text-lg font-semibold ${s.text}`,children:"AI Employees"})}),e.jsxs("div",{className:`text-center py-12 rounded-lg ${s.searchBg}`,children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:`${s.textSecondary}`,children:"Loading AI Employees..."})]})]}):Y?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:`text-lg font-semibold ${s.text}`,children:"AI Employees"})}),e.jsxs("div",{className:`text-center py-12 rounded-lg ${s.searchBg}`,children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-3 text-red-500",children:e.jsx(Bs,{className:"w-full h-full"})}),e.jsx("h4",{className:`text-lg font-semibold ${s.text} mb-2`,children:"Error Loading Data"}),e.jsx("p",{className:`${s.textSecondary} mb-4`,children:Y}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:"Retry"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h3",{className:`text-lg font-semibold ${s.text}`,children:["AI Employees (",g.length,")"]})}),g.length===0?e.jsxs("div",{className:`text-center py-12 rounded-lg ${s.searchBg}`,children:[e.jsx(Q,{className:`w-12 h-12 mx-auto mb-3 ${s.textSecondary}`}),e.jsx("h4",{className:`text-lg font-semibold ${s.text} mb-2`,children:"No AI Employees"}),e.jsx("p",{className:`${s.textSecondary}`,children:"This client hasn't created any AI employees yet."})]}):e.jsx("div",{className:"space-y-4",children:g.map((f,v)=>e.jsxs("div",{className:`${s.searchBg} rounded-lg p-4 border ${s.border}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(Q,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-semibold ${s.text}`,children:f.name||"Unnamed Employee"}),e.jsx("p",{className:`text-sm ${s.textSecondary}`,children:f.type||"Assistant"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:f.is_active?"Active":"Inactive"}),e.jsxs("button",{onClick:()=>l&&l(f),className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white text-sm font-medium rounded-lg transition-all duration-200 flex items-center gap-1",title:"View Agent Details",children:[e.jsx(we,{className:"w-3 h-3"}),"View"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Agent ID"}),e.jsx("p",{className:`${s.text} text-sm font-mono`,children:f.id||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Language"}),e.jsx("p",{className:`${s.text} text-sm`,children:f.greeting?.language||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Voice"}),e.jsx("p",{className:`${s.text} text-sm`,children:f.voice||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Created"}),e.jsx("p",{className:`${s.text} text-sm`,children:f.created_at?new Date(f.created_at).toLocaleDateString():"N/A"})]})]})]},f._id||v))})]})},Ms=({agent:i,onBack:s,currentTheme:l})=>{if(!i)return e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500",children:"No agent data available"}),e.jsx("button",{onClick:s,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Back to List"})]});const[g,k]=h.useState("overview"),[N,C]=h.useState(!1),[Y,x]=h.useState(!1),[f,v]=h.useState([]),[A,c]=h.useState(""),[j,le]=h.useState(""),[F,V]=h.useState(!1),[z,U]=h.useState(""),[ie,he]=h.useState("en"),[q,oe]=h.useState({noiseSuppression:!0,echoCancellation:!0,autoGainControl:!0}),[Z,de]=h.useState(null),X=h.useMemo(()=>[{id:"overview",label:"Overview",icon:Me},{id:"test",label:"Preview & Test",icon:Oe},{id:"instructions",label:"Instructions",icon:te}],[]),r=h.useCallback(async()=>{try{if(x(!0),U("ðŸŽ¤ Requesting microphone access..."),!window.isSecureContext)throw new Error("HTTPS required for microphone access");try{(await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1,channelCount:1,sampleRate:48e3,sampleSize:16,volume:.6,latency:.05}})).getTracks().forEach(G=>G.stop()),U("âœ… Microphone access granted")}catch(w){throw new Error(`Microphone access denied: ${w.message}`)}const d=i?.id||i?._id;if(!d)throw new Error("Agent ID not found");U("ðŸ”— Getting LiveKit token...");const b=`admin_test_${Date.now()}`,$=await fetch("https://python.service.callshivai.com/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_id:d,language:ie,call_id:b,device:"desktop",user_agent:navigator.userAgent})});if(!$.ok)throw new Error(`Failed to get LiveKit token: ${$.status}`);const B=await $.json();if(console.log("ðŸŽ¯ Token received for agent testing:",d,B),U("ðŸ”— Connecting to LiveKit..."),typeof window.LivekitClient>"u"){U("ðŸ“¦ Loading LiveKit SDK...");const w=document.createElement("script");w.src="https://unpkg.com/livekit-client@latest/dist/livekit-client.umd.js",w.onload=()=>{console.log("âœ… LiveKit SDK loaded"),T(B,d)},w.onerror=()=>{throw new Error("Failed to load LiveKit SDK")},document.head.appendChild(w)}else await T(B,d)}catch(d){console.error("Failed to start agent test call:",d),U(`âŒ Error: ${d.message}`),x(!1),C(!1)}},[i]),T=h.useCallback(async(d,b)=>{try{const $=window.LivekitClient,B=new $.Room({adaptiveStream:!0,dynacast:!0,audioCaptureDefaults:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,suppressLocalAudioPlayback:!0},publishDefaults:{audioPreset:$.AudioPresets.speech,dtx:!0,red:!1,simulcast:!1}});B.on($.RoomEvent.TrackSubscribed,(w,G,M)=>{if(w.kind===$.Track.Kind.Audio){const ee=w.attach();ee.volume=.4,ee.autoplay=!0,document.body.appendChild(ee),ee.play().catch(O=>console.warn("Audio autoplay blocked:",O))}}),B.on($.RoomEvent.ParticipantMetadataChanged,(w,G)=>{if(w)try{const M=JSON.parse(w);(M.transcript||M.text)&&v(ee=>[...ee,{role:"agent",text:M.transcript||M.text,timestamp:new Date}])}catch{console.log("Metadata not JSON:",w)}}),B.on($.RoomEvent.RoomMetadataChanged,w=>{if(w)try{const G=JSON.parse(w);(G.transcript||G.text)&&v(M=>[...M,{role:"agent",text:G.transcript||G.text,timestamp:new Date}])}catch{console.log("Room metadata not JSON:",w)}}),B.on($.RoomEvent.Connected,async()=>{console.log("âœ… Connected to LiveKit room for agent testing"),C(!0),x(!1),U("ðŸŸ¢ Connected! You can now speak with the agent.");try{await B.localParticipant.setMicrophoneEnabled(!0,{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}),v([{role:"agent",text:i?.greeting?.en||`Hello! I'm ${i?.name||"Agent"}, ready for testing. How can I help you?`,timestamp:new Date}])}catch(w){console.error("Failed to enable microphone:",w)}}),B.on($.RoomEvent.Disconnected,()=>{console.log("âŒ Disconnected from LiveKit room"),C(!1),U("ðŸ”´ Disconnected"),de(null)}),await B.connect(d.url,d.token),de(B)}catch($){console.error("LiveKit connection failed:",$),U(`âŒ Connection failed: ${$.message}`),x(!1),C(!1)}},[i]),re=h.useCallback(async()=>{if(Z)try{await Z.disconnect(),console.log("âœ… Disconnected from LiveKit room")}catch(d){console.error("Error disconnecting from room:",d)}C(!1),x(!1),U("ðŸ“ž Call ended"),de(null),v(d=>[...d,{role:"system",text:"Call ended",timestamp:new Date}])},[Z]),J=h.useCallback(()=>{if(!A.trim()||!N)return;const d={role:"user",text:A.trim(),timestamp:new Date};v(b=>[...b,d]),c(""),setTimeout(()=>{const b=[`I received your message: "${d.text}". How can I help you with this?`,`Thank you for your message. As ${i?.name||"Agent"}, I'm here to assist you.`,`I understand you said: "${d.text}". Let me help you with that.`,`Got it! ${d.text}. What would you like to know more about?`],$={role:"agent",text:b[Math.floor(Math.random()*b.length)],timestamp:Date.now()};v(B=>[...B,$])},1e3+Math.random()*2e3)},[A,N,i]),K=h.useCallback(()=>{if(!j.trim())return;V(!0);const d={role:"user",text:j.trim(),timestamp:new Date};v(b=>[...b,d]),le(""),setTimeout(()=>{const b=[`Thank you for testing! You said: "${d.text}". I'm ${i?.name||"Agent"} and I'm working correctly.`,`Test successful! As ${i?.name||"Agent"}, I received your message: "${d.text}". How can I assist you further?`,`Hello! This is ${i?.name||"Agent"}. I got your test message: "${d.text}". The agent is responding as expected.`,`Agent test complete! Your message: "${d.text}" was processed successfully by ${i?.name||"Agent"}.`],$={role:"agent",text:b[Math.floor(Math.random()*b.length)],timestamp:new Date};v(B=>[...B,$]),V(!1)},1500+Math.random()*1e3)},[j,i]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:s,className:`p-2 rounded-lg ${l.hover} ${l.text} transition-all duration-200`,children:e.jsx(ke,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:`text-2xl font-bold ${l.text}`,children:i?.name||"Unnamed Agent"}),e.jsxs("p",{className:`text-sm ${l.textSecondary}`,children:["Agent ID: ",i?.id||i?._id||"N/A"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${i?.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:i?.is_active?"Active":"Inactive"})})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex space-x-8",children:X.map(d=>{const b=d.icon;return e.jsxs("button",{onClick:()=>k(d.id),className:`flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm ${g===d.id?"border-blue-500 text-blue-600 dark:text-blue-400":`border-transparent ${l.textSecondary} hover:text-gray-700 dark:hover:text-gray-300`}`,children:[e.jsx(b,{className:"w-4 h-4"}),d.label]},d.id)})})})]}),g==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:`${l.cardBg} rounded-lg p-4 border ${l.border}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(Q,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${l.textSecondary}`,children:"Agent Type"}),e.jsx("p",{className:`font-semibold ${l.text}`,children:"AI Assistant"})]})]})}),e.jsx("div",{className:`${l.cardBg} rounded-lg p-4 border ${l.border}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx(Cs,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${l.textSecondary}`,children:"Voice"}),e.jsx("p",{className:`font-semibold ${l.text}`,children:i?.voice||"Default"})]})]})}),e.jsx("div",{className:`${l.cardBg} rounded-lg p-4 border ${l.border}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx(Ve,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${l.textSecondary}`,children:"Language"}),e.jsx("p",{className:`font-semibold ${l.text}`,children:i?.greeting?.language||"English"})]})]})})]}),e.jsxs("div",{className:`${l.cardBg} rounded-lg p-6 border ${l.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${l.text} mb-4`,children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-2`,children:"Agent Name"}),e.jsx("p",{className:`${l.text}`,children:i.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-2`,children:"Created By"}),e.jsx("p",{className:`${l.text}`,children:i.created_by||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-2`,children:"Created Date"}),e.jsx("p",{className:`${l.text}`,children:i.created_at?new Date(i.created_at).toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-2`,children:"Knowledge Base URL"}),e.jsx("p",{className:`${l.text} break-all`,children:i.knowledge_base_url||"N/A"})]})]})]})]}),g==="test"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${l.cardBg} rounded-lg p-6 border ${l.border}`,children:[e.jsxs("h3",{className:`text-lg font-semibold ${l.text} mb-4 flex items-center gap-2`,children:[e.jsx(Me,{className:"w-5 h-5"}),"Agent Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-2`,children:"Agent Name"}),e.jsx("p",{className:`${l.text} font-semibold`,children:i?.name||"Unnamed Agent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-2`,children:"Agent ID"}),e.jsx("p",{className:`${l.text} font-mono text-sm bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded`,children:i?.id||i?._id||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-2`,children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:i.is_active?"ðŸŸ¢ Active":"ðŸ”´ Inactive"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-2`,children:"Model"}),e.jsx("p",{className:`${l.text}`,children:i.model||"gpt-4o-realtime-preview"})]})]})]}),e.jsxs("div",{className:`${l.cardBg} rounded-lg p-6 border ${l.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${l.text} mb-4 flex items-center gap-2`,children:"ðŸŽ™ï¸ Live Voice Testing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-2`,children:"Language"}),e.jsxs("select",{value:ie,onChange:d=>he(d.target.value),className:`w-full px-3 py-2 rounded-lg border ${l.border} ${l.cardBg} ${l.text} focus:outline-none focus:ring-2 focus:ring-blue-500/20`,disabled:N,children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"hi",children:"Hindi"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"}),e.jsx("option",{value:"pt",children:"Portuguese"}),e.jsx("option",{value:"zh",children:"Chinese"}),e.jsx("option",{value:"ja",children:"Japanese"}),e.jsx("option",{value:"ko",children:"Korean"}),e.jsx("option",{value:"ar",children:"Arabic"}),e.jsx("option",{value:"ru",children:"Russian"}),e.jsx("option",{value:"it",children:"Italian"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-2`,children:"Audio Settings"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:q.noiseSuppression,onChange:d=>oe(b=>({...b,noiseSuppression:d.target.checked})),className:"mr-1",disabled:N}),"ðŸŽ§ Noise Cancellation"]}),e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:q.echoCancellation,onChange:d=>oe(b=>({...b,echoCancellation:d.target.checked})),className:"mr-1",disabled:N}),"ðŸ”Š Echo Cancellation"]}),e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:q.autoGainControl,onChange:d=>oe(b=>({...b,autoGainControl:d.target.checked})),className:"mr-1",disabled:N}),"ðŸ“Š Auto Gain"]})]})]})]}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsx("button",{onClick:r,disabled:Y||N,className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${Y||N?"bg-gray-400 text-white cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:Y?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Connecting..."]}):N?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Connected"]}):e.jsx("span",{className:"flex items-center gap-2",children:"ðŸŽ¤ Start Voice Call"})}),N&&e.jsx("button",{onClick:re,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-all duration-200",children:"ðŸ“ž End Call"})]}),z&&e.jsx("div",{className:`p-3 rounded-lg mb-4 text-sm ${z.includes("Error")||z.includes("Failed")?"bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-300":z.includes("Connected")||z.includes("ðŸŸ¢")?"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-300":"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300"}`,children:z}),N&&e.jsxs("div",{className:`border ${l.border} rounded-lg overflow-hidden`,children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("span",{className:"text-sm font-medium",children:["ðŸ’¬ Live Conversation with ",i.name]})}),e.jsx("div",{className:"h-64 overflow-y-auto p-4 bg-gray-50 dark:bg-gray-900/50",style:{scrollBehavior:"smooth"},children:f.length===0?e.jsx("div",{className:"text-center text-gray-500 text-sm py-8",children:"ðŸŽ™ï¸ Start speaking or type a message to begin testing..."}):f.map((d,b)=>e.jsx("div",{className:`mb-3 flex ${d.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${d.role==="user"?"bg-blue-500 text-white rounded-br-sm":d.role==="agent"?"bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-bl-sm border":"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-300 text-center rounded"}`,children:[e.jsx("div",{className:"text-xs opacity-70 mb-1",children:d.role==="user"?"ðŸ‘¤ You":d.role==="agent"?"ðŸ¤– "+i.name:"System"}),e.jsx("div",{className:"text-sm",children:d.text}),e.jsx("div",{className:"text-xs opacity-50 mt-1",children:new Date(d.timestamp).toLocaleTimeString()})]})},b))}),e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:A,onChange:d=>c(d.target.value),onKeyDown:d=>d.key==="Enter"&&J(),placeholder:"Type a message to test text input...",className:`flex-1 px-3 py-2 text-sm rounded-lg border ${l.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20`,disabled:!N}),e.jsx("button",{onClick:J,disabled:!N||!A.trim(),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded-lg transition-colors",children:e.jsx(Ke,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"ðŸ’¡ You can type messages here or speak directly for voice testing"})]})]}),N&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((d,b)=>e.jsx("div",{className:"w-1 bg-blue-500 rounded-full animate-pulse",style:{height:`${Math.random()*20+10}px`,animationDelay:`${b*.1}s`,animationDuration:"1s"}},b))})})]})]}),g==="instructions"&&e.jsxs("div",{className:"space-y-6",children:[i.greeting&&e.jsxs("div",{className:`${l.cardBg} rounded-lg p-6 border ${l.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${l.text} mb-4`,children:"Greeting Messages"}),e.jsx("div",{className:"space-y-4",children:Object.entries(i.greeting).map(([d,b])=>e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-2 uppercase`,children:d}),e.jsx("div",{className:`p-3 rounded-lg ${l.searchBg} ${l.text}`,children:b})]},d))})]}),i.custom_instructions&&e.jsxs("div",{className:`${l.cardBg} rounded-lg p-6 border ${l.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${l.text} mb-4`,children:"Custom Instructions"}),e.jsx("div",{className:`p-4 rounded-lg ${l.searchBg} ${l.text} whitespace-pre-wrap`,children:i.custom_instructions})]})]}),g==="preview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${l.cardBg} rounded-lg p-6 border ${l.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${l.text} mb-4`,children:"Agent Configuration Preview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`text-md font-semibold ${l.text} mb-3`,children:"Basic Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-1`,children:"Model"}),e.jsx("p",{className:`${l.text} font-mono text-sm`,children:i.model||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-1`,children:"Voice"}),e.jsx("p",{className:`${l.text}`,children:i.voice||"Default"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-1`,children:"Temperature"}),e.jsx("p",{className:`${l.text}`,children:i.temperature||"0.7"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-md font-semibold ${l.text} mb-3`,children:"Voice Detection"}),i.turn_detection&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-1`,children:"Type"}),e.jsx("p",{className:`${l.text}`,children:i.turn_detection.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-1`,children:"Threshold"}),e.jsx("p",{className:`${l.text}`,children:i.turn_detection.threshold})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-1`,children:"Silence Duration"}),e.jsxs("p",{className:`${l.text}`,children:[i.turn_detection.silence_duration_ms,"ms"]})]})]})]})]})]}),i.greeting&&e.jsxs("div",{className:`${l.cardBg} rounded-lg p-6 border ${l.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${l.text} mb-4`,children:"Greeting Messages"}),e.jsx("div",{className:"space-y-4",children:Object.entries(i.greeting).map(([d,b])=>e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-2 uppercase`,children:d}),e.jsx("div",{className:`p-3 rounded-lg ${l.searchBg} ${l.text}`,children:b})]},d))})]}),e.jsxs("div",{className:`${l.cardBg} rounded-lg p-6 border ${l.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${l.text} mb-4`,children:"Test Agent Interface"}),e.jsx("div",{className:"space-y-4 mb-6",children:e.jsx("div",{className:`h-96 overflow-y-auto p-4 rounded-lg ${l.searchBg} border ${l.border}`,children:f.length===0?e.jsxs("div",{className:`text-center py-8 ${l.textSecondary}`,children:[e.jsx(Oe,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Start a conversation to test the agent"})]}):e.jsxs("div",{className:"space-y-4",children:[f.map((d,b)=>e.jsx("div",{className:`flex ${(d.type||d.role)==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${(d.type||d.role)==="user"?"bg-blue-500 text-white":`${l.cardBg} ${l.text} border ${l.border}`}`,children:[e.jsx("p",{className:"text-sm",children:d.content||d.text}),e.jsx("p",{className:"text-xs mt-1 opacity-70",children:d.timestamp instanceof Date?d.timestamp.toLocaleTimeString():new Date(d.timestamp).toLocaleTimeString()})]})},b)),F&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${l.cardBg} ${l.text} border ${l.border}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),e.jsx("p",{className:"text-sm",children:"Agent is thinking..."})]})})})]})})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:j,onChange:d=>le(d.target.value),onKeyPress:d=>d.key==="Enter"&&K(),placeholder:"Type your message to test the agent...",disabled:F,className:`flex-1 px-4 py-3 rounded-lg border ${l.border} ${l.cardBg} ${l.text} focus:outline-none focus:ring-2 focus:ring-blue-500/20 disabled:opacity-50`}),e.jsx("button",{onClick:K,disabled:F||!j.trim(),className:"px-6 py-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2 font-medium",children:F?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"w-4 h-4"}),"Send"]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>v([]),className:`px-4 py-2 rounded-lg ${l.hover} ${l.text} text-sm font-medium transition-colors duration-200 flex items-center gap-2`,children:[e.jsx(Se,{className:"w-4 h-4"}),"Clear Chat"]}),e.jsxs("button",{onClick:()=>{const d={type:"user",content:"Hello! Can you tell me about your capabilities?",timestamp:new Date};v(b=>[...b,d]),V(!0),setTimeout(()=>{const b={type:"agent",content:`Hi! I'm ${i.name}. I can help you with various tasks using voice interactions. Feel free to ask me anything!`,timestamp:new Date};v($=>[...$,b]),V(!1)},1500)},className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm font-medium transition-colors duration-200 flex items-center gap-2",children:[e.jsx(As,{className:"w-4 h-4"}),"Demo Chat"]})]})]})]}),g==="instructions"&&e.jsxs("div",{className:"space-y-6",children:[i.custom_instructions&&e.jsxs("div",{className:`${l.cardBg} rounded-lg p-6 border ${l.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${l.text} mb-4`,children:"Custom Instructions"}),e.jsx("div",{className:`p-4 rounded-lg ${l.searchBg} ${l.text} whitespace-pre-wrap`,children:i.custom_instructions})]}),e.jsxs("div",{className:`${l.cardBg} rounded-lg p-6 border ${l.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${l.text} mb-4`,children:"System Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-2`,children:"Agent ID"}),e.jsx("div",{className:`p-3 rounded-lg ${l.searchBg} ${l.text} font-mono text-sm`,children:i?.id||i?._id||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${l.textSecondary} block mb-2`,children:"Model Configuration"}),e.jsxs("div",{className:`p-3 rounded-lg ${l.searchBg} ${l.text}`,children:["Model: ",i.model||"N/A",e.jsx("br",{}),"Temperature: ",i.temperature||"0.7",e.jsx("br",{}),"Max Tokens: ",i.max_tokens||"Not specified"]})]})]})]})]})]})},Os=({client:i,currentTheme:s})=>{const l=[{id:1,date:"2024-12-01",amount:149,type:"subscription",status:"completed",description:"Monthly subscription"},{id:2,date:"2024-11-01",amount:149,type:"subscription",status:"completed",description:"Monthly subscription"},{id:3,date:"2024-10-15",amount:50,type:"usage",status:"completed",description:"Additional tokens"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:`text-lg font-semibold ${s.text}`,children:"Transaction History"})}),l.length===0?e.jsxs("div",{className:`text-center py-12 rounded-lg ${s.searchBg}`,children:[e.jsx(He,{className:`w-12 h-12 mx-auto mb-3 ${s.textSecondary}`}),e.jsx("h4",{className:`text-lg font-semibold ${s.text} mb-2`,children:"No Transactions"}),e.jsx("p",{className:`${s.textSecondary}`,children:"No transaction history available for this client."})]}):e.jsx("div",{className:"space-y-3",children:l.map(g=>e.jsx("div",{className:`${s.searchBg} rounded-lg p-4 border ${s.border}`,children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center",children:e.jsx(_e,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:`font-semibold ${s.text}`,children:["$",g.amount.toFixed(2)]}),e.jsx("p",{className:`text-sm ${s.textSecondary}`,children:g.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${g.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:g.status}),e.jsx("p",{className:`text-sm ${s.textSecondary} mt-1`,children:g.date})]})]})},g.id))})]})},Vs=()=>{const{theme:i,currentTheme:s}=Ge(),[l,g]=h.useState(""),[k,N]=h.useState(""),[C,Y]=h.useState("all"),[x,f]=h.useState(null),[v,A]=h.useState("list"),[c,j]=h.useState(null),[le,F]=h.useState(null),[V,z]=h.useState([]),[U,ie]=h.useState({all:0,newlySignup:0,pending:0,onboarded:0,approved:0,rejected:0}),[he,q]=h.useState(!0),[oe,Z]=h.useState(!1),[de,X]=h.useState(null),[r,T]=h.useState(!1),[re,J]=h.useState(!1),[K,d]=h.useState(""),[b,$]=h.useState(1),[B]=h.useState(10),[w,G]=h.useState(0),[M,ee]=h.useState(0),[O,Je]=h.useState(null),Qe=h.useRef(new Set),ye=h.useRef(!1);h.useEffect(()=>{const a=n=>{n.target.closest("[data-industry-dropdown]")||(console.log("Clicking outside industry dropdown"),J(!1))};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),h.useEffect(()=>{const a=setTimeout(()=>{l!==k&&(N(l),$(1))},500);return()=>clearTimeout(a)},[l,k]),h.useEffect(()=>{$(1)},[C]);const Ze=a=>{const n={page:b,limit:B};switch(a){case"all":return n;case"newlySignup":return{...n,isVerified:!1};case"pending":return{...n,isVerified:!0,isOnboarded:!1};case"onboarded":return{...n,isVerified:!0,isOnboarded:!0};case"approved":return{...n,status:"Approved"};case"rejected":return{...n,status:"Rejected"};default:return n}},ce=async(a=C,n=b)=>{if(ye.current){console.log("â­ï¸ Skipping fetch - already in progress");return}try{ye.current=!0,q(!0),X(null),Qe.current.add(a);const t=Ze(a);console.log(`ðŸ“¡ Fetching data for tab: ${a} with params:`,t);const p=await W.get("/v1/users",t);console.log(`âœ… Raw response for ${a}:`,p),console.log("âœ… Response data:",p.data);const m=p.data||p,u=m?.data?.users||m?.users||m||[],y=m?.meta||{},E=m?.data?.meta?.pagination||y?.pagination||{};console.log(`ðŸ“Š Extracted users (${u.length}):`,u.length>0?u.slice(0,2):"No users"),console.log("ðŸ“Š Meta data:",y),console.log("ðŸ“Š Pagination data:",E);const R=u.map(o=>({_id:o?.id||o?._id,onBoardingId:o?.onboarding?._id||null,userData:o,company_basics:{name:o?.onboarding?.company_name||o?.fullName||"Unknown",company_email:o?.onboarding?.company_email||o?.email,company_size:o?.onboarding?.address||o?.address||"Unknown",industry:[o?.onboarding?.region||"Not specified"]},plan_details:{type:o?.userData?.onboarding?.plan_type||o?.onboarding?.plan_type||o?.plan_type||"Selected",ai_employee_limit:o?.onboarding?.ai_employee_count||o?.ai_employee_count||1,monthly_price:(()=>{const _=o?.userData?.onboarding?.plan_type||o?.onboarding?.plan_type,P=pe.find(me=>me.apiKey===_);return P?.price==="Custom"?0:parseFloat(P?.price?.replace(/[$\/mo,]/g,"")||"0")})()},ai_employees:o?.onboarding?.ai_employees||Array.from({length:o?.onboarding?.ai_employee_count||0},(_,P)=>({id:`ai_${P+1}`,name:`AI Employee ${P+1}`,type:"Assistant",status:"Active"})),isOnBoarded:o?.isOnBoarded||!1,isApproved:o?.isApproved||!1,createdAt:o?.createdAt,lastLoginAt:o?.lastLoginAt,knowledge_sources:{website_url:o?.onboarding?.website_url||"",social_links:{linkedin:o?.onboarding?.linkedin||""},faqs_text:o?.onboarding?.faqs_text||"",uploaded_files:o?.onboarding?.uploaded_files||[]},deployment_targets:{channels:o?.onboarding?.channels||[]},instructions:{dos_and_donts:o?.onboarding?.dos_and_donts||"",fallback_contacts:o?.onboarding?.fallback_contacts||""},targets:{success_goals:o?.onboarding?.success_goals||"",success_metrics:o?.onboarding?.success_metrics||""}}));z(R),Je(E);const I=E.total||y.total,se=E.totalPages||y.totalPages;I!==void 0&&(G(I),ee(se||Math.ceil(I/B)),ie(o=>({...o,[a]:I})),console.log(`âœ… Set count for ${a}:`,I))}catch(t){console.error("âŒ Error fetching data:",t),X(t.message),z([])}finally{q(!1),ye.current=!1}};h.useEffect(()=>{ce()},[C,b]),h.useMemo(()=>{let a=V;return k&&(a=V.filter(n=>{const t=k.toLowerCase();return n.company_basics?.name?.toLowerCase().includes(t)||n.company_basics?.company_email?.toLowerCase().includes(t)||n.userData?.fullName?.toLowerCase().includes(t)||n.userData?.email?.toLowerCase().includes(t)})),a},[V,k]);const Ce=h.useMemo(()=>V,[V]),xe=a=>U[a]||0,Xe=()=>{b>1&&$(a=>a-1)},Te=()=>{b<M&&$(a=>a+1)},Ae=async a=>{try{if(console.log("ðŸ” handleEditClient called with client:",a),q(!0),f(a),a?.id){console.log(`ðŸš€ Fetching onboarding data for user: ${a.id}`);const n=await W.getOnboardingByUserId(a.id);console.log("âœ… Onboarding data response:",n);let t=a;n?.data?t={...a,onboardingDetails:n.data}:t={...a,onboardingDetails:{onboarding:null}};const p={_id:t._id,company_basics:{name:t?.onboardingDetails?.onboarding?.company_basics?.name||t?.company_basics?.name||"",description:t?.onboardingDetails?.onboarding?.company_basics?.description||t?.company_basics?.description||"",company_email:t?.onboardingDetails?.onboarding?.company_basics?.company_email||t?.company_basics?.company_email||"",company_phone:t?.onboardingDetails?.onboarding?.company_basics?.company_phone||t?.company_basics?.company_phone||"",website:t?.onboardingDetails?.onboarding?.company_basics?.website||t?.company_basics?.website||"",address:t?.onboardingDetails?.onboarding?.company_basics?.address||t?.company_basics?.address||"",company_size:t?.onboardingDetails?.onboarding?.company_basics?.company_size||t?.company_basics?.company_size||"",industry:t?.onboardingDetails?.onboarding?.company_basics?.industry||t?.company_basics?.industry||[],linkedin_profile:t?.onboardingDetails?.onboarding?.company_basics?.linkedin_profile||t?.company_basics?.linkedin_profile||"",primary_region:{countries:t?.onboardingDetails?.onboarding?.company_basics?.primary_region?.countries||[],states:t?.onboardingDetails?.onboarding?.company_basics?.primary_region?.states||[],cities:t?.onboardingDetails?.onboarding?.company_basics?.primary_region?.cities||[]}},ai_employees:(t?.onboardingDetails?.onboarding?.ai_employees||t?.ai_employees||[]).map(m=>({...m,knowledge_sources:{faqs_text:m?.knowledge_sources?.faqs_text||"",uploaded_files:m?.knowledge_sources?.uploaded_files||[],website_url:m?.knowledge_sources?.website_url||"",social_links:m?.knowledge_sources?.social_links||{},additional_sources:Array.isArray(m?.knowledge_sources)?m.knowledge_sources:m?.knowledge_sources?.additional_sources||[]}})),plan_details:t?.onboardingDetails?.onboarding?.plan_details||t?.plan_details||{},deployment_targets:t?.onboardingDetails?.onboarding?.deployment_targets||t?.deployment_targets||{},deployment_service:t?.onboardingDetails?.onboarding?.deployment_service||t?.deployment_service||{},consent_options:t?.onboardingDetails?.onboarding?.consent_options||t?.consent_options||{},instructions:t?.onboardingDetails?.onboarding?.instructions||t?.instructions||{},targets:t?.onboardingDetails?.onboarding?.targets||t?.targets||{},userData:t?.userData};j(p),A("edit"),T(!1)}else console.error("âŒ No client._id available:",a),X("Client ID not found")}catch(n){console.error("âŒ Error fetching onboarding data:",n),X(`Failed to fetch client data: ${n.message}`)}finally{q(!1)}},Be=async a=>{try{const n=a?.id,t=a?.fullName||a?.name||"this client";if(console.log(`ðŸ—‘ï¸ Deleting client: ${t} (ID: ${n})`),!n){L.error("Client ID not found");return}const p=await W.deleteUser(n);p?.success?(L.success("Client deleted successfully"),await ce(C,b)):L.error(p?.message||"Failed to delete client")}catch(n){console.error("âŒ Error deleting client:",n),L.error("Failed to delete client")}},ne=()=>{f(null),A("list"),j(null),T(!1),F(null)},es=a=>{F(a),A("agentView")},ss=async a=>{try{if(console.log("ðŸ” handleViewClient called with client:",a),q(!0),f(a),a.id){console.log(`ðŸš€ Fetching onboarding data for view: ${a.id}`);const n=await W.getOnboardingByUserId(a.id);console.log("âœ… View onboarding data response:",n);let t=a;n?.data?t={...a,onboardingDetails:n.data}:t={...a,onboardingDetails:{onboarding:null}},f(t),A("details")}else console.error("âŒ No client._id available for view:",a),X("Client ID not found"),f(a),A("details")}catch(n){console.error("âŒ Error fetching onboarding data for view:",n),X(`Failed to fetch client data: ${n.message}`),f(a),A("details")}finally{q(!1)}},as=async()=>{try{console.log("Saving edited data:",c),L.loading("Saving client data...",{id:"save-toast"});const a=o=>o?o.match(/^https?:\/\//i)?o:`https://${o}`:"",n=o=>o?o.split(" ").map(_=>_.charAt(0).toUpperCase()+_.slice(1).toLowerCase()).join(" "):"",t=o=>{const _=o.toLowerCase();return _.includes("male")&&!_.includes("female")?"Male":_.includes("female")?"Female":"Gender Neutral"},p=[],m={};(c.ai_employees||[]).forEach((o,_)=>{m[_]=[],(o.knowledge_sources?.uploaded_files||[]).forEach(P=>{P.pending_upload&&P.fileObject?p.push(P.fileObject):P.pending_upload||m[_].push(P)})});let u=[];if(p.length>0)try{console.log(`ðŸ“¤ Uploading ${p.length} files...`),u=(await W.uploadOnboardingFiles(p)).uploaded_files||[],console.log("âœ… Files uploaded:",u)}catch(o){console.error("âŒ Error uploading files:",o),L.error("Failed to upload files. Saving other data...",{id:"save-toast"})}const y=o=>{const P={"Sales & Business Development":"sales_business_development","Customer Support & Service":"customer_support_service","Appointment & Scheduling":"appointment_scheduling","Order Management & Billing":"order_management_billing","Product / Service Explainers":"product_service_explainers","Feedback & Engagement":"feedback_engagement","Custom Workflows":"custom_workflows"}[o];return P||(o||"").toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"").replace(/&/g,"and")},E=o=>{const _={website:"Website",app:"Mobile App",whatsapp:"WhatsApp"};return(o||[]).map(P=>_[P]||P)},R=o=>({managed:"Shivai","self-service":"Client",shivai:"Shivai",client:"Client"})[o]||o||"Shivai",I={company_basics:{name:c?.company_basics?.name||"",website:a(c?.company_basics?.website||""),company_size:c?.company_basics?.company_size||"",company_email:c?.company_basics?.company_email||"",company_phone:c?.company_basics?.company_phone||"",linkedin_profile:a(c?.company_basics?.linkedin_profile||""),description:c?.company_basics?.description||"",industry:Array.isArray(c?.company_basics?.industry)?c.company_basics.industry:[c?.company_basics?.industry||""],primary_region:{countries:c?.company_basics?.primary_region?.countries||[],states:c?.company_basics?.primary_region?.states||[],cities:c?.company_basics?.primary_region?.cities||[]}},plan_details:c?.plan_details||{},ai_employees:(c.ai_employees||[]).map((o,_)=>{const P=(o.knowledge_sources?.uploaded_files||[]).filter(H=>!H.pending_upload),me=[...m[_]||[]],Le=(o.knowledge_sources?.uploaded_files||[]).filter(H=>H.pending_upload&&H.fileObject).length;if(Le>0&&u.length>0){const H=Object.keys(m).slice(0,_).reduce((cs,xs)=>cs+(c.ai_employees[xs]?.knowledge_sources?.uploaded_files||[]).filter(Re=>Re.pending_upload&&Re.fileObject).length,0);me.push(...u.slice(H,H+Le))}const ds=(o.workflows||[]).map(H=>({name:H.name||"",instruction:H.instruction||""}));return{name:o.name||`AI Employee ${_+1}`,type:n(o.type||""),template:y(o.template||""),preferred_language:n(o.preferred_language||"English"),voice_gender:t(o.voice_gender||"Gender Neutral"),agent_personality:o.agent_personality||"",voice_style:o.voice_style||"",special_instructions:o.special_instructions||"",workflows:ds,knowledge_sources:{website_url:a(o.knowledge_sources?.website_url||""),social_links:o.knowledge_sources?.social_links||{},faqs_text:o.knowledge_sources?.faqs_text||"",uploaded_files:me},deployment_targets:{channels:E(o?.deployment_targets?.channels||[]),deployment_notes:o.deployment_targets?.deployment_notes||""},deployment_service:{service_type:R(o.deployment_service?.service_type||"")},consent_options:{recording_enabled:o.consent_options?.recording_enabled||!1,transcript_email_optin:o.consent_options?.transcript_email_optin||!1,privacy_notes:o.consent_options?.privacy_notes||""},instructions:{dos_and_donts:o.instructions?.dos_donts||o.instructions?.dos_and_donts||"",fallback_contacts:o.instructions?.fallback_contacts||""},targets:{success_goals:o.success_targets?.description||o.targets?.success_goals||"",success_metrics:o.success_targets?.metrics||o.targets?.success_metrics||""}}})};console.log("ðŸ“¤ Sending payload:",JSON.stringify(I,null,2));const se=await W.updateClientData(c._id,I);if(console.log("âœ… Update response:",se),se&&(se.success===!0||se.statusCode===200))z(o=>o.map(_=>_._id===c._id?{..._,...c,...I}:_)),L.success(se.message||"Client data updated successfully!",{id:"save-toast"}),T(!1),ne();else throw new Error(se?.message||"Update failed")}catch(a){console.error("Error saving client data:",a);const n=a?.response?.data?.message||a?.message||"Failed to save client data";L.error(n,{id:"save-toast"})}},De=()=>{T(!1),ne()},ts=()=>{T(!r)},ls=async a=>{if(console.log("ðŸš€ handleApproveClient called with client:",a),a?.isApproved){L.error("Client is already approved");return}try{Z(!0),L.loading("Approving client...",{id:"approve-toast"});const n=await W.approveClient(a._id);if(n?.success)L.success(`${a?.company_basics?.name||"Client"} approved successfully!`,{id:"approve-toast"}),await ce(C,b),x?._id===a._id&&ne();else throw new Error(n?.message||"Failed to approve client")}catch(n){console.error("Error approving client:",n),L.error("Failed to approve client. Please try again.",{id:"approve-toast"})}finally{Z(!1)}},ns=async a=>{if(a?.isRejected){L.error("Client is already rejected");return}const n="Application rejected by admin";try{Z(!0),L.loading("Rejecting client...",{id:"reject-toast"});const t=await W.rejectClient(a._id,n.trim());if(t?.success)L.success(`${a?.company_basics?.name||"Client"} rejected successfully!`,{id:"reject-toast"}),await ce(C,b),x&&x._id===a._id&&ne();else throw new Error(t?.message||"Failed to reject client")}catch(t){console.error("Error rejecting client:",t),L.error("Failed to reject client. Please try again.",{id:"reject-toast"})}finally{Z(!1)}},rs=async a=>{try{const n=a?.s3_key||a?.key;if(!n){L.error("File key not found");return}const p=(await W.downloadFileByS3Key(n)).data,m=window.URL.createObjectURL(p);window.open(m,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(m),100)}catch(n){console.error("Error viewing file:",n),L.error("Failed to view file")}},is=async a=>{try{const n=a?.s3_key||a?.key,t=a?.name||a?.filename||"download";if(!n){L.error("File key not found");return}const m=(await W.downloadFileByS3Key(n)).data,u=window.URL.createObjectURL(m),y=document.createElement("a");y.href=u,y.download=t,document.body.appendChild(y),y.click(),document.body.removeChild(y),window.URL.revokeObjectURL(u),L.success("Download started")}catch(n){console.error("Error downloading file:",n),L.error("Failed to download file")}},S=(a,n)=>{j(t=>{const p={...t},m=a.split(".");let u=p;for(let y=0;y<m.length-1;y++)u[m[y]]||(u[m[y]]={}),u=u[m[y]];return u[m[m.length-1]]=n,p})},je=a=>{console.log("updateIndustry called with:",a),j(n=>{const t={...n,company_basics:{...n?.company_basics,industry:a}};return console.log("Updated editData:",t),t})},Ee=()=>{j(a=>({...a,ai_employees:[...a?.ai_employees||[],{name:"",type:"Assistant",template:"",preferred_language:"English",voice_gender:"Gender Neutral",agent_personality:"",voice_style:"",special_instructions:"",knowledge_sources:{faqs_text:"",uploaded_files:[],website_url:"",social_links:{},additional_sources:[]},workflows:[],_id:`new_${Date.now()}`}]}))},os=a=>{j(n=>({...n,ai_employees:(n?.ai_employees||[]).filter((t,p)=>p!==a)}))},D=(a,n,t)=>{j(p=>({...p,ai_employees:(p?.ai_employees||[]).map((m,u)=>{if(u!==a)return m;const y={...m};if(n.includes(".")){const E=n.split(".");let R=y;for(let I=0;I<E.length-1;I++)R[E[I]]||(R[E[I]]={}),R=R[E[I]];R[E[E.length-1]]=t}else y[n]=t;return y})}))};return v==="agentView"&&le?e.jsx(Ms,{agent:le,onBack:ne,currentTheme:s}):v==="details"&&x?e.jsx(Rs,{client:x,onBack:ne,onEdit:Ae,onDelete:Be,onApprove:ls,onReject:ns,onViewAgent:es}):v==="edit"&&c?e.jsxs("div",{className:"space-y-4 md:space-y-6 px-2 sm:px-0",children:[e.jsx("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-xl`,children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[e.jsxs("button",{onClick:De,className:`flex items-center justify-center sm:justify-start gap-2 px-4 py-2 rounded-lg ${s.hover} ${s.text} transition-all duration-200`,children:[e.jsx(ke,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Cancel"})]}),e.jsxs("h2",{className:`text-xl md:text-2xl font-bold ${s.text} text-center sm:text-left`,children:["Edit: ",c?.company_basics?.name||"Client"]})]}),e.jsx("div",{className:"flex gap-2 sm:gap-3",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:De,className:`flex-1 sm:flex-none px-3 sm:px-4 py-2 border ${s.border} rounded-lg ${s.text} ${s.hover} transition-all duration-200 flex items-center justify-center gap-2 text-sm sm:text-base`,children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Cancel"})]}),e.jsxs("button",{onClick:as,className:"flex-1 sm:flex-none admin-btn-primary px-3 sm:px-4 py-2 text-sm sm:text-base flex items-center justify-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Save"})]})]}):e.jsxs("button",{onClick:ts,className:"flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg admin-btn-primary transition-all duration-200 flex items-center justify-center gap-2 text-sm sm:text-base",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Edit"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-xl`,children:[e.jsxs("h3",{className:`text-base md:text-lg font-bold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx($e,{className:"w-4 h-4 md:w-5 md:h-5"}),"Company Basics"]}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Company Name *"}),e.jsx("input",{type:"text",value:c?.company_basics?.name||"",onChange:a=>S("company_basics.name",a.target.value),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Description"}),e.jsx("textarea",{value:c?.company_basics?.description||"",onChange:a=>S("company_basics.description",a.target.value),rows:3,disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Company Size"}),e.jsxs("select",{value:c?.company_basics?.company_size||"",onChange:a=>S("company_basics.company_size",a.target.value),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"1-10",children:"1-10"}),e.jsx("option",{value:"11-50",children:"11-50"}),e.jsx("option",{value:"51-200",children:"51-200"}),e.jsx("option",{value:"201-500",children:"201-500"}),e.jsx("option",{value:"501-1000",children:"501-1000"}),e.jsx("option",{value:"1000+",children:"1000+"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Industry (select up to 4)"}),e.jsxs("div",{className:"relative","data-industry-dropdown":!0,children:[e.jsx("input",{type:"text",value:K,onChange:a=>d(a.target.value),onFocus:()=>J(!0),onClick:()=>r&&J(!0),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"} ${(c?.company_basics?.industry||[]).length>=4?"cursor-not-allowed":""}`,placeholder:(c?.company_basics?.industry||[]).length>=4?"Maximum 4 industries selected":"Search or select industries"}),e.jsx(ms,{className:`absolute right-2.5 top-2.5 w-4 h-4 text-gray-400 transition-transform cursor-pointer ${re?"rotate-180":""}`,onClick:()=>r&&J(!re)}),(c?.company_basics?.industry||[]).length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(c?.company_basics?.industry||[]).map((a,n)=>{const t=ue.find(p=>p.value===a)?.label||a;return e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-md text-sm flex items-center gap-1",children:[t,r&&e.jsx("button",{type:"button",onClick:()=>{const p=(c?.company_basics?.industry||[]).filter((m,u)=>u!==n);je(p)},className:"text-blue-600 hover:text-blue-800",children:e.jsx(ae,{className:"w-3 h-3"})})]},n)})}),re&&r&&e.jsxs("div",{className:`absolute z-50 w-full mt-1 ${s.cardBg} border ${s.border} rounded-lg shadow-xl max-h-48 overflow-y-auto`,onClick:a=>a.stopPropagation(),children:[ue.filter(a=>a.label.toLowerCase().includes(K.toLowerCase())&&!(c?.company_basics?.industry||[]).includes(a.value)).map(a=>e.jsxs("div",{onClick:n=>{n.stopPropagation(),console.log("Industry option clicked:",a.value);const t=c?.company_basics?.industry||[];console.log("Current industries:",t),a.value==="other"?d("Add your industry type"):t.length<4&&!t.includes(a.value)?(console.log("Adding industry:",a.value),je([...t,a.value]),d(""),setTimeout(()=>J(!1),100)):console.log("Max industries reached or already selected")},className:`px-3 py-2 border-b ${s.border} last:border-b-0 ${(c?.company_basics?.industry||[]).length>=4?"cursor-not-allowed text-gray-400 bg-gray-50":"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer"}`,children:[a.label,(c?.company_basics?.industry||[]).length>=4&&e.jsx("span",{className:"text-xs text-gray-400 ml-2",children:"(Max reached)"})]},a.value)),K&&!ue.some(a=>a.label.toLowerCase().includes(K.toLowerCase()))&&!(c?.company_basics?.industry||[]).includes(K)&&e.jsxs("div",{onClick:a=>{a.stopPropagation(),console.log("Custom industry add clicked:",K);const n=c?.company_basics?.industry||[];n.length<4&&!n.includes(K)&&(console.log("Adding custom industry:",K),je([...n,K]),d(""),setTimeout(()=>J(!1),100))},className:`px-3 py-2 font-medium ${(c?.company_basics?.industry||[]).length>=4?"cursor-not-allowed text-gray-400 bg-gray-50":"hover:bg-blue-50 cursor-pointer text-blue-600"}`,children:['+ Add "',K,'"']})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Website"}),e.jsx("input",{type:"url",value:c?.company_basics?.website||"",onChange:a=>S("company_basics.website",a.target.value),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Company Email"}),e.jsx("input",{type:"email",value:c?.company_basics?.company_email||"",onChange:a=>S("company_basics.company_email",a.target.value),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Company Phone"}),e.jsx("input",{type:"tel",value:c?.company_basics?.company_phone||"",onChange:a=>S("company_basics.company_phone",a.target.value),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Primary Region - Countries"}),e.jsx("input",{type:"text",value:(c?.company_basics?.primary_region?.countries||[]).join(", "),onChange:a=>{const n=a.target.value.split(",").map(t=>t.trim()).filter(t=>t);S("company_basics.primary_region.countries",n)},placeholder:"USA, Canada, UK (comma separated)",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Primary Region - States/Provinces"}),e.jsx("input",{type:"text",value:(c?.company_basics?.primary_region?.states||[]).join(", "),onChange:a=>{const n=a.target.value.split(",").map(t=>t.trim()).filter(t=>t);S("company_basics.primary_region.states",n)},placeholder:"California, New York, Texas (comma separated)",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Primary Region - Cities"}),e.jsx("input",{type:"text",value:(c?.company_basics?.primary_region?.cities||[]).join(", "),onChange:a=>{const n=a.target.value.split(",").map(t=>t.trim()).filter(t=>t);S("company_basics.primary_region.cities",n)},placeholder:"New York, Los Angeles, Chicago (comma separated)",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]}),e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-xl`,children:[e.jsxs("h3",{className:`text-base md:text-lg font-bold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(We,{className:"w-4 h-4 md:w-5 md:h-5"}),"Plan Details"]}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Plan Type"}),e.jsxs("select",{value:c?.plan_details?.type||"",onChange:a=>{const n=pe.find(t=>t.apiKey===a.target.value);S("plan_details.type",a.target.value),n&&(S("plan_details.ai_employee_limit",n.aiEmployees),S("plan_details.monthly_price",n.price==="Custom"?0:parseFloat(n.price.replace(/[$\/mo,]/g,"")||"0")))},disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select Plan"}),pe.map(a=>e.jsxs("option",{value:a.apiKey,children:[a.name," - ",a.price]},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Monthly Price ($)"}),e.jsx("input",{type:"number",value:c?.plan_details?.monthly_price||"",onChange:a=>S("plan_details.monthly_price",parseFloat(a.target.value)),disabled:!r||c?.plan_details?.type!=="Custom Plan",placeholder:c?.plan_details?.type==="Custom Plan"?"Enter custom price":"Auto-populated from plan",className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${!r||c?.plan_details?.type!=="Custom Plan"?"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed":`${s.cardBg} ${s.text}`}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"AI Employee Limit"}),e.jsx("input",{type:"number",value:c?.plan_details?.ai_employee_limit||"",onChange:a=>S("plan_details.ai_employee_limit",parseInt(a.target.value)),disabled:!r||c?.plan_details?.type!=="Custom Plan",placeholder:c?.plan_details?.type==="Custom Plan"?"Enter custom limit":"Auto-populated from plan",className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${!r||c?.plan_details?.type!=="Custom Plan"?"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed":`${s.cardBg} ${s.text}`}`})]}),e.jsxs("div",{className:`pt-4 border-t ${s.border}`,children:[e.jsx("h4",{className:`text-sm font-bold ${s.text} mb-3`,children:"Billing Contact"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:c?.plan_details?.billing_contact?.name||"",onChange:a=>S("plan_details.billing_contact.name",a.target.value),placeholder:"Contact Name",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"email",value:c?.plan_details?.billing_contact?.email||"",onChange:a=>S("plan_details.billing_contact.email",a.target.value),placeholder:"Contact Email",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"tel",value:c?.plan_details?.billing_contact?.phone||"",onChange:a=>S("plan_details.billing_contact.phone",a.target.value),placeholder:"Contact Phone",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"text",value:c?.plan_details?.billing_contact?.company_name||"",onChange:a=>S("plan_details.billing_contact.company_name",a.target.value),placeholder:"Billing Company Name (if different)",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]}),e.jsxs("div",{className:`pt-4 border-t ${s.border}`,children:[e.jsx("h4",{className:`text-sm font-bold ${s.text} mb-3`,children:"Billing Address"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:c?.plan_details?.billing_address?.street||"",onChange:a=>S("plan_details.billing_address.street",a.target.value),placeholder:"Street Address",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:c?.plan_details?.billing_address?.city||"",onChange:a=>S("plan_details.billing_address.city",a.target.value),placeholder:"City",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"text",value:c?.plan_details?.billing_address?.state||"",onChange:a=>S("plan_details.billing_address.state",a.target.value),placeholder:"State",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:c?.plan_details?.billing_address?.postal_code||"",onChange:a=>S("plan_details.billing_address.postal_code",a.target.value),placeholder:"Postal Code",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"text",value:c?.plan_details?.billing_address?.country||"",onChange:a=>S("plan_details.billing_address.country",a.target.value),placeholder:"Country",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-xl lg:col-span-2`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6",children:[e.jsxs("h3",{className:`text-lg md:text-xl font-bold ${s.text} flex items-center gap-3`,children:[e.jsx("div",{className:`p-2 rounded-lg ${s.activeBg}`,children:e.jsx(be,{className:"w-5 h-5 md:w-6 md:h-6"})}),e.jsxs("div",{children:[e.jsx("span",{children:"AI Employees"}),e.jsxs("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${s.searchBg} ${s.textSecondary}`,children:[(c?.ai_employees||[]).length," configured"]})]})]}),e.jsxs("button",{onClick:Ee,disabled:!r,className:`admin-btn-primary px-4 py-2.5 text-sm w-full sm:w-auto flex items-center justify-center gap-2 font-medium ${r?"":"opacity-60 cursor-not-allowed"}`,children:[e.jsx(fe,{className:"w-4 h-4"}),"Add AI Employee"]})]}),e.jsx("div",{className:"space-y-6",children:(c?.ai_employees||[]).length===0?e.jsxs("div",{className:`text-center py-12 border-2 border-dashed ${s.border} rounded-xl`,children:[e.jsx("div",{className:`p-3 rounded-full ${s.searchBg} w-16 h-16 mx-auto mb-4 flex items-center justify-center`,children:e.jsx(be,{className:`w-8 h-8 ${s.textSecondary}`})}),e.jsx("h4",{className:`text-lg font-medium ${s.text} mb-2`,children:"No AI Employees Yet"}),e.jsx("p",{className:`${s.textSecondary} text-sm mb-4`,children:"Add your first AI employee to get started with automation"}),r&&e.jsxs("button",{onClick:Ee,className:"admin-btn-primary px-6 py-2.5 text-sm font-medium",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Create First AI Employee"]})]}):(c?.ai_employees||[]).map((a,n)=>e.jsxs("div",{className:`p-6 rounded-xl border ${s.border} ${s.searchBg} shadow-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.cardBg} border ${s.border}`,children:e.jsx(Q,{className:`w-5 h-5 ${s.text}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:`${s.text} font-bold text-lg`,children:a?.name||`AI Employee #${n+1}`}),e.jsxs("p",{className:`${s.textSecondary} text-sm`,children:[a?.type||"Assistant"," â€¢"," ",a?.preferred_language||"English"]})]})]}),(c?.ai_employees||[]).length>1&&e.jsx("button",{onClick:()=>os(n),className:`p-2 rounded-lg ${s.hover} text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center gap-2`,title:"Remove AI Employee",children:e.jsx(ae,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Name"}),e.jsx("input",{type:"text",value:a?.name||"",onChange:t=>D(n,"name",t.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Type"}),e.jsxs("select",{value:a?.type||"",onChange:t=>D(n,"type",t.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select type"}),Ds.map(t=>e.jsx("option",{value:t.label,children:t.label},t.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Template"}),e.jsxs("select",{value:a?.template||"",onChange:t=>D(n,"template",t.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select template"}),Ye.map(t=>e.jsx("option",{value:t.label,children:t.label},t.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Language"}),e.jsxs("select",{value:a?.preferred_language||"",onChange:t=>D(n,"preferred_language",t.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select language"}),Es.map(t=>e.jsx("option",{value:t.label,children:t.label},t.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Voice Gender"}),e.jsxs("select",{value:a?.voice_gender||"",onChange:t=>D(n,"voice_gender",t.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select voice gender"}),Ls.map(t=>e.jsx("option",{value:t.label,children:t.label},t.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Personality"}),e.jsx("input",{type:"text",value:a?.agent_personality||"",onChange:t=>D(n,"agent_personality",t.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Voice Style"}),e.jsx("input",{type:"text",value:a?.voice_style||"",onChange:t=>D(n,"voice_style",t.target.value),placeholder:"e.g., Professional, Friendly, Energetic",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Special Instructions"}),e.jsx("textarea",{value:a?.special_instructions||"",onChange:t=>D(n,"special_instructions",t.target.value),rows:2,disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block`,children:[e.jsx(te,{className:"w-4 h-4 inline mr-1"}),"Workflow Integrations (",(a?.workflows||[]).length,")"]}),e.jsxs("button",{type:"button",onClick:()=>{j(t=>({...t,ai_employees:(t?.ai_employees||[]).map((p,m)=>m===n?{...p,workflows:[...p.workflows||[],{name:"WhatsApp Business",instruction:"Configure WhatsApp Business integration"}]}:p)}))},className:"px-3 py-1 rounded-lg text-xs bg-green-50 text-green-700 border border-green-200 hover:bg-green-100 transition-colors flex items-center gap-1",children:[e.jsx(ve,{className:"w-3 h-3"}),"Add Workflow"]})]}),e.jsx("div",{className:"space-y-3",children:(a?.workflows||[]).length>0?(a?.workflows||[]).map((t,p)=>e.jsxs("div",{className:`p-4 rounded-lg border ${s.border} ${s.cardBg}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h5",{className:`text-sm font-medium ${s.text} flex items-center gap-2`,children:[e.jsx(ps,{className:"w-4 h-4"}),"Workflow #",p+1]}),e.jsx("button",{type:"button",onClick:()=>{j(m=>({...m,ai_employees:(m?.ai_employees||[]).map((u,y)=>y===n?{...u,workflows:(u.workflows||[]).filter((E,R)=>R!==p)}:u)}))},className:`p-1 rounded ${s.hover} text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors`,children:e.jsx(ae,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Integration Type"}),e.jsxs("select",{value:t?.name||"",onChange:m=>{j(u=>({...u,ai_employees:(u?.ai_employees||[]).map((y,E)=>E===n?{...y,workflows:(y.workflows||[]).map((R,I)=>I===p?{...R,name:m.target.value}:R)}:y)}))},disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select Integration"}),e.jsx("option",{value:"WhatsApp Business",children:"WhatsApp Business"}),e.jsx("option",{value:"Gmail",children:"Gmail"}),e.jsx("option",{value:"Webhooks",children:"Webhooks"}),e.jsx("option",{value:"Google Calendar",children:"Google Calendar"}),e.jsx("option",{value:"Calendly",children:"Calendly"}),e.jsx("option",{value:"Google Sheets",children:"Google Sheets"}),e.jsx("option",{value:"Zoho CRM",children:"Zoho CRM"}),e.jsx("option",{value:"Odoo",children:"Odoo"}),e.jsx("option",{value:"HubSpot",children:"HubSpot"}),e.jsx("option",{value:"Salesforce CRM",children:"Salesforce CRM"}),e.jsx("option",{value:"Zendesk",children:"Zendesk"}),e.jsx("option",{value:"Shopify",children:"Shopify"}),e.jsx("option",{value:"Slack",children:"Slack"}),e.jsx("option",{value:"Zapier",children:"Zapier"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Integration Instructions"}),e.jsx("textarea",{value:t?.instruction||"",onChange:m=>{j(u=>({...u,ai_employees:(u?.ai_employees||[]).map((y,E)=>E===n?{...y,workflows:(y.workflows||[]).map((R,I)=>I===p?{...R,instruction:m.target.value}:R)}:y)}))},rows:3,placeholder:"Enter specific instructions for this workflow integration...",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),t?.name&&e.jsx("div",{className:`p-3 rounded-lg ${s.searchBg} border ${s.border}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:`p-2 rounded-lg ${s.activeBg}`,children:[t?.name==="WhatsApp Business"&&e.jsx(gs,{className:"w-4 h-4 text-green-600"}),t?.name==="Gmail"&&e.jsx(us,{className:"w-4 h-4 text-blue-600"}),t?.name==="Google Calendar"&&e.jsx(bs,{className:"w-4 h-4 text-blue-600"}),t?.name==="Shopify"&&e.jsx(hs,{className:"w-4 h-4 text-green-600"}),t?.name==="Slack"&&e.jsx(ys,{className:"w-4 h-4 text-purple-600"}),!["WhatsApp Business","Gmail","Google Calendar","Shopify","Slack"].includes(t?.name)&&e.jsx(js,{className:"w-4 h-4 text-gray-600"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h6",{className:`text-sm font-medium ${s.text} mb-1`,children:[t?.name," Integration"]}),e.jsx("p",{className:`text-xs ${s.textSecondary}`,children:t?.instruction||"No instructions provided"}),e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mr-1"}),"Configured"]})})]})]})})]})]},p)):e.jsxs("div",{className:`text-center py-6 border-2 border-dashed ${s.border} rounded-lg`,children:[e.jsx(te,{className:`w-8 h-8 mx-auto mb-2 ${s.textSecondary} opacity-50`}),e.jsx("p",{className:`${s.textSecondary} text-sm font-medium mb-1`,children:"No workflow integrations configured"}),e.jsx("p",{className:`${s.textSecondary} text-xs mb-3 opacity-75`,children:"Add integrations like WhatsApp, Gmail, CRM systems to enhance this AI employee"}),e.jsxs("button",{type:"button",onClick:()=>{j(t=>({...t,ai_employees:(t?.ai_employees||[]).map((p,m)=>m===n?{...p,workflows:[{name:"",instruction:""}]}:p)}))},className:"px-4 py-2 rounded-lg text-sm bg-blue-50 text-blue-700 border border-blue-200 hover:bg-blue-100 transition-colors flex items-center gap-2 mx-auto",children:[e.jsx(ve,{className:"w-4 h-4"}),"Add Your First Workflow"]})]})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block`,children:[e.jsx(fs,{className:"w-4 h-4 inline mr-1"}),"Knowledge Sources"]})}),e.jsxs("div",{className:"mb-4 p-4 rounded-lg border ${currentTheme.border} ${currentTheme.searchBg}",children:[e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:[e.jsx(Ve,{className:"w-4 h-4 inline mr-1"}),"Website URL"]}),e.jsx("input",{type:"url",value:a?.knowledge_sources?.website_url||"",onChange:t=>{j(p=>({...p,ai_employees:(p?.ai_employees||[]).map((m,u)=>u===n?{...m,knowledge_sources:{...m.knowledge_sources,website_url:t.target.value}}:m)}))},placeholder:"https://example.com",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"mb-4 p-4 rounded-lg border ${currentTheme.border} ${currentTheme.searchBg}",children:[e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:[e.jsx(vs,{className:"w-4 h-4 inline mr-1"}),"FAQs / Knowledge Text"]}),e.jsx("textarea",{value:a?.knowledge_sources?.faqs_text||"",onChange:t=>{j(p=>({...p,ai_employees:(p?.ai_employees||[]).map((m,u)=>u===n?{...m,knowledge_sources:{...m.knowledge_sources,faqs_text:t.target.value}}:m)}))},rows:4,placeholder:"Enter frequently asked questions and answers, or any text-based knowledge...",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"mb-4 p-4 rounded-lg border ${currentTheme.border} ${currentTheme.searchBg}",children:[e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:[e.jsx(te,{className:"w-4 h-4 inline mr-1"}),"Uploaded Files (",(a?.knowledge_sources?.uploaded_files||[]).length,")"]}),(a?.knowledge_sources?.uploaded_files||[]).length>0?e.jsx("div",{className:"space-y-2",children:(a?.knowledge_sources?.uploaded_files||[]).map((t,p)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${s.border} ${s.cardBg}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx(te,{className:`w-4 h-4 ${s.textSecondary}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm font-medium ${s.text} truncate`,children:t.original_name||t.filename||t.name||"Unnamed File"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.file_size&&e.jsxs("span",{className:`text-xs ${s.textSecondary}`,children:[(t.file_size/1024).toFixed(1)," ","KB"]}),t.file_type&&e.jsx("span",{className:`text-xs ${s.textSecondary} bg-gray-100 px-2 py-0.5 rounded`,children:t.file_type})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>rs(t),className:`p-2 rounded-lg ${s.hover} ${s.textSecondary} hover:text-blue-600 transition-colors`,title:"View File",children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>is(t),className:`p-2 rounded-lg ${s.hover} ${s.textSecondary} hover:text-green-600 transition-colors`,title:"Download File",children:e.jsx(Ns,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{j(m=>({...m,ai_employees:(m?.ai_employees||[]).map((u,y)=>y===n?{...u,knowledge_sources:{...u.knowledge_sources,uploaded_files:(u.knowledge_sources?.uploaded_files||[]).filter((E,R)=>R!==p)}}:u)}))},className:`p-2 rounded-lg ${s.hover} text-red-500 hover:bg-red-50 transition-colors`,title:"Remove File",children:e.jsx(ae,{className:"w-4 h-4"})})]})]},p))}):e.jsxs("div",{className:`text-center py-6 border-2 border-dashed ${s.border} rounded-lg`,children:[e.jsx(te,{className:`w-8 h-8 mx-auto mb-2 ${s.textSecondary} opacity-50`}),e.jsx("p",{className:`${s.textSecondary} text-sm`,children:"No files uploaded yet"}),e.jsx("p",{className:`${s.textSecondary} text-xs mt-1 opacity-75`,children:"Files will appear here when uploaded during onboarding"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("input",{type:"file",multiple:!0,disabled:!r,onChange:t=>{const p=Array.from(t.target.files||[]);if(p.length>0){const m=p.map(u=>({name:u.name,original_name:u.name,file_size:u.size,file_type:u.type,pending_upload:!0,fileObject:u}));j(u=>({...u,ai_employees:(u?.ai_employees||[]).map((y,E)=>E===n?{...y,knowledge_sources:{...y.knowledge_sources,uploaded_files:[...y.knowledge_sources?.uploaded_files||[],...m]}}:y)})),t.target.value=""}},className:`w-full px-3 py-2 text-sm border-2 border-dashed ${s.border} rounded-lg ${s.cardBg} ${s.text} file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100`,accept:".pdf,.doc,.docx,.txt,.csv,.xlsx"}),e.jsx("p",{className:`text-xs ${s.textSecondary} mt-2`,children:"Supported formats: PDF, DOC, DOCX, TXT, CSV, XLSX"})]})]})]})]}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:`border-t ${s.border} pt-6`,children:[e.jsxs("h4",{className:`text-md font-semibold ${s.text} flex items-center gap-2 mb-4`,children:[e.jsx(Ie,{className:"w-4 h-4 text-green-600"}),"Instructions & Guidelines",e.jsx("span",{className:`text-xs ${s.textSecondary} font-normal`,children:"Set behavior guidelines"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Do's and Don'ts"}),e.jsx("textarea",{value:a?.instructions?.dos_and_donts||"",onChange:t=>D(n,"instructions.dos_and_donts",t.target.value),rows:4,placeholder:"Be professional, Don't share personal information...",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Fallback Contacts"}),e.jsx("input",{type:"text",value:a?.instructions?.fallback_contacts||"",onChange:t=>D(n,"instructions.fallback_contacts",t.target.value),placeholder:"atharkatheri@gmail.com",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]}),e.jsxs("div",{className:`border-t ${s.border} pt-6`,children:[e.jsxs("h4",{className:`text-md font-semibold ${s.text} flex items-center gap-2 mb-4`,children:[e.jsx($s,{className:"w-4 h-4 text-orange-600"}),"Success Targets",e.jsx("span",{className:`text-xs ${s.textSecondary} font-normal`,children:"Define success metrics"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"What Success Looks Like"}),e.jsx("textarea",{value:a?.success_targets?.description||"",onChange:t=>D(n,"success_targets.description",t.target.value),rows:3,placeholder:"Lead qualification, booking appointments, FAQ deflection...",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Success Metrics"}),e.jsxs("div",{className:"space-y-2",children:[(a?.success_targets?.metrics||[""]).map((t,p)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:t,onChange:m=>{const u=[...a?.success_targets?.metrics||[]];u[p]=m.target.value,D(n,"success_targets.metrics",u)},placeholder:"80% FAQ resolution rate",disabled:!r,className:`flex-1 px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("button",{onClick:()=>{const m=(a?.success_targets?.metrics||[]).filter((u,y)=>y!==p);D(n,"success_targets.metrics",m)},className:"px-2 py-2 rounded-lg text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:e.jsx(ae,{className:"w-4 h-4"})})]},p)),e.jsxs("button",{onClick:()=>{const t=[...a?.success_targets?.metrics||[],""];D(n,"success_targets.metrics",t)},className:`flex items-center gap-2 px-3 py-2 border-2 border-dashed ${s.border} rounded-lg ${s.text} hover:bg-opacity-50 transition-colors text-sm`,children:[e.jsx(ve,{className:"w-4 h-4"}),"Add Metric"]})]})]})]})]}),e.jsxs("div",{className:`border-t ${s.border} pt-6`,children:[e.jsxs("h4",{className:`text-md font-semibold ${s.text} flex items-center gap-2 mb-4`,children:[e.jsx(ze,{className:"w-4 h-4 text-purple-600"}),"Deployment Configuration",e.jsx("span",{className:`text-xs ${s.textSecondary} font-normal`,children:"Choose deployment options"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Service Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("label",{className:`flex items-center gap-3 p-3 border ${s.border} rounded-lg cursor-pointer transition-colors ${a?.deployment?.service_type==="shivai"?"bg-blue-50 border-blue-200 dark:bg-blue-900/20":""}`,children:[e.jsx("input",{type:"radio",name:`service_type_${n}`,checked:a?.deployment_service?.service_type==="shivai",onChange:t=>D(n,"deployment_service.service_type","shivai"),disabled:!r,className:`w-4 h-4 text-blue-500 ${r?"":"opacity-60 cursor-not-allowed"}`}),e.jsx("span",{className:"text-sm",children:"Shivai"})]}),e.jsxs("label",{className:`flex items-center gap-3 p-3 border ${s.border} rounded-lg cursor-pointer transition-colors ${a?.deployment?.service_type==="self"?"bg-blue-50 border-blue-200 dark:bg-blue-900/20":""}`,children:[e.jsx("input",{type:"radio",name:`service_type_${n}`,checked:a?.deployment_service?.service_type==="self",onChange:t=>D(n,"deployment_service.service_type","self"),disabled:!r,className:`w-4 h-4 text-blue-500 ${r?"":"opacity-60 cursor-not-allowed"}`}),e.jsx("span",{className:"text-sm",children:"Self-managed"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Channels"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Website","Mobile App"].map(t=>e.jsxs("label",{className:`flex items-center gap-2 px-3 py-2 border ${s.border} rounded-full cursor-pointer text-sm transition-colors ${(a?.deployment?.channels||[]).includes(t)?"bg-blue-50 border-blue-200 dark:bg-blue-900/20":""}`,children:[e.jsx("input",{type:"checkbox",checked:(a?.deployment?.channels||[]).includes(t),onChange:p=>{const m=a?.deployment?.channels||[],u=p.target.checked?[...m,t]:m.filter(y=>y!==t);D(n,"deployment.channels",u)},disabled:!r,className:`w-3 h-3 text-blue-500 ${r?"":"opacity-60 cursor-not-allowed"}`}),t]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Deployment Notes"}),e.jsx("textarea",{value:a?.deployment_targets?.deployment_notes||"",onChange:t=>D(n,"deployment_targets.deployment_notes",t.target.value),rows:3,placeholder:"Phase 1: Website implementation...",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]}),e.jsxs("div",{className:`border-t ${s.border} pt-6`,children:[e.jsxs("h4",{className:`text-md font-semibold ${s.text} flex items-center gap-2 mb-4`,children:[e.jsx(ws,{className:"w-4 h-4 text-gray-600"}),"Consent & Privacy Options",e.jsx("span",{className:`text-xs ${s.textSecondary} font-normal`,children:"Privacy settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a?.consent_options?.recording_enabled||!1,onChange:t=>D(n,"consent_options.recording_enabled",t.target.checked),disabled:!r,className:`w-4 h-4 text-blue-500 rounded ${r?"":"opacity-50 cursor-not-allowed"}`}),e.jsx("span",{className:"text-sm",children:"Recording Enabled"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a?.consent_options?.transcript_email_optin||!1,onChange:t=>D(n,"consent_options.transcript_email_optin",t.target.checked),disabled:!r,className:`w-4 h-4 text-blue-500 rounded ${r?"":"opacity-50 cursor-not-allowed"}`}),e.jsx("span",{className:"text-sm",children:"Transcript Email Opt-in"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Privacy Notes"}),e.jsx("input",{type:"text",value:a?.consent_options?.privacy_notes||"",onChange:t=>D(n,"consent_options.privacy_notes",t.target.value),placeholder:"Privacy enabled",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]})]})]},n))})]})})]}):e.jsxs("div",{className:"space-y-4 md:space-y-6 px-2 sm:px-0",children:[e.jsx("div",{className:"relative -mx-2 sm:mx-0",children:e.jsxs("div",{className:"flex md:grid md:grid-cols-3 gap-3 md:gap-4 overflow-x-auto scrollbar-hide px-2 sm:px-0 snap-x snap-mandatory",children:[e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-4 md:p-6 shadow-lg min-w-[280px] sm:min-w-[320px] md:min-w-0 snap-center flex-shrink-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-3",children:[e.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-lg ${s.searchBg} flex items-center justify-center`,children:e.jsx(Pe,{className:`w-5 h-5 md:w-6 md:h-6 ${s.textSecondary}`})}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-blue-500",children:"Total"})]}),e.jsx("h3",{className:`text-2xl md:text-3xl font-semibold ${s.text} mb-1 md:mb-2`,children:O?.total||w||xe("all")}),e.jsx("p",{className:`text-xs md:text-sm font-medium ${s.text}`,children:"All Clients"}),O&&e.jsxs("p",{className:`text-xs ${s.textSecondary} mt-1`,children:["Page ",O.page||b," of"," ",O.totalPages||M]})]}),e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-4 md:p-6 shadow-lg min-w-[280px] sm:min-w-[320px] md:min-w-0 snap-center flex-shrink-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-3",children:[e.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-lg ${s.searchBg} flex items-center justify-center`,children:e.jsx(Fe,{className:`w-5 h-5 md:w-6 md:h-6 ${s.textSecondary}`})}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-yellow-500",children:"Pending"})]}),e.jsx("h3",{className:`text-2xl md:text-3xl font-semibold ${s.text} mb-1 md:mb-2`,children:xe("pending")}),e.jsx("p",{className:`text-xs md:text-sm font-medium ${s.text}`,children:"Awaiting Review"})]}),e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-4 md:p-6 shadow-lg min-w-[280px] sm:min-w-[320px] md:min-w-0 snap-center flex-shrink-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-3",children:[e.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-lg ${s.searchBg} flex items-center justify-center`,children:e.jsx(ge,{className:`w-5 h-5 md:w-6 md:h-6 ${s.textSecondary}`})}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-green-500",children:"Active"})]}),e.jsx("h3",{className:`text-2xl md:text-3xl font-semibold ${s.text} mb-1 md:mb-2`,children:xe("approved")}),e.jsx("p",{className:`text-xs md:text-sm font-medium ${s.text}`,children:"Approved Clients"})]})]})}),e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-3 sm:p-4 md:p-6 shadow-lg`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 md:gap-4 mb-4 md:mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:`text-lg md:text-xl font-semibold ${s.text} flex items-center gap-2`,children:[e.jsx(Pe,{className:"w-4 h-4 md:w-5 md:h-5"}),"Client Requests"]}),e.jsxs("p",{className:`${s.textSecondary} text-xs md:text-sm mt-1`,children:["(",O?.total||w||xe("all")," total)"]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 w-full sm:w-auto",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:`p-2 rounded-lg ${s.hover} ${s.text} transition-all duration-200 flex-shrink-0`,title:"Refresh data",children:e.jsx(_s,{className:"w-4 h-4"})}),e.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[e.jsx(ks,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${s.textSecondary}`}),e.jsx("input",{type:"text",placeholder:"Search...",value:l,onChange:a=>g(a.target.value),className:`w-full sm:w-48 md:w-64 pl-9 pr-3 py-2 text-sm rounded-lg border ${s.border} ${s.bg} ${s.text} focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent`})]})]})]}),e.jsx("div",{className:`flex gap-1 mb-4 md:mb-6 border-b ${s.border} overflow-x-auto scrollbar-hide -mx-3 sm:mx-0 px-3 sm:px-0`,children:["all","newlySignup","pending","onboarded","approved","rejected"].map(a=>{const n={all:{icon:Ie,label:"All"},newlySignup:{icon:fe,label:"Newly Signup"},pending:{icon:Fe,label:"Pending"},onboarded:{icon:ge,label:"Onboarded"},approved:{icon:Ss,label:"Approved"},rejected:{icon:ae,label:"Rejected"}},{icon:t,label:p}=n[a];return e.jsx("button",{onClick:()=>Y(a),className:`flex-shrink-0 px-3 md:px-4 py-2 md:py-3 text-sm md:text-base font-medium transition-all duration-200 border-b-2 whitespace-nowrap ${C===a?`${s.activeBorder} ${s.text}`:`border-transparent ${s.textSecondary} ${s.hover}`}`,children:e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx(t,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),e.jsx("span",{className:"text-sm md:text-base",children:p})]})},a)})}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:he?e.jsxs("div",{className:`text-center py-12 md:py-16 rounded-lg ${s.cardBg} border ${s.border}`,children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 md:h-12 md:w-12 border-b-2 border-blue-500 mx-auto mb-3"}),e.jsx("h3",{className:`text-base md:text-lg font-semibold ${s.text} mb-2`,children:"Loading clients..."}),e.jsx("p",{className:`text-sm ${s.textSecondary}`,children:"Please wait while we fetch the data"})]}):Ce.length===0?e.jsxs("div",{className:`text-center py-8 md:py-12 rounded-lg ${s.cardBg} border ${s.border}`,children:[e.jsx(qe,{className:`w-10 h-10 md:w-12 md:h-12 mx-auto mb-2 md:mb-3 ${s.textSecondary}`}),e.jsx("h3",{className:`text-base md:text-lg font-semibold ${s.text} mb-1 md:mb-2`,children:k?"No matching clients":"No client requests yet"}),e.jsx("p",{className:`text-sm ${s.textSecondary}`,children:k?"Try adjusting your search criteria":"No client requests available"})]}):Ce?.map(a=>e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-3 md:p-4 hover:shadow-md transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2 md:mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-9 h-9 md:w-10 md:h-10 rounded-lg ${s.activeBg} flex items-center justify-center flex-shrink-0`,children:e.jsx($e,{className:`w-4 h-4 md:w-5 md:h-5 ${s.text}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`font-semibold ${s.text} text-base md:text-lg truncate`,children:a?.userData?.fullName||a?.company_basics?.name||"Unknown"}),e.jsx("p",{className:`text-xs md:text-sm ${s.textSecondary} truncate`,children:a?.userData?.email||a?.company_basics?.company_email||"No email"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>ss(a?.userData),className:`p-2 flex items-center justify-center ${s.textSecondary} rounded-lg ${s.activeBg} hover:scale-105 transition-all duration-200`,title:"View Client Details",children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Ae(a?.userData),className:`p-2 flex items-center justify-center ${s.textSecondary} rounded-lg ${s.activeBg} hover:scale-105 transition-all duration-200`,title:"Edit Client",children:e.jsx(Ne,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Be(a?.userData),className:"p-2 flex items-center justify-center text-red-500 rounded-lg hover:bg-red-50 hover:scale-105 transition-all duration-200",title:"Delete Client",children:e.jsx(Se,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s.textSecondary} uppercase mb-0.5`,children:"Plan"}),e.jsx("p",{className:`${s.text} font-medium text-xs md:text-sm truncate`,children:(()=>{const n=a?.userData?.onboarding?.plan_type||a?.plan_details?.type,t=pe.find(p=>p.apiKey===n);return t?`${t.name} (${t.price})`:n||"No plan"})()})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s.textSecondary} uppercase`,children:"Company"}),e.jsx("p",{className:`${s.text} font-medium text-sm`,children:a?.userData?.onboarding?.company_name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s.textSecondary} uppercase`,children:"Email"}),e.jsx("p",{className:`${s.text} font-medium text-sm truncate`,children:a?.userData?.onboarding?.company_email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s.textSecondary} uppercase`,children:"AI Employees"}),e.jsx("p",{className:`${s.text} font-medium text-sm`,children:a?.userData?.onboarding?.ai_employee_count||(a?.ai_employees||[]).length})]})]})]},a.id))}),M>1&&e.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 md:gap-3 mt-4 md:mt-6 p-3 md:p-4 rounded-lg ${s.searchBg}`,children:[e.jsxs("div",{className:`text-xs md:text-sm ${s.textSecondary} text-center sm:text-left`,children:["Showing"," ",((O?.page||b)-1)*(O?.limit||B)+1," ","to"," ",Math.min((O?.page||b)*(O?.limit||B),O?.total||w)," ","of ",O?.total||w]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:Xe,disabled:b===1,className:`px-2.5 md:px-3 py-1.5 text-xs md:text-sm rounded-md transition-all duration-200 ${b===1?`${s.textSecondary} cursor-not-allowed opacity-50`:`${s.text} ${s.hover} hover:scale-105`}`,children:"Previous"}),e.jsxs("span",{className:`mx-2 md:mx-3 text-xs md:text-sm ${s.text}`,children:[O?.page||b,"/",O?.totalPages||M]}),e.jsx("button",{onClick:Te,disabled:b===M,className:`px-2.5 md:px-3 py-1.5 text-xs md:text-sm rounded-md transition-all duration-200 ${b===M?`${s.textSecondary} cursor-not-allowed opacity-50`:`${s.text} ${s.hover} hover:scale-105`}`,children:"Next"})]})]})]})]})};export{Vs as default};
