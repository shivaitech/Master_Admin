import{j as e,u as gs,A as ts,S as Je,X as se,f as ze,B as Ve,g as us,h as ls,i as Xe,U as We,k as ne,m as G,P as Ke,o as bs,p as Ge,c as ns,q as rs,r as hs,t as ys,v as fs,w as js,G as os,x as vs,e as Ae,D as is,y as Ze,H as Ns,R as ds,I as $s,J as De,K as Be,N as ws,O as _s,Q as ks,V as Ss,W as cs,Y as xs,b as Cs,Z as Te,_ as As,s as V,z as R,M as Ds,$ as es,a0 as ss,a1 as Bs,a2 as fe,a3 as Is,a4 as Es,a5 as Ps,a6 as as,a7 as Ls,a8 as Ms,a9 as Rs,L as Fs,aa as Us}from"./admin-DPoVIZhb.js";import{r as x,u as Os,d as zs}from"./router-CINeAvhf.js";import"./vendor-DJG_os-6.js";const Ws=({agent:o,onBack:s,currentTheme:a,onClose:j})=>{console.log("Agent/Client data:",o),console.log("Agent ID fields from client:",{client_id:o?.id||o?._id,userData_id:o?.userData?.id||o?.userData?._id,agent_id_from_client:o?.agent_id||o?.agentId,userData_agent_id:o?.userData?.agent_id||o?.userData?.agentId,direct_fields:{id:o?.id,_id:o?._id,agent_id:o?.agent_id,agentId:o?.agentId}});const F=o?.id||o?._id||o?.userData?.id||o?.userData?._id||o?.agent_id||o?.agentId||o?.userData?.agent_id||o?.userData?.agentId;console.log("Extracted Agent ID:",F);const P=o?.name||o?.agent_name||o?.userData?.name||o?.userData?.agent_name||o?.company_name||o?.companyName||"AI Assistant";console.log("Extracted Agent Name:",P);const $={agentId:F||"NO_AGENT_ID_FOUND",agentName:P,language:o?.preferred_language||o?.language||o?.userData?.preferred_language||o?.userData?.language||"en",primaryColor:o?.primary_color||o?.userData?.primary_color||"#4b5563",secondaryColor:o?.secondary_color||o?.userData?.secondary_color||"#6b7280",accentColor:o?.accent_color||o?.userData?.accent_color||"#374151",position:"bottom-right",chatWidth:"380px",chatHeight:"520px",autoOpen:!1,voiceEnabled:o?.voice_enabled!==!1,companyName:o?.company_name||o?.companyName||o?.userData?.company_name||o?.userData?.companyName||P,companyDescription:o?.description||o?.company_description||o?.userData?.description||o?.userData?.company_description||"AI-Powered Support - We offer 24/7 voice support to handle your business calls efficiently and professionally.",welcomeMessage:o?.welcome_message||o?.welcomeMessage||o?.userData?.welcome_message||o?.userData?.welcomeMessage||`Hi! I'm ${P}. How can I help you today?`},I=x.useRef(null),y=()=>{const _="https://callshivai.com/widget2.js",C=new URLSearchParams({agentId:$.agentId,agentName:$.agentName,language:$.language,primaryColor:$.primaryColor,secondaryColor:$.secondaryColor,accentColor:$.accentColor,position:$.position,chatWidth:$.chatWidth,chatHeight:$.chatHeight,autoOpen:$.autoOpen.toString(),voiceEnabled:$.voiceEnabled.toString(),companyName:$.companyName,companyDescription:$.companyDescription,welcomeMessage:$.welcomeMessage,v:Date.now().toString()});return`${_}?${C.toString()}`},N=()=>{const _=y();return`
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent Preview</title>
    <style>
        body {
            margin: 0;
            padding: 16px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #f8fafc;
            height: 100vh;
            color: #334155;
            overflow: hidden;
            box-sizing: border-box;
        }
        * {
            box-sizing: border-box;
        }
        .dashboard {
            height: calc(100vh - 32px);
            display: grid;
            grid-template-rows: auto 1fr;
            gap: 12px;
        }
        .header {
            background: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            text-align: center;
        }
        .agent-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 4px;
        }
        .agent-id {
            font-size: 0.75rem;
            color: #64748b;
            font-family: 'Monaco', 'Menlo', monospace;
            background: #f1f5f9;
            padding: 2px 8px;
            border-radius: 4px;
            display: inline-block;
        }
        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            height: 100%;
        }
        .card {
            background: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: auto;
        }
        .card-title {
            font-size: 1rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 8px;
        }
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        .info-item {
            background: #f8fafc;
            padding: 8px;
            border-radius: 6px;
            border-left: 3px solid #3b82f6;
        }
        .info-label {
            font-size: 0.7rem;
            color: #64748b;
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 2px;
        }
        .info-value {
            font-size: 0.85rem;
            color: #1e293b;
            font-weight: 500;
        }
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 500;
        }
        .status-active {
            background: #dcfce7;
            color: #166534;
        }
        .status-inactive {
            background: #fee2e2;
            color: #991b1b;
        }
        .color-preview {
            width: 14px;
            height: 14px;
            border-radius: 2px;
            display: inline-block;
            margin-left: 6px;
            border: 1px solid #e2e8f0;
            vertical-align: middle;
        }
        .description {
            font-size: 0.85rem;
            line-height: 1.4;
            color: #475569;
            background: #f1f5f9;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 12px;
        }
        .message-box {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 6px;
            padding: 12px;
        }
        .message-text {
            font-size: 0.85rem;
            color: #1e40af;
            line-height: 1.4;
        }

        /* Mobile adjustments */
        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto;
            }
            .info-grid {
                grid-template-columns: 1fr;
                gap: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
      
        
        <div class="content">
            <div class="card">
                <h2 class="card-title">Configurations</h2>
                ${`<div class="description">${$.agentName}</div>`}
                ${`<div class="description">${$.companyDescription}</div>`}
                
                <div class="info-grid">
                    <div class="info-item">
                        <div class="info-label">Status</div>
                        <div class="info-value">
                            <span class="status-badge ${o?.is_active!==!1?"status-active":"status-inactive"}">
                                ${o?.is_active!==!1?"üü¢ Active":"üî¥ Inactive"}
                            </span>
                        </div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Language</div>
                        <div class="info-value">${$.language.toUpperCase()}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Voice</div>
                        <div class="info-value">${$.voiceEnabled?"üéôÔ∏è Enabled":"üîá Disabled"}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Auto Open</div>
                        <div class="info-value">‚ùå No</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Position</div>
                        <div class="info-value">${$.position}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Size</div>
                        <div class="info-value">${$.chatWidth} √ó ${$.chatHeight}</div>
                    </div>
                </div>
            </div>

          

               
            </div>
        </div>
    </div>
    
    <script src="${_}"><\/script>
</body>
</html>`},v=()=>{if(I.current){const _=N(),C=new Blob([_],{type:"text/html"}),O=URL.createObjectURL(C);I.current.src=O,I.current.onload=()=>{URL.revokeObjectURL(O)}}};return x.useEffect(()=>{v()},[]),e.jsx("div",{className:"h-screen flex flex-col",children:e.jsx("div",{className:"flex-1 flex items-start justify-center ",children:e.jsx("iframe",{ref:I,className:"w-full h-[74vh] lg:h-[60vh] border-0 rounded-lg shadow-lg overflow-auto",title:"Widget Preview",sandbox:"allow-scripts allow-same-origin allow-forms"})})})},Ce=[{value:"saas-software",label:"SaaS & Software Development"},{value:"technology-it",label:"Technology / IT Services"},{value:"healthcare-clinics",label:"Healthcare & Clinics"},{value:"finance-insurance",label:"Finance & Insurance"},{value:"retail-ecommerce",label:"Retail & E-Commerce"},{value:"education-training",label:"Education & Training"},{value:"real-estate-property",label:"Real Estate & Property"},{value:"hospitality-travel",label:"Hospitality & Travel"},{value:"food-beverage",label:"Food & Beverage (Restaurants, Cafes, Catering)"},{value:"automotive-transportation",label:"Automotive & Transportation"},{value:"legal-professional",label:"Legal & Professional Services"},{value:"manufacturing-industrial",label:"Manufacturing & Industrial"},{value:"consulting-business",label:"Consulting & Business Services"},{value:"marketing-advertising",label:"Marketing & Advertising"},{value:"construction-home",label:"Construction & Home Services"},{value:"logistics-supply",label:"Logistics & Supply Chain"},{value:"media-entertainment",label:"Media & Entertainment"},{value:"beauty-wellness",label:"Beauty, Wellness & Personal Care"},{value:"nonprofit-community",label:"Nonprofit & Community Organizations"},{value:"other",label:"Other"}],Ks=[{value:"sales",label:"Sales & Business Development"},{value:"support",label:"Customer Support & Service"},{value:"appointment",label:"Appointment & Scheduling"},{value:"order",label:"Order Management & Billing"},{value:"product",label:"Product / Service Explainers"},{value:"feedback",label:"Feedback & Engagement"},{value:"custom",label:"Custom Workflows"}],ms=[{value:"sales-business-development",label:"Sales & Business Development"},{value:"customer-support-service",label:"Customer Support & Service"},{value:"appointment-scheduling",label:"Appointment & Scheduling"},{value:"order-billing",label:"Order Management & Billing"},{value:"product-service-explainers",label:"Product / Service Explainers"},{value:"feedback-engagement",label:"Feedback & Engagement"},{value:"custom-workflows",label:"Custom Workflows"}],Vs=[{value:"All",label:"üåç Multilingual"},{value:"ar",label:"üá∏üá¶ Arabic"},{value:"zh",label:"üá®üá≥ Chinese"},{value:"nl",label:"üá≥üá± Dutch"},{value:"en-GB",label:"üá¨üáß English (UK)"},{value:"en-US",label:"üá∫üá∏ English (US)"},{value:"en-IN",label:"üáÆüá≥ English (India)"},{value:"fr",label:"üá´üá∑ French"},{value:"de",label:"üá©üá™ German"},{value:"hi",label:"üáÆüá≥ Hindi"},{value:"it",label:"üáÆüáπ Italian"},{value:"ja",label:"üáØüáµ Japanese"},{value:"ko",label:"üá∞üá∑ Korean"},{value:"pt",label:"üáµüáπ Portuguese"},{value:"pl",label:"üáµüá± Polish"},{value:"ru",label:"üá∑üá∫ Russian"},{value:"es",label:"üá™üá∏ Spanish"},{value:"tr",label:"üáπüá∑ Turkish"}],Gs=[{value:"neutral",label:"Gender Neutral"},{value:"male",label:"Male"},{value:"female",label:"Female"}],Se=[{id:"starter",name:"Starter",apiKey:"Starter Plan",description:"Perfect for small businesses",maxAgents:1,aiEmployees:1,price:"$49/mo"},{id:"professional",name:"Professional",apiKey:"Professional Plan",description:"For Growing Teams & Small Businesses",maxAgents:5,aiEmployees:5,price:"$149/mo"},{id:"business",name:"Business",apiKey:"Business Plan",description:"For Scaling Companies & Mid-Sized Teams",maxAgents:15,aiEmployees:15,price:"$299/mo"},{id:"custom",name:"Custom",apiKey:"Custom Plan",description:"For Large Organizations & Enterprises",maxAgents:999,aiEmployees:999,price:"Custom"}],Js=({client:o,currentTheme:s})=>{const[a,j]=x.useState(null),[F,P]=x.useState(!0),[$,I]=x.useState(null);return x.useEffect(()=>{(async()=>{const N=o?.userData?._id||o?._id||o?.userData?.id||o?.id;if(!N){console.warn("‚ö†Ô∏è No user ID found for fetching onboarding data"),P(!1);return}try{P(!0),I(null),console.log("üîç Fetching onboarding data for user ID:",N);const v=await V.getOnboardingByUserId(N);console.log("‚úÖ Onboarding data fetched:",v);const _=v?.data?.onboarding||v?.onboarding||v?.data||v;j(_)}catch(v){console.error("‚ùå Error fetching onboarding data:",v),I(v.message||"Failed to load onboarding data");const _=o?.onboardingDetails?.onboarding||o?.userData?.onboarding||o?.onboarding||{};_&&Object.keys(_).length>0&&(console.log("üìã Using fallback onboarding data from client prop"),j(_),I(null))}finally{P(!1)}})()},[o]),F?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mb-3"}),e.jsx("p",{className:`${s.textSecondary} text-sm`,children:"Loading onboarding data..."})]})}):$?e.jsxs("div",{className:`text-center py-8 rounded-lg border-2 border-dashed ${s.border} bg-red-50 dark:bg-red-900/10`,children:[e.jsx(se,{className:"w-5 h-5 mx-auto mb-3 text-red-500 opacity-50"}),e.jsx("p",{className:"text-red-600 dark:text-red-400 font-medium mb-2",children:"Error loading onboarding data"}),e.jsx("p",{className:"text-red-500 dark:text-red-300 text-sm opacity-75",children:$})]}):e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsx("h3",{className:`text-lg font-semibold ${s.text} mb-4`,children:"Onboarding Information"}),!a||a?.onboarding===null||Object.keys(a).length===0?e.jsxs("div",{className:`text-center py-8 rounded-lg border-2 border-dashed ${s.border}`,children:[e.jsx(G,{className:`w-5 h-5 mx-auto mb-3 ${s.textSecondary} opacity-50`}),e.jsx("p",{className:`${s.textSecondary} font-medium mb-2`,children:"No onboarding data available"}),e.jsx("p",{className:`${s.textSecondary} text-sm opacity-75`,children:"This client hasn't completed the onboarding process yet"})]}):e.jsxs("div",{className:"space-y-6",children:[a.company_basics&&e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[e.jsxs("h4",{className:`text-base md:text-lg font-semibold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(Ve,{className:"w-5 h-5"}),"Company Basics"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:[a.company_basics.name&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Company Name"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.company_basics.name})]}),a.company_basics.company_email&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Company Email"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.company_basics.company_email})]}),a.company_basics.company_phone&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Phone"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.company_basics.company_phone})]}),a.company_basics.website&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Website"}),e.jsx("p",{className:`${s.text} font-medium`,children:e.jsx("a",{href:a.company_basics.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:a.company_basics.website})})]}),a.company_basics.company_size&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Company Size"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.company_basics.company_size})]}),a.company_basics.linkedin_profile&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"LinkedIn"}),e.jsx("p",{className:`${s.text} font-medium`,children:e.jsx("a",{href:a.company_basics.linkedin_profile,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"LinkedIn Profile"})})]})]}),a.company_basics.industry&&Array.isArray(a.company_basics.industry)&&a.company_basics.industry.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Industries"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.company_basics.industry.map((y,N)=>{const v=Ce.find(_=>_.value===y)?.label||y;return e.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:v},N)})})]}),a.company_basics.description&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Description"}),e.jsx("p",{className:`${s.text} leading-relaxed`,children:a.company_basics.description})]}),a.company_basics.address&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Address"}),e.jsx("p",{className:`${s.text} leading-relaxed`,children:a.company_basics.address})]})]}),a.plan_details&&e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[e.jsxs("h4",{className:`text-base md:text-lg font-semibold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(ls,{className:"w-5 h-5"}),"Plan Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[a.plan_details.type&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Plan Type"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.plan_details.type})]}),a.plan_details.billing_contact&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Billing Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.plan_details.billing_contact.name&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Name"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.plan_details.billing_contact.name})]}),a.plan_details.billing_contact.email&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Email"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.plan_details.billing_contact.email})]}),a.plan_details.billing_contact.phone&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Phone"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.plan_details.billing_contact.phone})]})]})]})]})]}),a.deployment_targets&&e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[e.jsxs("h4",{className:`text-base md:text-lg font-semibold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(ds,{className:"w-5 h-5"}),"Deployment Targets"]}),a.deployment_targets.channels&&Array.isArray(a.deployment_targets.channels)&&a.deployment_targets.channels.length>0&&e.jsxs("div",{className:"mb-3 md:mb-4",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Deployment Channels"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.deployment_targets.channels.map((y,N)=>e.jsx("span",{className:"bg-green-100 text-green-800 px-2 md:px-3 py-1 rounded-full text-xs md:text-sm font-medium capitalize",children:y.replace("_"," ")},N))})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[a.deployment_targets.website_url&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Website URL"}),e.jsx("p",{className:`${s.text} font-medium`,children:e.jsx("a",{href:a.deployment_targets.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:a.deployment_targets.website_url})})]}),a.deployment_targets.whatsapp_phone&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"WhatsApp Phone"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.deployment_targets.whatsapp_phone})]}),a.deployment_targets.support_email&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Support Email"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.deployment_targets.support_email})]})]})]}),a.ai_employees&&Array.isArray(a.ai_employees)&&a.ai_employees.length>0&&e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[e.jsxs("h4",{className:`text-base md:text-lg font-semibold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(ne,{className:"w-5 h-5"}),"AI Employees (",a.ai_employees.length,")"]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:a.ai_employees.map((y,N)=>e.jsxs("div",{className:`border ${s.border} rounded-lg p-3 md:p-4 ${s.searchBg}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(ne,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h5",{className:`font-medium ${s.text} truncate`,children:y?.name||`AI Employee #${N+1}`}),e.jsx("p",{className:`text-xs ${s.textSecondary} truncate`,children:y?.template||y?.type||"Custom Agent"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 text-sm",children:[y?.template&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Template"}),e.jsx("p",{className:`${s.text}`,children:ms.find(v=>v.value===y.template)?.label||y.template})]}),y?.preferred_language&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Language"}),e.jsx("p",{className:`${s.text}`,children:y.preferred_language})]}),y?.agent_personality&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Personality"}),e.jsx("p",{className:`${s.text} capitalize`,children:y.agent_personality})]}),y?.voice_gender&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Voice"}),e.jsxs("p",{className:`${s.text}`,children:[y.voice_gender," -"," ",y.voice_style||"Default"]})]})]}),y?.special_instructions&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Special Instructions"}),e.jsx("p",{className:`${s.text} text-sm leading-relaxed`,children:y.special_instructions})]}),y?.targets?.success_metrics&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Success Metrics"}),e.jsx("p",{className:`${s.text} text-sm leading-relaxed`,children:y.targets.success_metrics})]}),y?.knowledge_sources&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Knowledge Sources"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[y.knowledge_sources.website_url&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Website URL"}),e.jsx("p",{className:`${s.text}`,children:e.jsx("a",{href:y.knowledge_sources.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:y.knowledge_sources.website_url})})]}),y.knowledge_sources.faqs_text&&e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"FAQs Text"}),e.jsxs("p",{className:`${s.text}`,children:[y.knowledge_sources.faqs_text.substring(0,100),y.knowledge_sources.faqs_text.length>100?"...":""]})]})]})]}),y?.workflows&&Array.isArray(y.workflows)&&y.workflows.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Workflows"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.workflows.map((v,_)=>e.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-md text-xs font-medium",children:v.name},_))})]})]},N))})]})]})]})},Xs=({client:o,currentTheme:s})=>{const a=o?.userData||o||{},j=o?.company_basics||o?.userData?.onboarding?.company_basics||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:`text-lg font-semibold ${s.text} mb-4`,children:"Client Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Full Name"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.fullName||a.name||j.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Email"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.email||j.company_email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Phone"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.phone||j.company_phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Website"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.website||j.company_website||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Company Size"}),e.jsx("p",{className:`${s.text} font-medium`,children:a.companySize||j.company_size||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o?.isApproved||a?.isApproved?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":o?.isRejected||a?.isRejected?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":a?.isActive?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:o?.isApproved||a?.isApproved?"approved":o?.isRejected||a?.isRejected?"rejected":a?.isActive?"Active":"Pending"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Email Verified"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a?.emailVerified?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:a?.emailVerified?"Verified":"Not Verified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Onboarded"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a?.isOnboarded?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:a?.isOnboarded?"Completed":"Pending"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Created At"}),e.jsx("p",{className:`${s.text} font-medium`,children:a?.createdAt?new Date(a.createdAt).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Last Login"}),e.jsx("p",{className:`${s.text} font-medium`,children:a?.lastLoginAt?new Date(a.lastLoginAt).toLocaleDateString():"N/A"})]})]}),(a?.address||j?.company_address)&&e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${s.textSecondary} uppercase block mb-2`,children:"Company Address"}),e.jsx("p",{className:`${s.text} leading-relaxed`,children:a?.address||j?.company_address})]})]})},Zs=({client:o,currentTheme:s,onViewAgent:a})=>{const[j,F]=x.useState([]),[P,$]=x.useState(!0),[I,y]=x.useState(null);return x.useEffect(()=>{(async()=>{if(!o){$(!1);return}try{$(!0),y(null),console.log("üîÑ AIEmployeesTab mounted - fetching agents for client:",o?.id),console.log("üìã Client user ID:",o?.userData?.id),console.log("üìã Full client object:",o);const v=o?.userData?.id||o?.id||o?._id;if(!v){console.error("‚ùå No user ID found in client object"),F([]),$(!1);return}console.log("‚úÖ Using user ID:",v);const _=await V.getAgentsById(v);console.log("ü§ñ AI Agents API Response:",_);let C=_?.data||_;console.log("üì¶ Raw agents data:",C),C?.agents&&Array.isArray(C.agents)&&(C=C.agents),Array.isArray(C)?(console.log("‚úÖ Agents data is an array with length:",C.length),C.length>0&&console.log("üìä Sample agent data:",C[0]),F(C)):C&&typeof C=="object"?(console.log("üì¶ Single agent object, wrapping in array"),F([C])):(console.log("üìä Response data is not an array or object:",typeof C),F([]))}catch(v){console.error("‚ùå Error fetching AI employees:",v),console.error("‚ùå Error details:",v?.response?.data),F([])}finally{$(!1)}})()},[o]),P?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:`text-lg font-semibold ${s.text}`,children:"AI Employees"})}),e.jsxs("div",{className:`text-center py-12 rounded-lg ${s.searchBg}`,children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:`${s.textSecondary}`,children:"Loading AI Employees..."})]})]}):I?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:`text-lg font-semibold ${s.text}`,children:"AI Employees"})}),e.jsxs("div",{className:`text-center py-12 rounded-lg ${s.searchBg}`,children:[e.jsx("div",{className:"w-5 h-5 mx-auto mb-3 text-red-500",children:e.jsx(Cs,{className:"w-full h-full"})}),e.jsx("h4",{className:`text-lg font-semibold ${s.text} mb-2`,children:"Error Loading Data"}),e.jsx("p",{className:`${s.textSecondary} mb-4`,children:I}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:"Retry"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h3",{className:`text-lg font-semibold ${s.text}`,children:["AI Employees (",j.length,")"]})}),j.length===0?e.jsxs("div",{className:`text-center py-12 rounded-lg ${s.searchBg}`,children:[e.jsx(ne,{className:`w-5 h-5 mx-auto mb-3 ${s.textSecondary}`}),e.jsx("h4",{className:`text-lg font-semibold ${s.text} mb-2`,children:"No AI Employees"}),e.jsx("p",{className:`${s.textSecondary}`,children:"This client hasn't created any AI employees yet."})]}):e.jsx("div",{className:"space-y-4",children:j.map((N,v)=>e.jsxs("div",{className:`${s.searchBg} rounded-lg p-4 border ${s.border}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${s.cardBg} border ${s.border} flex items-center justify-center`,children:e.jsx(ne,{className:`w-5 h-5 ${s.text}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-semibold ${s.text}`,children:N.name||"Unnamed Employee"}),e.jsx("p",{className:`text-sm ${s.textSecondary}`,children:N.type||"Assistant"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:N.is_active?"Active":"Inactive"}),e.jsxs("button",{onClick:()=>a&&a(N),className:`px-3 py-1 ${s.searchBg} hover:${s.hover} ${s.text} border ${s.border} text-sm font-medium rounded-lg transition-all duration-200 flex items-center gap-1`,title:"View Agent Details",children:[e.jsx(Ae,{className:"w-5 h-5"}),"View"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Agent ID"}),e.jsx("p",{className:`${s.text} text-sm font-mono`,children:N.id||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Language"}),e.jsx("p",{className:`${s.text} text-sm`,children:N.greeting?.language||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Voice"}),e.jsx("p",{className:`${s.text} text-sm`,children:N.voice||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Created"}),e.jsx("p",{className:`${s.text} text-sm`,children:N.created_at?new Date(N.created_at).toLocaleDateString():"N/A"})]})]})]},N._id||v))})]})},qs=({agent:o,onBack:s,currentTheme:a})=>{if(!o)return e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500",children:"No agent data available"}),e.jsx("button",{onClick:s,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Back to List"})]});const[j,F]=x.useState("overview"),[P,$]=x.useState(!1),[I,y]=x.useState(!1),[N,v]=x.useState([]),[_,C]=x.useState(""),[O,re]=x.useState(""),[m,B]=x.useState(!1),[Ie,z]=x.useState(""),[ae,je]=x.useState("en"),[qe,He]=x.useState({noiseSuppression:!0,echoCancellation:!0,autoGainControl:!0}),[me,J]=x.useState(null),[Ee,Pe]=x.useState([]),[Le,te]=x.useState(!1),[r,X]=x.useState(null),[ve,q]=x.useState([]),[W,Z]=x.useState(!1),[E,H]=x.useState("transcripts"),[Y,T]=x.useState(null),[Me,Q]=x.useState(!1),[Ne,M]=x.useState(null),[oe,ie]=x.useState(!1),[le,pe]=x.useState(0),[ee,ge]=x.useState(0),[de,Ye]=x.useState(1),[ue,be]=x.useState(!1),[$e,ce]=x.useState(1),D=x.useRef(null),he=x.useRef(null),we=x.useMemo(()=>[{id:"overview",label:"Overview",icon:As},{id:"test",label:"Preview",icon:Ge},{id:"analytics",label:"Analytics",icon:cs},{id:"instructions",label:"Instructions",icon:G}],[]);x.useEffect(()=>{(async()=>{if(j==="analytics")try{te(!0);const c=o?.id||o?._id;if(!c){console.error("No agent ID found");return}console.log("üìã Fetching sessions for agent:",c);const h=await V.getAgentSessions(c);console.log("‚úÖ Sessions response:",h);const d=h?.sessions||h?.data?.sessions||h,b=Array.isArray(d)?d:[];Pe(b)}catch(c){console.error("‚ùå Error fetching agent sessions:",c),R.error("Failed to load sessions"),Pe([])}finally{te(!1)}})()},[j,o]);const Re=async(n,c)=>{try{Q(!0),M(null),console.log("üìä Fetching call summary for agent:",n,"callId:",c);const h=await V.getCallSummary(n);console.log("‚úÖ Call summary response:",h),T(h)}catch(h){console.error("‚ùå Error fetching call summary:",h),M("Failed to load call summary"),T(null)}finally{Q(!1)}},Fe=x.useCallback(async n=>{try{if(X(n),H("transcripts"),ie(!1),pe(0),ge(0),ce(1),be(!1),n?.transcripts&&Array.isArray(n.transcripts))console.log("üìú Using transcripts from session object:",n.transcripts),q(n.transcripts);else{Z(!0);const d=n?.session_id||n?.id||n?._id;console.log("üìú Fetching transcripts for session:",d);const b=await V.getSessionTranscripts(d);console.log("‚úÖ Transcripts response:",b);const w=b?.transcripts||b?.data||b,L=Array.isArray(w)?w:[];q(L),Z(!1)}const c=n?.agentId||n?.agent_id,h=n?.callId||n?.session_id||n?.id;c&&h&&await Re(c,h)}catch(c){console.error("‚ùå Error fetching session data:",c),R.error("Failed to load session data"),q([]),Z(!1)}},[]),Ue=x.useCallback(()=>{X(null),q([]),T(null),H("transcripts"),ie(!1),D.current&&(D.current.pause(),D.current.currentTime=0)},[]),k=()=>{D.current&&(oe?D.current.pause():D.current.play(),ie(!oe))},ye=()=>{D.current&&pe(D.current.currentTime)},_e=()=>{D.current&&ge(D.current.duration)},Oe=n=>{if(!he.current||!D.current)return;const c=he.current.getBoundingClientRect(),d=(n.clientX-c.left)/c.width*ee;D.current.currentTime=d,pe(d)},A=()=>{D.current&&(ue?(D.current.volume=de,be(!1)):(D.current.volume=0,be(!0)))},t=()=>{if(!D.current)return;const n=[.5,.75,1,1.25,1.5,2],c=n.indexOf($e),h=n[(c+1)%n.length];D.current.playbackRate=h,ce(h)},i=n=>{D.current&&(D.current.currentTime=Math.max(0,Math.min(ee,le+n)))},l=n=>{const c=Math.floor(n/60),h=Math.floor(n%60);return`${c}:${h.toString().padStart(2,"0")}`},p=n=>n?new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):"",g=n=>n?new Date(n).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A";async function u(){try{try{const n=await fetch("https://ipapi.co/json/",{method:"GET"});if(n.ok){const c=await n.json();return console.log("üåê [IP] Retrieved via ipapi.co:",c.ip),c.ip}}catch(n){console.warn("üåê [IP] ipapi.co failed:",n.message)}try{const n=await fetch("https://api.ipify.org?format=json",{method:"GET"});if(n.ok){const c=await n.json();return console.log("üåê [IP] Retrieved via ipify:",c.ip),c.ip}}catch(n){console.warn("üåê [IP] ipify failed:",n.message)}try{const n=await fetch("https://ipinfo.io/json",{method:"GET"});if(n.ok){const c=await n.json();return console.log("üåê [IP] Retrieved via ipinfo.io:",c.ip),c.ip}}catch(n){console.warn("üåê [IP] ipinfo.io failed:",n.message)}return null}catch(n){return console.error("üåê [IP] All IP detection methods failed:",n),null}}x.useCallback(async()=>{try{if(y(!0),z("üé§ Requesting microphone access..."),!window.isSecureContext)throw new Error("HTTPS required for microphone access");try{(await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1,channelCount:1,sampleRate:48e3,sampleSize:16,volume:.6,latency:.05}})).getTracks().forEach(w=>w.stop()),z("‚úÖ Microphone access granted")}catch(b){throw new Error(`Microphone access denied: ${b.message}`)}const n=o?.id||o?._id;if(!n)throw new Error("Agent ID not found");z("üîó Getting LiveKit token...");const c=`admin_test_${Date.now()}`,h=await fetch("https://python.service.callshivai.com/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_id:n,language:ae,call_id:c,device:"desktop",user_agent:navigator.userAgent,ip:await u()})});if(!h.ok)throw new Error(`Failed to get LiveKit token: ${h.status}`);const d=await h.json();if(console.log("üéØ Token received for agent testing:",n,d),z("üîó Connecting to LiveKit..."),typeof window.LivekitClient>"u"){z("üì¶ Loading LiveKit SDK...");const b=document.createElement("script");b.src="https://unpkg.com/livekit-client@latest/dist/livekit-client.umd.js",b.onload=()=>{console.log("‚úÖ LiveKit SDK loaded"),f(d,n)},b.onerror=()=>{throw new Error("Failed to load LiveKit SDK")},document.head.appendChild(b)}else await f(d,n)}catch(n){console.error("Failed to start agent test call:",n),z(`‚ùå Error: ${n.message}`),y(!1),$(!1)}},[o]);const f=x.useCallback(async(n,c)=>{try{const h=window.LivekitClient,d=new h.Room({adaptiveStream:!0,dynacast:!0,audioCaptureDefaults:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,suppressLocalAudioPlayback:!0},publishDefaults:{audioPreset:h.AudioPresets.speech,dtx:!0,red:!1,simulcast:!1}});d.on(h.RoomEvent.TrackSubscribed,(b,w,L)=>{if(b.kind===h.Track.Kind.Audio){const K=b.attach();K.volume=.4,K.autoplay=!0,document.body.appendChild(K),K.play().catch(xe=>console.warn("Audio autoplay blocked:",xe))}}),d.on(h.RoomEvent.ParticipantMetadataChanged,(b,w)=>{if(b)try{const L=JSON.parse(b);(L.transcript||L.text)&&v(K=>[...K,{role:"agent",text:L.transcript||L.text,timestamp:new Date}])}catch{console.log("Metadata not JSON:",b)}}),d.on(h.RoomEvent.RoomMetadataChanged,b=>{if(b)try{const w=JSON.parse(b);(w.transcript||w.text)&&v(L=>[...L,{role:"agent",text:w.transcript||w.text,timestamp:new Date}])}catch{console.log("Room metadata not JSON:",b)}}),d.on(h.RoomEvent.Connected,async()=>{console.log("‚úÖ Connected to LiveKit room for agent testing"),$(!0),y(!1),z("üü¢ Connected! You can now speak with the agent.");try{await d.localParticipant.setMicrophoneEnabled(!0,{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}),v([{role:"agent",text:o?.greeting?.en||`Hello! I'm ${o?.name||"Agent"}, ready for testing. How can I help you?`,timestamp:new Date}])}catch(b){console.error("Failed to enable microphone:",b)}}),d.on(h.RoomEvent.Disconnected,()=>{console.log("‚ùå Disconnected from LiveKit room"),$(!1),z("üî¥ Disconnected"),J(null)}),await d.connect(n.url,n.token),J(d)}catch(h){console.error("LiveKit connection failed:",h),z(`‚ùå Connection failed: ${h.message}`),y(!1),$(!1)}},[o]);x.useCallback(async()=>{if(me)try{await me.disconnect(),console.log("‚úÖ Disconnected from LiveKit room")}catch(n){console.error("Error disconnecting from room:",n)}$(!1),y(!1),z("üìû Call ended"),J(null),v(n=>[...n,{role:"system",text:"Call ended",timestamp:new Date}])},[me]),x.useCallback(()=>{if(!_.trim()||!P)return;const n={role:"user",text:_.trim(),timestamp:new Date};v(c=>[...c,n]),C(""),setTimeout(()=>{const c=[`I received your message: "${n.text}". How can I help you with this?`,`Thank you for your message. As ${o?.name||"Agent"}, I'm here to assist you.`,`I understand you said: "${n.text}". Let me help you with that.`,`Got it! ${n.text}. What would you like to know more about?`],h={role:"agent",text:c[Math.floor(Math.random()*c.length)],timestamp:Date.now()};v(d=>[...d,h])},1e3+Math.random()*2e3)},[_,P,o]);const S=x.useCallback(()=>{if(!O.trim())return;B(!0);const n={role:"user",text:O.trim(),timestamp:new Date};v(c=>[...c,n]),re(""),setTimeout(()=>{const c=[`Thank you for testing! You said: "${n.text}". I'm ${o?.name||"Agent"} and I'm working correctly.`,`Test successful! As ${o?.name||"Agent"}, I received your message: "${n.text}". How can I assist you further?`,`Hello! This is ${o?.name||"Agent"}. I got your test message: "${n.text}". The agent is responding as expected.`,`Agent test complete! Your message: "${n.text}" was processed successfully by ${o?.name||"Agent"}.`],h={role:"agent",text:c[Math.floor(Math.random()*c.length)],timestamp:new Date};v(d=>[...d,h]),B(!1)},1500+Math.random()*1e3)},[O,o]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:s,className:`p-2 rounded-lg ${a.hover} ${a.text} transition-all duration-200`,children:e.jsx(ts,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:`text-2xl font-bold ${a.text}`,children:o?.name||"Unnamed Agent"}),e.jsxs("p",{className:`text-sm ${a.textSecondary}`,children:["Agent ID: ",o?.id||o?._id||"N/A"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${o?.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}`,children:o?.is_active?"Active":"Inactive"})})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex space-x-8",children:we.map(n=>{const c=n.icon;return e.jsxs("button",{onClick:()=>F(n.id),className:`flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm ${j===n.id?"border-blue-500 text-blue-600 dark:text-blue-400":`border-transparent ${a.textSecondary} hover:text-gray-700 dark:hover:text-gray-300`}`,children:[e.jsx(c,{className:"w-5 h-5"}),n.label]},n.id)})})})]}),j==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:`${a.cardBg} rounded-lg p-4 border ${a.border}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(ne,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${a.textSecondary}`,children:"Agent Type"}),e.jsx("p",{className:`font-semibold ${a.text}`,children:"AI Assistant"})]})]})}),e.jsx("div",{className:`${a.cardBg} rounded-lg p-4 border ${a.border}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx(Ds,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${a.textSecondary}`,children:"Voice"}),e.jsx("p",{className:`font-semibold ${a.text}`,children:o?.voice||"Default"})]})]})}),e.jsx("div",{className:`${a.cardBg} rounded-lg p-4 border ${a.border}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx(os,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${a.textSecondary}`,children:"Language"}),e.jsx("p",{className:`font-semibold ${a.text}`,children:o?.greeting?.language||"English"})]})]})})]}),e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Agent Name"}),e.jsx("p",{className:`${a.text}`,children:o.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Created By"}),e.jsx("p",{className:`${a.text}`,children:o.created_by||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Created Date"}),e.jsx("p",{className:`${a.text}`,children:o.created_at?new Date(o.created_at).toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Knowledge Base URL"}),e.jsx("p",{className:`${a.text} break-all`,children:o.knowledge_base_url||"N/A"})]})]})]})]}),j==="test"&&e.jsx(Ws,{agent:o,currentTheme:a,onBack:()=>F("overview")}),j==="analytics"&&e.jsxs("div",{className:"space-y-6",children:[r&&e.jsx("div",{className:"fixed inset-0 -top-8 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4 backdrop-blur-sm overflow-y-auto",children:e.jsxs("div",{className:`${a.cardBg} rounded-lg sm:rounded-xl w-full max-w-3xl  max-h-[95vh] sm:max-h-[90vh] overflow-hidden shadow-2xl my-auto flex flex-col`,children:[e.jsxs("div",{className:`p-3 sm:p-4 border-b ${a.border}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2 sm:mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("div",{className:`w-7 h-7 sm:w-10 sm:h-10 ${a.activeBg} rounded-lg flex items-center justify-center flex-shrink-0`,children:e.jsx(es,{className:`w-3.5 h-3.5 sm:w-5 sm:h-5 ${a.textSecondary}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:`text-sm sm:text-lg font-semibold ${a.text} truncate`,children:"Session Transcript"}),e.jsx("p",{className:`text-xs ${a.textSecondary} truncate font-mono`,children:r.session_id||r.id})]})]}),e.jsx("button",{onClick:Ue,className:`p-1 sm:p-2 ${a.textSecondary} rounded-lg ${a.hover} transition-colors flex-shrink-0`,children:e.jsx(ss,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 mb-2 sm:mb-3",children:[e.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${a.searchBg} px-2 py-1.5 rounded-md`,children:[e.jsx(Be,{className:`w-5 h-5 ${a.textSecondary} flex-shrink-0`}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:`text-xs ${a.textSecondary} hidden sm:block`,children:"Date & Time"}),e.jsx("span",{className:`text-xs font-medium ${a.text} truncate block`,children:g(r.start_time)})]})]}),e.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${a.searchBg} px-2 py-1.5 rounded-md`,children:[e.jsx(Bs,{className:`w-5 h-5 ${a.textSecondary} flex-shrink-0`}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:`text-xs ${a.textSecondary} hidden sm:block`,children:"IP Address"}),e.jsx("span",{className:`text-xs font-medium ${a.text} truncate block`,children:r.ipAddress||r.ip_address||"unknown"})]})]}),e.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${a.searchBg} px-2 py-1.5 rounded-md`,children:[e.jsx(fe,{className:`w-5 h-5 ${a.textSecondary} flex-shrink-0`}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:`text-xs ${a.textSecondary} hidden sm:block`,children:"Device ‚Ä¢ Duration"}),e.jsxs("span",{className:`text-xs font-medium ${a.text} truncate block`,children:[r.device?.deviceType||r.device?.device_type||"Unknown"," ","‚Ä¢ ",r.duration]})]})]})]}),e.jsxs("div",{className:`flex gap-1 p-1 ${a.searchBg} rounded-lg`,children:[e.jsxs("button",{onClick:()=>H("transcripts"),className:`flex-1 px-3 py-2 text-xs sm:text-sm font-medium rounded-md transition-all duration-200 ${E==="transcripts"?`${a.cardBg} ${a.text} shadow-sm`:`${a.textSecondary} hover:${a.text}`}`,children:[e.jsx(es,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 inline mr-1.5"}),"Call Transcripts"]}),e.jsxs("button",{onClick:()=>H("summary"),className:`flex-1 px-3 py-2 text-xs sm:text-sm font-medium rounded-md transition-all duration-200 ${E==="summary"?`${a.cardBg} ${a.text} shadow-sm`:`${a.textSecondary} hover:${a.text}`}`,children:[e.jsx(G,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 inline mr-1.5"}),"Recording & Summary"]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4",children:[E==="transcripts"&&e.jsxs(e.Fragment,{children:[(r.token_usage||r.tokenUsage)&&e.jsxs("div",{className:`px-3 sm:px-4 py-3 mb-3 ${a.searchBg} rounded-lg`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Is,{className:`w-5 h-5 ${a.text}`}),e.jsx("h4",{className:`text-sm sm:text-base font-semibold ${a.text}`,children:"Token Usage"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4",children:[e.jsxs("div",{className:`${a.cardBg} rounded-lg p-2 sm:p-3 border ${a.border}`,children:[e.jsx("p",{className:`text-xs ${a.textSecondary} mb-1`,children:"Input"}),e.jsx("p",{className:`text-lg sm:text-xl font-bold ${a.text}`,children:((r.token_usage||r.tokenUsage)?.input_tokens||(r.token_usage||r.tokenUsage)?.inputTokens||0).toLocaleString()})]}),e.jsxs("div",{className:`${a.cardBg} rounded-lg p-2 sm:p-3 border ${a.border}`,children:[e.jsx("p",{className:`text-xs ${a.textSecondary} mb-1`,children:"Output"}),e.jsx("p",{className:`text-lg sm:text-xl font-bold ${a.text}`,children:((r.token_usage||r.tokenUsage)?.output_tokens||(r.token_usage||r.tokenUsage)?.outputTokens||0).toLocaleString()})]}),e.jsxs("div",{className:`${a.cardBg} rounded-lg p-2 sm:p-3 border ${a.border}`,children:[e.jsx("p",{className:`text-xs ${a.textSecondary} mb-1`,children:"Total"}),e.jsx("p",{className:"text-lg sm:text-xl font-bold text-blue-600",children:((r.token_usage||r.tokenUsage)?.total_tokens||(r.token_usage||r.tokenUsage)?.totalTokens||0).toLocaleString()})]})]})]}),e.jsxs("div",{className:`${a.searchBg} p-3 sm:p-4 rounded-lg`,children:[e.jsx("h3",{className:`text-sm sm:text-base font-semibold ${a.text} mb-3`,children:"Conversation Transcript"}),e.jsx("div",{className:"space-y-1 max-h-[250px] sm:max-h-[400px] overflow-y-auto",children:r.transcripts&&r.transcripts.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-xs sm:text-sm ${a.textSecondary} mb-2`,children:["Conversation started at"," ",g(r.start_time)]}),r.transcripts.map((n,c)=>e.jsx("div",{className:"flex flex-col gap-1.5 py-1.5 sm:py-2",children:n.speaker==="ai"||n.role==="agent"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-start mb-1",children:e.jsxs("span",{className:`text-xs ${a.textSecondary}`,children:["SHIVAI ASSISTANT ‚Ä¢"," ",p(n.timestamp)]})}),e.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:e.jsx(ne,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})}),e.jsx("div",{className:`max-w-[80%] ${a.cardBg} rounded-2xl rounded-tl-sm px-3 py-2 sm:px-4 sm:py-3 border ${a.border}`,children:e.jsx("p",{className:`text-xs sm:text-sm ${a.text}`,children:n.message||n.text})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsxs("span",{className:`text-xs ${a.textSecondary}`,children:["CUSTOMER ‚Ä¢"," ",p(n.timestamp)]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"flex flex-col items-end max-w-[80%]",children:e.jsx("div",{className:"rounded-2xl rounded-tr-sm px-3 py-2 sm:px-4 sm:py-3 bg-gradient-to-br from-blue-500 to-blue-600",children:e.jsx("p",{className:"text-xs sm:text-sm text-white",children:n.message||n.text})})})})]})},c)),e.jsxs("p",{className:`text-xs ${a.textSecondary} mt-3 flex items-center gap-1`,children:[e.jsx(Be,{className:"w-5 h-5"}),"Session ended ‚Ä¢ Resolution:"," ",r.resolution]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(G,{className:`w-10 h-10 sm:w-12 sm:h-12 ${a.textSecondary} mx-auto mb-3`}),e.jsx("p",{className:`text-xs sm:text-sm ${a.textSecondary}`,children:"No transcripts available for this session"})]})})]})]}),E==="summary"&&e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:`${a.searchBg} p-3 sm:p-4 rounded-lg`,children:[e.jsxs("h3",{className:`text-sm sm:text-base font-semibold ${a.text} mb-3 flex items-center gap-2`,children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"})}),"Call Recording"]}),e.jsxs("div",{className:`${a.cardBg} p-4 rounded-xl border ${a.border}`,children:[e.jsx("audio",{ref:D,onTimeUpdate:ye,onLoadedMetadata:_e,onEnded:()=>ie(!1),src:r.recordingUrl||"#"}),e.jsx("div",{ref:he,onClick:Oe,className:`relative h-1 ${a.border} rounded-full cursor-pointer mb-2`,style:{backgroundColor:a==="dark"?"#334155":"#cbd5e1"},children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-600 rounded-full transition-all",style:{width:`${ee>0?le/ee*100:0}%`}})}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:`text-xs ${a.textSecondary} w-10`,children:l(le)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>i(-10),className:`p-1.5 hover:${a.searchBg} rounded transition-colors`,title:"Rewind 10s",children:e.jsx(Es,{className:`w-5 h-5 ${a.textSecondary}`})}),e.jsx("button",{onClick:k,className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-colors",title:oe?"Pause":"Play",children:oe?e.jsx(Ps,{className:"w-5 h-5",fill:"currentColor"}):e.jsx(as,{className:"w-4 h-4 ml-0.5",fill:"currentColor"})}),e.jsx("button",{onClick:()=>i(10),className:`p-1.5 hover:${a.searchBg} rounded transition-colors`,title:"Forward 10s",children:e.jsx(Ls,{className:`w-5 h-5 ${a.textSecondary}`})}),e.jsxs("button",{onClick:t,className:`px-2 py-1 hover:${a.searchBg} rounded transition-colors text-xs ${a.textSecondary}`,title:"Playback speed",children:[$e,"x"]}),e.jsx("button",{onClick:A,className:`p-1.5 hover:${a.searchBg} rounded transition-colors`,title:ue?"Unmute":"Mute",children:ue?e.jsx(Ms,{className:`w-5 h-5 ${a.textSecondary}`}):e.jsx(Rs,{className:`w-5 h-5 ${a.textSecondary}`})}),e.jsx("button",{className:`p-1.5 hover:${a.searchBg} rounded transition-colors`,title:"Download recording",children:e.jsx(is,{className:`w-5 h-5 ${a.textSecondary}`})})]}),e.jsx("span",{className:`text-xs ${a.textSecondary} w-10 text-right`,children:l(ee||r.duration||0)})]})]})]}),e.jsxs("div",{className:`${a.searchBg} p-3 sm:p-4 rounded-lg`,children:[e.jsxs("h3",{className:`text-sm sm:text-base font-semibold ${a.text} mb-3 flex items-center gap-2`,children:[e.jsx(G,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Call Summary"]}),Me?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Fs,{className:"w-6 h-6 text-blue-500 animate-spin"})}):Ne?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(ss,{className:`w-10 h-10 ${a.textSecondary} mx-auto mb-2`}),e.jsx("p",{className:`text-xs sm:text-sm ${a.textSecondary}`,children:Ne})]}):Y?.data?.leads&&Y.data.leads.length>0?(()=>{const n=Y.data.leads.filter(c=>c.callId===(r.callId||r.session_id||r.id));return console.log("üîç Filtering leads. Looking for callId:",r.callId||r.session_id||r.id),console.log("üîç Available callIds:",Y.data.leads.map(c=>c.callId)),console.log("üîç Filtered leads:",n),n.length>0?e.jsx("div",{className:"space-y-4",children:n.map((c,h)=>e.jsxs("div",{className:`border ${a.border} rounded-lg p-3 sm:p-4 space-y-3`,children:[e.jsxs("div",{className:`flex items-center justify-between pb-2 border-b ${a.border}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-3.5 h-3.5 text-blue-500"}),e.jsx("span",{className:`text-xs font-mono ${a.textSecondary}`,children:c.callId||"N/A"})]}),c.createdAt&&e.jsx("span",{className:`text-xs ${a.textSecondary}`,children:new Date(c.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),c.intent&&e.jsxs("div",{className:"space-y-2",children:[c.intent.primary&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[e.jsx("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Primary Intent"}),e.jsx("p",{className:`text-xs sm:text-sm ${a.text} leading-relaxed`,children:c.intent.primary})]}),c.intent.details&&e.jsxs("div",{className:`${a.cardBg} p-3 rounded-lg border ${a.border}`,children:[e.jsx("p",{className:`text-xs font-medium ${a.textSecondary} mb-1`,children:"Details"}),e.jsx("p",{className:`text-xs sm:text-sm ${a.text} leading-relaxed`,children:c.intent.details})]}),c.urgency&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs ${a.textSecondary}`,children:"Urgency:"}),e.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${c.urgency==="high"?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400":c.urgency==="medium"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400"}`,children:c.urgency})]}),c.tags&&c.tags.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-medium ${a.textSecondary} mb-2`,children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:c.tags.map((d,b)=>e.jsx("span",{className:`px-2 py-0.5 ${a.cardBg} ${a.text} rounded-full text-xs border ${a.border}`,children:d},b))})]})]}),c.leadData&&e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-medium ${a.textSecondary} mb-2`,children:"Lead Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[c.leadData.name&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(De,{className:`w-5 h-5 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Name"}),e.jsx("p",{className:`text-sm font-medium ${a.text} truncate`,children:c.leadData.name})]})]}),c.leadData.email&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ns,{className:`w-5 h-5 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Email"}),e.jsx("p",{className:`text-sm font-medium ${a.text} truncate`,children:c.leadData.email})]})]}),c.leadData.phone&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(fe,{className:`w-5 h-5 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Phone"}),e.jsx("p",{className:`text-sm font-medium ${a.text}`,children:c.leadData.phone})]})]}),c.leadData.status&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(TrendingUp,{className:`w-5 h-5 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Status"}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${c.leadData.status==="qualified"?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":c.leadData.status==="interested"?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":c.leadData.status==="new"?"bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-400":`${a.cardBg} ${a.text}`}`,children:[c.leadData.status==="qualified"&&e.jsx(CheckCircle,{className:"w-5 h-5"}),c.leadData.status]})]})]}),c.leadData.group_size&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(De,{className:`w-5 h-5 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Group Size"}),e.jsx("p",{className:`text-sm font-medium ${a.text}`,children:c.leadData.group_size})]})]}),c.leadData.dates&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rs,{className:`w-5 h-5 ${a.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Travel Dates"}),e.jsx("p",{className:`text-sm font-medium ${a.text}`,children:c.leadData.dates})]})]})]})]})]},c.id||h))}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(G,{className:`w-10 h-10 ${a.textSecondary} mx-auto mb-2`}),e.jsx("p",{className:`text-xs sm:text-sm ${a.textSecondary}`,children:"No matching summary for this call"}),e.jsxs("p",{className:`text-xs ${a.textSecondary} mt-1`,children:["Call ID:"," ",r.callId||r.session_id||r.id]})]})})():e.jsxs("div",{className:"text-center py-6",children:[e.jsx(G,{className:`w-10 h-10 ${a.textSecondary} mx-auto mb-2`}),e.jsx("p",{className:`text-xs sm:text-sm ${a.textSecondary}`,children:"No call summary available"})]})]})]})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text}`,children:"Session History"}),Le&&e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"})]}),Le?e.jsxs("div",{className:`text-center py-12 rounded-lg ${a.searchBg}`,children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:`${a.textSecondary}`,children:"Loading sessions..."})]}):Ee.length===0?e.jsxs("div",{className:`text-center py-12 rounded-lg ${a.searchBg}`,children:[e.jsx(fe,{className:`w-5 h-5 mx-auto mb-3 ${a.textSecondary}`}),e.jsx("h4",{className:`text-lg font-semibold ${a.text} mb-2`,children:"No Sessions Yet"}),e.jsx("p",{className:`${a.textSecondary}`,children:"This agent hasn't had any sessions yet."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Ee.map((n,c)=>{const h=n?.session_id||n?.id||`#${String(1e3+c).padStart(4,"0")}`,d=n?.status||"Completed",b=n?.duration_seconds||0,w=b>0?`${Math.floor(b/60)}m ${Math.floor(b%60)}s`:"0s",L=n?.total_messages||0,K=n?.start_time||new Date,xe=n?.location||{},U=n?.token_usage||{};return e.jsxs("div",{className:`${a.cardBg} border ${a.border} rounded-lg p-4 hover:shadow-lg transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx(fe,{className:`w-5 h-5 ${a.textSecondary} flex-shrink-0`}),e.jsx("h4",{className:`font-semibold ${a.text} text-sm truncate`,children:h})]}),e.jsx("button",{onClick:()=>Fe(n),className:`p-1.5 ${a.textSecondary} rounded-lg ${a.activeBg} ${a.hover} transition-all duration-200 hover:shadow-lg flex-shrink-0`,title:"View Session",children:W&&r?.id===n?.id?e.jsx("div",{className:"w-3 h-3 border border-gray-600 border-t-transparent rounded-full animate-spin"}):e.jsx(Ae,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${d==="Completed"?"bg-green-500/10 text-green-600 border border-green-500/20":d==="In Progress"?"bg-blue-500/10 text-blue-600 border border-blue-500/20":"bg-gray-500/10 text-gray-600 border border-gray-500/20"}`,children:d})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:`text-xs font-medium ${a.textSecondary} mb-1`,children:"Date & Time"}),e.jsx("p",{className:`${a.text} text-sm font-medium`,children:new Date(K).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:new Date(K).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:`text-xs font-medium ${a.textSecondary} mb-1`,children:"Location"}),e.jsx("p",{className:`${a.text} text-sm font-medium truncate`,children:[xe?.city,xe?.country].filter(ke=>ke&&ke!=="unknown").join(", ")||"Unknown"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Device"}),e.jsx("p",{className:`${a.text} text-sm font-medium truncate`,children:n?.device?.device_type&&n.device.device_type!=="unknown"?n.device.device_type:"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Duration"}),e.jsx("p",{className:`${a.text} text-sm font-medium`,children:w})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Messages"}),e.jsx("p",{className:`${a.text} text-sm font-medium`,children:L})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Language"}),e.jsx("p",{className:`${a.text} text-sm font-medium uppercase`,children:n?.language||"EN"})]})]}),e.jsxs("div",{className:`pt-2 border-t ${a.border}`,children:[e.jsx("p",{className:`text-xs ${a.textSecondary} mb-1`,children:"Token Usage"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"In"}),e.jsx("p",{className:`${a.text} text-sm font-semibold`,children:U?.input_tokens?.toLocaleString()||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Out"}),e.jsx("p",{className:`${a.text} text-sm font-semibold`,children:U?.output_tokens?.toLocaleString()||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${a.textSecondary}`,children:"Total"}),e.jsx("p",{className:`${a.text} text-sm font-semibold`,children:U?.total_tokens?.toLocaleString()||0})]})]})]})]},n?.id||c)})})]})]}),j==="instructions"&&e.jsxs("div",{className:"space-y-6",children:[o.greeting&&e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Greeting Messages"}),e.jsx("div",{className:"space-y-4",children:Object.entries(o.greeting).map(([n,c])=>e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2 uppercase`,children:n}),e.jsx("div",{className:`p-3 rounded-lg ${a.searchBg} ${a.text}`,children:c})]},n))})]}),o.custom_instructions&&e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Custom Instructions"}),e.jsx("div",{className:`p-4 rounded-lg ${a.searchBg} ${a.text} whitespace-pre-wrap`,children:o.custom_instructions})]})]}),j==="preview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Agent Configuration Preview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`text-md font-semibold ${a.text} mb-3`,children:"Basic Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Model"}),e.jsx("p",{className:`${a.text} font-mono text-sm`,children:o.model||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Voice"}),e.jsx("p",{className:`${a.text}`,children:o.voice||"Default"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Temperature"}),e.jsx("p",{className:`${a.text}`,children:o.temperature||"0.7"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-md font-semibold ${a.text} mb-3`,children:"Voice Detection"}),o.turn_detection&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Type"}),e.jsx("p",{className:`${a.text}`,children:o.turn_detection.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Threshold"}),e.jsx("p",{className:`${a.text}`,children:o.turn_detection.threshold})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-1`,children:"Silence Duration"}),e.jsxs("p",{className:`${a.text}`,children:[o.turn_detection.silence_duration_ms,"ms"]})]})]})]})]})]}),o.greeting&&e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Greeting Messages"}),e.jsx("div",{className:"space-y-4",children:Object.entries(o.greeting).map(([n,c])=>e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2 uppercase`,children:n}),e.jsx("div",{className:`p-3 rounded-lg ${a.searchBg} ${a.text}`,children:c})]},n))})]}),e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Test Agent Interface"}),e.jsx("div",{className:"space-y-4 mb-6",children:e.jsx("div",{className:`h-96 overflow-y-auto p-4 rounded-lg ${a.searchBg} border ${a.border}`,children:N.length===0?e.jsxs("div",{className:`text-center py-8 ${a.textSecondary}`,children:[e.jsx(Ge,{className:"w-5 h-5 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Start a conversation to test the agent"})]}):e.jsxs("div",{className:"space-y-4",children:[N.map((n,c)=>e.jsx("div",{className:`flex ${(n.type||n.role)==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${(n.type||n.role)==="user"?"bg-blue-500 text-white":`${a.cardBg} ${a.text} border ${a.border}`}`,children:[e.jsx("p",{className:"text-sm",children:n.content||n.text}),e.jsx("p",{className:"text-xs mt-1 opacity-70",children:n.timestamp instanceof Date?n.timestamp.toLocaleTimeString():new Date(n.timestamp).toLocaleTimeString()})]})},c)),m&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${a.cardBg} ${a.text} border ${a.border}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),e.jsx("p",{className:"text-sm",children:"Agent is thinking..."})]})})})]})})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:O,onChange:n=>re(n.target.value),onKeyPress:n=>n.key==="Enter"&&S(),placeholder:"Type your message to test the agent...",disabled:m,className:`flex-1 px-4 py-3 rounded-lg border ${a.border} ${a.cardBg} ${a.text} focus:outline-none focus:ring-2 focus:ring-blue-500/20 disabled:opacity-50`}),e.jsx("button",{onClick:S,disabled:m||!O.trim(),className:"px-6 py-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded-lg transition-colors flex items-center gap-2 font-medium",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-5 h-5"}),"Send"]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>v([]),className:`px-4 py-2 rounded-lg ${a.hover} ${a.text} text-sm font-medium transition-colors duration-200 flex items-center gap-2`,children:[e.jsx(xs,{className:"w-5 h-5"}),"Clear Chat"]}),e.jsxs("button",{onClick:()=>{const n={type:"user",content:"Hello! Can you tell me about your capabilities?",timestamp:new Date};v(c=>[...c,n]),B(!0),setTimeout(()=>{const c={type:"agent",content:`Hi! I'm ${o.name}. I can help you with various tasks using voice interactions. Feel free to ask me anything!`,timestamp:new Date};v(h=>[...h,c]),B(!1)},1500)},className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm font-medium transition-colors duration-200 flex items-center gap-2",children:[e.jsx(as,{className:"w-5 h-5"}),"Demo Chat"]})]})]})]}),j==="instructions"&&e.jsxs("div",{className:"space-y-6",children:[o.custom_instructions&&e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"Custom Instructions"}),e.jsx("div",{className:`p-4 rounded-lg ${a.searchBg} ${a.text} whitespace-pre-wrap`,children:o.custom_instructions})]}),e.jsxs("div",{className:`${a.cardBg} rounded-lg p-6 border ${a.border}`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a.text} mb-4`,children:"System Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Agent ID"}),e.jsx("div",{className:`p-3 rounded-lg ${a.searchBg} ${a.text} font-mono text-sm`,children:o?.id||o?._id||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm ${a.textSecondary} block mb-2`,children:"Model Configuration"}),e.jsxs("div",{className:`p-3 rounded-lg ${a.searchBg} ${a.text}`,children:["Model: ",o.model||"N/A",e.jsx("br",{}),"Temperature: ",o.temperature||"0.7",e.jsx("br",{}),"Max Tokens: ",o.max_tokens||"Not specified"]})]})]})]})]})]})},Ts=({client:o,currentTheme:s})=>{const a=[{id:1,date:"2024-12-01",amount:149,type:"subscription",status:"completed",description:"Monthly subscription"},{id:2,date:"2024-11-01",amount:149,type:"subscription",status:"completed",description:"Monthly subscription"},{id:3,date:"2024-10-15",amount:50,type:"usage",status:"completed",description:"Additional tokens"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:`text-lg font-semibold ${s.text}`,children:"Transaction History"})}),a.length===0?e.jsxs("div",{className:`text-center py-12 rounded-lg ${s.searchBg}`,children:[e.jsx(Te,{className:`w-12 h-12 mx-auto mb-3 ${s.textSecondary}`}),e.jsx("h4",{className:`text-lg font-semibold ${s.text} mb-2`,children:"No Transactions"}),e.jsx("p",{className:`${s.textSecondary}`,children:"No transaction history available for this client."})]}):e.jsx("div",{className:"space-y-3",children:a.map(j=>e.jsx("div",{className:`${s.searchBg} rounded-lg p-4 border ${s.border}`,children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center",children:e.jsx(Te,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:`font-semibold ${s.text}`,children:["$",j.amount.toFixed(2)]}),e.jsx("p",{className:`text-sm ${s.textSecondary}`,children:j.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:j.status}),e.jsx("p",{className:`text-sm ${s.textSecondary} mt-1`,children:j.date})]})]})},j.id))})]})},ea=()=>{const{theme:o,currentTheme:s}=gs(),a=Os(),j=zs(),F=()=>new URLSearchParams(j.search).get("tab")||"all",[P,$]=x.useState(""),[I,y]=x.useState(""),[N,v]=x.useState(F()),[_,C]=x.useState(null),[O,re]=x.useState("list"),[m,B]=x.useState(null),[Ie,z]=x.useState(null),[ae,je]=x.useState([]),[qe,He]=x.useState({all:0,newlySignup:0,pending:0,onboarded:0,approved:0,rejected:0}),[me,J]=x.useState(!0),[Ee,Pe]=x.useState(!1),[Le,te]=x.useState(null),[r,X]=x.useState(!1),[ve,q]=x.useState(!1),[W,Z]=x.useState(""),[E,H]=x.useState(1),[Y]=x.useState(10),[T,Me]=x.useState(0),[Q,Ne]=x.useState(0),[M,oe]=x.useState(null),ie=x.useRef(new Set),le=x.useRef(!1);x.useEffect(()=>{const t=new URLSearchParams(j.search);if(t.get("tab")!==N){N==="all"?t.delete("tab"):t.set("tab",N);const l=t.toString(),p=l?`${j.pathname}?${l}`:j.pathname;a(p,{replace:!0})}},[N,j.pathname,j.search,a]),x.useEffect(()=>{const t=i=>{i.target.closest("[data-industry-dropdown]")||(console.log("Clicking outside industry dropdown"),q(!1))};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),x.useEffect(()=>{const t=setTimeout(()=>{P!==I&&(y(P),H(1))},500);return()=>clearTimeout(t)},[P,I]),x.useEffect(()=>{H(1)},[N]);const pe=t=>{const i={page:E,limit:Y};switch(t){case"all":return i;case"newlySignup":return{...i,isVerified:!1};case"pending":return{...i,isVerified:!0,isOnboarded:!1};case"onboarded":return{...i,isVerified:!0,isOnboarded:!0};case"approved":return{...i,onboardingStatus:"approved"};case"rejected":return{...i,onboardingStatus:"rejected"};default:return i}},ee=async(t=N,i=E)=>{if(le.current){console.log("‚è≠Ô∏è Skipping fetch - already in progress");return}try{le.current=!0,J(!0),te(null),ie.current.add(t);const l=pe(t);console.log(`üì° Fetching data for tab: ${t} with params:`,l);const p=await V.get("/v1/users",l);console.log(`‚úÖ Raw response for ${t}:`,p),console.log("‚úÖ Response data:",p.data);const g=p.data||p,u=g?.data?.users||g?.users||g||[],f=g?.meta||{},S=g?.data?.meta?.pagination||f?.pagination||{};console.log(`üìä Extracted users (${u.length}):`,u.length>0?u.slice(0,2):"No users"),console.log("üìä Meta data:",f),console.log("üìä Pagination data:",S);const n=u.map(d=>({_id:d?.id||d?._id,onBoardingId:d?.onboarding?._id||null,userData:d,company_basics:{name:d?.onboarding?.company_name||d?.fullName||"Unknown",company_email:d?.onboarding?.company_email||d?.email,company_size:d?.onboarding?.address||d?.address||"Unknown",industry:[d?.onboarding?.region||"Not specified"]},plan_details:{type:d?.userData?.onboarding?.plan_type||d?.onboarding?.plan_type||d?.plan_type||"Selected",ai_employee_limit:d?.onboarding?.ai_employee_count||d?.ai_employee_count||1,monthly_price:(()=>{const b=d?.userData?.onboarding?.plan_type||d?.onboarding?.plan_type,w=Se.find(L=>L.apiKey===b);return w?.price==="Custom"?0:parseFloat(w?.price?.replace(/[$\/mo,]/g,"")||"0")})()},ai_employees:d?.onboarding?.ai_employees||Array.from({length:d?.onboarding?.ai_employee_count||0},(b,w)=>({id:`ai_${w+1}`,name:`AI Employee ${w+1}`,type:"Assistant",status:"Active"})),isOnBoarded:d?.isOnBoarded||!1,isApproved:d?.isApproved||!1,createdAt:d?.createdAt,lastLoginAt:d?.lastLoginAt,knowledge_sources:{website_url:d?.onboarding?.website_url||"",social_links:{linkedin:d?.onboarding?.linkedin||""},faqs_text:d?.onboarding?.faqs_text||"",uploaded_files:d?.onboarding?.uploaded_files||[]},deployment_targets:{channels:d?.onboarding?.channels||[]},instructions:{dos_and_donts:d?.onboarding?.dos_and_donts||"",fallback_contacts:d?.onboarding?.fallback_contacts||""},targets:{success_goals:d?.onboarding?.success_goals||"",success_metrics:d?.onboarding?.success_metrics||""}}));je(n),oe(S);const c=S.total||f.total,h=S.totalPages||f.totalPages;c!==void 0&&(Me(c),Ne(h||Math.ceil(c/Y)),He(d=>({...d,[t]:c})),console.log(`‚úÖ Set count for ${t}:`,c))}catch(l){console.error("‚ùå Error fetching data:",l),te(l.message),je([])}finally{J(!1),le.current=!1}};x.useEffect(()=>{ee()},[N,E]),x.useMemo(()=>{let t=ae;return I&&(t=ae.filter(i=>{const l=I.toLowerCase();return i.company_basics?.name?.toLowerCase().includes(l)||i.company_basics?.company_email?.toLowerCase().includes(l)||i.userData?.fullName?.toLowerCase().includes(l)||i.userData?.email?.toLowerCase().includes(l)})),t},[ae,I]);const ge=x.useMemo(()=>ae,[ae]),de=t=>qe[t]||0,Ye=()=>{E>1&&H(t=>t-1)},ue=()=>{E<Q&&H(t=>t+1)},be=async t=>{try{if(console.log("üîç handleEditClient called with client:",t),J(!0),C(t),t?.id){console.log(`üöÄ Fetching onboarding data for user: ${t.id}`);const i=await V.getOnboardingByUserId(t.id);console.log("‚úÖ Onboarding data response:",i);let l=t;i?.data?l={...t,onboardingDetails:i.data}:l={...t,onboardingDetails:{onboarding:null}};const p={_id:l._id,company_basics:{name:l?.onboardingDetails?.onboarding?.company_basics?.name||l?.company_basics?.name||"",description:l?.onboardingDetails?.onboarding?.company_basics?.description||l?.company_basics?.description||"",company_email:l?.onboardingDetails?.onboarding?.company_basics?.company_email||l?.company_basics?.company_email||"",company_phone:l?.onboardingDetails?.onboarding?.company_basics?.company_phone||l?.company_basics?.company_phone||"",website:l?.onboardingDetails?.onboarding?.company_basics?.website||l?.company_basics?.website||"",address:l?.onboardingDetails?.onboarding?.company_basics?.address||l?.company_basics?.address||"",company_size:l?.onboardingDetails?.onboarding?.company_basics?.company_size||l?.company_basics?.company_size||"",industry:l?.onboardingDetails?.onboarding?.company_basics?.industry||l?.company_basics?.industry||[],linkedin_profile:l?.onboardingDetails?.onboarding?.company_basics?.linkedin_profile||l?.company_basics?.linkedin_profile||"",primary_region:{countries:l?.onboardingDetails?.onboarding?.company_basics?.primary_region?.countries||[],states:l?.onboardingDetails?.onboarding?.company_basics?.primary_region?.states||[],cities:l?.onboardingDetails?.onboarding?.company_basics?.primary_region?.cities||[]}},ai_employees:(l?.onboardingDetails?.onboarding?.ai_employees||l?.ai_employees||[]).map(g=>({...g,knowledge_sources:{faqs_text:g?.knowledge_sources?.faqs_text||"",uploaded_files:g?.knowledge_sources?.uploaded_files||[],website_url:g?.knowledge_sources?.website_url||"",social_links:g?.knowledge_sources?.social_links||{},additional_sources:Array.isArray(g?.knowledge_sources)?g.knowledge_sources:g?.knowledge_sources?.additional_sources||[]}})),plan_details:l?.onboardingDetails?.onboarding?.plan_details||l?.plan_details||{},deployment_targets:l?.onboardingDetails?.onboarding?.deployment_targets||l?.deployment_targets||{},deployment_service:l?.onboardingDetails?.onboarding?.deployment_service||l?.deployment_service||{},consent_options:l?.onboardingDetails?.onboarding?.consent_options||l?.consent_options||{},instructions:l?.onboardingDetails?.onboarding?.instructions||l?.instructions||{},targets:l?.onboardingDetails?.onboarding?.targets||l?.targets||{},userData:l?.userData};B(p),re("edit"),X(!1)}else console.error("‚ùå No client._id available:",t),te("Client ID not found")}catch(i){console.error("‚ùå Error fetching onboarding data:",i),te(`Failed to fetch client data: ${i.message}`)}finally{J(!1)}},$e=async t=>{try{const i=t?.id,l=t?.fullName||t?.name||"this client";if(console.log(`üóëÔ∏è Deleting client: ${l} (ID: ${i})`),!i){R.error("Client ID not found");return}const p=await V.deleteUser(i);p?.success?(R.success("Client deleted successfully"),await ee(N,E)):R.error(p?.message||"Failed to delete client")}catch(i){console.error("‚ùå Error deleting client:",i),R.error("Failed to delete client")}},ce=()=>{C(null),re("list"),B(null),X(!1),z(null)},D=async t=>{try{console.log("üîç handleViewClient called with client:",t),a(`/dashboard/clients/${t?.id||t?._id}`,{state:{client:t}})}catch(i){console.error("‚ùå Error navigating to client details:",i),R.error("Failed to navigate to client details")}},he=async()=>{try{console.log("Saving edited data:",m),R.loading("Saving client data...",{id:"save-toast"});const t=d=>d?d.match(/^https?:\/\//i)?d:`https://${d}`:"",i=d=>d?d.split(" ").map(b=>b.charAt(0).toUpperCase()+b.slice(1).toLowerCase()).join(" "):"",l=d=>{const b=d.toLowerCase();return b.includes("male")&&!b.includes("female")?"Male":b.includes("female")?"Female":"Gender Neutral"},p=[],g={};(m.ai_employees||[]).forEach((d,b)=>{g[b]=[],(d.knowledge_sources?.uploaded_files||[]).forEach(w=>{w.pending_upload&&w.fileObject?p.push(w.fileObject):w.pending_upload||g[b].push(w)})});let u=[];if(p.length>0)try{console.log(`üì§ Uploading ${p.length} files...`),u=(await V.uploadOnboardingFiles(p)).uploaded_files||[],console.log("‚úÖ Files uploaded:",u)}catch(d){console.error("‚ùå Error uploading files:",d),R.error("Failed to upload files. Saving other data...",{id:"save-toast"})}const f=d=>{const w={"Sales & Business Development":"sales_business_development","Customer Support & Service":"customer_support_service","Appointment & Scheduling":"appointment_scheduling","Order Management & Billing":"order_management_billing","Product / Service Explainers":"product_service_explainers","Feedback & Engagement":"feedback_engagement","Custom Workflows":"custom_workflows"}[d];return w||(d||"").toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"").replace(/&/g,"and")},S=d=>{const b={website:"Website",app:"Mobile App",whatsapp:"WhatsApp"};return(d||[]).map(w=>b[w]||w)},n=d=>({managed:"Shivai","self-service":"Client",shivai:"Shivai",client:"Client"})[d]||d||"Shivai",c={company_basics:{name:m?.company_basics?.name||"",website:t(m?.company_basics?.website||""),company_size:m?.company_basics?.company_size||"",company_email:m?.company_basics?.company_email||"",company_phone:m?.company_basics?.company_phone||"",linkedin_profile:t(m?.company_basics?.linkedin_profile||""),description:m?.company_basics?.description||"",industry:Array.isArray(m?.company_basics?.industry)?m.company_basics.industry:[m?.company_basics?.industry||""],primary_region:{countries:m?.company_basics?.primary_region?.countries||[],states:m?.company_basics?.primary_region?.states||[],cities:m?.company_basics?.primary_region?.cities||[]}},plan_details:m?.plan_details||{},ai_employees:(m.ai_employees||[]).map((d,b)=>{const w=(d.knowledge_sources?.uploaded_files||[]).filter(U=>!U.pending_upload),L=[...g[b]||[]],K=(d.knowledge_sources?.uploaded_files||[]).filter(U=>U.pending_upload&&U.fileObject).length;if(K>0&&u.length>0){const U=Object.keys(g).slice(0,b).reduce((ke,ps)=>ke+(m.ai_employees[ps]?.knowledge_sources?.uploaded_files||[]).filter(Qe=>Qe.pending_upload&&Qe.fileObject).length,0);L.push(...u.slice(U,U+K))}const xe=(d.workflows||[]).map(U=>({name:U.name||"",instruction:U.instruction||""}));return{name:d.name||`AI Employee ${b+1}`,type:i(d.type||""),template:f(d.template||""),preferred_language:i(d.preferred_language||"English"),voice_gender:l(d.voice_gender||"Gender Neutral"),agent_personality:d.agent_personality||"",voice_style:d.voice_style||"",special_instructions:d.special_instructions||"",workflows:xe,knowledge_sources:{website_url:t(d.knowledge_sources?.website_url||""),social_links:d.knowledge_sources?.social_links||{},faqs_text:d.knowledge_sources?.faqs_text||"",uploaded_files:L},deployment_targets:{channels:S(d?.deployment_targets?.channels||[]),deployment_notes:d.deployment_targets?.deployment_notes||""},deployment_service:{service_type:n(d.deployment_service?.service_type||"")},consent_options:{recording_enabled:d.consent_options?.recording_enabled||!1,transcript_email_optin:d.consent_options?.transcript_email_optin||!1,privacy_notes:d.consent_options?.privacy_notes||""},instructions:{dos_and_donts:d.instructions?.dos_donts||d.instructions?.dos_and_donts||"",fallback_contacts:d.instructions?.fallback_contacts||""},targets:{success_goals:d.success_targets?.description||d.targets?.success_goals||"",success_metrics:d.success_targets?.metrics||d.targets?.success_metrics||""}}})};console.log("üì§ Sending payload:",JSON.stringify(c,null,2));const h=await V.updateClientData(m._id,c);if(console.log("‚úÖ Update response:",h),h&&(h.success===!0||h.statusCode===200))je(d=>d.map(b=>b._id===m._id?{...b,...m,...c}:b)),R.success(h.message||"Client data updated successfully!",{id:"save-toast"}),X(!1),ce();else throw new Error(h?.message||"Update failed")}catch(t){console.error("Error saving client data:",t);const i=t?.response?.data?.message||t?.message||"Failed to save client data";R.error(i,{id:"save-toast"})}},we=()=>{X(!1),ce()},Re=()=>{X(!r)},Fe=async t=>{try{const i=t?.s3_key||t?.key;if(!i){R.error("File key not found");return}const p=(await V.downloadFileByS3Key(i)).data,g=window.URL.createObjectURL(p);window.open(g,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(g),100)}catch(i){console.error("Error viewing file:",i),R.error("Failed to view file")}},Ue=async t=>{try{const i=t?.s3_key||t?.key,l=t?.name||t?.filename||"download";if(!i){R.error("File key not found");return}const g=(await V.downloadFileByS3Key(i)).data,u=window.URL.createObjectURL(g),f=document.createElement("a");f.href=u,f.download=l,document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(u),R.success("Download started")}catch(i){console.error("Error downloading file:",i),R.error("Failed to download file")}},k=(t,i)=>{B(l=>{const p={...l},g=t.split(".");let u=p;for(let f=0;f<g.length-1;f++)u[g[f]]||(u[g[f]]={}),u=u[g[f]];return u[g[g.length-1]]=i,p})},ye=t=>{console.log("updateIndustry called with:",t),B(i=>{const l={...i,company_basics:{...i?.company_basics,industry:t}};return console.log("Updated editData:",l),l})},_e=()=>{B(t=>({...t,ai_employees:[...t?.ai_employees||[],{name:"",type:"Assistant",template:"",preferred_language:"English",voice_gender:"Gender Neutral",agent_personality:"",voice_style:"",special_instructions:"",knowledge_sources:{faqs_text:"",uploaded_files:[],website_url:"",social_links:{},additional_sources:[]},workflows:[],_id:`new_${Date.now()}`}]}))},Oe=t=>{B(i=>({...i,ai_employees:(i?.ai_employees||[]).filter((l,p)=>p!==t)}))},A=(t,i,l)=>{B(p=>({...p,ai_employees:(p?.ai_employees||[]).map((g,u)=>{if(u!==t)return g;const f={...g};if(i.includes(".")){const S=i.split(".");let n=f;for(let c=0;c<S.length-1;c++)n[S[c]]||(n[S[c]]={}),n=n[S[c]];n[S[S.length-1]]=l}else f[i]=l;return f})}))};return O==="agentView"&&Ie?e.jsx(qs,{agent:Ie,onBack:ce,currentTheme:s}):O==="details"&&_?(a(`/dashboard/clients/${_._id||_.userData?._id}`,{state:{client:_}}),re("list"),null):O==="edit"&&m?e.jsxs("div",{className:"space-y-4 md:space-y-6 px-2 sm:px-0",children:[e.jsx("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-xl`,children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[e.jsxs("button",{onClick:we,className:`flex items-center justify-center sm:justify-start gap-2 px-4 py-2 rounded-lg ${s.hover} ${s.text} transition-all duration-200`,children:[e.jsx(ts,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Cancel"})]}),e.jsxs("h2",{className:`text-xl md:text-2xl font-bold ${s.text} text-center sm:text-left`,children:["Edit: ",m?.company_basics?.name||"Client"]})]}),e.jsx("div",{className:"flex gap-2 sm:gap-3",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:we,className:`flex-1 sm:flex-none px-3 sm:px-4 py-2 border ${s.border} rounded-lg ${s.text} ${s.hover} transition-all duration-200 flex items-center justify-center gap-2 text-sm sm:text-base`,children:[e.jsx(se,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Cancel"})]}),e.jsxs("button",{onClick:he,className:"flex-1 sm:flex-none admin-btn-primary px-3 sm:px-4 py-2 text-sm sm:text-base flex items-center justify-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Save"})]})]}):e.jsxs("button",{onClick:Re,className:"flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg admin-btn-primary transition-all duration-200 flex items-center justify-center gap-2 text-sm sm:text-base",children:[e.jsx(Je,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Edit"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-xl`,children:[e.jsxs("h3",{className:`text-base md:text-lg font-bold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(Ve,{className:"w-5 h-5"}),"Company Basics"]}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Company Name *"}),e.jsx("input",{type:"text",value:m?.company_basics?.name||"",onChange:t=>k("company_basics.name",t.target.value),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Description"}),e.jsx("textarea",{value:m?.company_basics?.description||"",onChange:t=>k("company_basics.description",t.target.value),rows:3,disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Company Size"}),e.jsxs("select",{value:m?.company_basics?.company_size||"",onChange:t=>k("company_basics.company_size",t.target.value),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"1-10",children:"1-10"}),e.jsx("option",{value:"11-50",children:"11-50"}),e.jsx("option",{value:"51-200",children:"51-200"}),e.jsx("option",{value:"201-500",children:"201-500"}),e.jsx("option",{value:"501-1000",children:"501-1000"}),e.jsx("option",{value:"1000+",children:"1000+"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Industry (select up to 4)"}),e.jsxs("div",{className:"relative","data-industry-dropdown":!0,children:[e.jsx("input",{type:"text",value:W,onChange:t=>Z(t.target.value),onFocus:()=>q(!0),onClick:()=>r&&q(!0),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"} ${(m?.company_basics?.industry||[]).length>=4?"cursor-not-allowed":""}`,placeholder:(m?.company_basics?.industry||[]).length>=4?"Maximum 4 industries selected":"Search or select industries"}),e.jsx(us,{className:`absolute right-2.5 top-2.5 w-4 h-4 text-gray-400 transition-transform cursor-pointer ${ve?"rotate-180":""}`,onClick:()=>r&&q(!ve)}),(m?.company_basics?.industry||[]).length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(m?.company_basics?.industry||[]).map((t,i)=>{const l=Ce.find(p=>p.value===t)?.label||t;return e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-md text-sm flex items-center gap-1",children:[l,r&&e.jsx("button",{type:"button",onClick:()=>{const p=(m?.company_basics?.industry||[]).filter((g,u)=>u!==i);ye(p)},className:"text-blue-600 hover:text-blue-800",children:e.jsx(se,{className:"w-5 h-5"})})]},i)})}),ve&&r&&e.jsxs("div",{className:`absolute z-50 w-full mt-1 ${s.cardBg} border ${s.border} rounded-lg shadow-xl max-h-48 overflow-y-auto`,onClick:t=>t.stopPropagation(),children:[Ce.filter(t=>t.label.toLowerCase().includes(W.toLowerCase())&&!(m?.company_basics?.industry||[]).includes(t.value)).map(t=>e.jsxs("div",{onClick:i=>{i.stopPropagation(),console.log("Industry option clicked:",t.value);const l=m?.company_basics?.industry||[];console.log("Current industries:",l),t.value==="other"?Z("Add your industry type"):l.length<4&&!l.includes(t.value)?(console.log("Adding industry:",t.value),ye([...l,t.value]),Z(""),setTimeout(()=>q(!1),100)):console.log("Max industries reached or already selected")},className:`px-3 py-2 border-b ${s.border} last:border-b-0 ${(m?.company_basics?.industry||[]).length>=4?"cursor-not-allowed text-gray-400 bg-gray-50":"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer"}`,children:[t.label,(m?.company_basics?.industry||[]).length>=4&&e.jsx("span",{className:"text-xs text-gray-400 ml-2",children:"(Max reached)"})]},t.value)),W&&!Ce.some(t=>t.label.toLowerCase().includes(W.toLowerCase()))&&!(m?.company_basics?.industry||[]).includes(W)&&e.jsxs("div",{onClick:t=>{t.stopPropagation(),console.log("Custom industry add clicked:",W);const i=m?.company_basics?.industry||[];i.length<4&&!i.includes(W)&&(console.log("Adding custom industry:",W),ye([...i,W]),Z(""),setTimeout(()=>q(!1),100))},className:`px-3 py-2 font-medium ${(m?.company_basics?.industry||[]).length>=4?"cursor-not-allowed text-gray-400 bg-gray-50":"hover:bg-blue-50 cursor-pointer text-blue-600"}`,children:['+ Add "',W,'"']})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Website"}),e.jsx("input",{type:"url",value:m?.company_basics?.website||"",onChange:t=>k("company_basics.website",t.target.value),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Company Email"}),e.jsx("input",{type:"email",value:m?.company_basics?.company_email||"",onChange:t=>k("company_basics.company_email",t.target.value),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Company Phone"}),e.jsx("input",{type:"tel",value:m?.company_basics?.company_phone||"",onChange:t=>k("company_basics.company_phone",t.target.value),disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Primary Region - Countries"}),e.jsx("input",{type:"text",value:(m?.company_basics?.primary_region?.countries||[]).join(", "),onChange:t=>{const i=t.target.value.split(",").map(l=>l.trim()).filter(l=>l);k("company_basics.primary_region.countries",i)},placeholder:"USA, Canada, UK (comma separated)",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Primary Region - States/Provinces"}),e.jsx("input",{type:"text",value:(m?.company_basics?.primary_region?.states||[]).join(", "),onChange:t=>{const i=t.target.value.split(",").map(l=>l.trim()).filter(l=>l);k("company_basics.primary_region.states",i)},placeholder:"California, New York, Texas (comma separated)",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Primary Region - Cities"}),e.jsx("input",{type:"text",value:(m?.company_basics?.primary_region?.cities||[]).join(", "),onChange:t=>{const i=t.target.value.split(",").map(l=>l.trim()).filter(l=>l);k("company_basics.primary_region.cities",i)},placeholder:"New York, Los Angeles, Chicago (comma separated)",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]}),e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-xl`,children:[e.jsxs("h3",{className:`text-base md:text-lg font-bold ${s.text} mb-3 md:mb-4 flex items-center gap-2`,children:[e.jsx(ls,{className:"w-5 h-5"}),"Plan Details"]}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Plan Type"}),e.jsxs("select",{value:m?.plan_details?.type||"",onChange:t=>{const i=Se.find(l=>l.apiKey===t.target.value);k("plan_details.type",t.target.value),i&&(k("plan_details.ai_employee_limit",i.aiEmployees),k("plan_details.monthly_price",i.price==="Custom"?0:parseFloat(i.price.replace(/[$\/mo,]/g,"")||"0")))},disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select Plan"}),Se.map(t=>e.jsxs("option",{value:t.apiKey,children:[t.name," - ",t.price]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Monthly Price ($)"}),e.jsx("input",{type:"number",value:m?.plan_details?.monthly_price||"",onChange:t=>k("plan_details.monthly_price",parseFloat(t.target.value)),disabled:!r||m?.plan_details?.type!=="Custom Plan",placeholder:m?.plan_details?.type==="Custom Plan"?"Enter custom price":"Auto-populated from plan",className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${!r||m?.plan_details?.type!=="Custom Plan"?"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed":`${s.cardBg} ${s.text}`}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"AI Employee Limit"}),e.jsx("input",{type:"number",value:m?.plan_details?.ai_employee_limit||"",onChange:t=>k("plan_details.ai_employee_limit",parseInt(t.target.value)),disabled:!r||m?.plan_details?.type!=="Custom Plan",placeholder:m?.plan_details?.type==="Custom Plan"?"Enter custom limit":"Auto-populated from plan",className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${!r||m?.plan_details?.type!=="Custom Plan"?"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed":`${s.cardBg} ${s.text}`}`})]}),e.jsxs("div",{className:`pt-4 border-t ${s.border}`,children:[e.jsx("h4",{className:`text-sm font-bold ${s.text} mb-3`,children:"Billing Contact"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:m?.plan_details?.billing_contact?.name||"",onChange:t=>k("plan_details.billing_contact.name",t.target.value),placeholder:"Contact Name",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"email",value:m?.plan_details?.billing_contact?.email||"",onChange:t=>k("plan_details.billing_contact.email",t.target.value),placeholder:"Contact Email",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"tel",value:m?.plan_details?.billing_contact?.phone||"",onChange:t=>k("plan_details.billing_contact.phone",t.target.value),placeholder:"Contact Phone",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"text",value:m?.plan_details?.billing_contact?.company_name||"",onChange:t=>k("plan_details.billing_contact.company_name",t.target.value),placeholder:"Billing Company Name (if different)",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]}),e.jsxs("div",{className:`pt-4 border-t ${s.border}`,children:[e.jsx("h4",{className:`text-sm font-bold ${s.text} mb-3`,children:"Billing Address"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:m?.plan_details?.billing_address?.street||"",onChange:t=>k("plan_details.billing_address.street",t.target.value),placeholder:"Street Address",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:m?.plan_details?.billing_address?.city||"",onChange:t=>k("plan_details.billing_address.city",t.target.value),placeholder:"City",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"text",value:m?.plan_details?.billing_address?.state||"",onChange:t=>k("plan_details.billing_address.state",t.target.value),placeholder:"State",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:m?.plan_details?.billing_address?.postal_code||"",onChange:t=>k("plan_details.billing_address.postal_code",t.target.value),placeholder:"Postal Code",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("input",{type:"text",value:m?.plan_details?.billing_address?.country||"",onChange:t=>k("plan_details.billing_address.country",t.target.value),placeholder:"Country",disabled:!r,className:`w-full px-3 md:px-4 py-2 text-sm md:text-base rounded-lg border ${s.border} focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-xl p-4 md:p-6 shadow-xl lg:col-span-2`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6",children:[e.jsxs("h3",{className:`text-lg md:text-xl font-bold ${s.text} flex items-center gap-3`,children:[e.jsx("div",{className:`p-2 rounded-lg ${s.activeBg}`,children:e.jsx(Xe,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("span",{children:"AI Employees"}),e.jsxs("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${s.searchBg} ${s.textSecondary}`,children:[(m?.ai_employees||[]).length," configured"]})]})]}),e.jsxs("button",{onClick:_e,disabled:!r,className:`admin-btn-primary px-4 py-2.5 text-sm w-full sm:w-auto flex items-center justify-center gap-2 font-medium ${r?"":"opacity-60 cursor-not-allowed"}`,children:[e.jsx(We,{className:"w-5 h-5"}),"Add AI Employee"]})]}),e.jsx("div",{className:"space-y-6",children:(m?.ai_employees||[]).length===0?e.jsxs("div",{className:`text-center py-12 border-2 border-dashed ${s.border} rounded-xl`,children:[e.jsx("div",{className:`p-3 rounded-full ${s.searchBg} w-16 h-16 mx-auto mb-4 flex items-center justify-center`,children:e.jsx(Xe,{className:`w-8 h-8 ${s.textSecondary}`})}),e.jsx("h4",{className:`text-lg font-medium ${s.text} mb-2`,children:"No AI Employees Yet"}),e.jsx("p",{className:`${s.textSecondary} text-sm mb-4`,children:"Add your first AI employee to get started with automation"}),r&&e.jsxs("button",{onClick:_e,className:"admin-btn-primary px-6 py-2.5 text-sm font-medium",children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Create First AI Employee"]})]}):(m?.ai_employees||[]).map((t,i)=>e.jsxs("div",{className:`p-6 rounded-xl border ${s.border} ${s.searchBg} shadow-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.cardBg} border ${s.border}`,children:e.jsx(ne,{className:`w-5 h-5 ${s.text}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:`${s.text} font-bold text-lg`,children:t?.name||`AI Employee #${i+1}`}),e.jsxs("p",{className:`${s.textSecondary} text-sm`,children:[t?.type||"Assistant"," ‚Ä¢"," ",t?.preferred_language||"English"]})]})]}),(m?.ai_employees||[]).length>1&&e.jsx("button",{onClick:()=>Oe(i),className:`p-2 rounded-lg ${s.hover} text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center gap-2`,title:"Remove AI Employee",children:e.jsx(se,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Name"}),e.jsx("input",{type:"text",value:t?.name||"",onChange:l=>A(i,"name",l.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Type"}),e.jsxs("select",{value:t?.type||"",onChange:l=>A(i,"type",l.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select type"}),Ks.map(l=>e.jsx("option",{value:l.label,children:l.label},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Template"}),e.jsxs("select",{value:t?.template||"",onChange:l=>A(i,"template",l.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select template"}),ms.map(l=>e.jsx("option",{value:l.label,children:l.label},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Language"}),e.jsxs("select",{value:t?.preferred_language||"",onChange:l=>A(i,"preferred_language",l.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select language"}),Vs.map(l=>e.jsx("option",{value:l.label,children:l.label},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Voice Gender"}),e.jsxs("select",{value:t?.voice_gender||"",onChange:l=>A(i,"voice_gender",l.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select voice gender"}),Gs.map(l=>e.jsx("option",{value:l.label,children:l.label},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Personality"}),e.jsx("input",{type:"text",value:t?.agent_personality||"",onChange:l=>A(i,"agent_personality",l.target.value),disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Voice Style"}),e.jsx("input",{type:"text",value:t?.voice_style||"",onChange:l=>A(i,"voice_style",l.target.value),placeholder:"e.g., Professional, Friendly, Energetic",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Special Instructions"}),e.jsx("textarea",{value:t?.special_instructions||"",onChange:l=>A(i,"special_instructions",l.target.value),rows:2,disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block`,children:[e.jsx(G,{className:"w-4 h-4 inline mr-1"}),"Workflow Integrations (",(t?.workflows||[]).length,")"]}),e.jsxs("button",{type:"button",onClick:()=>{B(l=>({...l,ai_employees:(l?.ai_employees||[]).map((p,g)=>g===i?{...p,workflows:[...p.workflows||[],{name:"WhatsApp Business",instruction:"Configure WhatsApp Business integration"}]}:p)}))},className:"px-3 py-1 rounded-lg text-xs bg-green-50 text-green-700 border border-green-200 hover:bg-green-100 transition-colors flex items-center gap-1",children:[e.jsx(Ke,{className:"w-5 h-5"}),"Add Workflow"]})]}),e.jsx("div",{className:"space-y-3",children:(t?.workflows||[]).length>0?(t?.workflows||[]).map((l,p)=>e.jsxs("div",{className:`p-4 rounded-lg border ${s.border} ${s.cardBg}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h5",{className:`text-sm font-medium ${s.text} flex items-center gap-2`,children:[e.jsx(bs,{className:"w-5 h-5"}),"Workflow #",p+1]}),e.jsx("button",{type:"button",onClick:()=>{B(g=>({...g,ai_employees:(g?.ai_employees||[]).map((u,f)=>f===i?{...u,workflows:(u.workflows||[]).filter((S,n)=>n!==p)}:u)}))},className:`p-1 rounded ${s.hover} text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors`,children:e.jsx(se,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Integration Type"}),e.jsxs("select",{value:l?.name||"",onChange:g=>{B(u=>({...u,ai_employees:(u?.ai_employees||[]).map((f,S)=>S===i?{...f,workflows:(f.workflows||[]).map((n,c)=>c===p?{...n,name:g.target.value}:n)}:f)}))},disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"",children:"Select Integration"}),e.jsx("option",{value:"WhatsApp Business",children:"WhatsApp Business"}),e.jsx("option",{value:"Gmail",children:"Gmail"}),e.jsx("option",{value:"Webhooks",children:"Webhooks"}),e.jsx("option",{value:"Google Calendar",children:"Google Calendar"}),e.jsx("option",{value:"Calendly",children:"Calendly"}),e.jsx("option",{value:"Google Sheets",children:"Google Sheets"}),e.jsx("option",{value:"Zoho CRM",children:"Zoho CRM"}),e.jsx("option",{value:"Odoo",children:"Odoo"}),e.jsx("option",{value:"HubSpot",children:"HubSpot"}),e.jsx("option",{value:"Salesforce CRM",children:"Salesforce CRM"}),e.jsx("option",{value:"Zendesk",children:"Zendesk"}),e.jsx("option",{value:"Shopify",children:"Shopify"}),e.jsx("option",{value:"Slack",children:"Slack"}),e.jsx("option",{value:"Zapier",children:"Zapier"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-1`,children:"Integration Instructions"}),e.jsx("textarea",{value:l?.instruction||"",onChange:g=>{B(u=>({...u,ai_employees:(u?.ai_employees||[]).map((f,S)=>S===i?{...f,workflows:(f.workflows||[]).map((n,c)=>c===p?{...n,instruction:g.target.value}:n)}:f)}))},rows:3,placeholder:"Enter specific instructions for this workflow integration...",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),l?.name&&e.jsx("div",{className:`p-3 rounded-lg ${s.searchBg} border ${s.border}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:`p-2 rounded-lg ${s.activeBg}`,children:[l?.name==="WhatsApp Business"&&e.jsx(Ge,{className:"w-4 h-4 text-green-600"}),l?.name==="Gmail"&&e.jsx(ns,{className:"w-4 h-4 text-blue-600"}),l?.name==="Google Calendar"&&e.jsx(rs,{className:"w-4 h-4 text-blue-600"}),l?.name==="Shopify"&&e.jsx(hs,{className:"w-4 h-4 text-green-600"}),l?.name==="Slack"&&e.jsx(ys,{className:"w-4 h-4 text-purple-600"}),!["WhatsApp Business","Gmail","Google Calendar","Shopify","Slack"].includes(l?.name)&&e.jsx(fs,{className:"w-4 h-4 text-gray-600"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h6",{className:`text-sm font-medium ${s.text} mb-1`,children:[l?.name," Integration"]}),e.jsx("p",{className:`text-xs ${s.textSecondary}`,children:l?.instruction||"No instructions provided"}),e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mr-1"}),"Configured"]})})]})]})})]})]},p)):e.jsxs("div",{className:`text-center py-6 border-2 border-dashed ${s.border} rounded-lg`,children:[e.jsx(G,{className:`w-8 h-8 mx-auto mb-2 ${s.textSecondary} opacity-50`}),e.jsx("p",{className:`${s.textSecondary} text-sm font-medium mb-1`,children:"No workflow integrations configured"}),e.jsx("p",{className:`${s.textSecondary} text-xs mb-3 opacity-75`,children:"Add integrations like WhatsApp, Gmail, CRM systems to enhance this AI employee"}),e.jsxs("button",{type:"button",onClick:()=>{B(l=>({...l,ai_employees:(l?.ai_employees||[]).map((p,g)=>g===i?{...p,workflows:[{name:"",instruction:""}]}:p)}))},className:"px-4 py-2 rounded-lg text-sm bg-blue-50 text-blue-700 border border-blue-200 hover:bg-blue-100 transition-colors flex items-center gap-2 mx-auto",children:[e.jsx(Ke,{className:"w-5 h-5"}),"Add Your First Workflow"]})]})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block`,children:[e.jsx(js,{className:"w-4 h-4 inline mr-1"}),"Knowledge Sources"]})}),e.jsxs("div",{className:"mb-4 p-4 rounded-lg border ${currentTheme.border} ${currentTheme.searchBg}",children:[e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:[e.jsx(os,{className:"w-4 h-4 inline mr-1"}),"Website URL"]}),e.jsx("input",{type:"url",value:t?.knowledge_sources?.website_url||"",onChange:l=>{B(p=>({...p,ai_employees:(p?.ai_employees||[]).map((g,u)=>u===i?{...g,knowledge_sources:{...g.knowledge_sources,website_url:l.target.value}}:g)}))},placeholder:"https://example.com",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"mb-4 p-4 rounded-lg border ${currentTheme.border} ${currentTheme.searchBg}",children:[e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:[e.jsx(vs,{className:"w-4 h-4 inline mr-1"}),"FAQs / Knowledge Text"]}),e.jsx("textarea",{value:t?.knowledge_sources?.faqs_text||"",onChange:l=>{B(p=>({...p,ai_employees:(p?.ai_employees||[]).map((g,u)=>u===i?{...g,knowledge_sources:{...g.knowledge_sources,faqs_text:l.target.value}}:g)}))},rows:4,placeholder:"Enter frequently asked questions and answers, or any text-based knowledge...",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"mb-4 p-4 rounded-lg border ${currentTheme.border} ${currentTheme.searchBg}",children:[e.jsxs("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:[e.jsx(G,{className:"w-4 h-4 inline mr-1"}),"Uploaded Files (",(t?.knowledge_sources?.uploaded_files||[]).length,")"]}),(t?.knowledge_sources?.uploaded_files||[]).length>0?e.jsx("div",{className:"space-y-2",children:(t?.knowledge_sources?.uploaded_files||[]).map((l,p)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${s.border} ${s.cardBg}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx(G,{className:`w-5 h-5 ${s.textSecondary}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm font-medium ${s.text} truncate`,children:l.original_name||l.filename||l.name||"Unnamed File"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.file_size&&e.jsxs("span",{className:`text-xs ${s.textSecondary}`,children:[(l.file_size/1024).toFixed(1)," ","KB"]}),l.file_type&&e.jsx("span",{className:`text-xs ${s.textSecondary} bg-gray-100 px-2 py-0.5 rounded`,children:l.file_type})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>Fe(l),className:`p-2 rounded-lg ${s.hover} ${s.textSecondary} hover:text-blue-600 transition-colors`,title:"View File",children:e.jsx(Ae,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>Ue(l),className:`p-2 rounded-lg ${s.hover} ${s.textSecondary} hover:text-green-600 transition-colors`,title:"Download File",children:e.jsx(is,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{B(g=>({...g,ai_employees:(g?.ai_employees||[]).map((u,f)=>f===i?{...u,knowledge_sources:{...u.knowledge_sources,uploaded_files:(u.knowledge_sources?.uploaded_files||[]).filter((S,n)=>n!==p)}}:u)}))},className:`p-2 rounded-lg ${s.hover} text-red-500 hover:bg-red-50 transition-colors`,title:"Remove File",children:e.jsx(se,{className:"w-5 h-5"})})]})]},p))}):e.jsxs("div",{className:`text-center py-6 border-2 border-dashed ${s.border} rounded-lg`,children:[e.jsx(G,{className:`w-8 h-8 mx-auto mb-2 ${s.textSecondary} opacity-50`}),e.jsx("p",{className:`${s.textSecondary} text-sm`,children:"No files uploaded yet"}),e.jsx("p",{className:`${s.textSecondary} text-xs mt-1 opacity-75`,children:"Files will appear here when uploaded during onboarding"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("input",{type:"file",multiple:!0,disabled:!r,onChange:l=>{const p=Array.from(l.target.files||[]);if(p.length>0){const g=p.map(u=>({name:u.name,original_name:u.name,file_size:u.size,file_type:u.type,pending_upload:!0,fileObject:u}));B(u=>({...u,ai_employees:(u?.ai_employees||[]).map((f,S)=>S===i?{...f,knowledge_sources:{...f.knowledge_sources,uploaded_files:[...f.knowledge_sources?.uploaded_files||[],...g]}}:f)})),l.target.value=""}},className:`w-full px-3 py-2 text-sm border-2 border-dashed ${s.border} rounded-lg ${s.cardBg} ${s.text} file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100`,accept:".pdf,.doc,.docx,.txt,.csv,.xlsx"}),e.jsx("p",{className:`text-xs ${s.textSecondary} mt-2`,children:"Supported formats: PDF, DOC, DOCX, TXT, CSV, XLSX"})]})]})]})]}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:`border-t ${s.border} pt-6`,children:[e.jsxs("h4",{className:`text-md font-semibold ${s.text} flex items-center gap-2 mb-4`,children:[e.jsx(Ze,{className:"w-4 h-4 text-green-600"}),"Instructions & Guidelines",e.jsx("span",{className:`text-xs ${s.textSecondary} font-normal`,children:"Set behavior guidelines"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Do's and Don'ts"}),e.jsx("textarea",{value:t?.instructions?.dos_and_donts||"",onChange:l=>A(i,"instructions.dos_and_donts",l.target.value),rows:4,placeholder:"Be professional, Don't share personal information...",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Fallback Contacts"}),e.jsx("input",{type:"text",value:t?.instructions?.fallback_contacts||"",onChange:l=>A(i,"instructions.fallback_contacts",l.target.value),placeholder:"atharkatheri@gmail.com",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]}),e.jsxs("div",{className:`border-t ${s.border} pt-6`,children:[e.jsxs("h4",{className:`text-md font-semibold ${s.text} flex items-center gap-2 mb-4`,children:[e.jsx(Ns,{className:"w-4 h-4 text-orange-600"}),"Success Targets",e.jsx("span",{className:`text-xs ${s.textSecondary} font-normal`,children:"Define success metrics"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"What Success Looks Like"}),e.jsx("textarea",{value:t?.success_targets?.description||"",onChange:l=>A(i,"success_targets.description",l.target.value),rows:3,placeholder:"Lead qualification, booking appointments, FAQ deflection...",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Success Metrics"}),e.jsxs("div",{className:"space-y-2",children:[(t?.success_targets?.metrics||[""]).map((l,p)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l,onChange:g=>{const u=[...t?.success_targets?.metrics||[]];u[p]=g.target.value,A(i,"success_targets.metrics",u)},placeholder:"80% FAQ resolution rate",disabled:!r,className:`flex-1 px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`}),e.jsx("button",{onClick:()=>{const g=(t?.success_targets?.metrics||[]).filter((u,f)=>f!==p);A(i,"success_targets.metrics",g)},className:"px-2 py-2 rounded-lg text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:e.jsx(se,{className:"w-5 h-5"})})]},p)),e.jsxs("button",{onClick:()=>{const l=[...t?.success_targets?.metrics||[],""];A(i,"success_targets.metrics",l)},className:`flex items-center gap-2 px-3 py-2 border-2 border-dashed ${s.border} rounded-lg ${s.text} hover:bg-opacity-50 transition-colors text-sm`,children:[e.jsx(Ke,{className:"w-5 h-5"}),"Add Metric"]})]})]})]})]}),e.jsxs("div",{className:`border-t ${s.border} pt-6`,children:[e.jsxs("h4",{className:`text-md font-semibold ${s.text} flex items-center gap-2 mb-4`,children:[e.jsx(ds,{className:"w-4 h-4 text-purple-600"}),"Deployment Configuration",e.jsx("span",{className:`text-xs ${s.textSecondary} font-normal`,children:"Choose deployment options"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Service Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("label",{className:`flex items-center gap-3 p-3 border ${s.border} rounded-lg cursor-pointer transition-colors ${t?.deployment?.service_type==="shivai"?"bg-blue-50 border-blue-200 dark:bg-blue-900/20":""}`,children:[e.jsx("input",{type:"radio",name:`service_type_${i}`,checked:t?.deployment_service?.service_type==="shivai",onChange:l=>A(i,"deployment_service.service_type","shivai"),disabled:!r,className:`w-5 h-5 text-blue-500 ${r?"":"opacity-60 cursor-not-allowed"}`}),e.jsx("span",{className:"text-sm",children:"Shivai"})]}),e.jsxs("label",{className:`flex items-center gap-3 p-3 border ${s.border} rounded-lg cursor-pointer transition-colors ${t?.deployment?.service_type==="self"?"bg-blue-50 border-blue-200 dark:bg-blue-900/20":""}`,children:[e.jsx("input",{type:"radio",name:`service_type_${i}`,checked:t?.deployment_service?.service_type==="self",onChange:l=>A(i,"deployment_service.service_type","self"),disabled:!r,className:`w-5 h-5 text-blue-500 ${r?"":"opacity-60 cursor-not-allowed"}`}),e.jsx("span",{className:"text-sm",children:"Self-managed"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Channels"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Website","Mobile App"].map(l=>e.jsxs("label",{className:`flex items-center gap-2 px-3 py-2 border ${s.border} rounded-full cursor-pointer text-sm transition-colors ${(t?.deployment?.channels||[]).includes(l)?"bg-blue-50 border-blue-200 dark:bg-blue-900/20":""}`,children:[e.jsx("input",{type:"checkbox",checked:(t?.deployment?.channels||[]).includes(l),onChange:p=>{const g=t?.deployment?.channels||[],u=p.target.checked?[...g,l]:g.filter(f=>f!==l);A(i,"deployment.channels",u)},disabled:!r,className:`w-5 h-5 text-blue-500 ${r?"":"opacity-60 cursor-not-allowed"}`}),l]},l))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Deployment Notes"}),e.jsx("textarea",{value:t?.deployment_targets?.deployment_notes||"",onChange:l=>A(i,"deployment_targets.deployment_notes",l.target.value),rows:3,placeholder:"Phase 1: Website implementation...",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]}),e.jsxs("div",{className:`border-t ${s.border} pt-6`,children:[e.jsxs("h4",{className:`text-md font-semibold ${s.text} flex items-center gap-2 mb-4`,children:[e.jsx($s,{className:"w-4 h-4 text-gray-600"}),"Consent & Privacy Options",e.jsx("span",{className:`text-xs ${s.textSecondary} font-normal`,children:"Privacy settings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t?.consent_options?.recording_enabled||!1,onChange:l=>A(i,"consent_options.recording_enabled",l.target.checked),disabled:!r,className:`w-5 h-5 text-blue-500 rounded ${r?"":"opacity-50 cursor-not-allowed"}`}),e.jsx("span",{className:"text-sm",children:"Recording Enabled"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t?.consent_options?.transcript_email_optin||!1,onChange:l=>A(i,"consent_options.transcript_email_optin",l.target.checked),disabled:!r,className:`w-5 h-5 text-blue-500 rounded ${r?"":"opacity-50 cursor-not-allowed"}`}),e.jsx("span",{className:"text-sm",children:"Transcript Email Opt-in"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs ${s.textSecondary} uppercase block mb-2`,children:"Privacy Notes"}),e.jsx("input",{type:"text",value:t?.consent_options?.privacy_notes||"",onChange:l=>A(i,"consent_options.privacy_notes",l.target.value),placeholder:"Privacy enabled",disabled:!r,className:`w-full px-3 py-2 rounded-lg border ${s.border} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 ${r?`${s.cardBg} ${s.text}`:"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`})]})]})]})]})]},i))})]})})]}):e.jsxs("div",{className:"space-y-4 md:space-y-6 px-2 sm:px-0",children:[e.jsx("div",{className:"relative -mx-2 sm:mx-0",children:e.jsxs("div",{className:"flex md:grid md:grid-cols-3 gap-3 md:gap-4 overflow-x-auto scrollbar-hide px-2 sm:px-0 snap-x snap-mandatory",children:[e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-4 md:p-6 shadow-lg min-w-[280px] sm:min-w-[320px] md:min-w-0 snap-center flex-shrink-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-3",children:[e.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-lg ${s.searchBg} flex items-center justify-center`,children:e.jsx(De,{className:`w-5 h-5 ${s.textSecondary}`})}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-blue-500",children:"Total"})]}),e.jsx("h3",{className:`text-2xl md:text-3xl font-semibold ${s.text} mb-1 md:mb-2`,children:M?.total||T||de("all")}),e.jsx("p",{className:`text-xs md:text-sm font-medium ${s.text}`,children:"All Clients"}),M&&e.jsxs("p",{className:`text-xs ${s.textSecondary} mt-1`,children:["Page ",M.page||E," of"," ",M.totalPages||Q]})]}),e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-4 md:p-6 shadow-lg min-w-[280px] sm:min-w-[320px] md:min-w-0 snap-center flex-shrink-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-3",children:[e.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-lg ${s.searchBg} flex items-center justify-center`,children:e.jsx(Be,{className:`w-5 h-5 ${s.textSecondary}`})}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-yellow-500",children:"Pending"})]}),e.jsx("h3",{className:`text-2xl md:text-3xl font-semibold ${s.text} mb-1 md:mb-2`,children:de("pending")}),e.jsx("p",{className:`text-xs md:text-sm font-medium ${s.text}`,children:"Awaiting Review"})]}),e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-4 md:p-6 shadow-lg min-w-[280px] sm:min-w-[320px] md:min-w-0 snap-center flex-shrink-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-3",children:[e.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-lg ${s.searchBg} flex items-center justify-center`,children:e.jsx(ze,{className:`w-5 h-5 ${s.textSecondary}`})}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-green-500",children:"Active"})]}),e.jsx("h3",{className:`text-2xl md:text-3xl font-semibold ${s.text} mb-1 md:mb-2`,children:de("approved")}),e.jsx("p",{className:`text-xs md:text-sm font-medium ${s.text}`,children:"Approved Clients"})]})]})}),e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-3 sm:p-4 md:p-6 shadow-lg`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 md:gap-4 mb-4 md:mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:`text-lg md:text-xl font-semibold ${s.text} flex items-center gap-2`,children:[e.jsx(De,{className:"w-5 h-5"}),"Client Requests"]}),e.jsxs("p",{className:`${s.textSecondary} text-xs md:text-sm mt-1`,children:["(",M?.total||T||de("all")," total)"]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 w-full sm:w-auto",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:`p-2 rounded-lg ${s.hover} ${s.text} transition-all duration-200 flex-shrink-0`,title:"Refresh data",children:e.jsx(ws,{className:"w-5 h-5"})}),e.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[e.jsx(_s,{className:`absolute left-[92%] lg:left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${s.textSecondary}`}),e.jsx("input",{type:"text",placeholder:"Search...",value:P,onChange:t=>$(t.target.value),className:`w-full sm:w-48 md:w-64 pl-9 pr-3 py-2 text-sm rounded-lg border ${s.border} ${s.bg} ${s.text} focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent`})]})]})]}),e.jsx("div",{className:`flex gap-1 mb-4 md:mb-6 border-b ${s.border} overflow-x-auto scrollbar-hide -mx-3 sm:mx-0 px-3 sm:px-0`,children:["all","newlySignup","pending","onboarded","approved","rejected"].map(t=>{const i={all:{icon:Ze,label:"All"},newlySignup:{icon:We,label:"Newly Signup"},pending:{icon:Be,label:"Pending"},onboarded:{icon:ze,label:"Onboarded"},approved:{icon:ks,label:"Approved"},rejected:{icon:se,label:"Rejected"}},{icon:l,label:p}=i[t];return e.jsx("button",{onClick:()=>v(t),className:`flex-shrink-0 px-3 md:px-4 py-2 md:py-3 text-sm md:text-base font-medium transition-all duration-200 border-b-2 whitespace-nowrap ${N===t?`${s.activeBorder} ${s.text}`:`border-transparent ${s.textSecondary} ${s.hover}`}`,children:e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx(l,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),e.jsx("span",{className:"text-sm md:text-base",children:p})]})},t)})}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:me?e.jsxs("div",{className:`text-center py-12 md:py-16 rounded-lg ${s.cardBg} border ${s.border}`,children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 md:h-12 md:w-12 border-b-2 border-blue-500 mx-auto mb-3"}),e.jsx("h3",{className:`text-base md:text-lg font-semibold ${s.text} mb-2`,children:"Loading clients..."}),e.jsx("p",{className:`text-sm ${s.textSecondary}`,children:"Please wait while we fetch the data"})]}):ge.length===0?e.jsxs("div",{className:`text-center py-8 md:py-12 rounded-lg ${s.cardBg} border ${s.border}`,children:[e.jsx(Ss,{className:`w-10 h-10 md:w-12 md:h-12 mx-auto mb-2 md:mb-3 ${s.textSecondary}`}),e.jsx("h3",{className:`text-base md:text-lg font-semibold ${s.text} mb-1 md:mb-2`,children:I?"No matching clients":"No client requests yet"}),e.jsx("p",{className:`text-sm ${s.textSecondary}`,children:I?"Try adjusting your search criteria":"No client requests available"})]}):ge?.map(t=>e.jsxs("div",{className:`${s.cardBg} border ${s.border} rounded-lg p-3 md:p-4 hover:shadow-md transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2 md:mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-9 h-9 md:w-10 md:h-10 rounded-lg ${s.activeBg} flex items-center justify-center flex-shrink-0`,children:e.jsx(Ve,{className:`w-5 h-5 ${s.text}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`font-semibold ${s.text} text-base md:text-lg truncate`,children:t?.userData?.fullName||t?.company_basics?.name||"Unknown"}),e.jsx("p",{className:`text-xs md:text-sm ${s.textSecondary} truncate`,children:t?.userData?.email||t?.company_basics?.company_email||"No email"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>D(t?.userData),className:`p-2 flex items-center justify-center ${s.textSecondary} rounded-lg ${s.activeBg} hover:scale-105 transition-all duration-200`,title:"View Client Details",children:e.jsx(Ae,{className:"w-5 h-5"})}),(t?.userData?.isOnboarded||t?.isOnboarded)&&e.jsx("button",{onClick:()=>{const i=t?.id||t?._id||t?.userData?.id||t?.userData?._id;a(`/dashboard/clients/${i}?tab=employees`,{state:{client:t}})},className:`p-2 flex items-center justify-center ${s.textSecondary} rounded-lg ${s.activeBg} hover:scale-105 transition-all duration-200`,title:"View AI Employee Analytics",children:e.jsx(cs,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>be(t?.userData),className:`p-2 flex items-center justify-center ${s.textSecondary} rounded-lg ${s.activeBg} hover:scale-105 transition-all duration-200`,title:"Edit Client",children:e.jsx(Je,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>$e(t?.userData),className:"p-2 flex items-center justify-center text-red-500 rounded-lg hover:bg-red-50 hover:scale-105 transition-all duration-200",title:"Delete Client",children:e.jsx(xs,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s.textSecondary} uppercase mb-0.5`,children:"Plan"}),e.jsx("p",{className:`${s.text} font-medium text-xs md:text-sm truncate`,children:(()=>{const i=t?.userData?.onboarding?.plan_type||t?.plan_details?.type,l=Se.find(p=>p.apiKey===i);return l?`${l.name} (${l.price})`:i||"No plan"})()})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s.textSecondary} uppercase`,children:"Company"}),e.jsx("p",{className:`${s.text} font-medium text-sm`,children:t?.userData?.onboarding?.company_name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s.textSecondary} uppercase`,children:"Email"}),e.jsx("p",{className:`${s.text} font-medium text-sm truncate`,children:t?.userData?.onboarding?.company_email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${s.textSecondary} uppercase`,children:"AI Employees"}),e.jsx("p",{className:`${s.text} font-medium text-sm`,children:t?.userData?.onboarding?.ai_employee_count||(t?.ai_employees||[]).length})]})]})]},t.id))}),Q>1&&e.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 md:gap-3 mt-4 md:mt-6 p-3 md:p-4 rounded-lg ${s.searchBg}`,children:[e.jsxs("div",{className:`text-xs md:text-sm ${s.textSecondary} text-center sm:text-left`,children:["Showing"," ",((M?.page||E)-1)*(M?.limit||Y)+1," ","to"," ",Math.min((M?.page||E)*(M?.limit||Y),M?.total||T)," ","of ",M?.total||T]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:Ye,disabled:E===1,className:`px-2.5 md:px-3 py-1.5 text-xs md:text-sm rounded-md transition-all duration-200 ${E===1?`${s.textSecondary} cursor-not-allowed opacity-50`:`${s.text} ${s.hover} hover:scale-105`}`,children:"Previous"}),e.jsxs("span",{className:`mx-2 md:mx-3 text-xs md:text-sm ${s.text}`,children:[M?.page||E,"/",M?.totalPages||Q]}),e.jsx("button",{onClick:ue,disabled:E===Q,className:`px-2.5 md:px-3 py-1.5 text-xs md:text-sm rounded-md transition-all duration-200 ${E===Q?`${s.textSecondary} cursor-not-allowed opacity-50`:`${s.text} ${s.hover} hover:scale-105`}`,children:"Next"})]})]})]})]})};export{Zs as AIEmployeesTab,qs as AgentDetailsView,Xs as ClientDetailsTab,Js as OnboardingDataTab,Ts as TransactionsTab,ea as default};
