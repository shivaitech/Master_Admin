import{j as s,f as _,B as Us,g as Ms,R as Rs,h as A,s as C,i as Ps,D as bs,I as Fs,k as zs,m as Os,z as S,A as Ws,o as hs,p as us,q as J,r as Vs,P as I,t as Hs,S as Gs,v as Ks,w as Ys,x as qs,V as Xs,y as Js,G as Qs,H as Zs,L as ys,U as fs,c as Ts,J as se,C as ee,K as ae,e as te}from"./admin-CXI7OwYX.js";import{r as o}from"./router-C-JlvvJt.js";import{n as js,e as le,r as ie}from"./index-Dfj_MLPr.js";const de=[{value:"sales-business-development",label:"Sales & Business Development"},{value:"customer-support-service",label:"Customer Support & Service"},{value:"appointment-scheduling",label:"Appointment & Scheduling"},{value:"order-billing",label:"Order Management & Billing"},{value:"product-service-explainers",label:"Product / Service Explainers"},{value:"feedback-engagement",label:"Feedback & Engagement"},{value:"custom-workflows",label:"Custom Workflows"}],ne=[{value:"All",label:"ðŸŒ Multilingual"},{value:"ar",label:"ðŸ‡¸ðŸ‡¦ Arabic"},{value:"zh",label:"ðŸ‡¨ðŸ‡³ Chinese"},{value:"nl",label:"ðŸ‡³ðŸ‡± Dutch"},{value:"en-GB",label:"ðŸ‡¬ðŸ‡§ English (UK)"},{value:"en-US",label:"ðŸ‡ºðŸ‡¸ English (US)"},{value:"en-IN",label:"ðŸ‡®ðŸ‡³ English (India)"},{value:"fr",label:"ðŸ‡«ðŸ‡· French"},{value:"de",label:"ðŸ‡©ðŸ‡ª German"},{value:"hi",label:"ðŸ‡®ðŸ‡³ Hindi"},{value:"it",label:"ðŸ‡®ðŸ‡¹ Italian"},{value:"ja",label:"ðŸ‡¯ðŸ‡µ Japanese"},{value:"ko",label:"ðŸ‡°ðŸ‡· Korean"},{value:"pt",label:"ðŸ‡µðŸ‡¹ Portuguese"},{value:"pl",label:"ðŸ‡µðŸ‡± Polish"},{value:"ru",label:"ðŸ‡·ðŸ‡º Russian"},{value:"es",label:"ðŸ‡ªðŸ‡¸ Spanish"},{value:"tr",label:"ðŸ‡¹ðŸ‡· Turkish"}],ue=({client:t,currentTheme:a,clientId:e})=>{const[d,N]=o.useState(null),[$,v]=o.useState(!0),[x,j]=o.useState(null);return o.useEffect(()=>{(async()=>{try{v(!0),j(null);const m=await C.getOnboardingByUserId(e);console.log("âœ… Onboarding data fetched:",m);const g=m?.data?.onboarding||m?.onboarding||m?.data||m;N(g)}catch(m){console.error("âŒ Error fetching onboarding data:",m),j(m.message||"Failed to load onboarding data")}finally{v(!1)}})()},[t]),$?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:`mt-2 text-sm ${a.textSecondary}`,children:"Loading onboarding data..."})]})}):x?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(_,{className:`w-5 h-5 mx-auto mb-3 ${a.textSecondary} opacity-50`}),s.jsx("p",{className:`${a.textSecondary} font-medium mb-2`,children:"Error loading onboarding data"}),s.jsx("p",{className:`${a.textSecondary} text-sm opacity-75`,children:x})]}):(console.warn("ðŸ“‹ Onboarding Data:",d),s.jsx("div",{className:"space-y-4 md:space-y-6",children:!d||d?.onboarding===null||Object.keys(d).length===0?s.jsxs("div",{className:`text-center py-8 rounded-lg border-2 border-dashed ${a.border}`,children:[s.jsx(_,{className:`w-5 h-5 mx-auto mb-3 ${a.textSecondary} opacity-50`}),s.jsx("p",{className:`${a.textSecondary} font-medium mb-2`,children:"No onboarding data available"}),s.jsx("p",{className:`${a.textSecondary} text-sm opacity-75`,children:"This client hasn't completed the onboarding process yet"})]}):s.jsxs("div",{className:"space-y-6",children:[d.company_basics&&s.jsxs("div",{className:`${a.cardBg} border ${a.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[s.jsxs("h4",{className:`text-base md:text-lg font-semibold ${a.text} mb-3 md:mb-4 flex items-center gap-2`,children:[s.jsx(Us,{className:"w-5 h-5"}),"Company Basics"]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:[d.company_basics.name&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Company Name"}),s.jsx("p",{className:`${a.text} font-medium`,children:d.company_basics.name})]}),d.company_basics.company_email&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Company Email"}),s.jsx("p",{className:`${a.text} font-medium`,children:d.company_basics.company_email})]}),d.company_basics.company_phone&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Phone"}),s.jsx("p",{className:`${a.text} font-medium`,children:d.company_basics.company_phone})]}),d.company_basics.website&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Website"}),s.jsx("p",{className:`${a.text} font-medium`,children:s.jsx("a",{href:d.company_basics.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:d.company_basics.website})})]}),d.company_basics.company_size&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Company Size"}),s.jsx("p",{className:`${a.text} font-medium`,children:d.company_basics.company_size})]}),d.company_basics.linkedin_profile&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"LinkedIn"}),s.jsx("p",{className:`${a.text} font-medium`,children:s.jsx("a",{href:d.company_basics.linkedin_profile,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"LinkedIn Profile"})})]})]}),d.company_basics.industry&&Array.isArray(d.company_basics.industry)&&d.company_basics.industry.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-2`,children:"Industries"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:d.company_basics.industry.map((r,m)=>s.jsx("span",{className:`border ${a.border} px-2 md:px-3 py-1 rounded-md text-xs md:text-sm font-medium capitalize ${a.text}`,children:r.replace("_"," ")},m))})]}),d.company_basics.description&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-2`,children:"Description"}),s.jsx("p",{className:`${a.text} leading-relaxed`,children:d.company_basics.description})]}),d.company_basics.address&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-2`,children:"Address"}),s.jsx("p",{className:`${a.text} leading-relaxed`,children:d.company_basics.address})]})]}),d.plan_details&&s.jsxs("div",{className:`${a.cardBg} border ${a.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[s.jsxs("h4",{className:`text-base md:text-lg font-semibold ${a.text} mb-3 md:mb-4 flex items-center gap-2`,children:[s.jsx(Ms,{className:"w-5 h-5"}),"Plan Details"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[d.plan_details.type&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Plan Type"}),s.jsx("p",{className:`${a.text} font-medium`,children:d.plan_details.type})]}),d.plan_details.billing_contact&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-2`,children:"Billing Contact"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[d.plan_details.billing_contact.name&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Name"}),s.jsx("p",{className:`${a.text} font-medium`,children:d.plan_details.billing_contact.name})]}),d.plan_details.billing_contact.email&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Email"}),s.jsx("p",{className:`${a.text} font-medium`,children:d.plan_details.billing_contact.email})]})]})]})]})]}),d.deployment_targets&&s.jsxs("div",{className:`${a.cardBg} border ${a.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[s.jsxs("h4",{className:`text-base md:text-lg font-semibold ${a.text} mb-3 md:mb-4 flex items-center gap-2`,children:[s.jsx(Rs,{className:"w-5 h-5"}),"Deployment Targets"]}),d.deployment_targets.channels&&Array.isArray(d.deployment_targets.channels)&&d.deployment_targets.channels.length>0&&s.jsxs("div",{className:"mb-3 md:mb-4",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-2`,children:"Deployment Channels"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:d.deployment_targets.channels.map((r,m)=>s.jsx("span",{className:`border ${a.border} px-2 md:px-3 py-1 rounded-md text-xs md:text-sm font-medium capitalize ${a.text}`,children:r.replace("_"," ")},m))})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[d.deployment_targets.website_url&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Website URL"}),s.jsx("p",{className:`${a.text} font-medium`,children:s.jsx("a",{href:d.deployment_targets.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:d.deployment_targets.website_url})})]}),d.deployment_targets.whatsapp_phone&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"WhatsApp Phone"}),s.jsx("p",{className:`${a.text} font-medium`,children:d.deployment_targets.whatsapp_phone})]}),d.deployment_targets.support_email&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Support Email"}),s.jsx("p",{className:`${a.text} font-medium`,children:d.deployment_targets.support_email})]})]})]}),d.ai_employees&&Array.isArray(d.ai_employees)&&d.ai_employees.length>0&&s.jsxs("div",{className:`${a.cardBg} border ${a.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[s.jsxs("h4",{className:`text-base md:text-lg font-semibold ${a.text} mb-3 md:mb-4 flex items-center gap-2`,children:[s.jsx(A,{className:"w-5 h-5"}),"AI Employees (",d.ai_employees.length,")"]}),s.jsx("div",{className:"space-y-3 md:space-y-4",children:d.ai_employees.map((r,m)=>s.jsxs("div",{className:`border ${a.border} rounded-lg p-3 md:p-4 ${a.searchBg}`,children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-lg border ${a.border} flex items-center justify-center`,children:s.jsx(A,{className:`w-5 h-5 ${a.textSecondary}`})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h5",{className:`font-medium ${a.text} truncate`,children:r?.name||`AI Employee #${m+1}`}),s.jsx("p",{className:`text-xs ${a.textSecondary} truncate`,children:r?.template||r?.type||"Custom Agent"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 text-sm",children:[r?.template&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Template"}),s.jsx("p",{className:`${a.text}`,children:de.find(g=>g.value===r.template)?.label||r.template})]}),r?.preferred_language&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Language"}),s.jsx("p",{className:`${a.text}`,children:r.preferred_language})]}),r?.agent_personality&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Personality"}),s.jsx("p",{className:`${a.text} capitalize`,children:r.agent_personality})]}),r?.voice_gender&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Voice"}),s.jsxs("p",{className:`${a.text}`,children:[r.voice_gender," -"," ",r.voice_style||"Default"]})]})]}),r?.special_instructions&&s.jsxs("div",{className:"mt-3",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Special Instructions"}),s.jsx("p",{className:`${a.text} text-sm leading-relaxed`,children:r.special_instructions})]}),r?.targets?.success_metrics&&s.jsxs("div",{className:"mt-3",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Success Metrics"}),s.jsx("p",{className:`${a.text} text-sm leading-relaxed`,children:r.targets.success_metrics})]}),r?.knowledge_sources&&s.jsxs("div",{className:"mt-3",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-2`,children:"Knowledge Sources"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[r.knowledge_sources.website_url&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Website URL"}),s.jsx("p",{className:`${a.text}`,children:s.jsx("a",{href:r.knowledge_sources.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:r.knowledge_sources.website_url})})]}),r.knowledge_sources.faqs_text&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"FAQs Text"}),s.jsxs("p",{className:`${a.text}`,children:[r.knowledge_sources.faqs_text.substring(0,100),r.knowledge_sources.faqs_text.length>100?"...":""]})]})]})]}),r?.workflows&&Array.isArray(r.workflows)&&r.workflows.length>0&&s.jsxs("div",{className:"mt-3",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-2`,children:"Workflows"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:r.workflows.map((g,c)=>s.jsx("span",{className:`border ${a.border} px-2 py-1 rounded-md text-xs font-medium ${a.text}`,children:g.name},c))})]})]},m))})]})]})}))},fe=({client:t,currentTheme:a,clientId:e})=>{const[d,N]=o.useState(null),[$,v]=o.useState(!1),[x,j]=o.useState(null),r=d||t?.userData||t||{},m=r?.company_basics||t?.company_basics||{},g=()=>t?.isApproved||r?.isApproved?"Approved":t?.isRejected||r?.isRejected?"Rejected":r?.isActive?"Active":"Pending";return o.useEffect(()=>{(async()=>{if(e)try{v(!0),j(null);const p=await C.getClientByUserId(e);console.log("âœ… Client data fetched:",p);const w=p?.data?.user||p?.user||p;N(w)}catch(p){console.error("âŒ Error fetching client data:",p),j(p.message||"Failed to load client data")}finally{v(!1)}})()},[e]),$?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):x?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-red-500 text-sm",children:x})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:[s.jsxs("div",{className:"py-2 border-b border-gray-100",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Full Name"}),s.jsx("p",{className:`text-sm ${a.text}`,children:r?.fullName||r?.name||m?.name||"â€”"})]}),s.jsxs("div",{className:"py-2 border-b border-gray-100",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Email"}),s.jsx("p",{className:`text-sm ${a.text}`,children:r?.email||m?.company_email||"â€”"})]}),s.jsxs("div",{className:"py-2 border-b border-gray-100",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Status"}),s.jsx("p",{className:`text-sm ${a.text}`,children:g()})]}),s.jsxs("div",{className:"py-2 border-b border-gray-100",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Email Verified"}),s.jsx("p",{className:`text-sm ${a.text}`,children:r?.emailVerified?"Yes":"No"})]}),s.jsxs("div",{className:"py-2 border-b border-gray-100",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Onboarded"}),s.jsx("p",{className:`text-sm ${a.text}`,children:r?.isOnboarded?"Yes":"No"})]}),s.jsxs("div",{className:"py-2 border-b border-gray-100",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Created"}),s.jsx("p",{className:`text-sm ${a.text}`,children:r?.createdAt?new Date(r.createdAt).toLocaleDateString():"â€”"})]}),s.jsxs("div",{className:"py-2 border-b border-gray-100",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Last Login"}),s.jsx("p",{className:`text-sm ${a.text}`,children:r?.lastLoginAt?new Date(r.lastLoginAt).toLocaleDateString():"â€”"})]})]}),(r?.address||m?.company_address)&&s.jsxs("div",{className:"py-2",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Company Address"}),s.jsx("p",{className:`text-sm ${a.text}`,children:r?.address||m?.company_address})]})]})},je=({client:t,currentTheme:a,onViewAgent:e,clientId:d})=>{const[N,$]=o.useState([]),[v,x]=o.useState(!0),[j,r]=o.useState(null);o.useEffect(()=>{(async()=>{try{x(!0),r(null);const c=await C.getAgentsById(d);console.log("âœ… AI employees fetched:",c);let p=[];c?.success&&c?.data?p=c.data:Array.isArray(c)?p=c:c?.agents?p=c.agents:p=t?.ai_employees||t?.userData?.ai_employees||[],Array.isArray(p)||(p=[]),console.log("ðŸ“‹ Processed AI employees data:",p),$(p)}catch(c){console.error("âŒ Error fetching AI employees:",c),r(c.message||"Failed to load AI employees");const p=t?.ai_employees||t?.userData?.ai_employees||[];Array.isArray(p)&&p.length>0&&(console.log("ðŸ“‹ Using fallback AI employees data"),$(p),r(null))}finally{x(!1)}})()},[t]);const m=g=>{if(!g||typeof g!="object")return"English";const c=Object.keys(g);if(c.length===1&&c[0]==="en")return"English";if(c.length>1)return"Multilingual";const p=c[0],w=ne.find(h=>h.value===p);return w?w.label:"English"};return v?s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-gray-300 border-t-gray-600 mx-auto"}),s.jsx("p",{className:`mt-3 text-sm ${a.textSecondary}`,children:"Loading..."})]})}):j?s.jsx("div",{className:"text-center py-16",children:s.jsx("p",{className:`${a.textSecondary} text-sm`,children:j})}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between pb-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(A,{className:"w-4 h-4 text-gray-500"}),s.jsxs("span",{className:`text-sm font-medium ${a.text}`,children:["AI Employees (",N.length,")"]})]})}),N.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(A,{className:"w-8 h-8 mx-auto mb-3 text-gray-400"}),s.jsx("p",{className:`text-sm ${a.textSecondary}`,children:"No AI employees configured"})]}):s.jsx("div",{className:"space-y-3",children:N.map((g,c)=>s.jsxs("div",{className:`border ${a.border} rounded-lg p-4 hover:border-gray-300 transition-colors`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-9 h-9 rounded-lg border border-gray-200 flex items-center justify-center",children:s.jsx(A,{className:"w-4 h-4 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h4",{className:`text-sm font-medium ${a.text}`,children:g.name||g.agent_name||`AI Employee #${c+1}`}),s.jsx("p",{className:`text-xs ${a.textSecondary}`,children:g.template||g.type||"sales-business-development"})]})]}),e&&s.jsxs("button",{onClick:()=>e(g),className:`flex items-center gap-1 text-xs ${a.textSecondary} hover:text-gray-700 transition-colors`,children:[s.jsx("span",{children:"View"}),s.jsx(Ps,{className:"w-3 h-3"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-0.5`,children:"Template"}),s.jsx("p",{className:`text-sm ${a.text}`,children:g.template||"Sales"})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-0.5`,children:"Language"}),s.jsx("p",{className:`text-sm ${a.text}`,children:m(g.greeting_message)})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-0.5`,children:"Personality"}),s.jsx("p",{className:`text-sm ${a.text} capitalize`,children:g.personality||"â€”"})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-0.5`,children:"Voice"}),s.jsx("p",{className:`text-sm ${a.text} capitalize`,children:g.voice||"â€”"})]})]})]},g._id||g.id||c))})]})},ye=({client:t,currentTheme:a})=>{const e=[{id:1,date:"2024-12-01",amount:149,type:"subscription",status:"completed",description:"Monthly subscription"},{id:2,date:"2024-11-01",amount:149,type:"subscription",status:"completed",description:"Monthly subscription"},{id:3,date:"2024-10-15",amount:50,type:"usage",status:"completed",description:"Additional tokens"}];return s.jsx("div",{className:"space-y-4",children:e.length===0?s.jsxs("div",{className:`text-center py-12 rounded-xl ${a.cardBg} border ${a.cardBorder}`,children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 flex items-center justify-center",children:s.jsx(bs,{className:`w-8 h-8 ${a.textSecondary}`})}),s.jsx("h4",{className:`text-lg font-medium ${a.text} mb-2`,children:"No Transactions"}),s.jsx("p",{className:`${a.textSecondary} text-sm`,children:"No transaction history available for this client."})]}):s.jsx("div",{className:"grid gap-3",children:e.map(d=>s.jsx("div",{className:`${a.cardBg} rounded-xl border ${a.cardBorder} p-4 hover:shadow-sm transition-shadow`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-50 dark:bg-gray-800/50 flex items-center justify-center",children:s.jsx(bs,{className:"w-5 h-5 text-gray-900"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:`font-medium ${a.text}`,children:["$",d.amount.toFixed(2)]}),s.jsx("p",{className:`text-sm ${a.textSecondary}`,children:d.description})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:`text-sm ${a.textSecondary} mb-1`,children:new Date(d.date).toLocaleDateString("en-US",{month:"short",day:"2-digit"})}),s.jsx("p",{className:`text-xs font-medium ${d.status==="completed"?"text-green-600 dark:text-green-400":d.status==="pending"?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:d.status})]})]})},d.id))})})},re=({agent:t,onBack:a,currentTheme:e,onClose:d})=>{console.log("Agent/Client data:",t),console.log("Agent ID fields from client:",{client_id:t?.id||t?._id,userData_id:t?.userData?.id||t?.userData?._id,agent_id_from_client:t?.agent_id||t?.agentId,userData_agent_id:t?.userData?.agent_id||t?.userData?.agentId,direct_fields:{id:t?.id,_id:t?._id,agent_id:t?.agent_id,agentId:t?.agentId}});const N=t?.id||t?._id||t?.userData?.id||t?.userData?._id||t?.agent_id||t?.agentId||t?.userData?.agent_id||t?.userData?.agentId;console.log("Extracted Agent ID:",N);const $=t?.name||t?.agent_name||t?.userData?.name||t?.userData?.agent_name||t?.company_name||t?.companyName||"AI Assistant";console.log("Extracted Agent Name:",$);const v=()=>{const c=new Set;t?.greeting_messages&&typeof t.greeting_messages=="object"&&Object.keys(t.greeting_messages).forEach(h=>{h!=="multilingual"&&t.greeting_messages[h]&&t.greeting_messages[h].trim()!==""&&c.add(h)}),t?.userData?.greeting_messages&&typeof t.userData.greeting_messages=="object"&&Object.keys(t.userData.greeting_messages).forEach(h=>{h!=="multilingual"&&t.userData.greeting_messages[h]&&t.userData.greeting_messages[h].trim()!==""&&c.add(h)}),[t?.language,t?.preferred_language,t?.userData?.language,t?.userData?.preferred_language].filter(Boolean).forEach(h=>c.add(h)),t?.languages&&Array.isArray(t.languages)&&t.languages.forEach(h=>{h&&c.add(h)}),t?.userData?.languages&&Array.isArray(t.userData.languages)&&t.userData.languages.forEach(h=>{h&&c.add(h)});const w=Array.from(c).filter(h=>h&&h.trim()!=="");return w.length>1?"Multi lingual":w.length===1?w[0].toUpperCase():"EN"},x={agentId:N||"NO_AGENT_ID_FOUND",agentName:$,language:v(),primaryColor:t?.widget?.primary_color||t?.userData?.primary_color||"#4b5563",secondaryColor:t?.widget?.secondary_color||t?.userData?.secondary_color||"#6b7280",accentColor:t?.widget?.accent_color||t?.userData?.accent_color||"#374151",position:"bottom-right",chatWidth:"380px",chatHeight:"520px",autoOpen:!1,voiceEnabled:t?.voice,companyName:t?.widget?.company_name||$,companyDescription:t?.description||t?.company_description||t?.userData?.description||t?.userData?.company_description||"AI-Powered Support - We offer 24/7 voice support to handle your business calls efficiently and professionally.",allowedDomains:t?.allowed_domains||t?.userData?.allowed_domains||["*"]},j=o.useRef(null),r=()=>{const c="https://callshivai.com/widget2.js",p=new URLSearchParams({agentId:x.agentId,language:x.language,primaryColor:x.primaryColor,secondaryColor:x.secondaryColor,accentColor:x.accentColor,position:x.position,chatWidth:x.chatWidth,chatHeight:x.chatHeight,autoOpen:x.autoOpen.toString(),voiceEnabled:x.voiceEnabled.toString(),companyName:x.companyName,companyDescription:x.companyDescription,allowedDomains:x.allowedDomains.join(","),v:Date.now().toString()});return`${c}?${p.toString()}`};console.log("Generated Widget URL:",x,t);const m=()=>{const c=r(),p=v();return`
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent Preview</title>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            color: #334155;
            overflow: hidden;
        }
        * {
            box-sizing: border-box;
        }
        .dashboard {
            height: calc(100vh - 32px);
            display: grid;
            grid-template-rows: auto 1fr;
            gap: 12px;
        }
        .header {
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            text-align: center;
        }
        .agent-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 4px;
        }
        .agent-id {
            font-size: 0.75rem;
            color: #64748b;
            font-family: 'Monaco', 'Menlo', monospace;
            background: #f1f5f9;
            padding: 2px 8px;
            border-radius: 4px;
            display: inline-block;
        }
        .content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
            height: 100%;
        }
        .card {
            background: white;
            border-radius: 6px;
            padding: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: auto;
        }
        .card-title {
            font-size: 1rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 8px;
        }
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 8px;
            margin-top: 12px;
        }
        .info-item {
            background: #f8fafc;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #e2e8f0;
            text-align: left;
        }
        .info-label {
            font-size: 0.65rem;
            color: #64748b;
            text-transform: uppercase;
            font-weight: 500;
            margin-bottom: 4px;
        }
        .info-value {
            font-size: 0.8rem;
            color: #1e293b;
            font-weight: 500;
        }
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 500;
        }
        .status-active {
            background: #dcfce7;
            color: #166534;
        }
        .status-inactive {
            background: #fee2e2;
            color: #991b1b;
        }
        .color-preview {
            width: 14px;
            height: 14px;
            border-radius: 2px;
            display: inline-block;
            margin-left: 6px;
            border: 1px solid #e2e8f0;
            vertical-align: middle;
        }
        .description {
            font-size: 0.85rem;
            line-height: 1.4;
            color: #475569;
            background: #f1f5f9;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 12px;
        }
        .message-box {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 6px;
            padding: 12px;
        }
        .message-text {
            font-size: 0.85rem;
            color: #1e40af;
            line-height: 1.4;
        }

        /* Mobile adjustments */
        @media (max-width: 768px) {
            .info-grid {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
                gap: 6px;
            }
            .info-item {
                padding: 6px;
            }
            .card {
                padding: 0px 8px;
                border: none;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
      
        
        <div class="content">
            <div class="card">
                ${`<div class="description">${x.agentName}</div>`}
                ${`<div class="description">${x.companyDescription}</div>`}
                
                <div class="info-grid">
                    <div class="info-item">
                        <div class="info-label">Status</div>
                        <div class="info-value">
                            <span class="status-badge ${t?.is_active!==!1?"status-active":"status-inactive"}">
                                ${t?.is_active!==!1?"Active":"Inactive"}
                            </span>
                        </div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Language</div>
                        <div class="info-value">${p}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Voice</div>
                        <div class="info-value">${x.voiceEnabled?"Enabled":"Disabled"}</div>
                    </div>
                   
                    <div class="info-item">
                        <div class="info-label">Position</div>
                        <div class="info-value">${x.position}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Dimensions</div>
                        <div class="info-value">${x.chatWidth} Ã— ${x.chatHeight}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Primary Color</div>
                        <div class="info-value">
                            ${x.primaryColor}
                            <span class="color-preview" style="background-color: ${x.primaryColor}"></span>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 16px;">
                    <h3 style="font-size: 0.9rem; font-weight: 600; margin-bottom: 8px; color: #1e293b;">Allowed Domains</h3>
                    <div class="message-box">
                        <div class="message-text">
                            ${t?.allowed_domains&&t.allowed_domains.length>0?t.allowed_domains.join(", "):t?.userData?.allowed_domains&&t.userData.allowed_domains.length>0?t.userData.allowed_domains.join(", "):"All domains allowed (*)"}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="${c}"><\/script>
</body>
</html>`},g=()=>{if(j.current){const c=m(),p=new Blob([c],{type:"text/html"}),w=URL.createObjectURL(p);j.current.src=w,j.current.onload=()=>{URL.revokeObjectURL(w)}}};return o.useEffect(()=>{g()},[]),s.jsxs("div",{className:"h-screen flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Configuration"}),s.jsxs("button",{onClick:g,className:"px-3 py-1.5 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors duration-200 flex items-center gap-2",title:"Reload Widget Script",children:[s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),s.jsx("path",{d:"M21 3v5h-5"}),s.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),s.jsx("path",{d:"M3 21v-5h5"})]}),"Load"]})]}),s.jsx("div",{className:"flex items-start justify-center flex-1 p-3",children:s.jsx("iframe",{ref:j,className:"w-full h-[70vh] lg:h-[60vh] border-0 overflow-auto",title:"Widget Preview",sandbox:"allow-scripts allow-same-origin allow-forms"})})]})},Ne=({agent:t,onBack:a,currentTheme:e})=>{if(!t)return s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:"No agent data available"}),s.jsx("button",{onClick:a,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Back to List"})]});const[d,N]=o.useState("overview"),[$,v]=o.useState([]),[x,j]=o.useState(""),[r,m]=o.useState(""),[g,c]=o.useState(!1),[p,w]=o.useState(""),[h,Q]=o.useState("en"),[Z,k]=o.useState(null),[B,T]=o.useState([]),[ss,es]=o.useState(!1),[n,as]=o.useState(null),[oe,E]=o.useState([]),[Ns,W]=o.useState(!1),[L,U]=o.useState("transcripts"),[M,V]=o.useState(null),[vs,ts]=o.useState(!1),[ls,is]=o.useState(null),[ce,xe]=o.useState({noiseSuppression:!0,echoCancellation:!0,autoGainControl:!0}),[R,P]=o.useState(!1),[H,G]=o.useState(0),[D,ds]=o.useState(0),[me,pe]=o.useState(1),[F,ns]=o.useState(!1),[rs,os]=o.useState(1),f=o.useRef(null),K=o.useRef(null),ws=o.useMemo(()=>[{id:"overview",label:"Overview",icon:Fs},{id:"test",label:"Preview",icon:zs},{id:"analytics",label:"Analytics",icon:Os},{id:"instructions",label:"Instructions",icon:_}],[]);o.useEffect(()=>{(async()=>{if(d==="analytics")try{es(!0);const i=t?.id||t?._id;if(!i){console.error("No agent ID found");return}console.log("ðŸ“‹ Fetching sessions for agent:",i);const b=await C.getAgentSessions(i);console.log("âœ… Sessions response:",b);const u=b?.sessions||b?.data?.sessions||b,y=Array.isArray(u)?u:[];T(y)}catch(i){console.error("âŒ Error fetching agent sessions:",i),S.error("Failed to load sessions"),T([])}finally{es(!1)}})()},[d,t]);const $s=async(l,i)=>{try{ts(!0),is(null),console.log("ðŸ“Š Fetching call summary for agent:",l,"callId:",i);const b=await C.getCallSummary(l);console.log("âœ… Call summary response:",b),V(b)}catch(b){console.error("âŒ Error fetching call summary:",b),is("Failed to load call summary"),V(null)}finally{ts(!1)}},Ss=()=>{f.current&&G(f.current.currentTime)},ks=()=>{f.current&&ds(f.current.duration)},_s=l=>{if(K.current&&f.current&&D>0){const i=K.current.getBoundingClientRect(),u=(l.clientX-i.left)/i.width*D;f.current.currentTime=u,G(u)}},Ds=()=>{f.current&&(R?f.current.pause():f.current.play(),P(!R))},cs=l=>{f.current&&(f.current.currentTime+=l)},As=()=>{f.current&&(f.current.muted=!F,ns(!F))},Cs=()=>{const l=[1,1.25,1.5,2],i=l.indexOf(rs),b=l[(i+1)%l.length];os(b),f.current&&(f.current.playbackRate=b)},xs=l=>l?new Date(l).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"";o.useCallback(()=>{if(!r.trim())return;c(!0);const l={role:"user",text:r.trim(),timestamp:new Date};v(i=>[...i,l]),m(""),setTimeout(()=>{const i=[`Thank you for testing! You said: "${l.text}". I'm ${t?.name||"Agent"} and I'm working correctly.`,`Test successful! As ${t?.name||"Agent"}, I received your message: "${l.text}". How can I assist you further?`,`Hello! This is ${t?.name||"Agent"}. I got your test message: "${l.text}". The agent is responding as expected.`,`Agent test complete! Your message: "${l.text}" was processed successfully by ${t?.name||"Agent"}.`],b={role:"agent",text:i[Math.floor(Math.random()*i.length)],timestamp:new Date};v(u=>[...u,b]),c(!1)},1500+Math.random()*1e3)},[r,t]);const Y=l=>l?new Date(l).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A",z=l=>{const i=Math.floor(l/60),b=Math.floor(l%60);return`${i}:${b.toString().padStart(2,"0")}`},Is=async()=>{const l=n?.recording?.url||n?.recordingUrl||n?.recording_url;if(!l){S.error("No recording available to download");return}try{S.loading("Downloading...",{id:"download-recording"});const b=await(await fetch(l)).blob(),u=window.URL.createObjectURL(b),y=document.createElement("a");y.href=u,y.download=`recording_${n.sessionId||n.callId||n.id||"audio"}.mp3`,document.body.appendChild(y),y.click(),document.body.removeChild(y),window.URL.revokeObjectURL(u),S.success("Downloaded!",{id:"download-recording"})}catch(i){console.error("Download error:",i),S.error("Failed to download recording",{id:"download-recording"})}},Bs=async()=>{const l=n?.recording?.url||n?.recordingUrl||n?.recording_url;if(!l){S.error("No recording available to share");return}const i={title:`Call Recording - ${n.session_id||n.callId||n.id||"Session"}`,text:`Listen to this call recording from ${Y(n.start_time)}`,url:l};try{navigator.share&&navigator.canShare&&navigator.canShare(i)?(await navigator.share(i),S.success("Shared successfully!")):(await navigator.clipboard.writeText(l),S.success("Recording link copied to clipboard!"))}catch(b){if(b.name!=="AbortError"){console.error("Share error:",b);try{await navigator.clipboard.writeText(l),S.success("Recording link copied to clipboard!")}catch{S.error("Failed to share recording")}}}},Es=o.useCallback(async l=>{try{if(as(l),U("transcripts"),P(!1),G(0),ds(0),os(1),ns(!1),l?.transcripts&&Array.isArray(l.transcripts))console.log("ðŸ“œ Using transcripts from session object:",l.transcripts),E(l.transcripts);else{W(!0);const u=l?.session_id||l?.id||l?._id;console.log("ðŸ“œ Fetching transcripts for session:",u);const y=await C.getSessionTranscripts(u);console.log("âœ… Transcripts response:",y);const O=y?.transcripts||y?.data||y,q=Array.isArray(O)?O:[];E(q),W(!1)}const i=l?.agentId||l?.agent_id,b=l?.callId||l?.session_id||l?.id;i&&b&&await $s(i,b)}catch(i){console.error("âŒ Error fetching session data:",i),S.error("Failed to load session data"),E([]),W(!1)}},[]),Ls=o.useCallback(()=>{as(null),E([]),V(null),U("transcripts"),P(!1),f.current&&(f.current.pause(),f.current.currentTime=0)},[]);return s.jsxs("div",{className:"space-y-4 md:space-y-6 px-2 sm:px-0",children:[s.jsx("div",{className:`${e.cardBg} border ${e.border} rounded-lg p-3 sm:p-4 md:p-6 shadow-lg`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("button",{onClick:a,className:`p-2 rounded-lg ${e.hover} ${e.text} transition-all duration-200 mt-1`,children:s.jsx(Ws,{className:"w-5 h-5"})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h1",{className:`text-xl md:text-2xl font-bold ${e.text} truncate`,children:t?.name||"Unnamed Agent"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2",children:[s.jsxs("p",{className:`text-sm ${e.textSecondary}`,children:["Agent ID:"," ",s.jsx("span",{className:"font-mono",children:t?.id||t?._id||"N/A"})]}),s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-xs font-medium border w-fit ${t?.is_active?`${e.activeBg} ${e.text} ${e.activeBorder}`:`${e.searchBg} ${e.textSecondary} ${e.border}`}`,children:t?.is_active?"Active":"Inactive"})]})]})})})]})}),s.jsxs("div",{className:`${e.cardBg} border ${e.border} rounded-lg shadow-lg`,children:[s.jsx("div",{className:"flex overflow-x-auto scrollbar-hide border-b border-gray-200 dark:border-gray-700",children:ws?.map(l=>{const i=l.icon;return s.jsx("button",{onClick:()=>N(l.id),className:`flex-shrink-0 px-4 py-3 border-b-2 transition-all duration-200 whitespace-nowrap ${d===l.id?"border-blue-500 text-blue-600 dark:text-blue-400":`border-transparent ${e.textSecondary} hover:${e.text} hover:border-gray-300 dark:hover:border-gray-600`}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(i,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:l.label})]})},l.id)})}),d==="overview"&&s.jsx("div",{className:"space-y-4 md:space-y-6",children:s.jsxs("div",{className:`${e.cardBg}  p-4 md:p-6 border ${e.border} shadow-lg`,children:[s.jsx("h3",{className:`text-lg font-semibold ${e.text} mb-4 md:mb-6`,children:"Basic Information"}),s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:`text-sm ${e.textSecondary} block mb-2 font-medium`,children:"Agent Name"}),s.jsx("p",{className:`${e.text} text-base`,children:t?.name||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`text-sm ${e.textSecondary} block mb-2 font-medium`,children:"Created By"}),s.jsx("p",{className:`${e.text} text-base font-mono text-sm`,children:t?.created_by||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`text-sm ${e.textSecondary} block mb-2 font-medium`,children:"Created Date"}),s.jsx("p",{className:`${e.text} text-base`,children:t?.created_at?new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`text-sm ${e.textSecondary} block mb-2 font-medium`,children:"Knowledge Base URL"}),t?.knowledge_base_url?s.jsx("a",{href:t.knowledge_base_url,target:"_blank",rel:"noopener noreferrer",className:`${e.text} text-base text-blue-600 dark:text-blue-400 hover:underline break-all`,children:t.knowledge_base_url}):s.jsx("p",{className:`${e.text} text-base`,children:"N/A"})]})]})]})}),d==="test"&&s.jsx(re,{agent:t,currentTheme:e}),d==="analytics"&&s.jsxs("div",{className:"space-y-6 p-3",children:[n&&s.jsx("div",{className:"fixed inset-0 -top-8 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4 backdrop-blur-sm overflow-y-auto",children:s.jsxs("div",{className:`${e.cardBg} rounded-lg sm:rounded-xl w-full max-w-3xl  max-h-[95vh] sm:max-h-[90vh] overflow-hidden shadow-2xl my-auto flex flex-col`,children:[s.jsxs("div",{className:`p-3 sm:p-4 border-b ${e.border}`,children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2 sm:mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx("div",{className:`w-7 h-7 sm:w-10 sm:h-10 ${e.activeBg} rounded-lg flex items-center justify-center flex-shrink-0`,children:s.jsx(hs,{className:`w-3.5 h-3.5 sm:w-5 sm:h-5 ${e.textSecondary}`})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:`text-sm sm:text-lg font-semibold ${e.text} truncate`,children:"Session Transcript"}),s.jsx("p",{className:`text-xs ${e.textSecondary} truncate font-mono`,children:n.session_id||n.id})]})]}),s.jsx("button",{onClick:Ls,className:`p-1 sm:p-2 ${e.textSecondary} rounded-lg ${e.hover} transition-colors flex-shrink-0`,children:s.jsx(us,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),s.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 mb-2 sm:mb-3",children:[s.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${e.searchBg} px-2 py-1.5 rounded-md`,children:[s.jsx(J,{className:`w-5 h-5 ${e.textSecondary} flex-shrink-0`}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:`text-xs ${e.textSecondary} hidden sm:block`,children:"Date & Time"}),s.jsx("span",{className:`text-xs font-medium ${e.text} truncate block`,children:Y(n.start_time)})]})]}),s.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${e.searchBg} px-2 py-1.5 rounded-md`,children:[s.jsx(Vs,{className:`w-5 h-5 ${e.textSecondary} flex-shrink-0`}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:`text-xs ${e.textSecondary} hidden sm:block`,children:"Location"}),s.jsx("span",{className:`text-xs font-medium ${e.text} truncate block`,children:(()=>{const l=n?.location||{};return[l?.city,l?.country].filter(i=>i&&i!=="unknown").join(", ")||"Unknown"})()})]})]}),s.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${e.searchBg} px-2 py-1.5 rounded-md`,children:[s.jsx(J,{className:`w-5 h-5 ${e.textSecondary} flex-shrink-0`}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:`text-xs ${e.textSecondary} hidden sm:block`,children:"Duration"}),s.jsx("span",{className:`text-xs font-medium ${e.text} truncate block`,children:(()=>{const l=n?.duration_seconds||0;return l>0?`${Math.floor(l/60)}m ${Math.floor(l%60)}s`:n?.duration||"0s"})()})]})]}),s.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${e.searchBg} px-2 py-1.5 rounded-md`,children:[s.jsx(I,{className:`w-5 h-5 ${e.textSecondary} flex-shrink-0`}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:`text-xs ${e.textSecondary} hidden sm:block`,children:"Device"}),s.jsx("span",{className:`text-xs font-medium ${e.text} truncate block`,children:n.device?.deviceType||n.device?.device_type||"Unknown"})]})]})]}),s.jsxs("div",{className:`flex gap-1 p-1 ${e.searchBg} rounded-lg`,children:[s.jsxs("button",{onClick:()=>U("transcripts"),className:`flex-1 px-3 py-2 text-xs sm:text-sm font-medium rounded-md transition-all duration-200 ${L==="transcripts"?`${e.cardBg} ${e.text} shadow-sm`:`${e.textSecondary} hover:${e.text}`}`,children:[s.jsx(hs,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 inline mr-1.5"}),"Call Transcripts"]}),s.jsxs("button",{onClick:()=>U("summary"),className:`flex-1 px-3 py-2 text-xs sm:text-sm font-medium rounded-md transition-all duration-200 ${L==="summary"?`${e.cardBg} ${e.text} shadow-sm`:`${e.textSecondary} hover:${e.text}`}`,children:[s.jsx(_,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 inline mr-1.5"}),"Recording & Summary"]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4",children:[L==="transcripts"&&s.jsxs(s.Fragment,{children:[(n.token_usage||n.tokenUsage)&&s.jsxs("div",{className:`px-3 sm:px-4 py-3 mb-3 ${e.searchBg} rounded-lg`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Hs,{className:`w-5 h-5 ${e.text}`}),s.jsx("h4",{className:`text-sm sm:text-base font-semibold ${e.text}`,children:"Token Usage"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4",children:[s.jsxs("div",{className:`${e.cardBg} rounded-lg p-2 sm:p-3 border ${e.border}`,children:[s.jsx("p",{className:`text-xs ${e.textSecondary} mb-1`,children:"Input"}),s.jsx("p",{className:`text-lg sm:text-xl font-bold ${e.text}`,children:((n.token_usage||n.tokenUsage)?.input_tokens||(n.token_usage||n.tokenUsage)?.inputTokens||0).toLocaleString()})]}),s.jsxs("div",{className:`${e.cardBg} rounded-lg p-2 sm:p-3 border ${e.border}`,children:[s.jsx("p",{className:`text-xs ${e.textSecondary} mb-1`,children:"Output"}),s.jsx("p",{className:`text-lg sm:text-xl font-bold ${e.text}`,children:((n.token_usage||n.tokenUsage)?.output_tokens||(n.token_usage||n.tokenUsage)?.outputTokens||0).toLocaleString()})]}),s.jsxs("div",{className:`${e.cardBg} rounded-lg p-2 sm:p-3 border ${e.border}`,children:[s.jsx("p",{className:`text-xs ${e.textSecondary} mb-1`,children:"Total"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-blue-600",children:((n.token_usage||n.tokenUsage)?.total_tokens||(n.token_usage||n.tokenUsage)?.totalTokens||0).toLocaleString()})]})]})]}),s.jsxs("div",{className:`${e.searchBg} p-3 sm:p-4 rounded-lg`,children:[s.jsx("h3",{className:`text-sm sm:text-base font-semibold ${e.text} mb-3`,children:"Conversation Transcript"}),s.jsx("div",{className:"space-y-1 max-h-[250px] sm:max-h-[400px] overflow-y-auto",children:n.transcripts&&n.transcripts.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:`text-xs sm:text-sm ${e.textSecondary} mb-2`,children:["Conversation started at"," ",Y(n.start_time)]}),n.transcripts.map((l,i)=>s.jsx("div",{className:"flex flex-col gap-1.5 py-1.5 sm:py-2",children:l.speaker==="ai"||l.role==="agent"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-start mb-1",children:s.jsxs("span",{className:`text-xs ${e.textSecondary}`,children:["SHIVAI ASSISTANT â€¢"," ",xs(l.timestamp)]})}),s.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2",children:[s.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:s.jsx(A,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})}),s.jsx("div",{className:`max-w-[80%] ${e.cardBg} rounded-2xl rounded-tl-sm px-3 py-2 sm:px-4 sm:py-3 border ${e.border}`,children:s.jsx("p",{className:`text-xs sm:text-sm ${e.text}`,children:l.message||l.text})})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-end mb-1",children:s.jsxs("span",{className:`text-xs ${e.textSecondary}`,children:["CUSTOMER â€¢"," ",xs(l.timestamp)]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx("div",{className:"flex flex-col items-end max-w-[80%]",children:s.jsx("div",{className:"rounded-2xl rounded-tr-sm px-3 py-2 sm:px-4 sm:py-3 bg-gradient-to-br from-blue-500 to-blue-600",children:s.jsx("p",{className:"text-xs sm:text-sm text-white",children:l.message||l.text})})})})]})},i)),s.jsxs("p",{className:`text-xs ${e.textSecondary} mt-3 flex items-center gap-1`,children:[s.jsx(J,{className:"w-5 h-5"}),"Session ended â€¢ Resolution:"," ",n.resolution]})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(_,{className:`w-10 h-10 sm:w-12 sm:h-12 ${e.textSecondary} mx-auto mb-3`}),s.jsx("p",{className:`text-xs sm:text-sm ${e.textSecondary}`,children:"No transcripts available for this session"})]})})]})]}),L==="summary"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:`${e.searchBg} p-3 sm:p-4 rounded-lg`,children:[s.jsxs("h3",{className:`text-sm sm:text-base font-semibold ${e.text} mb-3 flex items-center gap-2`,children:[s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"})}),"Call Recording"]}),s.jsxs("div",{className:`${e.cardBg} p-4 rounded-xl border ${e.border}`,children:[s.jsx("audio",{ref:f,onTimeUpdate:Ss,onLoadedMetadata:ks,onEnded:()=>P(!1),src:n?.recording?.url||n?.recordingUrl||n?.recording_url||"#"}),s.jsx("div",{ref:K,onClick:_s,className:`relative h-1 ${e.border} rounded-full cursor-pointer mb-2`,style:{backgroundColor:e==="dark"?"#334155":"#cbd5e1"},children:s.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-600 rounded-full transition-all",style:{width:`${D>0?H/D*100:0}%`}})}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-2 sm:gap-3",children:[s.jsx("span",{className:`hidden sm:block text-xs ${e.textSecondary} w-10`,children:z(H)}),s.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2 w-full sm:w-auto",children:[s.jsx("span",{className:`sm:hidden text-[10px] ${e.textSecondary} min-w-[32px]`,children:z(H)}),s.jsx("button",{onClick:()=>cs(-10),className:`p-1 sm:p-1.5 hover:${e.searchBg} rounded transition-colors`,title:"Rewind 10s",children:s.jsx(Gs,{className:`w-3.5 h-3.5 sm:w-5 sm:h-5 ${e.textSecondary}`})}),s.jsx("button",{onClick:Ds,className:"p-1.5 sm:p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-colors",title:R?"Pause":"Play",children:R?s.jsx(Ks,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5",fill:"currentColor"}):s.jsx(Ys,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 ml-0.5",fill:"currentColor"})}),s.jsx("button",{onClick:()=>cs(10),className:`p-1 sm:p-1.5 hover:${e.searchBg} rounded transition-colors`,title:"Forward 10s",children:s.jsx(qs,{className:`w-3.5 h-3.5 sm:w-5 sm:h-5 ${e.textSecondary}`})}),s.jsxs("button",{onClick:Cs,className:`px-1.5 sm:px-2 py-0.5 sm:py-1 hover:${e.searchBg} rounded transition-colors text-[10px] sm:text-xs ${e.textSecondary}`,title:"Playback speed",children:[rs,"x"]}),s.jsx("button",{onClick:As,className:`hidden xs:block p-1 sm:p-1.5 hover:${e.searchBg} rounded transition-colors`,title:F?"Unmute":"Mute",children:F?s.jsx(Xs,{className:`w-3.5 h-3.5 sm:w-5 sm:h-5 ${e.textSecondary}`}):s.jsx(Js,{className:`w-3.5 h-3.5 sm:w-5 sm:h-5 ${e.textSecondary}`})}),s.jsx("button",{onClick:Is,className:`p-1 sm:p-1.5 hover:${e.searchBg} rounded transition-colors`,title:"Download recording",disabled:!(n?.recording?.url||n?.recordingUrl||n?.recording_url),children:s.jsx(Qs,{className:`w-3.5 h-3.5 sm:w-5 sm:h-5 ${n?.recording?.url||n?.recordingUrl||n?.recording_url?e.textSecondary:"opacity-50 cursor-not-allowed"}`})}),s.jsx("button",{onClick:Bs,className:`p-1 sm:p-1.5 hover:${e.searchBg} rounded transition-colors`,title:"Share recording",disabled:!(n?.recording?.url||n?.recordingUrl||n?.recording_url),children:s.jsx(Zs,{className:`w-3.5 h-3.5 sm:w-5 sm:h-5 ${n?.recording?.url||n?.recordingUrl||n?.recording_url?e.textSecondary:"opacity-50 cursor-not-allowed"}`})}),s.jsx("span",{className:`sm:hidden text-[10px] ${e.textSecondary} min-w-[32px] text-right`,children:z(D||0)})]}),s.jsx("span",{className:`hidden sm:block text-xs ${e.textSecondary} w-10 text-right`,children:z(D||0)})]})]})]}),s.jsxs("div",{className:`${e.searchBg} p-3 sm:p-4 rounded-lg`,children:[s.jsxs("h3",{className:`text-sm sm:text-base font-semibold ${e.text} mb-3 flex items-center gap-2`,children:[s.jsx(_,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Call Summary"]}),vs?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(ys,{className:"w-6 h-6 text-blue-500 animate-spin"})}):ls?s.jsxs("div",{className:"text-center py-6",children:[s.jsx(us,{className:`w-10 h-10 ${e.textSecondary} mx-auto mb-2`}),s.jsx("p",{className:`text-xs sm:text-sm ${e.textSecondary}`,children:ls})]}):M?.data?.leads&&M.data.leads.length>0?(()=>{const l=M.data.leads.filter(i=>i.callId===(n.callId||n.session_id||n.id));return console.log("ðŸ” Filtering leads. Looking for callId:",n.callId||n.session_id||n.id),console.log("ðŸ” Available callIds:",M.data.leads.map(i=>i.callId)),console.log("ðŸ” Filtered leads:",l),l.length>0?s.jsx("div",{className:"space-y-4",children:l.map((i,b)=>s.jsxs("div",{className:`border ${e.border} rounded-lg p-3 sm:p-4 space-y-3`,children:[s.jsxs("div",{className:`flex items-center justify-between pb-2 border-b ${e.border}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(I,{className:"w-3.5 h-3.5 text-blue-500"}),s.jsx("span",{className:`text-xs font-mono ${e.textSecondary}`,children:i.callId||"N/A"})]}),i.createdAt&&s.jsx("span",{className:`text-xs ${e.textSecondary}`,children:new Date(i.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),i.intent&&s.jsxs("div",{className:"space-y-2",children:[i.intent.primary&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[s.jsx("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Primary Intent"}),s.jsx("p",{className:`text-xs sm:text-sm ${e.text} leading-relaxed`,children:i.intent.primary})]}),i.intent.details&&s.jsxs("div",{className:`${e.cardBg} p-3 rounded-lg border ${e.border}`,children:[s.jsx("p",{className:`text-xs font-medium ${e.textSecondary} mb-1`,children:"Details"}),s.jsx("p",{className:`text-xs sm:text-sm ${e.text} leading-relaxed`,children:i.intent.details})]}),i.urgency&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-xs ${e.textSecondary}`,children:"Urgency:"}),s.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${i.urgency==="high"?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400":i.urgency==="medium"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400"}`,children:i.urgency})]}),i.tags&&i.tags.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:`text-xs font-medium ${e.textSecondary} mb-2`,children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:i.tags.map((u,y)=>s.jsx("span",{className:`px-2 py-0.5 ${e.cardBg} ${e.text} rounded-full text-xs border ${e.border}`,children:u},y))})]})]}),i.leadData&&s.jsxs("div",{children:[s.jsx("p",{className:`text-xs font-medium ${e.textSecondary} mb-2`,children:"Lead Information"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.leadData.name&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(fs,{className:`w-5 h-5 ${e.textSecondary} mt-0.5 flex-shrink-0`}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Name"}),s.jsx("p",{className:`text-sm font-medium ${e.text} truncate`,children:i.leadData.name})]})]}),i.leadData.email&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ts,{className:`w-5 h-5 ${e.textSecondary} mt-0.5 flex-shrink-0`}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Email"}),s.jsx("p",{className:`text-sm font-medium ${e.text} truncate`,children:i.leadData.email})]})]}),i.leadData.phone&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(I,{className:`w-5 h-5 ${e.textSecondary} mt-0.5 flex-shrink-0`}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Phone"}),s.jsx("p",{className:`text-sm font-medium ${e.text}`,children:i.leadData.phone})]})]}),i.leadData.status&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(se,{className:`w-5 h-5 ${e.textSecondary} mt-0.5 flex-shrink-0`}),s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Status"}),s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${i.leadData.status==="qualified"?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":i.leadData.status==="interested"?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":i.leadData.status==="new"?"bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-400":`${e.cardBg} ${e.text}`}`,children:[i.leadData.status==="qualified"&&s.jsx(ee,{className:"w-5 h-5"}),i.leadData.status]})]})]}),i.leadData.group_size&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(fs,{className:`w-5 h-5 ${e.textSecondary} mt-0.5 flex-shrink-0`}),s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Group Size"}),s.jsx("p",{className:`text-sm font-medium ${e.text}`,children:i.leadData.group_size})]})]}),i.leadData.dates&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(ae,{className:`w-5 h-5 ${e.textSecondary} mt-0.5 flex-shrink-0`}),s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Travel Dates"}),s.jsx("p",{className:`text-sm font-medium ${e.text}`,children:i.leadData.dates})]})]})]})]})]},i.id||b))}):s.jsxs("div",{className:"text-center py-6",children:[s.jsx(_,{className:`w-10 h-10 ${e.textSecondary} mx-auto mb-2`}),s.jsx("p",{className:`text-xs sm:text-sm ${e.textSecondary}`,children:"No matching summary for this call"}),s.jsxs("p",{className:`text-xs ${e.textSecondary} mt-1`,children:["Call ID:"," ",n.callId||n.session_id||n.id]})]})})():s.jsxs("div",{className:"text-center py-6",children:[s.jsx(_,{className:`w-10 h-10 ${e.textSecondary} mx-auto mb-2`}),s.jsx("p",{className:`text-xs sm:text-sm ${e.textSecondary}`,children:"No call summary available"})]})]})]})]})]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:`text-lg font-semibold ${e.text}`,children:"Session History"}),ss&&s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"})]}),ss?s.jsxs("div",{className:`text-center py-12 rounded-lg ${e.searchBg}`,children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:`${e.textSecondary}`,children:"Loading sessions..."})]}):B.length===0?s.jsxs("div",{className:`text-center py-12 rounded-lg ${e.searchBg}`,children:[s.jsx(I,{className:`w-5 h-5 mx-auto mb-3 ${e.textSecondary}`}),s.jsx("h4",{className:`text-lg font-semibold ${e.text} mb-2`,children:"No Sessions Yet"}),s.jsx("p",{className:`${e.textSecondary}`,children:"This agent hasn't had any sessions yet."})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:B.map((l,i)=>{const b=l?.session_id||l?.id||`#${String(1e3+i).padStart(4,"0")}`,u=l?.status||"Completed",y=l?.duration_seconds||0,O=y>0?`${Math.floor(y/60)}m ${Math.floor(y%60)}s`:"0s",q=l?.total_messages||0,ms=l?.start_time||new Date,ps=l?.location||{},X=l?.token_usage||{};return s.jsxs("div",{className:`${e.cardBg} border ${e.border} rounded-lg p-4 hover:shadow-lg transition-all duration-200`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx(I,{className:`w-5 h-5 ${e.textSecondary} flex-shrink-0`}),s.jsx("h4",{className:`font-semibold ${e.text} text-sm truncate`,children:b})]}),s.jsx("button",{onClick:()=>Es(l),className:`p-1.5 ${e.textSecondary} rounded-lg ${e.activeBg} ${e.hover} transition-all duration-200 hover:shadow-lg flex-shrink-0`,title:"View Session",children:Ns&&n?.id===l?.id?s.jsx("div",{className:"w-3 h-3 border border-gray-600 border-t-transparent rounded-full animate-spin"}):s.jsx(te,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:s.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${u==="Completed"?"bg-green-500/10 text-green-600 border border-green-500/20":u==="In Progress"?"bg-blue-500/10 text-blue-600 border border-blue-500/20":"bg-gray-500/10 text-gray-600 border border-gray-500/20"}`,children:u})}),s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:`text-xs font-medium ${e.textSecondary} mb-1`,children:"Date & Time"}),s.jsx("p",{className:`${e.text} text-sm font-medium`,children:new Date(ms).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:new Date(ms).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:`text-xs font-medium ${e.textSecondary} mb-1`,children:"Location"}),s.jsx("p",{className:`${e.text} text-sm font-medium truncate`,children:[ps?.city,ps?.country].filter(gs=>gs&&gs!=="unknown").join(", ")||"Unknown"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Device"}),s.jsx("p",{className:`${e.text} text-sm font-medium truncate`,children:l?.device?.device_type&&l.device.device_type!=="unknown"?l.device.device_type:"Unknown"})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Duration"}),s.jsx("p",{className:`${e.text} text-sm font-medium`,children:O})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Messages"}),s.jsx("p",{className:`${e.text} text-sm font-medium`,children:q})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Language"}),s.jsx("p",{className:`${e.text} text-sm font-medium uppercase`,children:l?.language||"EN"})]})]}),s.jsxs("div",{className:`pt-2 border-t ${e.border}`,children:[s.jsx("p",{className:`text-xs ${e.textSecondary} mb-1`,children:"Token Usage"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"In"}),s.jsx("p",{className:`${e.text} text-sm font-semibold`,children:X?.input_tokens?.toLocaleString()||0})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Out"}),s.jsx("p",{className:`${e.text} text-sm font-semibold`,children:X?.output_tokens?.toLocaleString()||0})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Total"}),s.jsx("p",{className:`${e.text} text-sm font-semibold`,children:X?.total_tokens?.toLocaleString()||0})]})]})]})]},l?.id||i)})})]})]}),d==="instructions"&&s.jsxs("div",{className:"space-y-3",children:[t.greeting&&s.jsxs("div",{className:`${e.cardBg} rounded-lg p-6 border ${e.border}`,children:[s.jsx("h3",{className:`text-lg font-semibold ${e.text} mb-4`,children:"Greeting Messages"}),s.jsx("div",{className:"space-y-4",children:Object.entries(t.greeting).map(([l,i])=>s.jsxs("div",{children:[s.jsx("label",{className:`text-sm ${e.textSecondary} block mb-2 uppercase`,children:l}),s.jsx("div",{className:`p-3 rounded-lg ${e.searchBg} ${e.text}`,children:i})]},l))})]}),t.custom_instructions&&s.jsxs("div",{className:`${e.cardBg} rounded-lg p-6 border ${e.border}`,children:[s.jsx("h3",{className:`text-lg font-semibold ${e.text} mb-4`,children:"Custom Instructions"}),s.jsx("div",{className:`p-4 rounded-lg ${e.searchBg} ${e.text} whitespace-pre-wrap`,children:t.custom_instructions})]})]})]})]})},ve=({isOpen:t,onClose:a,onConfirm:e,title:d="Delete Confirmation",itemName:N="",itemType:$="item",message:v="",warningMessage:x="",requireConfirmation:j=!1,confirmText:r="DELETE"})=>{const[m,g]=o.useState(!1),[c,p]=o.useState("");o.useEffect(()=>{t||(p(""),g(!1))},[t]),o.useEffect(()=>{const k=B=>{B.key==="Escape"&&t&&!m&&a()};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[t,m,a]),o.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]);const w=async()=>{if(!(j&&c!==r)){g(!0);try{await e()}finally{g(!1),a()}}},h=j&&c!==r;if(!t)return null;const Q=`Are you sure you want to delete ${N?`"${N}"`:`this ${$}`}?`,Z=v||Q;return s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:k=>{k.target===k.currentTarget&&!m&&a()},children:[s.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),s.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-in fade-in zoom-in-95 duration-200",onClick:k=>k.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 border border-gray-300 rounded-xl",children:s.jsx(js,{className:"w-5 h-5 text-gray-700"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d})]}),s.jsx("button",{onClick:a,disabled:m,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:s.jsx(le,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-5",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"p-4 border border-gray-300 rounded-full",children:s.jsx(ie,{className:"w-12 h-12 text-red-500"})})}),s.jsx("p",{className:"text-center text-gray-700 mb-2",children:Z}),x&&s.jsx("p",{className:"text-center text-sm text-gray-600 mt-2 font-medium",children:x}),s.jsx("p",{className:"text-center text-sm text-gray-500 mt-3",children:"This action cannot be undone."}),j&&s.jsxs("div",{className:"mt-5",children:[s.jsxs("label",{className:"block text-sm text-gray-600 mb-2 text-center",children:["Type ",s.jsx("span",{className:"font-mono font-bold text-gray-900",children:r})," to confirm"]}),s.jsx("input",{type:"text",value:c,onChange:k=>p(k.target.value.toUpperCase()),placeholder:r,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg text-center font-mono tracking-widest focus:outline-none focus:ring-2 focus:ring-gray-400 focus:border-transparent",disabled:m,autoFocus:!0})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-5 border-t border-gray-200",children:[s.jsx("button",{onClick:a,disabled:m,className:"flex-1 px-4 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg font-medium hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),s.jsx("button",{onClick:w,disabled:m||h,className:"flex-1 px-4 py-2.5 text-white bg-red-600 rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?s.jsxs(s.Fragment,{children:[s.jsx(ys,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(js,{className:"w-4 h-4"}),"Delete"]})})]})]})]})};export{Ne as A,fe as C,ve as D,ue as O,ye as T,je as a};
