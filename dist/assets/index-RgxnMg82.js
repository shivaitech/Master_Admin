import{u as Re,l as Z,j as e,ab as gt,$ as j,ac as te,K as W,B as oe,O as ze,a0 as se,N as de,ad as pt,ae as ft,a2 as L,e as me,a1 as jt,m as q,a3 as xe,k as yt,a4 as bt,a5 as Nt,a6 as vt,a7 as wt,a8 as $t,a9 as St,D as Ve,L as kt,J as Fe,c as Tt,C as It,q as Dt,A as G,s as Ct,V as ee,af as Ut}from"./admin-DPoVIZhb.js";import{r as d}from"./router-CINeAvhf.js";import"./vendor-DJG_os-6.js";const At=({onViewEmployee:y})=>{const{theme:b,currentTheme:t}=Re(),[$,N]=d.useState(""),[D,S]=d.useState(""),[i,_]=d.useState(null),[H,k]=d.useState([]),[U,T]=d.useState(!0),[M,Y]=d.useState(!1),[Oe,E]=d.useState(null),[x,v]=d.useState(1),[C]=d.useState(10),[w,l]=d.useState(0),[m,f]=d.useState(0),[F,ae]=d.useState("transcripts"),[J,qe]=d.useState(null),[We,he]=d.useState(!1),[ue,ge]=d.useState(null),[X,pe]=d.useState(!1),[fe,je]=d.useState(0),[R,Ge]=d.useState(0),[He,Pt]=d.useState(1),[re,ye]=d.useState(!1),[be,Ye]=d.useState(1),h=d.useRef(null),ne=d.useRef(null),[Q,Ne]=d.useState("list"),[ve,Je]=d.useState({}),[A,we]=d.useState("all"),[I,$e]=d.useState({startDate:"",endDate:"",preset:"all"}),[B,Xe]=d.useState("emp1"),[Se]=d.useState([{id:"emp1",name:"Shivai Widget"},{id:"emp2",name:"Demo Employee"}]);d.useEffect(()=>{const s=setTimeout(()=>{S($),x!==1&&v(1)},500);return()=>clearTimeout(s)},[$]),d.useEffect(()=>{x!==1&&v(1)},[A,I]),d.useEffect(()=>{const s=document.createElement("style");return s.textContent=`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.3s ease-out forwards;
        }
        .spinner {
          border: 3px solid #f3f4f6;
          border-top: 3px solid #3b82f6;
          border-radius: 50%;
          width: 20px;
          height: 20px;
          animation: spin 1s linear infinite;
        }
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `,document.head.appendChild(s),()=>document.head.removeChild(s)},[]);const Qe=async s=>{if(!s||s==="Unknown"||s==="N/A")return{city:"Unknown",region:"",country:"Unknown",countryCode:"",isp:"Unknown ISP",lat:null,lon:null,timezone:""};if(ve[s])return ve[s];try{const n=await(await fetch(`http://ip-api.com/json/${s}?fields=status,message,country,countryCode,region,regionName,city,zip,lat,lon,timezone,isp,org,as,query`)).json();if(n.status==="success"){const c={city:n.city||"Unknown",region:n.regionName||n.region||"",country:n.country||"Unknown",countryCode:n.countryCode||"",zip:n.zip||"",isp:n.isp||n.org||"Unknown ISP",lat:n.lat||null,lon:n.lon||null,timezone:n.timezone||"",as:n.as||""};return Je(o=>({...o,[s]:c})),c}else return console.warn(`IP geolocation failed for ${s}:`,n.message),{city:"Unknown",region:"",country:"Unknown",countryCode:"",isp:"Unknown ISP",lat:null,lon:null,timezone:""}}catch(a){return console.error(`Error resolving IP location for ${s}:`,a),{city:"Unknown",region:"",country:"Unknown",countryCode:"",isp:"Unknown ISP",lat:null,lon:null,timezone:""}}},[P,ke]=d.useState({id:1,name:"Demo Employee",client:"Demo Employee",status:"active",lastUpdate:"2024-01-15 14:30:00",totalSessions:0,successfulSessions:0,avgSessionDuration:"3m 12s",type:"chat",performance:0,createdAt:"2024-01-01"}),le=d.useCallback(async()=>{try{T(!0),E(null);const s=new URLSearchParams({page:x.toString(),limit:C.toString()});A!=="all"&&s.append("deviceType",A),I.startDate&&s.append("startDate",I.startDate),I.endDate&&s.append("endDate",I.endDate),D.trim()&&s.append("q",D.trim()),console.log(`Fetching sessions for ${B==="emp1"?"Demo Employee":"ShivAI Widget Employee"} with params:`,s.toString());let a=s.toString(),n;B==="emp1"?n=await Z.getAgentSessions(a):n=await Z.getAllSessionDemo(a),console.log("API Raw Response:",n);const c=n?.data?.data?.data||n?.data?.data||n?.data?.sessions;if(n?.data?.success&&c?.sessions){const o=Array.isArray(c.sessions)?c.sessions:[],u=c.pagination||{},p=u.total||u.totalItems||o.length,z=u.totalPages||Math.ceil(p/C);console.log("Pagination Data:",u),console.log("Total Items:",p,"Total Pages:",z),console.log("Sessions Array Length:",o.length),l(p),f(z);const V=(await Promise.all(o.map(async(r,K)=>{const O=r.user_ip||r.userIP||r.ip||"Unknown",g=await Qe(O),ce={city:g.city!=="Unknown"?g.city:r.location?.city||"Unknown",region:g.region||r.location?.region||"",country:g.country!=="Unknown"?g.country:r.location?.country||"Unknown",countryCode:g.countryCode||r.location?.countryCode||"",zip:g.zip||r.location?.zip||"",isp:g.isp!=="Unknown ISP"?g.isp:r.location?.isp||"Unknown ISP",lat:g.lat||r.location?.lat||null,lon:g.lon||r.location?.lon||null,timezone:g.timezone||r.location?.timezone||""};return{...r,userIP:O,resolvedLocation:ce}}))).map((r,K)=>({id:r.id||r.session_id||`session-${K+1}`,sessionId:r.session_id||r.id||r._id||`SES-${Date.now()}-${K}`,clientName:r.resolvedLocation?.city!=="Unknown"?`${r.resolvedLocation.city}${r.resolvedLocation.region?`, ${r.resolvedLocation.region}`:""}${r.resolvedLocation.country?` (${r.resolvedLocation.country})`:""}`:r.client_name||r.clientName||`Client ${K+1}`,type:r.config?.agent||r.type||"chat",startTime:r.start_time||r.startTime||r.created_at||new Date().toISOString(),endTime:r.end_time||r.endTime||r.updated_at||new Date().toISOString(),duration:r.total_duration?`${Math.floor(r.total_duration/60)}m ${Math.floor(r.total_duration%60)}s`:r.duration||Ze(r.start_time||r.created_at,r.end_time||r.updated_at),status:r.status||"completed",rating:r.rating||null,sentiment:r.sentiment||"neutral",transcripts:Array.isArray(r.transcripts)?r.transcripts:[],transcriptCount:r.message_count||r.messageCount||(Array.isArray(r.transcripts)?r.transcripts.length:0),resolution:r.resolution||"Session completed",tags:Array.isArray(r.tags)?r.tags:[],location:r.resolvedLocation||{city:"Unknown",country:"Unknown",region:"",zip:"",lat:null,lon:null,isp:"Unknown ISP",timezone:""},device:{browser:r.device?.browser||"Unknown Browser",deviceType:r.device?.device_type||r.device?.deviceType||"Unknown",raw:r.device?.raw||""},userIP:r.user_ip||r.userIP||r.ip||"Unknown",messageCount:(()=>{const O=r.message_count||r.messageCount?.total||(Array.isArray(r.transcripts)?r.transcripts.length:0),g=r.user_messages||r.messageCount?.user||0,ce=O-g;return{ai:Math.max(0,ce),user:g,total:O}})(),config:{language:r.config?.language||"en-US",gender:r.config?.gender||"female",agent:r.config?.agent||"support"},agentId:r.agent_id||r.agentId||r.id,callId:r.call_id||r.callId||r.session_id||r.id,recordingUrl:r.recording_url||r.recordingUrl||null,tokenUsage:r.token_usage||r.tokenUsage||null}));console.log("Transformed Sessions:",V),k(V),et(V)}else{const o=n?.data?.message||c?.message||"No sessions data available";console.warn("API Response Issue:",o),E(o),k([]),l(0),f(0)}}catch(s){console.error("Error fetching sessions:",s);const a=s.response?.data?.message||s.message||"Failed to load sessions";E(`Error loading sessions: ${a}`),k([]),l(0),f(0)}finally{T(!1)}},[x,C,A,I,D,B]);d.useEffect(()=>{le()},[le]);const Ke=async s=>{console.log("Fetching transcripts for session:",s);try{Y(!0);let a;if(B==="emp1"?(a=await Z.getAgentSessionsTranscript(s),console.log("getAgentSessionsTranscript response:",a)):(a=await Z.getSessionTranscript(s),console.log("getSessionTranscript response:",a)),a?.data?.statusCode===200||a?.data?.success){let n=[];if(B==="emp1"){const c=a.data?.data?.session||a.data;console.log("Agent Sessions Response Data:",c);let o=[],u=[];c.transcripts&&Array.isArray(c.transcripts)&&(o=c.transcripts.map(p=>({...p,speaker:"ai"}))),c.user_transcripts&&Array.isArray(c.user_transcripts)&&(u=c.user_transcripts.map(p=>({...p,speaker:"user"}))),n=[...o,...u],n.sort((p,z)=>{const Ee=new Date(p.timestamp||p.created_at||0),V=new Date(z.timestamp||z.created_at||0);return Ee-V})}else a.data.data?.transcripts&&Array.isArray(a.data.data.transcripts)&&(n=a.data.data.transcripts);if(console.log("All Transcripts (combined):",n),n&&n.length>0)return n.map(c=>{let o=c.role||c.speaker;console.log("ðŸ“ Processing transcript:",{original:c,speakerField:o,allFields:Object.keys(c)}),o==="user"||o==="customer"||o==="client"?o="user":o==="agent"||o==="assistant"||o==="bot"||o==="ai"?o="ai":o="user";const u={timestamp:c.timestamp||c.created_at||c.time||new Date().toISOString(),speaker:o,message:c.message||c.content||c.text||c.msg||""};return console.log("âœ… Processed message:",u),u}).filter(c=>c.message&&c.message.trim()!=="")}return[]}catch(a){return console.error("Error fetching transcripts:",a),[]}finally{Y(!1)}},Ze=(s,a)=>{if(!s||!a)return"N/A";const n=new Date(s),o=new Date(a)-n,u=Math.floor(o/6e4),p=Math.floor(o%6e4/1e3);return`${u}m ${p}s`},et=s=>{const a=s.length,n=s.filter(o=>o.status==="completed").length,c=s.reduce((o,u)=>o+u.rating,0)/a;ke(o=>({...o,totalSessions:a,successfulSessions:n,performance:Math.round(c*20)}))},tt=H,st=H,Te=(x-1)*C,at=Math.min(Te+C,w),ie=s=>{const a=Math.max(1,Math.min(s,m));v(a)},Ie=()=>{x>1&&v(x-1)},De=()=>{x<m&&v(x+1)},Ce=s=>{const a=b==="dark"?{completed:"bg-green-500/20 text-green-400 border border-green-500/30",escalated:"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30",failed:"bg-red-500/20 text-red-400 border border-red-500/30",ongoing:"bg-blue-500/20 text-blue-400 border border-blue-500/30",active:"bg-green-500/20 text-green-400 border border-green-500/30",inactive:"bg-red-500/20 text-red-400 border border-red-500/30",maintenance:"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30"}:{completed:"bg-green-100 text-green-800",escalated:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",ongoing:"bg-blue-100 text-blue-800",active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800",maintenance:"bg-yellow-100 text-yellow-800"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a[s]}`,children:s.charAt(0).toUpperCase()+s.slice(1)})},Ue=s=>{const a=b==="dark"?{positive:"bg-green-500/20 text-green-400 border border-green-500/30",neutral:"bg-gray-500/20 text-gray-400 border border-gray-500/30",negative:"bg-red-500/20 text-red-400 border border-red-500/30"}:{positive:"bg-green-100 text-green-800",neutral:"bg-gray-100 text-gray-800",negative:"bg-red-100 text-red-800"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a[s]}`,children:s.charAt(0).toUpperCase()+s.slice(1)})},rt=({children:s,onClick:a,title:n,variant:c="default"})=>{const o={background:"linear-gradient(0deg, #0a0a0a 0%, #000 100%)",boxShadow:`0 1.688px 0.844px 0 #33332f inset,
          0 3.797px 0.844px 0 #5e5e5e inset, 0 -6.75px 10.126px 0 #171717 inset,
          0 13.501px 20.251px -10.126px rgba(0, 0, 0, 0.25)`};return e.jsx("button",{onClick:a,title:n,style:o,className:"p-2 text-white rounded-lg transition-all duration-200 hover:scale-105 hover:brightness-110",children:s})},Ae=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Be=s=>new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),Pe=async s=>{const a=await Ke(s.sessionId||s.id),n={...s,transcripts:a};console.log("Selected Session with Transcripts:",n),console.log("Token Usage Data:",s.token_usage),_(n),ae("transcripts");const c=s.agentId||s.agent_id,o=s.callId||s.call_id||s.sessionId;console.log("ðŸ” Fetching call summary for agent ID:",c,"and call ID:",o),nt(c,o)},nt=async(s,a)=>{if(!s){console.warn("âš ï¸ No agent ID provided for call summary");return}console.log("ðŸ“¡ Fetching call summary for agent:",s,"callId to filter:",a),he(!0),ge(null);try{const n=await Ct.getCallSummary(s);console.log("âœ… Call summary response:",n),qe(n)}catch(n){console.error("âŒ Failed to fetch call summary:",n),ge(n.message||"Failed to load call summary")}finally{he(!1)}},lt=()=>{le()},Le=()=>{N(""),S(""),we("all"),$e({startDate:"",endDate:"",preset:"all"}),v(1)},it=s=>{we(s)},ct=s=>{const a=new Date;let n="",c="";switch(s){case"today":n=a.toISOString().split("T")[0],c=n;break;case"week":n=new Date(a.getTime()-10080*60*1e3).toISOString().split("T")[0],c=a.toISOString().split("T")[0];break;case"month":n=new Date(a.getFullYear(),a.getMonth()-1,a.getDate()).toISOString().split("T")[0],c=a.toISOString().split("T")[0];break;case"all":default:n="",c="";break}$e({startDate:n,endDate:c,preset:s})},ot=()=>{h.current&&(X?h.current.pause():h.current.play(),pe(!X))},dt=()=>{h.current&&je(h.current.currentTime)},mt=()=>{h.current&&Ge(h.current.duration)},xt=s=>{if(!h.current||!ne.current)return;const a=ne.current.getBoundingClientRect(),o=(s.clientX-a.left)/a.width*R;h.current.currentTime=o,je(o)},ht=()=>{h.current&&(re?(h.current.volume=He,ye(!1)):(h.current.volume=0,ye(!0)))},ut=()=>{const s=[.5,.75,1,1.25,1.5,2],a=s.indexOf(be),n=s[(a+1)%s.length];Ye(n),h.current&&(h.current.playbackRate=n)},_e=s=>{h.current&&(h.current.currentTime=Math.max(0,Math.min(R,h.current.currentTime+s)))},Me=s=>{if(!s||isNaN(s))return"0:00";const a=Math.floor(s/60),n=Math.floor(s%60);return`${a}:${n.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"space-y-3 md:space-y-4 lg:space-y-6  px-2 sm:px-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-start mb-4 px-2 sm:px-0",children:e.jsxs("div",{className:"relative w-full sm:w-auto",children:[e.jsx("select",{id:"employee-select",value:B,onChange:s=>{Xe(s.target.value);const a=Se.find(n=>n.id===s.target.value);a&&ke(n=>({...n,name:a.name,client:a.name})),v(1),k([])},className:`
                  appearance-none px-3 py-2 pr-8 sm:px-4 sm:py-2 sm:pr-10 
                  rounded-lg border-2 border-gray-300
                  bg-white ${t.text} font-medium text-sm sm:text-base
                  focus:outline-none focus:ring-1 focus:ring-black focus:border-blue-500
                  hover:border-gray-400 transition-all duration-200
                  shadow-sm w-full sm:min-w-[200px] cursor-pointer
                `,children:Se.map(s=>e.jsx("option",{value:s.id,className:"py-2",children:s.name},s.id))}),e.jsx(gt,{className:"absolute right-2 sm:right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-gray-400 pointer-events-none"})]})}),e.jsxs("div",{className:"hidden lg:grid lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"group",children:e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4 hover:scale-[1.02] transition-all duration-200 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${t.searchBg} flex items-center justify-center`,children:e.jsx(j,{className:`w-5 h-5 ${t.textSecondary}`})}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"text-xs font-medium text-green-500",children:"+12.5%"})})]}),e.jsx("h3",{className:`text-2xl font-semibold ${t.text} mb-1`,children:w}),e.jsx("p",{className:`text-sm font-medium ${t.text} mb-1 leading-tight`,children:"Total Sessions"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight`,children:"All conversations"})]})}),e.jsx("div",{className:"group",children:e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4 hover:scale-[1.02] transition-all duration-200 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${t.searchBg} flex items-center justify-center`,children:e.jsx(te,{className:`w-5 h-5 ${t.textSecondary}`})}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"text-xs font-medium text-green-500",children:"+8.2%"})})]}),e.jsxs("h3",{className:`text-2xl font-semibold ${t.text} mb-1`,children:[P.performance,"%"]}),e.jsx("p",{className:`text-sm font-medium ${t.text} mb-1 leading-tight`,children:"Performance Score"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight`,children:"Success rate"})]})}),e.jsx("div",{className:"group",children:e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4 hover:scale-[1.02] transition-all duration-200 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${t.searchBg} flex items-center justify-center`,children:e.jsx(W,{className:`w-5 h-5 ${t.textSecondary}`})}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"text-xs font-medium text-green-500",children:"+5.1%"})})]}),e.jsx("h3",{className:`text-2xl font-semibold ${t.text} mb-1`,children:P.avgSessionDuration}),e.jsx("p",{className:`text-sm font-medium ${t.text} mb-1 leading-tight`,children:"Avg Duration"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight`,children:"Per session"})]})}),e.jsx("div",{className:"group",children:e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4 hover:scale-[1.02] transition-all duration-200 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${t.searchBg} flex items-center justify-center`,children:e.jsx(oe,{className:`w-5 h-5 ${t.textSecondary}`})}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"text-xs font-medium text-blue-500",children:"Active"})})]}),e.jsx("h3",{className:`text-xl font-semibold ${t.text} mb-1 truncate`,children:P.client}),e.jsx("p",{className:`text-sm font-medium ${t.text} mb-1 leading-tight`,children:"Internal AI Employees"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight`,children:"Current assignment"})]})})]}),e.jsx("div",{className:"lg:hidden overflow-x-auto scrollbar-hide",children:e.jsxs("div",{className:"flex gap-2 md:gap-3 pb-2 px-1",style:{width:"max-content"},children:[e.jsx("div",{className:"group flex-shrink-0 w-32 sm:w-36 md:w-44",children:e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-2 sm:p-3 md:p-4 hover:scale-[1.02] transition-all duration-200 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 sm:mb-2",children:[e.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-lg ${t.searchBg} flex items-center justify-center`,children:e.jsx(j,{className:`w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 ${t.textSecondary}`})}),e.jsx("span",{className:"text-xs font-medium text-green-500",children:"+12%"})]}),e.jsx("h3",{className:`text-lg sm:text-xl md:text-2xl font-semibold ${t.text} mb-0.5 sm:mb-1`,children:w}),e.jsx("p",{className:`text-xs sm:text-xs md:text-sm font-medium ${t.text} mb-0.5 leading-tight`,children:"Sessions"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight truncate`,children:"Total"})]})}),e.jsx("div",{className:"group flex-shrink-0 w-32 sm:w-36 md:w-44",children:e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-2 sm:p-3 md:p-4 hover:scale-[1.02] transition-all duration-200 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 sm:mb-2",children:[e.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-lg ${t.searchBg} flex items-center justify-center`,children:e.jsx(te,{className:`w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 ${t.textSecondary}`})}),e.jsx("span",{className:"text-xs font-medium text-green-500",children:"+8%"})]}),e.jsxs("h3",{className:`text-lg sm:text-xl md:text-2xl font-semibold ${t.text} mb-0.5 sm:mb-1`,children:[P.performance,"%"]}),e.jsx("p",{className:`text-xs sm:text-xs md:text-sm font-medium ${t.text} mb-0.5 leading-tight`,children:"Performance"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight truncate`,children:"Score"})]})}),e.jsx("div",{className:"group flex-shrink-0 w-32 sm:w-36 md:w-44",children:e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-2 sm:p-3 md:p-4 hover:scale-[1.02] transition-all duration-200 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 sm:mb-2",children:[e.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-lg ${t.searchBg} flex items-center justify-center`,children:e.jsx(W,{className:`w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 ${t.textSecondary}`})}),e.jsx("span",{className:"text-xs font-medium text-green-500",children:"+5%"})]}),e.jsx("h3",{className:`text-lg sm:text-xl md:text-2xl font-semibold ${t.text} mb-0.5 sm:mb-1`,children:P.avgSessionDuration}),e.jsx("p",{className:`text-xs sm:text-xs md:text-sm font-medium ${t.text} mb-0.5 leading-tight`,children:"Duration"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight truncate`,children:"Average"})]})}),e.jsx("div",{className:"group flex-shrink-0 w-32 sm:w-36 md:w-44",children:e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-2 sm:p-3 md:p-4 hover:scale-[1.02] transition-all duration-200 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 sm:mb-2",children:[e.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-lg ${t.searchBg} flex items-center justify-center`,children:e.jsx(oe,{className:`w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 ${t.textSecondary}`})}),e.jsx("span",{className:"text-xs font-medium text-blue-500",children:"Live"})]}),e.jsx("h3",{className:`text-sm sm:text-base md:text-lg font-semibold ${t.text} mb-0.5 sm:mb-1 truncate`,children:P.client}),e.jsx("p",{className:`text-xs sm:text-xs md:text-sm font-medium ${t.text} mb-0.5 leading-tight`,children:"Client"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight truncate`,children:"Active"})]})})]})})]}),e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4 md:p-6 ${t.cardShadow||"shadow-lg"}`,children:[e.jsxs("div",{className:"space-y-3 flex flex-col md:flex-row md:items-center md:justify-between ",children:[e.jsxs("h3",{className:`text-lg  font-semibold ${t.text}`,children:["Session History",e.jsxs("span",{className:`ml-2 text-sm font-normal ${t.textSecondary}`,children:["(",w," ",w===1?"session":"sessions",")"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"relative flex-1 min-w-0",children:[e.jsx(ze,{className:`absolute hidden lg:flex left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${t.textSecondary}`}),e.jsx("input",{type:"text",placeholder:"Search sessions...",value:$,onChange:s=>N(s.target.value),className:`w-full pl-9 pr-3 py-2 text-sm rounded-md border ${t.border} ${t.bg} ${t.text} focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent`})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap sm:flex-nowrap",children:[e.jsxs("select",{value:A,onChange:s=>it(s.target.value),className:`px-3 py-2 text-sm rounded-md border ${t.border} ${t.bg} ${t.text} focus:outline-none focus:ring-2 focus:ring-blue-500 flex-shrink-0`,title:"Filter by device type",children:[e.jsx("option",{value:"all",children:"All Devices"}),e.jsx("option",{value:"mobile",children:"Mobile"}),e.jsx("option",{value:"desktop",children:"Desktop"}),e.jsx("option",{value:"tablet",children:"Tablet"})]}),e.jsxs("select",{value:I.preset,onChange:s=>ct(s.target.value),className:`px-3 py-2 text-sm rounded-md border ${t.border} ${t.bg} ${t.text} focus:outline-none focus:ring-2 focus:ring-blue-500 flex-shrink-0`,title:"Filter by date range",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"Last Week"}),e.jsx("option",{value:"month",children:"Last Month"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[($||A!=="all"||I.preset!=="all")&&e.jsx("button",{onClick:Le,className:`p-2 rounded-md  ${t.border} ${t.text} hover:bg-red-50 hover:border-red-300 hover:text-red-600 transition-colors`,title:"Clear all filters",children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx("button",{onClick:lt,disabled:U,className:`p-2 rounded-md  ${t.border} ${t.text} ${t.hover} transition-colors disabled:opacity-50`,title:"Refresh sessions",children:e.jsx(de,{className:`w-4 h-4 ${U?"animate-spin":""}`})})]})]})]})]}),U?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"spinner mx-auto mb-4",style:{width:"40px",height:"40px"}}),e.jsx("h3",{className:`text-lg font-semibold ${t.text} mb-2`,children:"Loading Sessions..."}),e.jsx("p",{className:`text-sm ${t.textSecondary}`,children:"Please wait while we fetch your session data"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col gap-3 mb-2",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:`hidden lg:flex items-center border ${t.border} rounded-lg p-1`,children:[e.jsx("button",{onClick:()=>Ne("list"),className:`p-1.5 rounded transition-all duration-200 ${Q==="list"?`${t.activeBg} ${t.text} shadow-sm`:`${t.textSecondary} hover:${t.hover}`}`,title:"List view",children:e.jsx(pt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Ne("grid"),className:`p-1.5 rounded transition-all duration-200 ${Q==="grid"?`${t.activeBg} ${t.text} shadow-sm`:`${t.textSecondary} hover:${t.hover}`}`,title:"Grid view",children:e.jsx(ft,{className:"w-4 h-4"})})]})})}),e.jsx("div",{className:Q==="grid"?"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4":"space-y-3",children:st?.map(s=>Q==="list"?e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-3 sm:p-4 hover:shadow-md transition-all duration-200 bg-gradient-to-r from-gray-50 to-white-50`,children:[e.jsxs("div",{className:"flex items-start sm:items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.type==="chat"?e.jsx(j,{className:"w-4 h-4 text-blue-500 flex-shrink-0"}):e.jsx(L,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`font-semibold ${t.text} text-sm truncate`,children:s.sessionId}),e.jsx("p",{className:`text-xs ${t.textSecondary} truncate`,children:[s.location?.city,s.location?.region,s.location?.country].filter(Boolean).join(", ")||"Unknown Location"})]})]}),e.jsx("button",{onClick:()=>Pe(s),className:`p-1 flex items-center justify-center ${t.textSecondary} rounded-lg ${t.activeBg} ${t.hover} transition-all duration-200 flex-shrink-0 `,title:"View Session",children:M?e.jsx("div",{className:"w-4 h-4 border border-gray-600 border-t-transparent rounded-full animate-spin"}):e.jsx(me,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Ce(s.status),Ue(s.sentiment)]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Device"}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight`,children:s.device?.deviceType||"Unknown Device"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Duration"}),e.jsx("p",{className:`${t.text} font-medium text-sm leading-tight`,children:s.duration}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight`,children:"Session time"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Date & Time"}),e.jsx("p",{className:`${t.text} font-medium text-sm leading-tight`,children:new Date(s.startTime).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"2-digit"})}),e.jsx("p",{className:`text-xs ${t.textSecondary} leading-tight`,children:new Date(s.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Messages"}),e.jsx("p",{className:`${t.text} font-medium text-sm leading-tight`,children:s.messageCount?.total||s.transcriptCount||s.transcripts.length||0}),e.jsxs("p",{className:`text-xs ${t.textSecondary} leading-tight`,children:["AI: ",s.messageCount?.ai||0," â€¢ User:"," ",s.messageCount?.user||0]})]})]}),s.tokenUsage&&e.jsxs("div",{className:`mt-3 pt-3 border-t ${t.border}`,children:[e.jsx("p",{className:`text-xs ${t.textSecondary} mb-2`,children:"Token Usage"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4",children:[e.jsxs("div",{className:`${t.searchBg} rounded-lg p-2 text-center`,children:[e.jsx("p",{className:`text-xs ${t.textSecondary} mb-1`,children:"Input"}),e.jsx("p",{className:`${t.text} text-sm font-bold`,children:(s.tokenUsage.input_tokens||s.tokenUsage.inputTokens||0).toLocaleString()})]}),e.jsxs("div",{className:`${t.searchBg} rounded-lg p-2 text-center`,children:[e.jsx("p",{className:`text-xs ${t.textSecondary} mb-1`,children:"Output"}),e.jsx("p",{className:`${t.text} text-sm font-bold`,children:(s.tokenUsage.output_tokens||s.tokenUsage.outputTokens||0).toLocaleString()})]}),e.jsxs("div",{className:`${t.searchBg} rounded-lg p-2 text-center`,children:[e.jsx("p",{className:`text-xs ${t.textSecondary} mb-1`,children:"Total"}),e.jsx("p",{className:"text-blue-600 text-sm font-bold",children:(s.tokenUsage.total_tokens||s.tokenUsage.totalTokens||0).toLocaleString()})]})]})]}),e.jsx("div",{className:`mt-3 pt-3 border-t ${t.border}`,children:e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsxs("span",{className:`${t.textSecondary} truncate flex-1`,title:s.location?.isp,children:["ISP: ",s.location?.isp||"Unknown"]}),s.location?.zip&&e.jsxs("span",{className:`${t.textSecondary} ml-2 flex-shrink-0`,children:["ZIP: ",s.location.zip]})]})}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:s.tags.map((a,n)=>e.jsx("span",{className:`px-2 py-1 ${b==="dark"?"bg-gray-500/20 text-gray-400 border border-gray-500/30":"bg-gray-100 text-gray-700"} text-xs rounded-full`,children:a},n))})]},s.id):e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4 hover:shadow-lg transition-all duration-200 h-fit`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.type==="chat"?e.jsx(j,{className:"w-5 h-5 text-blue-500 flex-shrink-0"}):e.jsx(L,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),e.jsx("div",{className:"min-w-0",children:e.jsx("h4",{className:`font-semibold ${t.text} text-sm truncate`,children:s.sessionId})})]}),e.jsx("button",{onClick:()=>Pe(s),className:`p-1.5 ${t.textSecondary} rounded-lg ${t.activeBg} ${t.hover} transition-all duration-200 hover:shadow-lg flex-shrink-0`,title:"View Session",children:M?e.jsx("div",{className:"w-3 h-3 border border-gray-600 border-t-transparent rounded-full animate-spin"}):e.jsx(me,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[Ce(s.status),Ue(s.sentiment)]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:`text-xs font-medium ${t.textSecondary} mb-1`,children:"Location"}),e.jsx("p",{className:`${t.text} text-sm font-medium truncate`,title:`${[s.location?.city,s.location?.region,s.location?.country].filter(Boolean).join(", ")}`,children:[s.location?.city,s.location?.region,s.location?.country].filter(Boolean).join(", ")||"Unknown Location"}),e.jsx("p",{className:`text-xs ${t.textSecondary} truncate`,children:s.location?.isp||"Unknown ISP"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Device"}),e.jsx("p",{className:`${t.text} text-sm font-medium truncate`,children:s.device?.browser||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Duration"}),e.jsx("p",{className:`${t.text} text-sm font-medium`,children:s.duration})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Date"}),e.jsx("p",{className:`${t.text} text-sm font-medium`,children:new Date(s.startTime).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Messages"}),e.jsx("p",{className:`${t.text} text-sm font-medium`,children:s.messageCount?.total||s.transcriptCount||s.transcripts.length||0})]})]}),s.tokenUsage&&e.jsxs("div",{className:`pt-3 border-t ${t.border}`,children:[e.jsx("p",{className:`text-xs ${t.textSecondary} mb-2`,children:"Token Usage"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"In"}),e.jsx("p",{className:`${t.text} text-sm font-semibold`,children:(s.tokenUsage.input_tokens||s.tokenUsage.inputTokens||0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Out"}),e.jsx("p",{className:`${t.text} text-sm font-semibold`,children:(s.tokenUsage.output_tokens||s.tokenUsage.outputTokens||0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Total"}),e.jsx("p",{className:"text-blue-600 text-sm font-semibold",children:(s.tokenUsage.total_tokens||s.tokenUsage.totalTokens||0).toLocaleString()})]})]})]}),e.jsx("div",{className:`pt-2 border-t ${t.border} text-center`,children:e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:new Date(s.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})}),s.tags&&s.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[s.tags.slice(0,2).map((a,n)=>e.jsx("span",{className:`px-2 py-1 ${b==="dark"?"bg-gray-500/20 text-gray-400 border border-gray-500/30":"bg-gray-100 text-gray-700"} text-xs rounded-full`,children:a},n)),s.tags.length>2&&e.jsxs("span",{className:`text-xs ${t.textSecondary} px-1 py-1`,children:["+",s.tags.length-2]})]})]},s.id))}),tt?.length===0&&!U&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(j,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:`text-lg font-semibold ${t.text} mb-2`,children:"No sessions found"}),e.jsx("p",{className:`text-sm ${t.textSecondary} mb-4`,children:"Try adjusting your search or filter criteria"}),e.jsx(rt,{onClick:Le,children:e.jsx(de,{className:"w-4 h-4"})})]})]})," ",i&&e.jsx("div",{className:"fixed inset-0 -top-8 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4 backdrop-blur-sm overflow-y-auto",children:e.jsxs("div",{className:`${t.cardBg} rounded-lg sm:rounded-xl w-full max-w-3xl  max-h-[95vh] sm:max-h-[90vh] overflow-hidden shadow-2xl my-auto flex flex-col`,children:[e.jsxs("div",{className:`p-3 sm:p-4 border-b ${t.border}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2 sm:mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("div",{className:`w-7 h-7 sm:w-10 sm:h-10 ${t.activeBg} rounded-lg flex items-center justify-center flex-shrink-0`,children:e.jsx(j,{className:`w-3.5 h-3.5 sm:w-5 sm:h-5 ${t.textSecondary}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:`text-sm sm:text-lg font-semibold ${t.text} truncate`,children:"Session Transcript"}),e.jsx("p",{className:`text-xs ${t.textSecondary} truncate font-mono`,children:i.sessionId||i.id})]})]}),e.jsx("button",{onClick:()=>_(null),className:`p-1 sm:p-2 ${t.textSecondary} rounded-lg ${t.hover} transition-colors flex-shrink-0`,children:e.jsx(se,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 mb-2 sm:mb-3",children:[e.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${t.searchBg} px-2 py-1.5 rounded-md`,children:[e.jsx(W,{className:`w-3 h-3 ${t.textSecondary} flex-shrink-0`}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:`text-xs ${t.textSecondary} hidden sm:block`,children:"Date & Time"}),e.jsx("span",{className:`text-xs font-medium ${t.text} truncate block`,children:Ae(i.startTime)})]})]}),e.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${t.searchBg} px-2 py-1.5 rounded-md`,children:[e.jsx(jt,{className:`w-3 h-3 ${t.textSecondary} flex-shrink-0`}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:`text-xs ${t.textSecondary} hidden sm:block`,children:"Location & IP"}),e.jsxs("span",{className:`text-xs font-medium ${t.text} truncate block`,title:`${i.location?.city||"Unknown"}, ${i.location?.region||""} ${i.location?.country||"Unknown"} â€¢ IP: ${i.userIP||"Unknown"} â€¢ ISP: ${i.location?.isp||"Unknown"}`,children:[i.location?.city||"Unknown",","," ",i.location?.country||"Unknown"," â€¢"," ",i.userIP||"Unknown"]})]})]}),e.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${t.searchBg} px-2 py-1.5 rounded-md`,children:[e.jsx(L,{className:`w-3 h-3 ${t.textSecondary} flex-shrink-0`}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:`text-xs ${t.textSecondary} hidden sm:block`,children:"Device â€¢ Duration"}),e.jsxs("span",{className:`text-xs font-medium ${t.text} truncate block`,children:[i.device?.deviceType||i.device?.device_type||"Unknown"," ","â€¢ ",i.duration]})]})]})]}),e.jsxs("div",{className:`flex gap-1 p-1 ${t.searchBg} rounded-lg`,children:[e.jsxs("button",{onClick:()=>ae("transcripts"),className:`flex-1 px-3 py-2 text-xs sm:text-sm font-medium rounded-md transition-all duration-200 ${F==="transcripts"?`${t.cardBg} ${t.text} shadow-sm`:`${t.textSecondary} hover:${t.text}`}`,children:[e.jsx(j,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 inline mr-1.5"}),"Call Transcripts"]}),e.jsxs("button",{onClick:()=>ae("summary"),className:`flex-1 px-3 py-2 text-xs sm:text-sm font-medium rounded-md transition-all duration-200 ${F==="summary"?`${t.cardBg} ${t.text} shadow-sm`:`${t.textSecondary} hover:${t.text}`}`,children:[e.jsx(q,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 inline mr-1.5"}),"Recording & Summary"]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4",children:[F==="transcripts"&&e.jsxs(e.Fragment,{children:[(i.token_usage||i.tokenUsage)&&e.jsxs("div",{className:`px-3 sm:px-4 py-3 mb-3 ${t.searchBg} rounded-lg`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(xe,{className:`w-4 h-4 ${t.text}`}),e.jsx("h4",{className:`text-sm sm:text-base font-semibold ${t.text}`,children:"Token Usage"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4",children:[e.jsxs("div",{className:`${t.cardBg} rounded-lg p-2 sm:p-3 border ${t.border}`,children:[e.jsx("p",{className:`text-xs ${t.textSecondary} mb-1`,children:"Input"}),e.jsx("p",{className:`text-lg sm:text-xl font-bold ${t.text}`,children:((i.token_usage||i.tokenUsage)?.input_tokens||(i.token_usage||i.tokenUsage)?.inputTokens||0).toLocaleString()})]}),e.jsxs("div",{className:`${t.cardBg} rounded-lg p-2 sm:p-3 border ${t.border}`,children:[e.jsx("p",{className:`text-xs ${t.textSecondary} mb-1`,children:"Output"}),e.jsx("p",{className:`text-lg sm:text-xl font-bold ${t.text}`,children:((i.token_usage||i.tokenUsage)?.output_tokens||(i.token_usage||i.tokenUsage)?.outputTokens||0).toLocaleString()})]}),e.jsxs("div",{className:`${t.cardBg} rounded-lg p-2 sm:p-3 border ${t.border}`,children:[e.jsx("p",{className:`text-xs ${t.textSecondary} mb-1`,children:"Total"}),e.jsx("p",{className:"text-lg sm:text-xl font-bold text-blue-600",children:((i.token_usage||i.tokenUsage)?.total_tokens||(i.token_usage||i.tokenUsage)?.totalTokens||0).toLocaleString()})]})]})]}),e.jsxs("div",{className:`${t.searchBg} p-3 sm:p-4 rounded-lg`,children:[e.jsx("h3",{className:`text-sm sm:text-base font-semibold ${t.text} mb-3`,children:"Conversation Transcript"}),e.jsx("div",{className:"space-y-1 max-h-[250px] sm:max-h-[400px] overflow-y-auto",children:i.transcripts&&i.transcripts.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`text-xs sm:text-sm ${t.textSecondary} mb-2`,children:["Conversation started at"," ",Ae(i.startTime)]}),i.transcripts.map((s,a)=>e.jsx("div",{className:"flex flex-col gap-1.5 py-1.5 sm:py-2",children:s.speaker==="ai"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-start mb-1",children:e.jsxs("span",{className:`text-xs ${t.textSecondary}`,children:["SHIVAI ASSISTANT â€¢"," ",Be(s.timestamp)]})}),e.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:e.jsx(yt,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})}),e.jsx("div",{className:`max-w-[80%] ${t.cardBg} rounded-2xl rounded-tl-sm px-3 py-2 sm:px-4 sm:py-3 border ${t.border}`,children:e.jsx("p",{className:`text-xs sm:text-sm ${t.text}`,children:s.message})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsxs("span",{className:`text-xs ${t.textSecondary}`,children:["CUSTOMER â€¢"," ",Be(s.timestamp)]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"flex flex-col items-end max-w-[80%]",children:e.jsx("div",{className:"rounded-2xl rounded-tr-sm px-3 py-2 sm:px-4 sm:py-3 bg-gradient-to-br from-blue-500 to-blue-600",children:e.jsx("p",{className:"text-xs sm:text-sm text-white",children:s.message})})})})]})},a)),e.jsxs("p",{className:`text-xs ${t.textSecondary} mt-3 flex items-center gap-1`,children:[e.jsx(W,{className:"w-3 h-3"}),"Session ended â€¢ Resolution:"," ",i.resolution]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(q,{className:`w-10 h-10 sm:w-12 sm:h-12 ${t.textSecondary} mx-auto mb-3`}),e.jsx("p",{className:`text-xs sm:text-sm ${t.textSecondary}`,children:"No transcripts available for this session"})]})})]})]}),F==="summary"&&e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:`${t.searchBg} p-3 sm:p-4 rounded-lg`,children:[e.jsxs("h3",{className:`text-sm sm:text-base font-semibold ${t.text} mb-3 flex items-center gap-2`,children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"})}),"Call Recording"]}),e.jsxs("div",{className:`${t.cardBg} p-4 rounded-xl border ${t.border}`,children:[e.jsx("audio",{ref:h,onTimeUpdate:dt,onLoadedMetadata:mt,onEnded:()=>pe(!1),src:i.recordingUrl||"#"}),e.jsx("div",{ref:ne,onClick:xt,className:`relative h-1 ${t.border} rounded-full cursor-pointer mb-2`,style:{backgroundColor:t==="dark"?"#334155":"#cbd5e1"},children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-600 rounded-full transition-all",style:{width:`${R>0?fe/R*100:0}%`}})}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:`text-xs ${t.textSecondary} w-10`,children:Me(fe)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>_e(-10),className:`p-1.5 hover:${t.searchBg} rounded transition-colors`,title:"Rewind 10s",children:e.jsx(bt,{className:`w-4 h-4 ${t.textSecondary}`})}),e.jsx("button",{onClick:ot,className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-colors",title:X?"Pause":"Play",children:X?e.jsx(Nt,{className:"w-4 h-4",fill:"currentColor"}):e.jsx(vt,{className:"w-4 h-4 ml-0.5",fill:"currentColor"})}),e.jsx("button",{onClick:()=>_e(10),className:`p-1.5 hover:${t.searchBg} rounded transition-colors`,title:"Forward 10s",children:e.jsx(wt,{className:`w-4 h-4 ${t.textSecondary}`})}),e.jsxs("button",{onClick:ut,className:`px-2 py-1 hover:${t.searchBg} rounded transition-colors text-xs ${t.textSecondary}`,title:"Playback speed",children:[be,"x"]}),e.jsx("button",{onClick:ht,className:`p-1.5 hover:${t.searchBg} rounded transition-colors`,title:re?"Unmute":"Mute",children:re?e.jsx($t,{className:`w-4 h-4 ${t.textSecondary}`}):e.jsx(St,{className:`w-4 h-4 ${t.textSecondary}`})}),e.jsx("button",{className:`p-1.5 hover:${t.searchBg} rounded transition-colors`,title:"Download recording",children:e.jsx(Ve,{className:`w-4 h-4 ${t.textSecondary}`})})]}),e.jsx("span",{className:`text-xs ${t.textSecondary} w-10 text-right`,children:Me(R||i.duration||0)})]})]})]}),e.jsxs("div",{className:`${t.searchBg} p-3 sm:p-4 rounded-lg`,children:[e.jsxs("h3",{className:`text-sm sm:text-base font-semibold ${t.text} mb-3 flex items-center gap-2`,children:[e.jsx(q,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Call Summary"]}),We?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(kt,{className:"w-6 h-6 text-blue-500 animate-spin"})}):ue?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(se,{className:`w-10 h-10 ${t.textSecondary} mx-auto mb-2`}),e.jsx("p",{className:`text-xs sm:text-sm ${t.textSecondary}`,children:ue})]}):J?.data?.leads&&J.data.leads.length>0?(()=>{const s=J.data.leads.filter(a=>a.callId===(i.callId||i.sessionId||i.id));return console.log("ðŸ” Filtering leads. Looking for callId:",i.callId||i.sessionId||i.id),console.log("ðŸ” Available callIds:",J.data.leads.map(a=>a.callId)),console.log("ðŸ” Filtered leads:",s),s.length>0?e.jsx("div",{className:"space-y-4",children:s.map((a,n)=>e.jsxs("div",{className:`border ${t.border} rounded-lg p-3 sm:p-4 space-y-3`,children:[e.jsxs("div",{className:`flex items-center justify-between pb-2 border-b ${t.border}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-3.5 h-3.5 text-blue-500"}),e.jsx("span",{className:`text-xs font-mono ${t.textSecondary}`,children:a.callId||"N/A"})]}),a.createdAt&&e.jsx("span",{className:`text-xs ${t.textSecondary}`,children:new Date(a.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),a.intent&&e.jsxs("div",{className:"space-y-2",children:[a.intent.primary&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[e.jsx("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Primary Intent"}),e.jsx("p",{className:`text-xs sm:text-sm ${t.text} leading-relaxed`,children:a.intent.primary})]}),a.intent.details&&e.jsxs("div",{className:`${t.cardBg} p-3 rounded-lg border ${t.border}`,children:[e.jsx("p",{className:`text-xs font-medium ${t.textSecondary} mb-1`,children:"Details"}),e.jsx("p",{className:`text-xs sm:text-sm ${t.text} leading-relaxed`,children:a.intent.details})]}),a.urgency&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs ${t.textSecondary}`,children:"Urgency:"}),e.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${a.urgency==="high"?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400":a.urgency==="medium"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400"}`,children:a.urgency})]}),a.tags&&a.tags.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-medium ${t.textSecondary} mb-2`,children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:a.tags.map((c,o)=>e.jsx("span",{className:`px-2 py-0.5 ${t.cardBg} ${t.text} rounded-full text-xs border ${t.border}`,children:c},o))})]})]}),a.leadData&&e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-medium ${t.textSecondary} mb-2`,children:"Lead Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.leadData.name&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Fe,{className:`w-4 h-4 ${t.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Name"}),e.jsx("p",{className:`text-sm font-medium ${t.text} truncate`,children:a.leadData.name})]})]}),a.leadData.email&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Tt,{className:`w-4 h-4 ${t.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Email"}),e.jsx("p",{className:`text-sm font-medium ${t.text} truncate`,children:a.leadData.email})]})]}),a.leadData.phone&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(L,{className:`w-4 h-4 ${t.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Phone"}),e.jsx("p",{className:`text-sm font-medium ${t.text}`,children:a.leadData.phone})]})]}),a.leadData.status&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(te,{className:`w-4 h-4 ${t.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Status"}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${a.leadData.status==="qualified"?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":a.leadData.status==="interested"?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":a.leadData.status==="new"?"bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-400":`${t.cardBg} ${t.text}`}`,children:[a.leadData.status==="qualified"&&e.jsx(It,{className:"w-3 h-3"}),a.leadData.status]})]})]}),a.leadData.group_size&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Fe,{className:`w-4 h-4 ${t.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Group Size"}),e.jsx("p",{className:`text-sm font-medium ${t.text}`,children:a.leadData.group_size})]})]}),a.leadData.dates&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Dt,{className:`w-4 h-4 ${t.textSecondary} mt-0.5 flex-shrink-0`}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t.textSecondary}`,children:"Travel Dates"}),e.jsx("p",{className:`text-sm font-medium ${t.text}`,children:a.leadData.dates})]})]})]})]})]},a.id||n))}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(q,{className:`w-10 h-10 ${t.textSecondary} mx-auto mb-2`}),e.jsx("p",{className:`text-xs sm:text-sm ${t.textSecondary}`,children:"No matching summary for this call"}),e.jsxs("p",{className:`text-xs ${t.textSecondary} mt-1`,children:["Call ID:"," ",i.callId||i.sessionId||i.id]})]})})():e.jsxs("div",{className:"text-center py-6",children:[e.jsx(q,{className:`w-10 h-10 ${t.textSecondary} mx-auto mb-2`}),e.jsx("p",{className:`text-xs sm:text-sm ${t.textSecondary}`,children:"No call summary available"})]})]})]})]})]})}),e.jsxs("div",{className:`mt-4 sm:mt-6 pt-4 sm:pt-6 border-t ${t.border}`,children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:`text-sm ${t.textSecondary} text-center sm:text-left`,children:["Showing"," ",e.jsx("span",{className:`font-medium ${t.text}`,children:Te+1})," ","to"," ",e.jsx("span",{className:`font-medium ${t.text}`,children:Math.min(at,w)})," ","of"," ",e.jsx("span",{className:`font-medium ${t.text}`,children:w})," ","results",e.jsxs("span",{className:"block sm:inline sm:ml-1 text-xs",children:["(Page ",x," of ",m,")"]})]}),m>1&&e.jsxs("nav",{className:"hidden sm:flex items-center justify-end space-x-1","aria-label":"Pagination",children:[e.jsxs("button",{onClick:Ie,disabled:x===1,className:`
                      inline-flex items-center px-3 py-2 text-sm font-medium rounded-lg
                      border ${t.border} ${t.text}
                      hover:${t.hover} 
                      disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent
                      focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
                      transition-all duration-200
                    `,title:"Previous page","aria-label":"Go to previous page",children:[e.jsx(G,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[x>3&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ie(1),className:`
                            inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-lg
                            border ${t.border} ${t.text}
                            hover:${t.hover}
                            focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
                            transition-all duration-200 min-w-[40px]
                          `,"aria-label":"Go to page 1",children:"1"}),x>4&&e.jsx("span",{className:`px-2 py-2 text-sm ${t.textSecondary}`,"aria-hidden":"true",children:"â‹¯"})]}),Array.from({length:m},(s,a)=>a+1).filter(s=>s>=Math.max(1,x-1)&&s<=Math.min(m,x+1)).map(s=>e.jsx("button",{onClick:()=>ie(s),className:`
                            inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-lg
                            border transition-all duration-200 min-w-[40px]
                            focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
                            ${s===x?`${t.activeBg} ${t.text} border-blue-500 shadow-sm`:`${t.border} ${t.text} hover:${t.hover}`}
                          `,"aria-label":`Go to page ${s}`,"aria-current":s===x?"page":void 0,children:s},s)),x<m-2&&e.jsxs(e.Fragment,{children:[x<m-3&&e.jsx("span",{className:`px-2 py-2 text-sm ${t.textSecondary}`,"aria-hidden":"true",children:"â‹¯"}),e.jsx("button",{onClick:()=>ie(m),className:`
                            inline-flex items-center justify-center px-3 py-2 text-sm font-medium rounded-lg
                            border ${t.border} ${t.text}
                            hover:${t.hover}
                            focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
                            transition-all duration-200 min-w-[40px]
                          `,"aria-label":`Go to page ${m}`,children:m})]})]}),e.jsxs("button",{onClick:De,disabled:x===m,className:`
                      inline-flex items-center px-3 py-2 text-sm font-medium rounded-lg
                      border ${t.border} ${t.text}
                      hover:${t.hover}
                      disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent
                      focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
                      transition-all duration-200
                    `,title:"Next page","aria-label":"Go to next page",children:[e.jsx("span",{className:"hidden sm:inline mr-1",children:"Next"}),e.jsx(G,{className:"w-4 h-4 rotate-180"})]})]})]}),m>1&&e.jsxs("div",{className:"flex sm:hidden items-center justify-center mt-4 space-x-2",children:[e.jsx("button",{onClick:Ie,disabled:x===1,className:`
                    p-2 rounded-lg border ${t.border} ${t.text}
                    hover:${t.hover} disabled:opacity-50 disabled:cursor-not-allowed
                    focus:outline-none focus:ring-2 focus:ring-blue-500
                    transition-all duration-200
                  `,"aria-label":"Previous page",children:e.jsx(G,{className:"w-4 h-4"})}),e.jsxs("div",{className:`px-4 py-2 text-sm font-medium ${t.text} border ${t.border} rounded-lg`,children:["Page ",x," of ",m]}),e.jsx("button",{onClick:De,disabled:x===m,className:`
                    p-2 rounded-lg border ${t.border} ${t.text}
                    hover:${t.hover} disabled:opacity-50 disabled:cursor-not-allowed
                    focus:outline-none focus:ring-2 focus:ring-blue-500
                    transition-all duration-200
                  `,"aria-label":"Next page",children:e.jsx(G,{className:"w-4 h-4 rotate-180"})})]})]})]})]})},Bt=({employee:y,onBack:b})=>{const{currentTheme:t,theme:$}=Re(),[N,D]=d.useState("sessions"),[S,i]=d.useState(""),[_,H]=d.useState("all"),[k,U]=d.useState("all"),[T,M]=d.useState(null),[Y,Oe]=d.useState([{id:1,sessionId:"SES-2024-001",clientName:"John Smith",type:"chat",startTime:"2024-01-15 14:30:00",endTime:"2024-01-15 14:33:15",duration:"3m 15s",status:"completed",rating:5,sentiment:"positive",transcript:[{timestamp:"14:30:05",speaker:"user",message:"Hi, I need help with my account balance inquiry."},{timestamp:"14:30:08",speaker:"ai",message:"Hello! I'd be happy to help you with your account balance. Can you please provide your account number?"},{timestamp:"14:30:25",speaker:"user",message:"Sure, it's 123456789"},{timestamp:"14:30:30",speaker:"ai",message:"Thank you. Let me check your account... I can see your current balance is $2,450.75. Is there anything specific you'd like to know about your account?"},{timestamp:"14:30:45",speaker:"user",message:"That's perfect, thank you so much for the quick help!"},{timestamp:"14:30:50",speaker:"ai",message:"You're very welcome! Is there anything else I can assist you with today?"},{timestamp:"14:30:55",speaker:"user",message:"No, that's all. Thanks again!"},{timestamp:"14:31:00",speaker:"ai",message:"Perfect! Have a wonderful day and thank you for choosing our service."}],resolution:"Account balance provided successfully",tags:["account","balance","inquiry"]},{id:2,sessionId:"SES-2024-002",clientName:"Sarah Johnson",type:"voice",startTime:"2024-01-15 13:45:00",endTime:"2024-01-15 13:51:30",duration:"6m 30s",status:"completed",rating:4,sentiment:"neutral",transcript:[{timestamp:"13:45:05",speaker:"user",message:"Hello, I'm having trouble with my recent order"},{timestamp:"13:45:10",speaker:"ai",message:"Hi Sarah! I'm sorry to hear you're having issues with your order. Could you please provide me with your order number?"},{timestamp:"13:45:20",speaker:"user",message:"Yes, it's ORD-789123"},{timestamp:"13:45:25",speaker:"ai",message:"Let me look that up for you... I can see your order was placed on January 12th. What specific issue are you experiencing?"},{timestamp:"13:45:40",speaker:"user",message:"The delivery was supposed to be today but I haven't received it yet"},{timestamp:"13:45:45",speaker:"ai",message:"I understand your concern. Let me check the tracking information... It looks like there was a delay at the sorting facility. Your package is now scheduled for delivery tomorrow morning."},{timestamp:"13:46:15",speaker:"user",message:"That's frustrating, but I appreciate you checking. Will I get any compensation for the delay?"},{timestamp:"13:46:20",speaker:"ai",message:"Absolutely, I can offer you a 10% discount on your next order and expedite shipping at no charge. Would that be acceptable?"},{timestamp:"13:46:35",speaker:"user",message:"Yes, that works for me. Thank you for resolving this quickly."}],resolution:"Delivery delay resolved with compensation offered",tags:["order","delivery","delay","compensation"]},{id:3,sessionId:"SES-2024-003",clientName:"Mike Wilson",type:"chat",startTime:"2024-01-15 12:15:00",endTime:"2024-01-15 12:16:45",duration:"1m 45s",status:"escalated",rating:2,sentiment:"negative",transcript:[{timestamp:"12:15:05",speaker:"user",message:"This is ridiculous! I've been trying to cancel my subscription for weeks!"},{timestamp:"12:15:10",speaker:"ai",message:"I sincerely apologize for the frustration you're experiencing with the cancellation process. I'm here to help you resolve this immediately. May I have your account email?"},{timestamp:"12:15:25",speaker:"user",message:"mike.wilson@email.com - and I want this fixed NOW"},{timestamp:"12:15:30",speaker:"ai",message:"I understand your urgency, Mike. I'm looking up your account now... I see there have been multiple cancellation attempts. This requires immediate attention from our billing specialist. I'm escalating this to our senior support team who will contact you within the next hour."},{timestamp:"12:15:50",speaker:"user",message:"Fine, but this better be resolved today!"}],resolution:"Escalated to senior support team",tags:["subscription","cancellation","escalated","urgent"]}]),E=Y.filter(l=>{const m=l.clientName.toLowerCase().includes(S.toLowerCase())||l.sessionId.toLowerCase().includes(S.toLowerCase()),f=k==="all"||l.type===k;return m&&f&&_==="all"}),x=l=>{const m={completed:"bg-green-100 text-green-800",escalated:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",ongoing:"bg-blue-100 text-blue-800"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${m[l]}`,children:l.charAt(0).toUpperCase()+l.slice(1)})},v=l=>{const m={positive:"bg-green-100 text-green-800",neutral:"bg-gray-100 text-gray-800",negative:"bg-red-100 text-red-800"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${m[l]}`,children:l.charAt(0).toUpperCase()+l.slice(1)})},C=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),w=l=>Array.from({length:5},(m,f)=>e.jsx(Ut,{className:`w-4 h-4 ${f<l?"text-yellow-400 fill-current":"text-gray-300"}`},f));return y?e.jsxs("div",{className:`${t.cardBg} backdrop-blur-lg rounded-2xl border ${t.border} p-6 shadow-lg`,children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:b,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(G,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(ee,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold ${t.text}`,children:y.name}),e.jsx("p",{className:`text-sm ${t.textSecondary}`,children:"Employee Details & Session History"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xl font-bold ${t.text}`,children:y.totalSessions}),e.jsx("p",{className:`text-sm ${t.textSecondary}`,children:"Total Sessions"})]}),e.jsx(j,{className:"w-6 h-6 text-blue-500"})]})}),e.jsx("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:`text-xl font-bold ${t.text}`,children:[y.performance,"%"]}),e.jsx("p",{className:`text-sm ${t.textSecondary}`,children:"Performance Score"})]}),e.jsx(te,{className:"w-6 h-6 text-green-500"})]})}),e.jsx("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xl font-bold ${t.text}`,children:y.avgSessionDuration}),e.jsx("p",{className:`text-sm ${t.textSecondary}`,children:"Avg Duration"})]}),e.jsx(W,{className:"w-6 h-6 text-purple-500"})]})}),e.jsx("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xl font-bold ${t.text}`,children:y.client}),e.jsx("p",{className:`text-sm ${t.textSecondary}`,children:"Client"})]}),e.jsx(oe,{className:"w-6 h-6 text-orange-500"})]})})]}),e.jsx("div",{className:"flex space-x-1 mb-6 p-1 bg-gray-100 rounded-lg",children:[{id:"sessions",label:"Sessions & Transcripts",icon:j},{id:"analytics",label:"Analytics",icon:xe},{id:"settings",label:"Settings",icon:ee}].map(l=>{const m=l.icon;return e.jsxs("button",{onClick:()=>D(l.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all ${N===l.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(m,{className:"w-4 h-4"}),l.label]},l.id)})}),N==="sessions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search sessions...",value:S,onChange:l=>i(l.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:k,onChange:l=>U(l.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"chat",children:"Chat"}),e.jsx("option",{value:"voice",children:"Voice"})]}),e.jsxs("select",{value:_,onChange:l=>H(l.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20",children:[e.jsx("option",{value:"all",children:"All Dates"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]}),e.jsx("button",{className:"p-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:e.jsx(de,{className:"w-4 h-4 text-gray-600"})})]})]}),e.jsx("div",{className:"space-y-4",children:E.map(l=>e.jsxs("div",{className:`${t.cardBg} border ${t.border} rounded-lg p-4 hover:shadow-md transition-shadow`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[l.type==="chat"?e.jsx(j,{className:"w-5 h-5 text-blue-500"}):e.jsx(L,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:`font-medium ${t.text}`,children:l.sessionId})]}),x(l.status),v(l.sentiment)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:w(l.rating)}),e.jsx("button",{onClick:()=>M(l),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Transcript",children:e.jsx(me,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:`${t.textSecondary} mb-1`,children:"Client"}),e.jsx("p",{className:t.text,children:l.clientName})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${t.textSecondary} mb-1`,children:"Duration"}),e.jsx("p",{className:t.text,children:l.duration})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${t.textSecondary} mb-1`,children:"Start Time"}),e.jsx("p",{className:t.text,children:C(l.startTime)})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${t.textSecondary} mb-1`,children:"Resolution"}),e.jsx("p",{className:`${t.text} truncate`,children:l.resolution})]})]}),l.tags&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:l.tags.map((m,f)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:m},f))})]},l.id))})]}),N==="analytics"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:`text-lg font-semibold ${t.text} mb-2`,children:"Analytics Coming Soon"}),e.jsx("p",{className:`text-sm ${t.textSecondary}`,children:"Detailed performance analytics and insights will be available here."})]}),N==="settings"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ee,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:`text-lg font-semibold ${t.text} mb-2`,children:"Employee Settings"}),e.jsx("p",{className:`text-sm ${t.textSecondary}`,children:"Configuration and management options will be available here."})]}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Session Transcript - ",T.sessionId]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[T.clientName," â€¢ ",T.duration]})]}),e.jsx("button",{onClick:()=>M(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(se,{className:"w-5 h-5 text-gray-600"})})]}),e.jsx("div",{className:"p-4 overflow-y-auto max-h-96",children:e.jsx("div",{className:"space-y-4",children:T.transcript.map((l,m)=>e.jsx("div",{className:`flex ${l.speaker==="ai"?"justify-start":"justify-end"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${l.speaker==="ai"?"bg-gray-100 text-gray-800":"bg-blue-600 text-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs opacity-70",children:l.speaker==="ai"?"AI":"User"}),e.jsx("span",{className:"text-xs opacity-70",children:l.timestamp})]}),e.jsx("p",{className:"text-sm",children:l.message})]})},m))})}),e.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Download Transcript"]})})]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ee,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600",children:"Employee not found"})]})},Et=()=>{const[y,b]=d.useState("list"),[t,$]=d.useState(null),N=i=>{$(i),b("detail")},D=()=>{b("list"),$(null)},S=()=>{switch(y){case"detail":return e.jsx(Bt,{employee:t,onBack:D});default:return e.jsx(At,{onViewEmployee:N})}};return e.jsx("div",{className:"w-full",children:S()})};export{Bt as AIEmployeeDetail,Et as AIEmployeeStatsContainer,At as AIEmployeeStatsMain,Et as default};
