import{j as s,f as S,B as As,g as Cs,R as Is,h as _,s as A,i as Bs,D as ms,I as Ls,k as Es,m as Us,z as ps,A as Ms,o as gs,p as bs,q as H,r as Ps,P as D,t as Rs,S as Os,v as zs,w as Fs,x as Ws,V as Vs,y as Hs,G as Gs,L as qs,U as hs,c as Ys,H as Ks,C as Xs,J as Js,e as Qs}from"./admin-BluF8pBz.js";import{r as n}from"./router-C-JlvvJt.js";const Zs=[{value:"sales-business-development",label:"Sales & Business Development"},{value:"customer-support-service",label:"Customer Support & Service"},{value:"appointment-scheduling",label:"Appointment & Scheduling"},{value:"order-billing",label:"Order Management & Billing"},{value:"product-service-explainers",label:"Product / Service Explainers"},{value:"feedback-engagement",label:"Feedback & Engagement"},{value:"custom-workflows",label:"Custom Workflows"}],Ts=[{value:"All",label:"ðŸŒ Multilingual"},{value:"ar",label:"ðŸ‡¸ðŸ‡¦ Arabic"},{value:"zh",label:"ðŸ‡¨ðŸ‡³ Chinese"},{value:"nl",label:"ðŸ‡³ðŸ‡± Dutch"},{value:"en-GB",label:"ðŸ‡¬ðŸ‡§ English (UK)"},{value:"en-US",label:"ðŸ‡ºðŸ‡¸ English (US)"},{value:"en-IN",label:"ðŸ‡®ðŸ‡³ English (India)"},{value:"fr",label:"ðŸ‡«ðŸ‡· French"},{value:"de",label:"ðŸ‡©ðŸ‡ª German"},{value:"hi",label:"ðŸ‡®ðŸ‡³ Hindi"},{value:"it",label:"ðŸ‡®ðŸ‡¹ Italian"},{value:"ja",label:"ðŸ‡¯ðŸ‡µ Japanese"},{value:"ko",label:"ðŸ‡°ðŸ‡· Korean"},{value:"pt",label:"ðŸ‡µðŸ‡¹ Portuguese"},{value:"pl",label:"ðŸ‡µðŸ‡± Polish"},{value:"ru",label:"ðŸ‡·ðŸ‡º Russian"},{value:"es",label:"ðŸ‡ªðŸ‡¸ Spanish"},{value:"tr",label:"ðŸ‡¹ðŸ‡· Turkish"}],ge=({client:t,currentTheme:a})=>{const[e,r]=n.useState(null),[N,v]=n.useState(!0),[w,x]=n.useState(null);return n.useEffect(()=>{(async()=>{const y=t?.userData?._id||t?._id||t?.userData?.id||t?.id;if(!y){console.warn("âš ï¸ No user ID found for fetching onboarding data"),v(!1);return}try{v(!0),x(null),console.log("ðŸ” Fetching onboarding data for user ID:",y);const c=await A.getOnboardingByUserId(y);console.log("âœ… Onboarding data fetched:",c);const g=c?.data?.onboarding||c?.onboarding||c?.data||c;r(g)}catch(c){console.error("âŒ Error fetching onboarding data:",c),x(c.message||"Failed to load onboarding data")}finally{v(!1)}})()},[t]),N?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:`mt-2 text-sm ${a.textSecondary}`,children:"Loading onboarding data..."})]})}):w?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(S,{className:`w-5 h-5 mx-auto mb-3 ${a.textSecondary} opacity-50`}),s.jsx("p",{className:`${a.textSecondary} font-medium mb-2`,children:"Error loading onboarding data"}),s.jsx("p",{className:`${a.textSecondary} text-sm opacity-75`,children:w})]}):s.jsx("div",{className:"space-y-4 md:space-y-6",children:!e||e?.onboarding===null||Object.keys(e).length===0?s.jsxs("div",{className:`text-center py-8 rounded-lg border-2 border-dashed ${a.border}`,children:[s.jsx(S,{className:`w-5 h-5 mx-auto mb-3 ${a.textSecondary} opacity-50`}),s.jsx("p",{className:`${a.textSecondary} font-medium mb-2`,children:"No onboarding data available"}),s.jsx("p",{className:`${a.textSecondary} text-sm opacity-75`,children:"This client hasn't completed the onboarding process yet"})]}):s.jsxs("div",{className:"space-y-6",children:[e.company_basics&&s.jsxs("div",{className:`${a.cardBg} border ${a.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[s.jsxs("h4",{className:`text-base md:text-lg font-semibold ${a.text} mb-3 md:mb-4 flex items-center gap-2`,children:[s.jsx(As,{className:"w-5 h-5"}),"Company Basics"]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:[e.company_basics.name&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Company Name"}),s.jsx("p",{className:`${a.text} font-medium`,children:e.company_basics.name})]}),e.company_basics.company_email&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Company Email"}),s.jsx("p",{className:`${a.text} font-medium`,children:e.company_basics.company_email})]}),e.company_basics.company_phone&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Phone"}),s.jsx("p",{className:`${a.text} font-medium`,children:e.company_basics.company_phone})]}),e.company_basics.website&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Website"}),s.jsx("p",{className:`${a.text} font-medium`,children:s.jsx("a",{href:e.company_basics.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:e.company_basics.website})})]}),e.company_basics.company_size&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Company Size"}),s.jsx("p",{className:`${a.text} font-medium`,children:e.company_basics.company_size})]}),e.company_basics.linkedin_profile&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"LinkedIn"}),s.jsx("p",{className:`${a.text} font-medium`,children:s.jsx("a",{href:e.company_basics.linkedin_profile,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"LinkedIn Profile"})})]})]}),e.company_basics.industry&&Array.isArray(e.company_basics.industry)&&e.company_basics.industry.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-2`,children:"Industries"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.company_basics.industry.map((d,y)=>s.jsx("span",{className:`border ${a.border} px-2 md:px-3 py-1 rounded-md text-xs md:text-sm font-medium capitalize ${a.text}`,children:d.replace("_"," ")},y))})]}),e.company_basics.description&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-2`,children:"Description"}),s.jsx("p",{className:`${a.text} leading-relaxed`,children:e.company_basics.description})]}),e.company_basics.address&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-2`,children:"Address"}),s.jsx("p",{className:`${a.text} leading-relaxed`,children:e.company_basics.address})]})]}),e.plan_details&&s.jsxs("div",{className:`${a.cardBg} border ${a.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[s.jsxs("h4",{className:`text-base md:text-lg font-semibold ${a.text} mb-3 md:mb-4 flex items-center gap-2`,children:[s.jsx(Cs,{className:"w-5 h-5"}),"Plan Details"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[e.plan_details.type&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Plan Type"}),s.jsx("p",{className:`${a.text} font-medium`,children:e.plan_details.type})]}),e.plan_details.billing_contact&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-2`,children:"Billing Contact"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.plan_details.billing_contact.name&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Name"}),s.jsx("p",{className:`${a.text} font-medium`,children:e.plan_details.billing_contact.name})]}),e.plan_details.billing_contact.email&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Email"}),s.jsx("p",{className:`${a.text} font-medium`,children:e.plan_details.billing_contact.email})]}),e.plan_details.billing_contact.phone&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Phone"}),s.jsx("p",{className:`${a.text} font-medium`,children:e.plan_details.billing_contact.phone})]})]})]})]})]}),e.deployment_targets&&s.jsxs("div",{className:`${a.cardBg} border ${a.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[s.jsxs("h4",{className:`text-base md:text-lg font-semibold ${a.text} mb-3 md:mb-4 flex items-center gap-2`,children:[s.jsx(Is,{className:"w-5 h-5"}),"Deployment Targets"]}),e.deployment_targets.channels&&Array.isArray(e.deployment_targets.channels)&&e.deployment_targets.channels.length>0&&s.jsxs("div",{className:"mb-3 md:mb-4",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-2`,children:"Deployment Channels"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.deployment_targets.channels.map((d,y)=>s.jsx("span",{className:`border ${a.border} px-2 md:px-3 py-1 rounded-md text-xs md:text-sm font-medium capitalize ${a.text}`,children:d.replace("_"," ")},y))})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[e.deployment_targets.website_url&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Website URL"}),s.jsx("p",{className:`${a.text} font-medium`,children:s.jsx("a",{href:e.deployment_targets.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:e.deployment_targets.website_url})})]}),e.deployment_targets.whatsapp_phone&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"WhatsApp Phone"}),s.jsx("p",{className:`${a.text} font-medium`,children:e.deployment_targets.whatsapp_phone})]}),e.deployment_targets.support_email&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Support Email"}),s.jsx("p",{className:`${a.text} font-medium`,children:e.deployment_targets.support_email})]})]})]}),e.ai_employees&&Array.isArray(e.ai_employees)&&e.ai_employees.length>0&&s.jsxs("div",{className:`${a.cardBg} border ${a.border} rounded-xl p-4 md:p-6 shadow-lg`,children:[s.jsxs("h4",{className:`text-base md:text-lg font-semibold ${a.text} mb-3 md:mb-4 flex items-center gap-2`,children:[s.jsx(_,{className:"w-5 h-5"}),"AI Employees (",e.ai_employees.length,")"]}),s.jsx("div",{className:"space-y-3 md:space-y-4",children:e.ai_employees.map((d,y)=>s.jsxs("div",{className:`border ${a.border} rounded-lg p-3 md:p-4 ${a.searchBg}`,children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 rounded-lg border ${a.border} flex items-center justify-center`,children:s.jsx(_,{className:`w-5 h-5 ${a.textSecondary}`})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h5",{className:`font-medium ${a.text} truncate`,children:d?.name||`AI Employee #${y+1}`}),s.jsx("p",{className:`text-xs ${a.textSecondary} truncate`,children:d?.template||d?.type||"Custom Agent"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 text-sm",children:[d?.template&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Template"}),s.jsx("p",{className:`${a.text}`,children:Zs.find(c=>c.value===d.template)?.label||d.template})]}),d?.preferred_language&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Language"}),s.jsx("p",{className:`${a.text}`,children:d.preferred_language})]}),d?.agent_personality&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Personality"}),s.jsx("p",{className:`${a.text} capitalize`,children:d.agent_personality})]}),d?.voice_gender&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Voice"}),s.jsxs("p",{className:`${a.text}`,children:[d.voice_gender," -"," ",d.voice_style||"Default"]})]})]}),d?.special_instructions&&s.jsxs("div",{className:"mt-3",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Special Instructions"}),s.jsx("p",{className:`${a.text} text-sm leading-relaxed`,children:d.special_instructions})]}),d?.targets?.success_metrics&&s.jsxs("div",{className:"mt-3",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Success Metrics"}),s.jsx("p",{className:`${a.text} text-sm leading-relaxed`,children:d.targets.success_metrics})]}),d?.knowledge_sources&&s.jsxs("div",{className:"mt-3",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-2`,children:"Knowledge Sources"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[d.knowledge_sources.website_url&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"Website URL"}),s.jsx("p",{className:`${a.text}`,children:s.jsx("a",{href:d.knowledge_sources.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:d.knowledge_sources.website_url})})]}),d.knowledge_sources.faqs_text&&s.jsxs("div",{children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-1`,children:"FAQs Text"}),s.jsxs("p",{className:`${a.text}`,children:[d.knowledge_sources.faqs_text.substring(0,100),d.knowledge_sources.faqs_text.length>100?"...":""]})]})]})]}),d?.workflows&&Array.isArray(d.workflows)&&d.workflows.length>0&&s.jsxs("div",{className:"mt-3",children:[s.jsx("label",{className:`text-xs ${a.textSecondary} uppercase block mb-2`,children:"Workflows"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:d.workflows.map((c,g)=>s.jsx("span",{className:`border ${a.border} px-2 py-1 rounded-md text-xs font-medium ${a.text}`,children:c.name},g))})]})]},y))})]})]})})},be=({client:t,currentTheme:a})=>{const e=t?.userData||t||{},r=t?.company_basics||t?.userData?.onboarding?.company_basics||{},N=()=>t?.isApproved||e?.isApproved?"Approved":t?.isRejected||e?.isRejected?"Rejected":e?.isActive?"Active":"Pending";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:[s.jsxs("div",{className:"py-2 border-b border-gray-100",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Full Name"}),s.jsx("p",{className:`text-sm ${a.text}`,children:e.fullName||e.name||r.name||"â€”"})]}),s.jsxs("div",{className:"py-2 border-b border-gray-100",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Email"}),s.jsx("p",{className:`text-sm ${a.text}`,children:e.email||r.company_email||"â€”"})]}),s.jsxs("div",{className:"py-2 border-b border-gray-100",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Phone"}),s.jsx("p",{className:`text-sm ${a.text}`,children:e.phone||r.company_phone||"â€”"})]}),s.jsxs("div",{className:"py-2 border-b border-gray-100",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Website"}),s.jsx("p",{className:`text-sm ${a.text}`,children:e.website||r.company_website||"â€”"})]}),s.jsxs("div",{className:"py-2 border-b border-gray-100",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Company Size"}),s.jsx("p",{className:`text-sm ${a.text}`,children:e.companySize||r.company_size||"â€”"})]}),s.jsxs("div",{className:"py-2 border-b border-gray-100",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Status"}),s.jsx("p",{className:`text-sm ${a.text}`,children:N()})]}),s.jsxs("div",{className:"py-2 border-b border-gray-100",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Email Verified"}),s.jsx("p",{className:`text-sm ${a.text}`,children:e?.emailVerified?"Yes":"No"})]}),s.jsxs("div",{className:"py-2 border-b border-gray-100",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Onboarded"}),s.jsx("p",{className:`text-sm ${a.text}`,children:e?.isOnboarded?"Yes":"No"})]}),s.jsxs("div",{className:"py-2 border-b border-gray-100",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Created"}),s.jsx("p",{className:`text-sm ${a.text}`,children:e?.createdAt?new Date(e.createdAt).toLocaleDateString():"â€”"})]}),s.jsxs("div",{className:"py-2 border-b border-gray-100",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Last Login"}),s.jsx("p",{className:`text-sm ${a.text}`,children:e?.lastLoginAt?new Date(e.lastLoginAt).toLocaleDateString():"â€”"})]})]}),(e?.address||r?.company_address)&&s.jsxs("div",{className:"py-2",children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-1`,children:"Company Address"}),s.jsx("p",{className:`text-sm ${a.text}`,children:e?.address||r?.company_address})]})]})},he=({client:t,currentTheme:a,onViewAgent:e})=>{const[r,N]=n.useState([]),[v,w]=n.useState(!0),[x,d]=n.useState(null);n.useEffect(()=>{(async()=>{try{w(!0),d(null);const g=t?._id||t?.id||t?.userData?._id||t?.userData?.id;if(!g){console.error("âŒ No client ID found"),d("No client ID available");return}console.log("ðŸ” Fetching AI employees for client:",g);const m=await A.getAgentsById(g);console.log("âœ… AI employees fetched:",m);let b=[];m?.success&&m?.data?b=m.data:Array.isArray(m)?b=m:m?.agents?b=m.agents:b=t?.ai_employees||t?.userData?.ai_employees||[],Array.isArray(b)||(b=[]),console.log("ðŸ“‹ Processed AI employees data:",b),N(b)}catch(g){console.error("âŒ Error fetching AI employees:",g),d(g.message||"Failed to load AI employees");const m=t?.ai_employees||t?.userData?.ai_employees||[];Array.isArray(m)&&m.length>0&&(console.log("ðŸ“‹ Using fallback AI employees data"),N(m),d(null))}finally{w(!1)}})()},[t]);const y=c=>{if(!c||typeof c!="object")return"English";const g=Object.keys(c);if(g.length===1&&g[0]==="en")return"English";if(g.length>1)return"Multilingual";const m=g[0],b=Ts.find($=>$.value===m);return b?b.label:"English"};return v?s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-gray-300 border-t-gray-600 mx-auto"}),s.jsx("p",{className:`mt-3 text-sm ${a.textSecondary}`,children:"Loading..."})]})}):x?s.jsx("div",{className:"text-center py-16",children:s.jsx("p",{className:`${a.textSecondary} text-sm`,children:x})}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between pb-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_,{className:"w-4 h-4 text-gray-500"}),s.jsxs("span",{className:`text-sm font-medium ${a.text}`,children:["AI Employees (",r.length,")"]})]})}),r.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(_,{className:"w-8 h-8 mx-auto mb-3 text-gray-400"}),s.jsx("p",{className:`text-sm ${a.textSecondary}`,children:"No AI employees configured"})]}):s.jsx("div",{className:"space-y-3",children:r.map((c,g)=>s.jsxs("div",{className:`border ${a.border} rounded-lg p-4 hover:border-gray-300 transition-colors`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-9 h-9 rounded-lg border border-gray-200 flex items-center justify-center",children:s.jsx(_,{className:"w-4 h-4 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h4",{className:`text-sm font-medium ${a.text}`,children:c.name||c.agent_name||`AI Employee #${g+1}`}),s.jsx("p",{className:`text-xs ${a.textSecondary}`,children:c.template||c.type||"sales-business-development"})]})]}),e&&s.jsxs("button",{onClick:()=>e(c),className:`flex items-center gap-1 text-xs ${a.textSecondary} hover:text-gray-700 transition-colors`,children:[s.jsx("span",{children:"View"}),s.jsx(Bs,{className:"w-3 h-3"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-0.5`,children:"Template"}),s.jsx("p",{className:`text-sm ${a.text}`,children:c.template||"Sales"})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-0.5`,children:"Language"}),s.jsx("p",{className:`text-sm ${a.text}`,children:y(c.greeting_message)})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-0.5`,children:"Personality"}),s.jsx("p",{className:`text-sm ${a.text} capitalize`,children:c.personality||"â€”"})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-[11px] uppercase tracking-wide ${a.textSecondary} mb-0.5`,children:"Voice"}),s.jsx("p",{className:`text-sm ${a.text} capitalize`,children:c.voice||"â€”"})]})]})]},c._id||c.id||g))})]})},je=({client:t,currentTheme:a})=>{const e=[{id:1,date:"2024-12-01",amount:149,type:"subscription",status:"completed",description:"Monthly subscription"},{id:2,date:"2024-11-01",amount:149,type:"subscription",status:"completed",description:"Monthly subscription"},{id:3,date:"2024-10-15",amount:50,type:"usage",status:"completed",description:"Additional tokens"}];return s.jsx("div",{className:"space-y-4",children:e.length===0?s.jsxs("div",{className:`text-center py-12 rounded-xl ${a.cardBg} border ${a.cardBorder}`,children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 flex items-center justify-center",children:s.jsx(ms,{className:`w-8 h-8 ${a.textSecondary}`})}),s.jsx("h4",{className:`text-lg font-medium ${a.text} mb-2`,children:"No Transactions"}),s.jsx("p",{className:`${a.textSecondary} text-sm`,children:"No transaction history available for this client."})]}):s.jsx("div",{className:"grid gap-3",children:e.map(r=>s.jsx("div",{className:`${a.cardBg} rounded-xl border ${a.cardBorder} p-4 hover:shadow-sm transition-shadow`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-50 dark:bg-gray-800/50 flex items-center justify-center",children:s.jsx(ms,{className:"w-5 h-5 text-gray-900"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:`font-medium ${a.text}`,children:["$",r.amount.toFixed(2)]}),s.jsx("p",{className:`text-sm ${a.textSecondary}`,children:r.description})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:`text-sm ${a.textSecondary} mb-1`,children:new Date(r.date).toLocaleDateString("en-US",{month:"short",day:"2-digit"})}),s.jsx("p",{className:`text-xs font-medium ${r.status==="completed"?"text-green-600 dark:text-green-400":r.status==="pending"?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:r.status})]})]})},r.id))})})},se=({agent:t,onBack:a,currentTheme:e,onClose:r})=>{console.log("Agent/Client data:",t),console.log("Agent ID fields from client:",{client_id:t?.id||t?._id,userData_id:t?.userData?.id||t?.userData?._id,agent_id_from_client:t?.agent_id||t?.agentId,userData_agent_id:t?.userData?.agent_id||t?.userData?.agentId,direct_fields:{id:t?.id,_id:t?._id,agent_id:t?.agent_id,agentId:t?.agentId}});const N=t?.id||t?._id||t?.userData?.id||t?.userData?._id||t?.agent_id||t?.agentId||t?.userData?.agent_id||t?.userData?.agentId;console.log("Extracted Agent ID:",N);const v=t?.name||t?.agent_name||t?.userData?.name||t?.userData?.agent_name||t?.company_name||t?.companyName||"AI Assistant";console.log("Extracted Agent Name:",v);const w=()=>{const m=new Set;t?.greeting_messages&&typeof t.greeting_messages=="object"&&Object.keys(t.greeting_messages).forEach(h=>{h!=="multilingual"&&t.greeting_messages[h]&&t.greeting_messages[h].trim()!==""&&m.add(h)}),t?.userData?.greeting_messages&&typeof t.userData.greeting_messages=="object"&&Object.keys(t.userData.greeting_messages).forEach(h=>{h!=="multilingual"&&t.userData.greeting_messages[h]&&t.userData.greeting_messages[h].trim()!==""&&m.add(h)}),[t?.language,t?.preferred_language,t?.userData?.language,t?.userData?.preferred_language].filter(Boolean).forEach(h=>m.add(h)),t?.languages&&Array.isArray(t.languages)&&t.languages.forEach(h=>{h&&m.add(h)}),t?.userData?.languages&&Array.isArray(t.userData.languages)&&t.userData.languages.forEach(h=>{h&&m.add(h)});const $=Array.from(m).filter(h=>h&&h.trim()!=="");return $.length>1?"Multi lingual":$.length===1?$[0].toUpperCase():"EN"},x={agentId:N||"NO_AGENT_ID_FOUND",agentName:v,language:w(),primaryColor:t?.widget?.primary_color||t?.userData?.primary_color||"#4b5563",secondaryColor:t?.widget?.secondary_color||t?.userData?.secondary_color||"#6b7280",accentColor:t?.widget?.accent_color||t?.userData?.accent_color||"#374151",position:"bottom-right",chatWidth:"380px",chatHeight:"520px",autoOpen:!1,voiceEnabled:t?.voice,companyName:t?.widget?.company_name||v,companyDescription:t?.description||t?.company_description||t?.userData?.description||t?.userData?.company_description||"AI-Powered Support - We offer 24/7 voice support to handle your business calls efficiently and professionally.",allowedDomains:t?.allowed_domains||t?.userData?.allowed_domains||["*"]},d=n.useRef(null),y=()=>{const m="https://callshivai.com/widget2.js",b=new URLSearchParams({agentId:x.agentId,language:x.language,primaryColor:x.primaryColor,secondaryColor:x.secondaryColor,accentColor:x.accentColor,position:x.position,chatWidth:x.chatWidth,chatHeight:x.chatHeight,autoOpen:x.autoOpen.toString(),voiceEnabled:x.voiceEnabled.toString(),companyName:x.companyName,companyDescription:x.companyDescription,allowedDomains:x.allowedDomains.join(","),v:Date.now().toString()});return`${m}?${b.toString()}`};console.log("Generated Widget URL:",x,t);const c=()=>{const m=y(),b=w();return`
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent Preview</title>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            color: #334155;
            overflow: hidden;
        }
        * {
            box-sizing: border-box;
        }
        .dashboard {
            height: calc(100vh - 32px);
            display: grid;
            grid-template-rows: auto 1fr;
            gap: 12px;
        }
        .header {
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            text-align: center;
        }
        .agent-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 4px;
        }
        .agent-id {
            font-size: 0.75rem;
            color: #64748b;
            font-family: 'Monaco', 'Menlo', monospace;
            background: #f1f5f9;
            padding: 2px 8px;
            border-radius: 4px;
            display: inline-block;
        }
        .content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
            height: 100%;
        }
        .card {
            background: white;
            border-radius: 6px;
            padding: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: auto;
        }
        .card-title {
            font-size: 1rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 8px;
        }
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 8px;
            margin-top: 12px;
        }
        .info-item {
            background: #f8fafc;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #e2e8f0;
            text-align: left;
        }
        .info-label {
            font-size: 0.65rem;
            color: #64748b;
            text-transform: uppercase;
            font-weight: 500;
            margin-bottom: 4px;
        }
        .info-value {
            font-size: 0.8rem;
            color: #1e293b;
            font-weight: 500;
        }
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 500;
        }
        .status-active {
            background: #dcfce7;
            color: #166534;
        }
        .status-inactive {
            background: #fee2e2;
            color: #991b1b;
        }
        .color-preview {
            width: 14px;
            height: 14px;
            border-radius: 2px;
            display: inline-block;
            margin-left: 6px;
            border: 1px solid #e2e8f0;
            vertical-align: middle;
        }
        .description {
            font-size: 0.85rem;
            line-height: 1.4;
            color: #475569;
            background: #f1f5f9;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 12px;
        }
        .message-box {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 6px;
            padding: 12px;
        }
        .message-text {
            font-size: 0.85rem;
            color: #1e40af;
            line-height: 1.4;
        }

        /* Mobile adjustments */
        @media (max-width: 768px) {
            .info-grid {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
                gap: 6px;
            }
            .info-item {
                padding: 6px;
            }
            .card {
                padding: 0px 8px;
                border: none;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
      
        
        <div class="content">
            <div class="card">
                ${`<div class="description">${x.agentName}</div>`}
                ${`<div class="description">${x.companyDescription}</div>`}
                
                <div class="info-grid">
                    <div class="info-item">
                        <div class="info-label">Status</div>
                        <div class="info-value">
                            <span class="status-badge ${t?.is_active!==!1?"status-active":"status-inactive"}">
                                ${t?.is_active!==!1?"Active":"Inactive"}
                            </span>
                        </div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Language</div>
                        <div class="info-value">${b}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Voice</div>
                        <div class="info-value">${x.voiceEnabled?"Enabled":"Disabled"}</div>
                    </div>
                   
                    <div class="info-item">
                        <div class="info-label">Position</div>
                        <div class="info-value">${x.position}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Dimensions</div>
                        <div class="info-value">${x.chatWidth} Ã— ${x.chatHeight}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Primary Color</div>
                        <div class="info-value">
                            ${x.primaryColor}
                            <span class="color-preview" style="background-color: ${x.primaryColor}"></span>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 16px;">
                    <h3 style="font-size: 0.9rem; font-weight: 600; margin-bottom: 8px; color: #1e293b;">Allowed Domains</h3>
                    <div class="message-box">
                        <div class="message-text">
                            ${t?.allowed_domains&&t.allowed_domains.length>0?t.allowed_domains.join(", "):t?.userData?.allowed_domains&&t.userData.allowed_domains.length>0?t.userData.allowed_domains.join(", "):"All domains allowed (*)"}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="${m}"><\/script>
</body>
</html>`},g=()=>{if(d.current){const m=c(),b=new Blob([m],{type:"text/html"}),$=URL.createObjectURL(b);d.current.src=$,d.current.onload=()=>{URL.revokeObjectURL($)}}};return n.useEffect(()=>{g()},[]),s.jsxs("div",{className:"h-screen flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Configuration"}),s.jsxs("button",{onClick:g,className:"px-3 py-1.5 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors duration-200 flex items-center gap-2",title:"Reload Widget Script",children:[s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),s.jsx("path",{d:"M21 3v5h-5"}),s.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),s.jsx("path",{d:"M3 21v-5h5"})]}),"Load"]})]}),s.jsx("div",{className:"flex items-start justify-center flex-1 p-3",children:s.jsx("iframe",{ref:d,className:"w-full h-[70vh] lg:h-[60vh] border-0 overflow-auto",title:"Widget Preview",sandbox:"allow-scripts allow-same-origin allow-forms"})})]})},fe=({agent:t,onBack:a,currentTheme:e})=>{if(!t)return s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:"No agent data available"}),s.jsx("button",{onClick:a,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Back to List"})]});const[r,N]=n.useState("overview"),[v,w]=n.useState(!1),[x,d]=n.useState(!1),[y,c]=n.useState([]),[g,m]=n.useState(""),[b,$]=n.useState(""),[h,G]=n.useState(!1),[ee,ae]=n.useState(""),[te,le]=n.useState("en"),[ie,de]=n.useState(null),[q,Y]=n.useState([]),[K,X]=n.useState(!1),[o,J]=n.useState(null),[ne,C]=n.useState([]),[js,R]=n.useState(!1),[I,B]=n.useState("transcripts"),[L,O]=n.useState(null),[fs,Q]=n.useState(!1),[Z,T]=n.useState(null),[oe,ce]=n.useState({noiseSuppression:!0,echoCancellation:!0,autoGainControl:!0}),[E,U]=n.useState(!1),[ss,z]=n.useState(0),[k,es]=n.useState(0),[re,xe]=n.useState(1),[M,as]=n.useState(!1),[ts,ls]=n.useState(1),j=n.useRef(null),F=n.useRef(null),ys=n.useMemo(()=>[{id:"overview",label:"Overview",icon:Ls},{id:"test",label:"Preview",icon:Es},{id:"analytics",label:"Analytics",icon:Us},{id:"instructions",label:"Instructions",icon:S}],[]);n.useEffect(()=>{(async()=>{if(r==="analytics")try{X(!0);const i=t?.id||t?._id;if(!i){console.error("No agent ID found");return}console.log("ðŸ“‹ Fetching sessions for agent:",i);const p=await A.getAgentSessions(i);console.log("âœ… Sessions response:",p);const f=p?.sessions||p?.data?.sessions||p,u=Array.isArray(f)?f:[];Y(u)}catch(i){console.error("âŒ Error fetching agent sessions:",i),ps.error("Failed to load sessions"),Y([])}finally{X(!1)}})()},[r,t]);const us=async(l,i)=>{try{Q(!0),T(null),console.log("ðŸ“Š Fetching call summary for agent:",l,"callId:",i);const p=await A.getCallSummary(l);console.log("âœ… Call summary response:",p),O(p)}catch(p){console.error("âŒ Error fetching call summary:",p),T("Failed to load call summary"),O(null)}finally{Q(!1)}},Ns=()=>{j.current&&z(j.current.currentTime)},vs=()=>{j.current&&es(j.current.duration)},$s=l=>{if(F.current&&j.current&&k>0){const i=F.current.getBoundingClientRect(),f=(l.clientX-i.left)/i.width*k;j.current.currentTime=f,z(f)}},ws=()=>{j.current&&(E?j.current.pause():j.current.play(),U(!E))},is=l=>{j.current&&(j.current.currentTime+=l)},Ss=()=>{j.current&&(j.current.muted=!M,as(!M))},_s=()=>{const l=[1,1.25,1.5,2],i=l.indexOf(ts),p=l[(i+1)%l.length];ls(p),j.current&&(j.current.playbackRate=p)},ds=l=>l?new Date(l).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"";n.useCallback(()=>{if(!b.trim())return;G(!0);const l={role:"user",text:b.trim(),timestamp:new Date};c(i=>[...i,l]),$(""),setTimeout(()=>{const i=[`Thank you for testing! You said: "${l.text}". I'm ${t?.name||"Agent"} and I'm working correctly.`,`Test successful! As ${t?.name||"Agent"}, I received your message: "${l.text}". How can I assist you further?`,`Hello! This is ${t?.name||"Agent"}. I got your test message: "${l.text}". The agent is responding as expected.`,`Agent test complete! Your message: "${l.text}" was processed successfully by ${t?.name||"Agent"}.`],p={role:"agent",text:i[Math.floor(Math.random()*i.length)],timestamp:new Date};c(f=>[...f,p]),G(!1)},1500+Math.random()*1e3)},[b,t]);const ns=l=>l?new Date(l).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A",os=l=>{const i=Math.floor(l/60),p=Math.floor(l%60);return`${i}:${p.toString().padStart(2,"0")}`},ks=n.useCallback(async l=>{try{if(J(l),B("transcripts"),U(!1),z(0),es(0),ls(1),as(!1),l?.transcripts&&Array.isArray(l.transcripts))console.log("ðŸ“œ Using transcripts from session object:",l.transcripts),C(l.transcripts);else{R(!0);const f=l?.session_id||l?.id||l?._id;console.log("ðŸ“œ Fetching transcripts for session:",f);const u=await A.getSessionTranscripts(f);console.log("âœ… Transcripts response:",u);const P=u?.transcripts||u?.data||u,W=Array.isArray(P)?P:[];C(W),R(!1)}const i=l?.agentId||l?.agent_id,p=l?.callId||l?.session_id||l?.id;i&&p&&await us(i,p)}catch(i){console.error("âŒ Error fetching session data:",i),ps.error("Failed to load session data"),C([]),R(!1)}},[]),Ds=n.useCallback(()=>{J(null),C([]),O(null),B("transcripts"),U(!1),j.current&&(j.current.pause(),j.current.currentTime=0)},[]);return s.jsxs("div",{className:"space-y-4 md:space-y-6 px-2 sm:px-0",children:[s.jsx("div",{className:`${e.cardBg} border ${e.border} rounded-lg p-3 sm:p-4 md:p-6 shadow-lg`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("button",{onClick:a,className:`p-2 rounded-lg ${e.hover} ${e.text} transition-all duration-200 mt-1`,children:s.jsx(Ms,{className:"w-5 h-5"})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h1",{className:`text-xl md:text-2xl font-bold ${e.text} truncate`,children:t?.name||"Unnamed Agent"}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2",children:[s.jsxs("p",{className:`text-sm ${e.textSecondary}`,children:["Agent ID:"," ",s.jsx("span",{className:"font-mono",children:t?.id||t?._id||"N/A"})]}),s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-xs font-medium border w-fit ${t?.is_active?`${e.activeBg} ${e.text} ${e.activeBorder}`:`${e.searchBg} ${e.textSecondary} ${e.border}`}`,children:t?.is_active?"Active":"Inactive"})]})]})})})]})}),s.jsxs("div",{className:`${e.cardBg} border ${e.border} rounded-lg shadow-lg`,children:[s.jsx("div",{className:"flex overflow-x-auto scrollbar-hide border-b border-gray-200 dark:border-gray-700",children:ys?.map(l=>{const i=l.icon;return s.jsx("button",{onClick:()=>N(l.id),className:`flex-shrink-0 px-4 py-3 border-b-2 transition-all duration-200 whitespace-nowrap ${r===l.id?"border-blue-500 text-blue-600 dark:text-blue-400":`border-transparent ${e.textSecondary} hover:${e.text} hover:border-gray-300 dark:hover:border-gray-600`}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(i,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:l.label})]})},l.id)})}),r==="overview"&&s.jsx("div",{className:"space-y-4 md:space-y-6",children:s.jsxs("div",{className:`${e.cardBg}  p-4 md:p-6 border ${e.border} shadow-lg`,children:[s.jsx("h3",{className:`text-lg font-semibold ${e.text} mb-4 md:mb-6`,children:"Basic Information"}),s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:`text-sm ${e.textSecondary} block mb-2 font-medium`,children:"Agent Name"}),s.jsx("p",{className:`${e.text} text-base`,children:t?.name||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`text-sm ${e.textSecondary} block mb-2 font-medium`,children:"Created By"}),s.jsx("p",{className:`${e.text} text-base font-mono text-sm`,children:t?.created_by||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`text-sm ${e.textSecondary} block mb-2 font-medium`,children:"Created Date"}),s.jsx("p",{className:`${e.text} text-base`,children:t?.created_at?new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:`text-sm ${e.textSecondary} block mb-2 font-medium`,children:"Knowledge Base URL"}),t?.knowledge_base_url?s.jsx("a",{href:t.knowledge_base_url,target:"_blank",rel:"noopener noreferrer",className:`${e.text} text-base text-blue-600 dark:text-blue-400 hover:underline break-all`,children:t.knowledge_base_url}):s.jsx("p",{className:`${e.text} text-base`,children:"N/A"})]})]})]})}),r==="test"&&s.jsx(se,{agent:t,currentTheme:e}),r==="analytics"&&s.jsxs("div",{className:"space-y-6 p-3",children:[o&&s.jsx("div",{className:"fixed inset-0 -top-8 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4 backdrop-blur-sm overflow-y-auto",children:s.jsxs("div",{className:`${e.cardBg} rounded-lg sm:rounded-xl w-full max-w-3xl  max-h-[95vh] sm:max-h-[90vh] overflow-hidden shadow-2xl my-auto flex flex-col`,children:[s.jsxs("div",{className:`p-3 sm:p-4 border-b ${e.border}`,children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2 sm:mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx("div",{className:`w-7 h-7 sm:w-10 sm:h-10 ${e.activeBg} rounded-lg flex items-center justify-center flex-shrink-0`,children:s.jsx(gs,{className:`w-3.5 h-3.5 sm:w-5 sm:h-5 ${e.textSecondary}`})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:`text-sm sm:text-lg font-semibold ${e.text} truncate`,children:"Session Transcript"}),s.jsx("p",{className:`text-xs ${e.textSecondary} truncate font-mono`,children:o.session_id||o.id})]})]}),s.jsx("button",{onClick:Ds,className:`p-1 sm:p-2 ${e.textSecondary} rounded-lg ${e.hover} transition-colors flex-shrink-0`,children:s.jsx(bs,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),s.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 mb-2 sm:mb-3",children:[s.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${e.searchBg} px-2 py-1.5 rounded-md`,children:[s.jsx(H,{className:`w-5 h-5 ${e.textSecondary} flex-shrink-0`}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:`text-xs ${e.textSecondary} hidden sm:block`,children:"Date & Time"}),s.jsx("span",{className:`text-xs font-medium ${e.text} truncate block`,children:ns(o.start_time)})]})]}),s.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${e.searchBg} px-2 py-1.5 rounded-md`,children:[s.jsx(Ps,{className:`w-5 h-5 ${e.textSecondary} flex-shrink-0`}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:`text-xs ${e.textSecondary} hidden sm:block`,children:"Location"}),s.jsx("span",{className:`text-xs font-medium ${e.text} truncate block`,children:(()=>{const l=o?.location||{};return[l?.city,l?.country].filter(i=>i&&i!=="unknown").join(", ")||"Unknown"})()})]})]}),s.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${e.searchBg} px-2 py-1.5 rounded-md`,children:[s.jsx(H,{className:`w-5 h-5 ${e.textSecondary} flex-shrink-0`}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:`text-xs ${e.textSecondary} hidden sm:block`,children:"Duration"}),s.jsx("span",{className:`text-xs font-medium ${e.text} truncate block`,children:(()=>{const l=o?.duration_seconds||0;return l>0?`${Math.floor(l/60)}m ${Math.floor(l%60)}s`:o?.duration||"0s"})()})]})]}),s.jsxs("div",{className:`flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 ${e.searchBg} px-2 py-1.5 rounded-md`,children:[s.jsx(D,{className:`w-5 h-5 ${e.textSecondary} flex-shrink-0`}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:`text-xs ${e.textSecondary} hidden sm:block`,children:"Device"}),s.jsx("span",{className:`text-xs font-medium ${e.text} truncate block`,children:o.device?.deviceType||o.device?.device_type||"Unknown"})]})]})]}),s.jsxs("div",{className:`flex gap-1 p-1 ${e.searchBg} rounded-lg`,children:[s.jsxs("button",{onClick:()=>B("transcripts"),className:`flex-1 px-3 py-2 text-xs sm:text-sm font-medium rounded-md transition-all duration-200 ${I==="transcripts"?`${e.cardBg} ${e.text} shadow-sm`:`${e.textSecondary} hover:${e.text}`}`,children:[s.jsx(gs,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 inline mr-1.5"}),"Call Transcripts"]}),s.jsxs("button",{onClick:()=>B("summary"),className:`flex-1 px-3 py-2 text-xs sm:text-sm font-medium rounded-md transition-all duration-200 ${I==="summary"?`${e.cardBg} ${e.text} shadow-sm`:`${e.textSecondary} hover:${e.text}`}`,children:[s.jsx(S,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 inline mr-1.5"}),"Recording & Summary"]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4",children:[I==="transcripts"&&s.jsxs(s.Fragment,{children:[(o.token_usage||o.tokenUsage)&&s.jsxs("div",{className:`px-3 sm:px-4 py-3 mb-3 ${e.searchBg} rounded-lg`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Rs,{className:`w-5 h-5 ${e.text}`}),s.jsx("h4",{className:`text-sm sm:text-base font-semibold ${e.text}`,children:"Token Usage"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4",children:[s.jsxs("div",{className:`${e.cardBg} rounded-lg p-2 sm:p-3 border ${e.border}`,children:[s.jsx("p",{className:`text-xs ${e.textSecondary} mb-1`,children:"Input"}),s.jsx("p",{className:`text-lg sm:text-xl font-bold ${e.text}`,children:((o.token_usage||o.tokenUsage)?.input_tokens||(o.token_usage||o.tokenUsage)?.inputTokens||0).toLocaleString()})]}),s.jsxs("div",{className:`${e.cardBg} rounded-lg p-2 sm:p-3 border ${e.border}`,children:[s.jsx("p",{className:`text-xs ${e.textSecondary} mb-1`,children:"Output"}),s.jsx("p",{className:`text-lg sm:text-xl font-bold ${e.text}`,children:((o.token_usage||o.tokenUsage)?.output_tokens||(o.token_usage||o.tokenUsage)?.outputTokens||0).toLocaleString()})]}),s.jsxs("div",{className:`${e.cardBg} rounded-lg p-2 sm:p-3 border ${e.border}`,children:[s.jsx("p",{className:`text-xs ${e.textSecondary} mb-1`,children:"Total"}),s.jsx("p",{className:"text-lg sm:text-xl font-bold text-blue-600",children:((o.token_usage||o.tokenUsage)?.total_tokens||(o.token_usage||o.tokenUsage)?.totalTokens||0).toLocaleString()})]})]})]}),s.jsxs("div",{className:`${e.searchBg} p-3 sm:p-4 rounded-lg`,children:[s.jsx("h3",{className:`text-sm sm:text-base font-semibold ${e.text} mb-3`,children:"Conversation Transcript"}),s.jsx("div",{className:"space-y-1 max-h-[250px] sm:max-h-[400px] overflow-y-auto",children:o.transcripts&&o.transcripts.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:`text-xs sm:text-sm ${e.textSecondary} mb-2`,children:["Conversation started at"," ",ns(o.start_time)]}),o.transcripts.map((l,i)=>s.jsx("div",{className:"flex flex-col gap-1.5 py-1.5 sm:py-2",children:l.speaker==="ai"||l.role==="agent"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-start mb-1",children:s.jsxs("span",{className:`text-xs ${e.textSecondary}`,children:["SHIVAI ASSISTANT â€¢"," ",ds(l.timestamp)]})}),s.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2",children:[s.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:s.jsx(_,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})}),s.jsx("div",{className:`max-w-[80%] ${e.cardBg} rounded-2xl rounded-tl-sm px-3 py-2 sm:px-4 sm:py-3 border ${e.border}`,children:s.jsx("p",{className:`text-xs sm:text-sm ${e.text}`,children:l.message||l.text})})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-end mb-1",children:s.jsxs("span",{className:`text-xs ${e.textSecondary}`,children:["CUSTOMER â€¢"," ",ds(l.timestamp)]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx("div",{className:"flex flex-col items-end max-w-[80%]",children:s.jsx("div",{className:"rounded-2xl rounded-tr-sm px-3 py-2 sm:px-4 sm:py-3 bg-gradient-to-br from-blue-500 to-blue-600",children:s.jsx("p",{className:"text-xs sm:text-sm text-white",children:l.message||l.text})})})})]})},i)),s.jsxs("p",{className:`text-xs ${e.textSecondary} mt-3 flex items-center gap-1`,children:[s.jsx(H,{className:"w-5 h-5"}),"Session ended â€¢ Resolution:"," ",o.resolution]})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(S,{className:`w-10 h-10 sm:w-12 sm:h-12 ${e.textSecondary} mx-auto mb-3`}),s.jsx("p",{className:`text-xs sm:text-sm ${e.textSecondary}`,children:"No transcripts available for this session"})]})})]})]}),I==="summary"&&s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:`${e.searchBg} p-3 sm:p-4 rounded-lg`,children:[s.jsxs("h3",{className:`text-sm sm:text-base font-semibold ${e.text} mb-3 flex items-center gap-2`,children:[s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"})}),"Call Recording"]}),s.jsxs("div",{className:`${e.cardBg} p-4 rounded-xl border ${e.border}`,children:[s.jsx("audio",{ref:j,onTimeUpdate:Ns,onLoadedMetadata:vs,onEnded:()=>U(!1),src:o.recordingUrl||"#"}),s.jsx("div",{ref:F,onClick:$s,className:`relative h-1 ${e.border} rounded-full cursor-pointer mb-2`,style:{backgroundColor:e==="dark"?"#334155":"#cbd5e1"},children:s.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-600 rounded-full transition-all",style:{width:`${k>0?ss/k*100:0}%`}})}),s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsx("span",{className:`text-xs ${e.textSecondary} w-10`,children:os(ss)}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>is(-10),className:`p-1.5 hover:${e.searchBg} rounded transition-colors`,title:"Rewind 10s",children:s.jsx(Os,{className:`w-5 h-5 ${e.textSecondary}`})}),s.jsx("button",{onClick:ws,className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-colors",title:E?"Pause":"Play",children:E?s.jsx(zs,{className:"w-5 h-5",fill:"currentColor"}):s.jsx(Fs,{className:"w-4 h-4 ml-0.5",fill:"currentColor"})}),s.jsx("button",{onClick:()=>is(10),className:`p-1.5 hover:${e.searchBg} rounded transition-colors`,title:"Forward 10s",children:s.jsx(Ws,{className:`w-5 h-5 ${e.textSecondary}`})}),s.jsxs("button",{onClick:_s,className:`px-2 py-1 hover:${e.searchBg} rounded transition-colors text-xs ${e.textSecondary}`,title:"Playback speed",children:[ts,"x"]}),s.jsx("button",{onClick:Ss,className:`p-1.5 hover:${e.searchBg} rounded transition-colors`,title:M?"Unmute":"Mute",children:M?s.jsx(Vs,{className:`w-5 h-5 ${e.textSecondary}`}):s.jsx(Hs,{className:`w-5 h-5 ${e.textSecondary}`})}),s.jsx("button",{className:`p-1.5 hover:${e.searchBg} rounded transition-colors`,title:"Download recording",children:s.jsx(Gs,{className:`w-5 h-5 ${e.textSecondary}`})})]}),s.jsx("span",{className:`text-xs ${e.textSecondary} w-10 text-right`,children:os(k||o.duration||0)})]})]})]}),s.jsxs("div",{className:`${e.searchBg} p-3 sm:p-4 rounded-lg`,children:[s.jsxs("h3",{className:`text-sm sm:text-base font-semibold ${e.text} mb-3 flex items-center gap-2`,children:[s.jsx(S,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Call Summary"]}),fs?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(qs,{className:"w-6 h-6 text-blue-500 animate-spin"})}):Z?s.jsxs("div",{className:"text-center py-6",children:[s.jsx(bs,{className:`w-10 h-10 ${e.textSecondary} mx-auto mb-2`}),s.jsx("p",{className:`text-xs sm:text-sm ${e.textSecondary}`,children:Z})]}):L?.data?.leads&&L.data.leads.length>0?(()=>{const l=L.data.leads.filter(i=>i.callId===(o.callId||o.session_id||o.id));return console.log("ðŸ” Filtering leads. Looking for callId:",o.callId||o.session_id||o.id),console.log("ðŸ” Available callIds:",L.data.leads.map(i=>i.callId)),console.log("ðŸ” Filtered leads:",l),l.length>0?s.jsx("div",{className:"space-y-4",children:l.map((i,p)=>s.jsxs("div",{className:`border ${e.border} rounded-lg p-3 sm:p-4 space-y-3`,children:[s.jsxs("div",{className:`flex items-center justify-between pb-2 border-b ${e.border}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(D,{className:"w-3.5 h-3.5 text-blue-500"}),s.jsx("span",{className:`text-xs font-mono ${e.textSecondary}`,children:i.callId||"N/A"})]}),i.createdAt&&s.jsx("span",{className:`text-xs ${e.textSecondary}`,children:new Date(i.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),i.intent&&s.jsxs("div",{className:"space-y-2",children:[i.intent.primary&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[s.jsx("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Primary Intent"}),s.jsx("p",{className:`text-xs sm:text-sm ${e.text} leading-relaxed`,children:i.intent.primary})]}),i.intent.details&&s.jsxs("div",{className:`${e.cardBg} p-3 rounded-lg border ${e.border}`,children:[s.jsx("p",{className:`text-xs font-medium ${e.textSecondary} mb-1`,children:"Details"}),s.jsx("p",{className:`text-xs sm:text-sm ${e.text} leading-relaxed`,children:i.intent.details})]}),i.urgency&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-xs ${e.textSecondary}`,children:"Urgency:"}),s.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${i.urgency==="high"?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400":i.urgency==="medium"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400"}`,children:i.urgency})]}),i.tags&&i.tags.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:`text-xs font-medium ${e.textSecondary} mb-2`,children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:i.tags.map((f,u)=>s.jsx("span",{className:`px-2 py-0.5 ${e.cardBg} ${e.text} rounded-full text-xs border ${e.border}`,children:f},u))})]})]}),i.leadData&&s.jsxs("div",{children:[s.jsx("p",{className:`text-xs font-medium ${e.textSecondary} mb-2`,children:"Lead Information"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.leadData.name&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(hs,{className:`w-5 h-5 ${e.textSecondary} mt-0.5 flex-shrink-0`}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Name"}),s.jsx("p",{className:`text-sm font-medium ${e.text} truncate`,children:i.leadData.name})]})]}),i.leadData.email&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ys,{className:`w-5 h-5 ${e.textSecondary} mt-0.5 flex-shrink-0`}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Email"}),s.jsx("p",{className:`text-sm font-medium ${e.text} truncate`,children:i.leadData.email})]})]}),i.leadData.phone&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(D,{className:`w-5 h-5 ${e.textSecondary} mt-0.5 flex-shrink-0`}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Phone"}),s.jsx("p",{className:`text-sm font-medium ${e.text}`,children:i.leadData.phone})]})]}),i.leadData.status&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ks,{className:`w-5 h-5 ${e.textSecondary} mt-0.5 flex-shrink-0`}),s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Status"}),s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${i.leadData.status==="qualified"?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":i.leadData.status==="interested"?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":i.leadData.status==="new"?"bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-400":`${e.cardBg} ${e.text}`}`,children:[i.leadData.status==="qualified"&&s.jsx(Xs,{className:"w-5 h-5"}),i.leadData.status]})]})]}),i.leadData.group_size&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(hs,{className:`w-5 h-5 ${e.textSecondary} mt-0.5 flex-shrink-0`}),s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Group Size"}),s.jsx("p",{className:`text-sm font-medium ${e.text}`,children:i.leadData.group_size})]})]}),i.leadData.dates&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Js,{className:`w-5 h-5 ${e.textSecondary} mt-0.5 flex-shrink-0`}),s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Travel Dates"}),s.jsx("p",{className:`text-sm font-medium ${e.text}`,children:i.leadData.dates})]})]})]})]})]},i.id||p))}):s.jsxs("div",{className:"text-center py-6",children:[s.jsx(S,{className:`w-10 h-10 ${e.textSecondary} mx-auto mb-2`}),s.jsx("p",{className:`text-xs sm:text-sm ${e.textSecondary}`,children:"No matching summary for this call"}),s.jsxs("p",{className:`text-xs ${e.textSecondary} mt-1`,children:["Call ID:"," ",o.callId||o.session_id||o.id]})]})})():s.jsxs("div",{className:"text-center py-6",children:[s.jsx(S,{className:`w-10 h-10 ${e.textSecondary} mx-auto mb-2`}),s.jsx("p",{className:`text-xs sm:text-sm ${e.textSecondary}`,children:"No call summary available"})]})]})]})]})]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:`text-lg font-semibold ${e.text}`,children:"Session History"}),K&&s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"})]}),K?s.jsxs("div",{className:`text-center py-12 rounded-lg ${e.searchBg}`,children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:`${e.textSecondary}`,children:"Loading sessions..."})]}):q.length===0?s.jsxs("div",{className:`text-center py-12 rounded-lg ${e.searchBg}`,children:[s.jsx(D,{className:`w-5 h-5 mx-auto mb-3 ${e.textSecondary}`}),s.jsx("h4",{className:`text-lg font-semibold ${e.text} mb-2`,children:"No Sessions Yet"}),s.jsx("p",{className:`${e.textSecondary}`,children:"This agent hasn't had any sessions yet."})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:q.map((l,i)=>{const p=l?.session_id||l?.id||`#${String(1e3+i).padStart(4,"0")}`,f=l?.status||"Completed",u=l?.duration_seconds||0,P=u>0?`${Math.floor(u/60)}m ${Math.floor(u%60)}s`:"0s",W=l?.total_messages||0,cs=l?.start_time||new Date,rs=l?.location||{},V=l?.token_usage||{};return s.jsxs("div",{className:`${e.cardBg} border ${e.border} rounded-lg p-4 hover:shadow-lg transition-all duration-200`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx(D,{className:`w-5 h-5 ${e.textSecondary} flex-shrink-0`}),s.jsx("h4",{className:`font-semibold ${e.text} text-sm truncate`,children:p})]}),s.jsx("button",{onClick:()=>ks(l),className:`p-1.5 ${e.textSecondary} rounded-lg ${e.activeBg} ${e.hover} transition-all duration-200 hover:shadow-lg flex-shrink-0`,title:"View Session",children:js&&o?.id===l?.id?s.jsx("div",{className:"w-3 h-3 border border-gray-600 border-t-transparent rounded-full animate-spin"}):s.jsx(Qs,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:s.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${f==="Completed"?"bg-green-500/10 text-green-600 border border-green-500/20":f==="In Progress"?"bg-blue-500/10 text-blue-600 border border-blue-500/20":"bg-gray-500/10 text-gray-600 border border-gray-500/20"}`,children:f})}),s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:`text-xs font-medium ${e.textSecondary} mb-1`,children:"Date & Time"}),s.jsx("p",{className:`${e.text} text-sm font-medium`,children:new Date(cs).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:new Date(cs).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:`text-xs font-medium ${e.textSecondary} mb-1`,children:"Location"}),s.jsx("p",{className:`${e.text} text-sm font-medium truncate`,children:[rs?.city,rs?.country].filter(xs=>xs&&xs!=="unknown").join(", ")||"Unknown"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Device"}),s.jsx("p",{className:`${e.text} text-sm font-medium truncate`,children:l?.device?.device_type&&l.device.device_type!=="unknown"?l.device.device_type:"Unknown"})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Duration"}),s.jsx("p",{className:`${e.text} text-sm font-medium`,children:P})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Messages"}),s.jsx("p",{className:`${e.text} text-sm font-medium`,children:W})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Language"}),s.jsx("p",{className:`${e.text} text-sm font-medium uppercase`,children:l?.language||"EN"})]})]}),s.jsxs("div",{className:`pt-2 border-t ${e.border}`,children:[s.jsx("p",{className:`text-xs ${e.textSecondary} mb-1`,children:"Token Usage"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"In"}),s.jsx("p",{className:`${e.text} text-sm font-semibold`,children:V?.input_tokens?.toLocaleString()||0})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Out"}),s.jsx("p",{className:`${e.text} text-sm font-semibold`,children:V?.output_tokens?.toLocaleString()||0})]}),s.jsxs("div",{children:[s.jsx("p",{className:`text-xs ${e.textSecondary}`,children:"Total"}),s.jsx("p",{className:`${e.text} text-sm font-semibold`,children:V?.total_tokens?.toLocaleString()||0})]})]})]})]},l?.id||i)})})]})]}),r==="instructions"&&s.jsxs("div",{className:"space-y-3",children:[t.greeting&&s.jsxs("div",{className:`${e.cardBg} rounded-lg p-6 border ${e.border}`,children:[s.jsx("h3",{className:`text-lg font-semibold ${e.text} mb-4`,children:"Greeting Messages"}),s.jsx("div",{className:"space-y-4",children:Object.entries(t.greeting).map(([l,i])=>s.jsxs("div",{children:[s.jsx("label",{className:`text-sm ${e.textSecondary} block mb-2 uppercase`,children:l}),s.jsx("div",{className:`p-3 rounded-lg ${e.searchBg} ${e.text}`,children:i})]},l))})]}),t.custom_instructions&&s.jsxs("div",{className:`${e.cardBg} rounded-lg p-6 border ${e.border}`,children:[s.jsx("h3",{className:`text-lg font-semibold ${e.text} mb-4`,children:"Custom Instructions"}),s.jsx("div",{className:`p-4 rounded-lg ${e.searchBg} ${e.text} whitespace-pre-wrap`,children:t.custom_instructions})]})]})]})]})};export{fe as A,be as C,ge as O,je as T,he as a};
